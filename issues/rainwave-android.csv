repository,state,title,label,body
OEP/rainwave-android,closed,Crash viewing artist detail in playlist view,"[Label(name=""bug""), Label(name=""reproducible-always"")]","Each time you view an artist detail in the playlist (when requesting a song) the application will crash due to a null pointer in `Artist.mSongs`. It appears to be due to a discrepancy in how artists are represented in the underlying API call and what the app is actually doing. It appears that artist detailed views have all their songs returned in a hash:

```
{
   ""artist"" : {
      ""id"" : 2285,
      ""all_songs"" : {
         ""5"" : {},
         ""4"" : {
            ""1845"" : [
               {
                  ""albums"" : [
                     {
                        ""openable"" : null,
                        ""id"" : 1845,
                        ""name"" : ""Decades""
                     }
                  ],
                  ""rating"" : 4.5,
                  ""url"" : ""http://4mat.bandcamp.com/album/decades"",
                  ""cool"" : null,
                  ""fave"" : false,
                  ""sid"" : 4,
                  ""title"" : ""1989"",
                  ""rating_user"" : 0,
                  ""requestable"" : null,
                  ""length"" : 131,
                  ""cool_end"" : null,
                  ""link_text"" : ""4mat @ Bandcamp"",
                  ""id"" : 15265
               },
               ...
            ]
         },
         ""2"" : {},
         ""1"" : {},
         ""3"" : {}
      },
    ...
   },
}
```
"
OEP/rainwave-android,closed,Proposing an actual translation.,[],"As I translated the Rainwave website, does not hurt to do the same with the application. Greetings from Chile!
"
OEP/rainwave-android,closed,Fix theme,[],"This app defines a custom theme which seems to be the cause of it looking running in some sort of compatibility mode for the early days of Android.

Seems like it would be preferable to use whatever the default theme of the Android version to make it meld well with the rest of the operating system.
"
OEP/rainwave-android,closed,Lint cleanup,"[Label(name=""feature"")]","Should try to clean up most of the lint warnings generated by `ant lint`, particularly those not so tied to asset generation since they take the least amount of time.
"
OEP/rainwave-android,closed,Spanish translation,"[Label(name=""feature"")]",
OEP/rainwave-android,closed,API key field in preferences stuck in always caps on mode,"[Label(name=""bug""), Label(name=""reproducible-always"")]","`res/xml/preferences.xml` has an attribute set which causes Android to change the keyboard entry mode in such a way that it is difficult to enter API keys which are now in mixed case.

This is an artifact of the former convention of keys being in all caps.
"
OEP/rainwave-android,closed,Stale cache issue on station data,"[Label(name=""bug""), Label(name=""reproducible-always"")]","The station listen URLs have user and key information embedded in the URL's but only when hitting the `sync` endpoint in an authenticated state. The app appears to be caching the unauthenticated URLs longer than it should.

To reproduce:
1. On the splash screen, click ""Later"" to start the app in anonymous mode
2. Allow station data to be fetched (wait for play button to become available)
3. Add in user credentials using the QR code or by typing them in.
4. Go back to Now Playing screen, refresh, and click the play button

Expected:

Music app gets URL with ID and key

Actual:

Music app gets anonymous URL
"
OEP/rainwave-android,closed,API change: artist_parseable,[],"From Rob:

Just a heads up, when you go to pull album data from the server, artist_parseable is changing from its current mess of a string to a straight up JSON string.  Just JSON.decode(song.artist_parseable) or what have you.  I'll give you a time for when it goes into effect.
"
OEP/rainwave-android,closed,Bad handling of invalidated keys,"[Label(name=""bug"")]","If a user adds a working key and then removes that key via the web interface, the Android app does not handle this in any sane way. Testing on 1.1.2, the app seems to lock up and become very hard to force it to stop (at least on my device).

The app does check if the server throws a 403 and shows an appropriate error message if it does, but appears to get caught in a loop.

Perhaps the best way to handle this is to finish() the NowPlayingActivity if a 403 occurs to ensure that the service terminates properly.
"
OEP/rainwave-android,closed,Better code documentation,[],"The lot of this app is documented insufficiently. Should bring source code up to being compliant with at least the [recommended style](https://source.android.com/source/code-style.html#use-javadoc-standard-comments).
"
OEP/rainwave-android,closed,Check for connectivity before accessing network,"[Label(name=""feature"")]","This requires an extra privilege. I'd like the next version to install without intervention so this is better for the next release.
"
OEP/rainwave-android,closed,Search not permissive enough,"[Label(name=""feature"")]","Search seems to filter on the beginning rather than something more like a contains() operation.
"
OEP/rainwave-android,closed,Not logged in after scanning QR code from preferences,"[Label(name=""bug"")]",
OEP/rainwave-android,closed,Uninitialize CountDownTask when necessary,"[Label(name=""bug"")]",
OEP/rainwave-android,closed,Requests persist when they shouldn't,"[Label(name=""bug"")]","Requests seem to stick around longer than they should in memory. To reproduce:
1. Log in
2. Make a few requests
3. Clear preferences
4. View request list again

Expected: No requests (user is anonymous)
Actual: Requests still show up in queue
"
OEP/rainwave-android,open,NullPointerException when resuming application,"[Label(name=""bug"")]","I got one of these backtraces on Google Play and experience one myself:

```
java.lang.NullPointerException
at cc.rainwave.android.api.HttpHelper.makeGet(HttpHelper.java:60)
at cc.rainwave.android.api.Session.request(Session.java:503)
at cc.rainwave.android.api.Session.get(Session.java:474)
at cc.rainwave.android.api.Session.info(Session.java:84)
at cc.rainwave.android.SyncService.onHandleIntent(SyncService.java:28)
at android.app.IntentService$ServiceHandler.handleMessage(IntentService.java:65)
at android.os.Handler.dispatchMessage(Handler.java:99)
at android.os.Looper.loop(Looper.java:137)
at android.os.HandlerThread.run(HandlerThread.java:61)
```

I noticed this after resuming the application after not using it for a while.

That line of code currently is:

```
URL url = new URL(String.format(""%s/%s"", baseUrl.toString(), path));
```

If I had to guess it is the `baseUrl` which is null in this case. The Session objects are currently always initialized with `Rainwave.DEFAULT_URL`. Here is its initialization:

```
static {
    URL tmp;
    try {
        tmp = new URL(RAINWAVE_URL);
    } catch (MalformedURLException e) {
        Log.e(""Rainwave"", ""Rainwave URL is malformed!"");
        tmp = null;
    }
    DEFAULT_URL = tmp;
}
```

So something weird is happening here:
1. A MalformedURLException is thrown, but RAINWAVE_URL is final so that should happen all the time.
2. The static initializer is not being executed when I think it is.

Static blocks are run when the class is loaded, and the class is loaded, and the class gets loaded when static members are accessed according to the [Java spec](http://docs.oracle.com/javase/specs/jls/se7/html/jls-12.html#jls-12.4).

I'm not sure what's going on with this crash but I think the appropriate thing to do in that static initializer is to fail and wrap the exception so I can at least see the original traceback.
"
OEP/rainwave-android,closed,Properly log errors for SharedPreferences.Editor.commit(),"[Label(name=""feature"")]",
OEP/rainwave-android,closed,SlidingDrawer is deprecated,[],"As of API level 17, SlidingDrawer is deprecated. Probably the best alternative I have seen is the [VerticalDrawerLayout](http://stackoverflow.com/questions/16790129/vertical-drawerlayout-or-slidingpanelayout).

It should be around for the foreseeable future, but it's probably best to know the alternatives.
"
OEP/rainwave-android,closed,Votes do not persist between orientation changes,"[Label(name=""bug"")]","App seems to forget what you last voted for between orientation changes.
"
OEP/rainwave-android,closed,No longer need vote countdowns,"[Label(name=""feature"")]","Because of issue #29, we probably no longer need a countdown widget before launching the vote. The app should just vote immediately.
"
OEP/rainwave-android,closed,Change votes,"[Label(name=""feature"")]","New Rainwave lets you change your vote. Should disable check to disallow voting a second time.
"
OEP/rainwave-android,closed,Vote slideout cuts off bottom song,[],"When I pull up the vote slide-out, I see the top two elections completely, but the third one only shows title and album, not artist.

I'm using an 'Alcatel One Touch 6040A' phone running Android 4.2.2. (Any other info you might need?)

EDIT: Duplicate, please ignore.
"
OEP/rainwave-android,closed,Vote slideout cuts off bottom song,[],"When I pull up the vote slide-out, I see the top two elections completely, but the third one only shows title and album, not artist.

I'm using an 'Alcatel One Touch 6040A' phone running Android 4.2.2. (Any other info you might need?)
"
OEP/rainwave-android,closed,Check authentication errors appropriately,"[Label(name=""bug"")]","HTTP status codes have been ignored. It'd be nice to check those appropriately so IOException don't propagate to where the user can see their raw messages.
"
OEP/rainwave-android,closed,Countdowns are incorrect,"[Label(name=""bug"")]","The countdown of the Android app does not agree with the web frontend. Rob notes that this is probably due to not checking `api_info.time` which is delivered at most of the endpoints, which is the UTC timestamp at the time the request was received according to the servers. It's possible then to calculate a drift which should fix the user-perceptible drift in the countdown times.
"
OEP/rainwave-android,closed,Use known_event_id for /api4/sync when possible,"[Label(name=""feature"")]","See http://rainwave.cc/api4/help/api4/sync
"
OEP/rainwave-android,closed,Unable to log in to Rainwave,[],"I just built from the master rainwave-android repository. Despite using both the QR code and manually putting in my ID/Key, rainwave-android throbs for a second during load and has me loaded as 'anonymous'.

My logcat doesn't appear to be useful:

D/HttpHelper(27459): GET http://rainwave.cc/api4/info?sid=1&key=[snip]&user_id=9232
I/ActivityManager(  506): Displayed cc.rainwave.android/.NowPlayingActivity: +252ms (total +569ms)
I/ActivityManager(  506): Timeline: Activity_windows_visible id: ActivityRecord{41af1f88 u0 cc.rainwave.android/.NowPlayingActivity t69} time:118996426
I/ActivityManager(27459): Timeline: Activity_idle id: android.os.BinderProxy@418b0138 time:118996471
D/HttpHelper(27459): POST http://rainwave.cc/api4/stations sid=1&key=[snip]&user_id=9232
D/Session (27459): GET http://rainwave.cc/album_art/1_174_240.jpg
D/UpdatePoll(27459): Fetching a schedule
D/InitialPoll(27459): Exiting successfully.
D/HttpHelper(27459): POST http://rainwave.cc/api4/sync sid=1&key=[snip]&user_id=9232

Let me know if I can be of any more assistance.
"
OEP/rainwave-android,closed,Other lyre instances,[],"Currently it's hard-wired that this app is tied to rainwave.cc, though it doesn't have to be. Session is currently a singleton but really multiple instances could exist if multiple connections need to be maintained.

To handle other lyre instances, this may be a possibility:
1. Create a SessionManager which handles session instances in a Map, keyed on the base URL.
2. Undo the singleton changes for session
"
OEP/rainwave-android,closed,Implement ActionBar,[],"Android recommends the use of [action bars](http://developer.android.com/guide/topics/ui/actionbar.html) over menus since devices are not required to have a menu button these days. I think this would also clear up a lot of the existing UI woes since the large buttons at the bottom of the app could be folded up into the action bar.
"
OEP/rainwave-android,closed,Rainwave 4 compatibility,"[Label(name=""bug"")]","The R4 API just launched and broke the app. The URL of the backend has changed and is not backwards compatible. This will require major changes to the api package of the app which will likely take time.

These changes will be tracked in branch [feature/r4](https://github.com/OEP/rainwave-android/tree/feature/r4).

Resources:
- [R4 API documentation](http://rainwave.cc/api4/help/)
"
OEP/rainwave-android,closed,"Unable to see buttons on ""Now Playing"" screen at 240x320 resolution","[Label(name=""bug"")]","Sicno reports he is unable to see the buttons at the bottom of the Now Playing screen. His device is a Galaxy Mini, which has a 240x320 resolution. I previously did not consider such small resolutions when I developed the layout, so this is probably the issue.

The proposed fix for this is to tweak the current layout so that it works on 240x320, create a special layout for low-resolution devices, or possibly encapsulate the entire layout in a ScrollView so low-res devices can scroll down the page.
"
OEP/rainwave-android,closed,General preferences,"[Label(name=""feature"")]","General preferences could be implemented immediately:
- Language -- sets language for the remote API server to use
- Hide Global Ratings Until I've Rated -- does not show community average until user has rated
"
OEP/rainwave-android,closed,Timeline preferences not implemented,"[Label(name=""feature"")]","The following preferences are available on the Rainwave main web site but are not implemented on the mobile app.
- Show All Upcoming Events: (bool, default FALSE) -- shows next batch of songs up for election (also available for voting)
- Show Election Results: (bool, default FALSE) -- shows previous election with number of votes
- Show History: (bool, default FALSE) -- shows previous three songs which played (available for rating)
- Show Requesters By Default:    (bool, default TRUE) -- passively shows requester when enabled

These updates would require a lot of layout overhaul and might benefit to be implemented after adoption of the Android Fragments API.
"
OEP/rainwave-android,closed,Playlist ordering preferences,"[Label(name=""feature"")]","The following Playlist ordering preferences are available on the Rainwave main site but are not implemented on the application:
- Favourite Albums First (bool, default FALSE) -- Orders favorited albums before all other albums (even when on cooldown)
- Available Albums First: (bool, default TRUE) -- Orders albums which are not on cooldown before those which are
- Album Sort Method: (enum, default ""Album Name"") -- Various sort methods for albums
  - Album Name -- lexicographical order by album name
  - Rating -- by user rating
  - Cooldown -- by increasing cooldown, then by Album Name
  - Global Rating -- by average rating over community
"
OEP/rainwave-android,closed,Favorites is not implemented,"[Label(name=""feature"")]","On the Rainwave main site, songs and albums may be ""favorited"" as indicated by a little glowing button next to the track or album. There are API hooks for this, but the Android app has not implemented this.
"
OEP/rainwave-android,closed,"Error message ""Error fetching album art"" even when there is no album art on the station","[Label(name=""bug"")]","Title says it all!
"
OEP/rainwave-android,closed,Now playing stops updating,"[Label(name=""bug"")]","As it says above

Platform:
Galaxy nexus running Ice Cream Sandwich 4.0.1

Expected results:
Now Playing should update when songs end, vote for next song should update, time remaining should reset or count down as appropriate.

Actual results:
Screen appears to be data locked after a few minutes of use, does not update at all (not even counting down) unless manually done via options menu.  Program remains responsive however, can flip around between playlist requests and Now Playing screen, as well as vote on upcoming songs.  Will sometimes resume normal count down operations after manual refresh.
"
OEP/rainwave-android,closed,No easy way to enter user ID and API key,[],"It's cumbersome to enter long decimal and hexadecimal. There should be an easy way for new users to enter their already existing user ID and API key.

The solution I'm kicking around is some sort of QR-code with an embedded ""Rainwave URL"" which contains all this information needed, but this doesn't exist yet. This issue can be solved when the ""Rainwave URL"" idea is implemented or killed for something better.
"
OEP/rainwave-android,closed,Force close attempting to rate before the app initializes,[],"App will force close if you try to rate before it's ready. To reproduce:
1. Start the app.
2. Repeatedly tap on the song rating circle
3. App crashes!
"
OEP/rainwave-android,closed,Better solution for rating songs,[],"The current process for rating a song is:
1. Touch the 'Song rating' circle to bring up a rate dialog
2. Touch the RatingView (stars) to acquire the desired rating
3. Press 'OK' to submit the vote.

Rating is one of the treasured features of Rainwave and this use case sort of hides the functionality (not to mention there are no cues to the user to tap on the Song rating circle).

A better solution to this problem would:
- Abbreviate the process for rating a song.
- Present a cue to the user where the functionality lies.
- Have a more ""permanent"" presence than a dialog, which wholly disappears once the rating is cast.
"
OEP/rainwave-android,closed,No indication of requests given,[],"There is currently no way to tell if a playing song or an election candidate is a request or not, like the site does. There should be some indication of this.
"
OEP/rainwave-android,closed,Better handling of data for orientation changes,"[Label(name=""bug"")]","On devices where it doesn't force-close, the app performs a complete reload of the data each time the orientation changes. While this technically works, it hits the server a little harder than it should. On an orientation change, the device should preserve the data in memory while the layout is reloaded, and restart whatever threads are needed upon completion.
"
OEP/rainwave-android,closed,Better layouts for different screen sizes and orientations,"[Label(name=""feature"")]","There's currently just one layout for the whole app which doesn't work well for devices with large screens. As well, the layout doesn't work well for the landscape orientation. There needs to be tailored layout files for these modes.
"
OEP/rainwave-android,closed,Launcher icon and other artwork needed,[],"A launcher icon is needed. I'd prefer it to be up to the [Android launcher icon design guidelines](http://developer.android.com/guide/practices/ui_guidelines/icon_design_launcher.html), but I'll take what I can get.

In particular, I'm a fan of the color in [Rainwave's favicon](http://rainwave.cc/favicon.ico), but I'm afraid there's only that 16x16 graphic of it. There's also some [linking graphics](http://rainwave.cc/linking/) that LiquidRain suggests using for linking externally, but none of it is conducive to the Android style.

You'd do best to read the design guidelines, but here's the basic design suggestions quoted from the documentation:
- Android Launcher icons are caricatural in nature; your icons should be highly simplified and exaggerated, so that they are appropriate for use at small sizes. Your icons should not be overly complicated.
- Try featuring a single part of an application as a symbolic representation of the whole (for example, the Music icon features a speaker).
- Consider using natural outlines and shapes, both geometric and organic, with a realistic (but never photorealistic) rendering.
- Your icons should not present a cropped view of a larger image.

To render on different devices, they suggest providing a high, medium, and low resolution icon. So presumably, the icon should look good in these resolutions:
- High-resolution: 72x72
- Medium-resolution: 48x48
- Low-resolution: 36x36

I also plan to publish this app in the Android Market for version 1.0, which has its own baggage of artwork it requires. In particular, the Market asks for (separate of what can already be drawn from the Launcher icon and screenshots):
- 512x512 ""High Resolution Application Icon"" JPG or PNG
- 180x120 Promotional Graphic (optional) JPG or PNG

Some more in-depth information about this: ([link](https://www.google.com/support/androidmarket/developer/bin/answer.py?&&answer=1078870))
"
OEP/rainwave-android,closed,Delayed voting makes it possible to vote after election is decided,[],"When voting with less than 5 seconds to go, it's possible the ballot will be cast after the election is decided. There should be some kind of timer which keeps track of the remaining portion of the song that auto-submits ballots with less than 5 seconds to go like the main site does.
"
OEP/rainwave-android,closed,In-app discovery of radio stations,[],"Currently the app has the multiple radio stations hard-coded into it. This is fine for working with rainwave.cc, however the names and station IDs may vary for other instances of Lyre.

The app ought to be able to react dynamically to changes in the radio stations.

This depends on an issue over at the main Rainwave project. See [here](https://github.com/LiquidRain/rainwave/issues/6).
"
OEP/rainwave-android,closed,Open playlist from within app,[],"This issue is dependent on additional functionality being added to Rainwave itself. See [this issue](https://github.com/LiquidRain/rainwave/issues/5).

The user ought to be a way for a user to start streaming from within the app itself, generating an Intent that some other app can handle.

The means for accomplishing this is not yet known until the linked issue is resolved.
"
OEP/rainwave-android,closed,No way to request songs,[],"Currently the app has no way to issue requests for songs. This will be pretty reliant on some UI components so it would probably take a good deal of work, probably in its own separate Activity.

By RC3, this should be implemented.
"
OEP/rainwave-android,closed,No way to switch radio stations,[],"There's currently no way to switch stations (to OCRemix or Mixwave, etc...). The client is hard-coded to use the Rainwave station.

By RC2, we should have a means to switch radio stations.
"
