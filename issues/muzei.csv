repository,state,title,label,body
romannurik/muzei,closed,Provide an setArtwork API that takes multiple Artwork,[],"Rather than having MuzeiArtProvider developers bulk insert artwork and then have to manually diff their MuzeiArtProvider to delete no longer valid artwork, provide a setArtwork method that takes multiple artwork.

Provides an easy mechanism to handle the problem in #584"
romannurik/muzei,closed,Provide an addArtwork API that takes multiple Artwork,[],"Rather than inserting each Artwork one at a time, allow MuzeiArtProvider developers to bulk insert Artwork."
romannurik/muzei,closed,Move static methods in ProviderContract.Artwork to ProviderClient,[],"Instead of keeping a duplicate of each static method in ProviderClient (one using a Class and another using an authority String), create a new interface called ProviderClient that encapsulates all of the static methods.

MuzeiArtProvider itself implements ProviderClient, while instances can be created from new static methods on ProviderContract."
romannurik/muzei,closed,Catch all exceptions from openFile(Artwork),[],"Instead of making the default implementation of openFile(Artwork) artificially limited to only IOExceptions and SecurityExceptions, have openFile(Artwork) throw any exception (as is common for content:// URIs).

Call onInvalidArtwork whenever a non-IOException is thrown."
romannurik/muzei,closed,Call onInvalidArtwork when isArtworkValid returns false,[],"Rather than relying on ArtworkLoadWorker to call onInvalidArtwork, call it directly in cases where isArtworkValid returns false. This ensures that the Artwork is cleaned up when the file is opened for different purposes (i.e., from the BrowseFragment)."
romannurik/muzei,closed,Adds a way to intercept openFile calls even if the image is cached,[],"When the image is already cached, `openFile(Artwork)` is never called. While that's totally fine for loading the image, in some cases, the MuzeiArtProvider might not know if an image is still valid until right when it is loaded (i.e., the source image could have been deleted).

Add a isArtworkValid method that is called by openFile(Uri, String) to give MuzeiArtProviders the hook needed to invalidate images that are already cached."
romannurik/muzei,open,Google Plus Community,[],"I apologize if this is the wrong venue, but I don't want to recreate my G+ account just for the sake of asking. Feel free to delete this issue if inappropriate.  Where will the Muzei Community go off too when G+ service close down?  Looking through the community posting, I don't think I can find any info mentioning this yet. Thank you for the incredible work and incredible community."
romannurik/muzei,open,API documentation has not been updated to v3 yet,[],"The documentation referenced in the readme ([api.muzei.co](http://api.muzei.co/), which redirects to the [wiki](https://github.com/romannurik/muzei/wiki/API) has not been updated to v3, and still documents the legacy v2 API.

The [full API reference](http://api.muzei.co/reference) hasn't been updated either.

Additionally, the [changelog](https://github.com/romannurik/muzei/wiki/Changelog) in that same wiki is still at v2.3."
romannurik/muzei,closed,Clear artworks of a source,[],"Let's say I have a source that returns images from any subreddits. Users can change subreddit anytime they want.  
Here is my scenario:  

1. A user gets images from `r/EarthPorn`.
2. Muzei calls `onLoadRequested` and receives 20 artworks.
3. They change to another subreddit.
4. Muzei won't update because it still has 19 artworks in the queue.

API 2 doesn't have this problem because Muzei has to call the source everytime it needs a new artwork. So I think we need a way to clear all artworks of a source. What do you think?"
romannurik/muzei,open,Source with lots of artwork,[],"In my app I have a JSON file with over 600 image URLs. I have two questions:

1. If I add them all using `ProviderContract.Artwork.addArtwork` inside `onLoadRequested` method, will Muzei download all of them right away?
  
2. When I open my source in `BrowseProviderFragment`, Muzei will start to download all the images (over 1GB), which is really bad. Can we add `thumbnail` property to `Artwork` so it will be displayed instead of the full image?
  
Thank you."
romannurik/muzei,closed,Ensure MuzeiArtProviders cannot crash Muzei,[],"Parcel.writeException details a set of RuntimeExceptions that are sent over to the calling app. If a MuzeiArtProvider threw any of these RuntimeExceptions, they'd crash Muzei - we want to avoid that by catching all of these exceptions and rethrowing them as RemoteException, which Muzei uses as the signal that the remote MuzeiArtProvider crashed.

Special handling was added around checking for valid artwork to ensure the now RemoteExceptions don't take down the entire Worker, but instead are captured locally and mark the artwork as invalid.

Fixes #581 "
romannurik/muzei,closed,Muzei loop crash,[],"I was able to write a, probably bugged, Worker that makes Muzei crash.
The bad thing is that, at least in the emulator (google api 26), Muzei crashes, restarts, crashes again.
Always showing the nasty crash popup and continuing to crash after a reboot.

While this is surely caused by my app (still unsure what's wrong), what the user sees is Muzei crashing every few seconds.
I think you should protect the app against badly written sources.

Stack trace attached

[muzei-crashing.txt](https://github.com/romannurik/muzei/files/2453143/muzei-crashing.txt)


"
romannurik/muzei,closed,Ensure MuzeiArtProviders recover from the cache being cleared,[],"When the cache is cleared, the directory MuzeiArtProvider stores cached artwork in is deleted, causing FileOutputStream to fail when re-downloading the file. By ensuring that the cache directory is created before calling FileOutputStream, we can redownload artwork lost when the cache was cleared."
romannurik/muzei,closed,Override Artwork.toString(),[],Provide a more useful toString() method for Artwork to aid in debugging.
romannurik/muzei,closed,Prevent SQL Injection into MuzeiArtProvider.query,[],"Use setStrict(true) to prevent possible SQL injection issues when MuzeiArtProviders don't use the permission or during automated Google Play Store testing (which don't take the permission into account).

Fixes #577 "
romannurik/muzei,closed,Play Store rejection caused by exported Provider,[],"An update with 3.0 API integration was rejected by Play Store. The reason was possible SQL injection ðŸ˜„ 

Here are more details from the rejection: https://support.google.com/faqs/answer/7668308

It looks like they don't like exported Providers, the first solution is to use signature level permission which is not possible for Muzei and extensions I believe. The others are just suggestions around how to use SQL to prevent injection. 

Since clients do not really have control over the SQL usage in the provider, it would be good if this can be fixed in Muzei's side."
romannurik/muzei,closed,Rethrow non-IOExceptions as SecurityExceptions,[],"When a content:// URI triggers a non-IOException error, we should treat that as a permanent error. For MuzeiArtProvider's openFile, that means rethrowing them as a SecurityException.

Fixes #575 "
romannurik/muzei,closed,Treat non-IOExceptions in openFile as permanent errors,[],"MuzeiArtProvider's `openFile` implementation has two primary error cases:
- Throwing an `IOException` to trigger a retry
- Throwing a `SecurityException` as a permanent error

When reading from `content://` URIs, those ContentProviders could throw any number of unrecoverable exceptions. Instead of just passing them up the call stack, we should treat those errors as permanent errors, rewriting them as a `SecurityException`."
romannurik/muzei,closed,My source changes to default whenever I reboot,[],"Hello, I'm having this issue where whenever I reboot my device, my source of choice (myWalls app) changes to the Featured Art one. What's weird about this is that when the device turns back on after the reboot, it shows the wallpaper that was applied before the reboot but after a few seconds it changes to the Van Gogh one, from the Featured Art source.

I tried a few other sources from Wallpaper apps and they all have the same issue. But when I choose Selected Pictures from my gallery, it works just fine after rebooting. My question is, is there anything I can do to make those sources work after a reboot? Or does it depend on the developer of the source? I'm running Android Nougat 7.0."
romannurik/muzei,closed,Glance wallpaper source,[],please add a glance wallpaper source 
romannurik/muzei,closed,Allow Tasker to select any installed provider,[],"Expand the current Tasker plugin to allow users to not only select the 'Next Artwork' action, but also actions to select any available MuzeiArtProvider.

This does not run any setup activity under the assumption that users have already set up any provider they select and the rarity of setup activities in general.

Fixes #417"
romannurik/muzei,closed,Don't return content URIs for disabled MuzeiArtProviders,[],"When a MuzeiArtProvider is disabled, you cannot access its content URI in any meaningful way (every request will instantly fail). Ensure that ProviderContract.Artwork.getContentUri() only returns non-disabled providers."
romannurik/muzei,closed,Use the MuzeiArtProvider's authority as the unique key,[],"Rather than rely on the `ComponentName` of the MuzeiArtProvider as its unique key within Muzei, use the unique `authority` attached to the MuzeiArtProvider to identify each provider. This ensures that developers can freely refactor their MuzeiArtProvider class without breaking Muzei.

This change has two effects on the Muzei API:
- The `replacement` metadata should be the `authority` String, not a `ComponentName` (although a `ComponentName` is still supported)
- The `ProviderContract.Artwork` methods that take a `ComponentName` have been removed in favor of versions that take an `authority`. The authority versions should be preferred to avoid a `PackageManager` lookup."
romannurik/muzei,closed,Add applyBatch and bulkInsert support to MuzeiArtProvider,[],Fixes #567
romannurik/muzei,closed,Fix insert of an artwork with an existing token,[],"Ensure that we use the correct ID when doing an update to an existing artwork in response to an insert.

Fixes #566 "
romannurik/muzei,closed,Support applyBatch and bulkInsert in MuzeiArtProvider,[],MuzeiArtProvider should support `applyBatch` and `bulkInsert`
romannurik/muzei,closed,Fix insert of an artwork with an existing token,[],"When inserting artwork with an existing token, MuzeiArtProvider tries to do an update of the existing artwork, but it appears that it actually updates artwork with id 0. For artwork sources such as the SourceArtProvider, this can lead to a single 'Next Artwork' click to be processed as two separate load events."
romannurik/muzei,closed,Inform MuzeiArtProviders about invalid artwork,[],"Instead of silently ignoring invalid artwork (artwork that cannot be loaded by Muzei due to image format issues), we send a signal to the MuzeiArtProvider so that it can delete its invalid artwork.

Fixes #564"
romannurik/muzei,closed,Tell MuzeiArtProviders about invalid artwork,[],"When artwork fails to load, usually due to an invalid format, type of image, etc., the MuzeiArtProvider should be informed so that it can delete its copy of the image. This ensures that future callbacks to `onLoadRequested` has the correct value for `initial` (i.e., 0 if there's no valid artwork)."
romannurik/muzei,closed,Make the Wear app possible to run standalone,[],"With Wear 2.0+, Wear OS apps can run 'standalone' i.e., without any phone app installed. This allows watches attached to iOS devices to use the app, despite the inability to run the related phone app.

For Muzei, this required adding support for additional providers that will run directly on the watch. This comes primarily in the addition of the Featured Art as the default provider on the watch, although third party sources also work (assuming they also publish for Wear OS). This fixes #163 (for the most part - implementing #414 for both the phone and watch would help considerably).

New users of the Muzei Wear OS app now get a notification when they first use Muzei on their watch. This can either be a notification prompting them to select the `DataLayerArtProvider` (named 'From phone') if they already have Muzei installed on their phone or a prompt to install Muzei on their phone (assuming the phone has the Play Store).

Since users can now select providers directly on their watch, the Wear OS app has been significantly overhauled, fixing #495 on the new main launcher activity, moving the full screen activity as a child activity, and adding another activity showing the list of providers to select from.

With this change, the Wear app now is able to target API 28."
romannurik/muzei,closed,fix link - 500px example -> Unsplash example,[],500px example was removed in 44bdb3192722fb66f3690a0ba7482f2e33228746
romannurik/muzei,closed,"Getting ""This source is disabled"" with targetSdkVersion above 25.",[],"Since I updated my app (Tapet) to target SDK level 26, I see this message:
![image](https://user-images.githubusercontent.com/857478/44764205-76bab800-ab03-11e8-9cd9-4167e4217155.png)

According to Google, they require 26 as the minimum for newly submitted apps and updates:
https://developer.android.com/distribute/best-practices/develop/target-sdk

Are you planning to update it?

Thanks!"
romannurik/muzei,closed,Only do a full update() from addArtwork() if something changed,[],"Avoid doing a full update (and the subsequent notifyChange()) if nothing actually changed. This removes cases where there's just a single image and it is unconditionally changed every time onLoadRequested() is called, causing an infinite loading loop.

When developers specifically call update(), we always call notifyChange() in case they are sorting by DATE_MODIFIED and want an updated list.

Fixes #559 "
romannurik/muzei,closed,Fix endless loop with the My Photos source and only one image,[],"When using the My Photos source, Muzei seems to infinitely reload the artwork when there's only one image added to the source."
romannurik/muzei,closed,Use the _ID to determine the last loaded artwork,[],"Since the _ID auto-increments, it is a unique indicator or the last added artwork.

Fixes #555"
romannurik/muzei,closed,Treat recent artwork ids as a set,[],"Ensure there's no duplicates in the recent artwork id list by removing any existing ids when adding a new id. This avoids unnecessary cache misses due to removeAutoCachedFile being called too early.

Fixes #556 "
romannurik/muzei,closed,API v3: Fix autocaching logic,[],"While doing tests switching between images of a source providing exactly 6 artworks, I noticed that at most 5 of them are cached at a time, even if `MAX_RECENT_ARTWORK` is set to 100.

It turns out that the `recentArtworkIds` queue may contain duplicates but the code doesn't take that into account.
In `MuzeiArtProvider.java` line 367, when the queue is shrinked to fit the total number of items in the provider, the recent item at the front of the queue is deleted from disk, even if it's also present in another position in the queue. Later, an unnecessary cache miss will occur when trying to load that artwork.

Suggestion: either remove duplicates from the `recentArtworkIds` queue, or use another logic to purge the cache.
One way to remove duplicates in `recentArtworkIds` is to use an `LruCache` or `LinkedHashMap`, which is both a map and a queue, so when a recent item which was already present is retrieved or added, it's simply moved back at the end of the queue."
romannurik/muzei,closed,API v3: make getLastAddedArtwork() more robust,[],"Both in `ProviderContract` and in `MuzeiArtProvider`, the method `getLastAddedArtwork()` returns the last added artwork based on the `DATE_ADDED` column. However when many artworks are added in batch, it's possible that the timestamps of different artworks are identical.

I suggest to rather select the last added artwork based on the `_ID` column instead, which is unique and auto-incremented. Furthermore, since this column is indexed, the query should run faster when there are many artworks."
romannurik/muzei,open,Avoid double effects transition when using fingerprint unlock,[],"When using different effects for the home screen and lock screen, turning off the screen will trigger the change to the lock screen effects. However, because the screen is off, the transition won't run until the screen turns back on.

This leads to a situation where if you use a fingerprint to both turn on the screen and unlock the device, you see a transition to the lock screen effects, then back to the home screen effects instead of immediately seeing the home screen effects."
romannurik/muzei,closed,Add settings to customize gestures,[],"Instead of only having a fixed action (temporarily disabling effects) on one gesture (double tap), expand the set of gestures and actions that Muzei supports out of the box to include:
- Both double tap and three finger tap gestures
- Temporarily disable effects, next artwork, view artwork details, or none as available actions"
romannurik/muzei,closed,Provide Buildable Example Art Source,[],"[The Unsplash Art Source example code](/romannurik/muzei/tree/master/example-unsplash) is great to have, but it sure would be nice if it was a complete, buildable project in Android Studio. Someone like me who's interested in building my first Android app as a Muzei plugin might have a hard time getting off the ground."
romannurik/muzei,closed,Decouple home screen and lock screen effects,[],"Allow users to independently change the effects to apply to the home screen and the effects to apply to the lock screen, replacing the binary 'Apply blur on the lockscreen' checkbox.

Fixes #549 "
romannurik/muzei,closed,Allow users to browse artwork and set the wallpaper,[],"Add a new 'Browse' action for each selected provider that allows users to browse through all of the artwork a provider has loaded and set the current wallpaper to any wallpaper.

Fixes #486 "
romannurik/muzei,closed,Decouple home screen and lock screen effects,[],"Allow users to have totally independent effects between the lock screen and home screen, replacing the 'Apply blur on lockscreen' checkbox."
romannurik/muzei,closed,Feature Request: add option to disable blur on main homescreen page ,[],Option to disable blur on main homescreen page or page(s) of user's choice. Perfect for when you have clean home page for looking at your wallpaper and semi-transparent widgets on subsequent pages for getting things done.
romannurik/muzei,open,Allow Tasker actions to change effects,[],"Allow blur amount, dimming, artwork source or any other setting to be changed from Tasker. Smoothly animated just like current double tap to unblur."
romannurik/muzei,closed,New Source For Paintings,[],"Hey, I don't know where you get the sources for the classical art that comes default with the app, but the Van Gogh Museum in the Netherlands have recently digitized thousands of Van Gogh's art [here](https://www.vangoghmuseum.nl/en/search/collection?q=&artist=Vincent%20van%20Gogh&pagesize=105), and I thought you might want to add them to your collection.

Cheers!"
romannurik/muzei,closed,Muzei 3.0 Alpha 1,[],Merge in the changes for Muzei 3.0 Alpha 1
romannurik/muzei,closed,Only get a part of the image when using the pics from reddit add-on ,[],"I'm using the pics from reddit add-on to download wallpapers and until the last update Had no issues with it. Now 90% of the time it only downloads a part of the image like this.

![https://imgur.com/eS8uWsn](https://imgur.com/eS8uWsn)

Sometimes it gets only a few rows and sometimes the whole image, but far more often the former.

I'm not sure whether this is muzei's fault or the add-on's, but it only started happening after the muzei update, so that why I'm opening the issue here.

I use non-stock android 8.1 (Resurrection Remix) and version 2.6.0 of muzei. If you need any additional information please let me know."
romannurik/muzei,closed,Increased power consumption,[],"My version is 2.6.0 beta2. Recently muzei uses about 10% power, can you fix it?"
romannurik/muzei,closed,Convert 500px example to Unsplash,[],"Replaces the now broken 500px example source with the equivalent source for popular photos on Unsplash.

Fixes #541 "
romannurik/muzei,closed,Choose new example source to replace 500px,[],"With [500px shutting down their API](https://www.xda-developers.com/500-firepaper-stop-working-500px/), Muzei should provide an alternative example source for developers to emulate."
romannurik/muzei,closed,Use the Navigation Architecture Component for MainFragment,[],Replace our custom code for handling MainFragment's BottomNavigationView with Navigation.
romannurik/muzei,closed,"Update to Support Library 28.0.0-alpha3, add support for display cutouts",[],"When Muzei goes to full screen, allow the wallpaper to display around any display cutouts.

Fixes #522"
romannurik/muzei,closed,Muzei usually stuck for a while when I skip a wallpaper.,[],"Muzei usually stuck for a while when I skip a wallpaper.
It also killed almost all background apps process.

Logcat:
```
Performing pause of activity that is not resumed: {net.nurik.roman.muzei/com.google.android.apps.muzei.MuzeiActivity}
java.lang.RuntimeException: Performing pause of activity that is not resumed: {net.nurik.roman.muzei/com.google.android.apps.muzei.MuzeiActivity}
	at android.app.ActivityThread.performPauseActivity(ActivityThread.java:3865)
	at android.app.ActivityThread.performPauseActivity(ActivityThread.java:3853)
	at android.app.ActivityThread.handlePauseActivity(ActivityThread.java:3827)
	at android.app.ActivityThread.-wrap15(Unknown Source:0)
	at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1602)
	at android.os.Handler.dispatchMessage(Handler.java:106)
	at android.os.Looper.loop(Looper.java:164)
	at android.app.ActivityThread.main(ActivityThread.java:6499)
	at java.lang.reflect.Method.invoke(Native Method)
	at com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run(RuntimeInit.java:440)
	at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:807)
```
```
Performing stop of activity that is already stopped: {net.nurik.roman.muzei/com.google.android.apps.muzei.MuzeiActivity}
java.lang.RuntimeException: Performing stop of activity that is already stopped: {net.nurik.roman.muzei/com.google.android.apps.muzei.MuzeiActivity}
	at android.app.ActivityThread.performStopActivityInner(ActivityThread.java:3997)
	at android.app.ActivityThread.handleStopActivity(ActivityThread.java:4085)
	at android.app.ActivityThread.-wrap24(Unknown Source:0)
	at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1623)
	at android.os.Handler.dispatchMessage(Handler.java:106)
	at android.os.Looper.loop(Looper.java:164)
	at android.app.ActivityThread.main(ActivityThread.java:6499)
	at java.lang.reflect.Method.invoke(Native Method)
	at com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run(RuntimeInit.java:440)
	at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:807)
```"
romannurik/muzei,closed,The app crashes upon clicking on ACTIVATE,[],"#### Expected behavior
The application is expected to work flawlessly while using.

#### Actual behavior
The application suddenly crash the moment the **ACTIVATE** button is clicked on 

#### How to reproduce
- Launch the application 
- Wait for it to load
- Click on **ACTIVATE**
- The crash occurs 

* Browser/App version: 2.5.2
* Operating system: Teckno k8

#### Recording Of The Bug

https://youtu.be/gL0yLdMZ_HY

## Note
The application works fine on first launch. However after exploring for sometime, this crash becomes effective non stop

Should in case you tried and you could not locate the crash on first launch. The logcat provided below hold the rest of the information.
### LOG 
```05-29 17:01:07.942 26937 27020 E AndroidRuntime: FATAL EXCEPTION: AsyncTask #1
05-29 17:01:07.942 26937 27020 E AndroidRuntime: Process: net.nurik.roman.muzei, PID: 26937
05-29 17:01:07.942 26937 27020 E AndroidRuntime: java.lang.RuntimeException: An error occurred while executing doInBackground()
05-29 17:01:07.942 26937 27020 E AndroidRuntime: 	at android.os.AsyncTask$3.done(AsyncTask.java:318)
05-29 17:01:07.942 26937 27020 E AndroidRuntime: 	at java.util.concurrent.FutureTask.finishCompletion(FutureTask.java:354)
05-29 17:01:07.942 26937 27020 E AndroidRuntime: 	at java.util.concurrent.FutureTask.setException(FutureTask.java:223)
05-29 17:01:07.942 26937 27020 E AndroidRuntime: 	at java.util.concurrent.FutureTask.run(FutureTask.java:242)
05-29 17:01:07.942 26937 27020 E AndroidRuntime: 	at android.os.AsyncTask$SerialExecutor$1.run(AsyncTask.java:243)
05-29 17:01:07.942 26937 27020 E AndroidRuntime: 	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1133)
05-29 17:01:07.942 26937 27020 E AndroidRuntime: 	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:607)
05-29 17:01:07.942 26937 27020 E AndroidRuntime: 	at java.lang.Thread.run(Thread.java:761)
05-29 17:01:07.942 26937 27020 E AndroidRuntime: Caused by: java.lang.SecurityException: Unable to start service Intent { act=com.google.android.apps.muzei.api.action.SUBSCRIBE cmp=de.devmil.muzei.bingimageofthedayartsource/de.devmil.muzei.bingimageoftheday.BingImageOfTheDayArtSource (has extras) }: AMS: *** Unable to launch app de.devmil.muzei.bingimageofthedayartsource/10155 for service Intent { act=com.google.android.apps.muzei.api.action.SUBSCRIBE cmp=de.devmil.muzei.bingimageofthedayartsource/de.devmil.muzei.bingimageoftheday.BingImageOfTheDayArtSource }, from net.nurik.roman.muzei/10156: AutoStart Limited.
05-29 17:01:07.942 26937 27020 E AndroidRuntime: 	at android.app.ContextImpl.startServiceCommon(ContextImpl.java:1397)
05-29 17:01:07.942 26937 27020 E AndroidRuntime: 	at android.app.ContextImpl.startService(ContextImpl.java:1370)
05-29 17:01:07.942 26937 27020 E AndroidRuntime: 	at android.content.ContextWrapper.startService(ContextWrapper.java:613)
05-29 17:01:07.942 26937 27020 E AndroidRuntime: 	at com.google.android.apps.muzei.SourceManager.unsubscribe(SourceManager.java:229)
05-29 17:01:07.942 26937 27020 E AndroidRuntime: 	at com.google.android.apps.muzei.SourceManager.access$100(SourceManager.java:53)
05-29 17:01:07.942 26937 27020 E AndroidRuntime: 	at com.google.android.apps.muzei.SourceManager$3.doInBackground(SourceManager.java:133)
05-29 17:01:07.942 26937 27020 E AndroidRuntime: 	at com.google.android.apps.muzei.SourceManager$3.doInBackground(SourceManager.java:118)
05-29 17:01:07.942 26937 27020 E AndroidRuntime: 	at android.os.AsyncTask$2.call(AsyncTask.java:304)
05-29 17:01:07.942 26937 27020 E AndroidRuntime: 	at java.util.concurrent.FutureTask.run(FutureTask.java:237)
05-29 17:01:07.942 26937 27020 E AndroidRuntime: 	... 4 more
05-29 17:01:35.679 27194 27274 E AndroidRuntime: FATAL EXCEPTION: AsyncTask #1
05-29 17:01:35.679 27194 27274 E AndroidRuntime: Process: net.nurik.roman.muzei, PID: 27194
05-29 17:01:35.679 27194 27274 E AndroidRuntime: java.lang.RuntimeException: An error occurred while executing doInBackground()
05-29 17:01:35.679 27194 27274 E AndroidRuntime: 	at android.os.AsyncTask$3.done(AsyncTask.java:318)
05-29 17:01:35.679 27194 27274 E AndroidRuntime: 	at java.util.concurrent.FutureTask.finishCompletion(FutureTask.java:354)
05-29 17:01:35.679 27194 27274 E AndroidRuntime: 	at java.util.concurrent.FutureTask.setException(FutureTask.java:223)
05-29 17:01:35.679 27194 27274 E AndroidRuntime: 	at java.util.concurrent.FutureTask.run(FutureTask.java:242)
05-29 17:01:35.679 27194 27274 E AndroidRuntime: 	at android.os.AsyncTask$SerialExecutor$1.run(AsyncTask.java:243)
05-29 17:01:35.679 27194 27274 E AndroidRuntime: 	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1133)
05-29 17:01:35.679 27194 27274 E AndroidRuntime: 	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:607)
05-29 17:01:35.679 27194 27274 E AndroidRuntime: 	at java.lang.Thread.run(Thread.java:761)
05-29 17:01:35.679 27194 27274 E AndroidRuntime: Caused by: java.lang.SecurityException: Unable to start service Intent { act=com.google.android.apps.muzei.api.action.SUBSCRIBE cmp=de.devmil.muzei.bingimageofthedayartsource/de.devmil.muzei.bingimageoftheday.BingImageOfTheDayArtSource (has extras) }: AMS: *** Unable to launch app de.devmil.muzei.bingimageofthedayartsource/10155 for service Intent { act=com.google.android.apps.muzei.api.action.SUBSCRIBE cmp=de.devmil.muzei.bingimageofthedayartsource/de.devmil.muzei.bingimageoftheday.BingImageOfTheDayArtSource }, from net.nurik.roman.muzei/10156: AutoStart Limited.
05-29 17:01:35.679 27194 27274 E AndroidRuntime: 	at android.app.ContextImpl.startServiceCommon(ContextImpl.java:1397)
05-29 17:01:35.679 27194 27274 E AndroidRuntime: 	at android.app.ContextImpl.startService(ContextImpl.java:1370)
05-29 17:01:35.679 27194 27274 E AndroidRuntime: 	at android.content.ContextWrapper.startService(ContextWrapper.java:613)
05-29 17:01:35.679 27194 27274 E AndroidRuntime: 	at com.google.android.apps.muzei.SourceManager.unsubscribe(SourceManager.java:229)
05-29 17:01:35.679 27194 27274 E AndroidRuntime: 	at com.google.android.apps.muzei.SourceManager.access$100(SourceManager.java:53)
05-29 17:01:35.679 27194 27274 E AndroidRuntime: 	at com.google.android.apps.muzei.SourceManager$3.doInBackground(SourceManager.java:133)
05-29 17:01:35.679 27194 27274 E AndroidRuntime: 	at com.google.android.apps.muzei.SourceManager$3.doInBackground(SourceManager.java:118)
05-29 17:01:35.679 27194 27274 E AndroidRuntime: 	at android.os.AsyncTask$2.call(AsyncTask.java:304)
05-29 17:01:35.679 27194 27274 E AndroidRuntime: 	at java.util.concurrent.FutureTask.run(FutureTask.java:237)
05-29 17:01:35.679 27194 27274 E AndroidRuntime: 	... 4 more
05-29 17:02:10.388 27293 27412 E AndroidRuntime: FATAL EXCEPTION: AsyncTask #1
05-29 17:02:10.388 27293 27412 E AndroidRuntime: Process: net.nurik.roman.muzei, PID: 27293
05-29 17:02:10.388 27293 27412 E AndroidRuntime: java.lang.RuntimeException: An error occurred while executing doInBackground()
05-29 17:02:10.388 27293 27412 E AndroidRuntime: 	at android.os.AsyncTask$3.done(AsyncTask.java:318)
05-29 17:02:10.388 27293 27412 E AndroidRuntime: 	at java.util.concurrent.FutureTask.finishCompletion(FutureTask.java:354)
05-29 17:02:10.388 27293 27412 E AndroidRuntime: 	at java.util.concurrent.FutureTask.setException(FutureTask.java:223)
05-29 17:02:10.388 27293 27412 E AndroidRuntime: 	at java.util.concurrent.FutureTask.run(FutureTask.java:242)
05-29 17:02:10.388 27293 27412 E AndroidRuntime: 	at android.os.AsyncTask$SerialExecutor$1.run(AsyncTask.java:243)
05-29 17:02:10.388 27293 27412 E AndroidRuntime: 	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1133)
05-29 17:02:10.388 27293 27412 E AndroidRuntime: 	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:607)
05-29 17:02:10.388 27293 27412 E AndroidRuntime: 	at java.lang.Thread.run(Thread.java:761)
05-29 17:02:10.388 27293 27412 E AndroidRuntime: Caused by: java.lang.SecurityException: Unable to start service Intent { act=com.google.android.apps.muzei.api.action.SUBSCRIBE cmp=de.devmil.muzei.bingimageofthedayartsource/de.devmil.muzei.bingimageoftheday.BingImageOfTheDayArtSource (has extras) }: AMS: *** Unable to launch app de.devmil.muzei.bingimageofthedayartsource/10155 for service Intent { act=com.google.android.apps.muzei.api.action.SUBSCRIBE cmp=de.devmil.muzei.bingimageofthedayartsource/de.devmil.muzei.bingimageoftheday.BingImageOfTheDayArtSource }, from net.nurik.roman.muzei/10156: AutoStart Limited.
05-29 17:02:10.388 27293 27412 E AndroidRuntime: 	at android.app.ContextImpl.startServiceCommon(ContextImpl.java:1397)
05-29 17:02:10.388 27293 27412 E AndroidRuntime: 	at android.app.ContextImpl.startService(ContextImpl.java:1370)
05-29 17:02:10.388 27293 27412 E AndroidRuntime: 	at android.content.ContextWrapper.startService(ContextWrapper.java:613)
05-29 17:02:10.388 27293 27412 E AndroidRuntime: 	at com.google.android.apps.muzei.SourceManager.unsubscribe(SourceManager.java:229)
05-29 17:02:10.388 27293 27412 E AndroidRuntime: 	at com.google.android.apps.muzei.SourceManager.access$100(SourceManager.java:53)
05-29 17:02:10.388 27293 27412 E AndroidRuntime: 	at com.google.android.apps.muzei.SourceManager$3.doInBackground(SourceManager.java:133)
05-29 17:02:10.388 27293 27412 E AndroidRuntime: 	at com.google.android.apps.muzei.SourceManager$3.doInBackground(SourceManager.java:118)
05-29 17:02:10.388 27293 27412 E AndroidRuntime: 	at android.os.AsyncTask$2.call(AsyncTask.java:304)
05-29 17:02:10.388 27293 27412 E AndroidRuntime: 	at java.util.concurrent.FutureTask.run(FutureTask.java:237)
05-29 17:02:10.388 27293 27412 E AndroidRuntime: 	... 4 more
05-29 17:34:42.066   920   920 E AndroidRuntime: FATAL EXCEPTION: main```"
romannurik/muzei,closed,Muzei App crashes when I rotate my phone in landscape mode.,[],"### Actual behaviour
When I open the muzei app and click on activate option. After that I click on settings option and change orientation and market option . After that I rotate my phone in landscape mode app suddenly crashes.
### How to reproduce
* Download the muzei app from F-driod.
* Install this app.
* Open the muzei app.
* Click on settings option.
* Change orientation and market option.
* Then rotate your phone in landscape mode app suddenly crashes.
* Browser:muzei.
* Version: 2.4.0
* Operating system: 7.1.2
### Recording of the bug
https://youtu.be/jYwVc26hqK4"
romannurik/muzei,closed,Use WorkManager in place of Firebase Job Dispatcher,[],Use WorkManager's support for content URI listening to replace use of Firebase Job Dispatcher.
romannurik/muzei,closed,Update problem,[],In my device Moto G5 is not updating the wallpaper since a couple weeks ago. There is a way to reset the app?
romannurik/muzei,closed,Bug on Android P Beta (DP2) : colors of wallpaper don't affect anything anymore,[],"Suppose you take a fully black background via the app.
On Android 8.1 and even on Android P DP1, this would affect the notification drawer, to make it black too.

Now on Android P Beta (DP2), it doesn't.

According to my tests, this happens on all third party live wallpapers, but not on the built in ones.

Because of the above, I believe this is a bug on the OS. However, if it's not, please let me know why this occurs and how to fix it.
I've reported about this issue here too :
https://issuetracker.google.com/issues/80029770"
romannurik/muzei,closed,Make Muzei work on Chrome OS,[],"I really love Muzei on my Android phone and it is really an app I can't live without. :-)
I do not know if this is technically possible, but it would be great if we could have Muzei work on Chrome OS."
romannurik/muzei,open,Less blurry blur effect,[],"Even applying the minimal amount of blur effect is too blurry for me, glad if you could reduce the minimum amount of blur I could add. Thanks. "
romannurik/muzei,closed,"Question: is it possible to scroll in the photo, while showing the live wallpaper?",[],"Not all photos have the exact same resolution as the device, after all...
"
romannurik/muzei,closed,Question: possible to set animated GIF/WEBP or videos on muzei?,[],"As the title says...
I would like to know if it's possible to set animated GIF/WEBP or even a video file (WEBM, for example)
If not, what would it take for a live wallpaper to do it?
Does it have to be in a GLWallpaperService with GLEngine? 
Or can it be from a normal WallpaperService ? 

I also wonder why it was chosen to have a GLWallpaperService with GLEngine here, if all that's done is to show an image... Is it for the high quality effects?
Can't those be done using Renderscript, and just use the output image to be shown?"
romannurik/muzei,closed,Feature request: Browse the wallpaper history and manage it.,[],"We need a wallpaper history list and a mark list.

History List has a max-age.
Mark List is always there.

We should can choose wallpapers from the two list."
romannurik/muzei,closed,Add configuration options for the watch face,[],"Let users configure the watch face:
- On API 23, users can enable/disable the date, fixes #121 
- On API 24+, users can configure both the top and bottom complications
- On all API levels, users can change the tap action (switching between toggle, always blurred, and never blurred)"
romannurik/muzei,closed,Initial Complication Support,[],"Switches the date display to use the system date complication on API 24+.

Adds a configurable bottom complication that supports long text, ranged value, and short text complications. Currently the configuration activity just directly launches the Complication Helper Activity to configure the bottom complication.

Fixes #412"
romannurik/muzei,open,Feature request: Add a skip option,[],"I use NASAâ€™s APOD source, most of the time the image is a great wallpaper, but sometimes itâ€™s something which does not work well as a wallpaper, for example: https://apod.nasa.gov/apod/ap180314.html

In these cases, I would like to have a skip button, which would put back the last wallpaper and wait for the next one to switch."
romannurik/muzei,closed,Rotation interval changes,[],"Could you please add a 30 minute interval for rotation of Muzei wallpapers or alternatively a way for the user to more specifically define the period?
I notice two commits were made here: [47](https://github.com/romannurik/muzei/pull/47) and [48](https://github.com/romannurik/muzei/pull/48). They both seem to have been rejected. I really want this feature as I use Muzei with Android wear and 1 hour is too slow.

Cheers,

Chris"
romannurik/muzei,closed,Only zoom images if needed to fill the screen size,[],"Instead of using an effective minimum width of 1.15 of the screen's width, only zoom images if absolutely required to avoid black bars on the sides of the screen. This then allows artwork of the exact size of the screen to fit without scrolling.

Fixes #409"
romannurik/muzei,closed,Android P: Support display cutouts,[],"When Muzei goes fullscreen (by tapping on the artwork details), it should properly support [display cutouts](https://developer.android.com/preview/features.html#cutout), most likely using [LAYOUT_IN_DISPLAY_CUTOUT_MODE_ALWAYS](https://developer.android.com/reference/android/view/WindowManager.LayoutParams.html#LAYOUT_IN_DISPLAY_CUTOUT_MODE_ALWAYS) to show around the cutout."
romannurik/muzei,closed,Muzei just stops working with third party apps,[],"I have a highly annoying bug to report. After a number of rotations (I have Muzei on a 1 hour - 30 minute rotation period) it fails to update anymore. This will usually happen after a couple of days. I have experienced it with two third party apps; Minima and Backdrops so I am certain the problem is with Muzei.

Nothing I do will fix the problem except uninstalling and reinstalling Muzei and the third party apps. I have tried restarting the phone, changing sources, uninstalling-reinstalling the third party apps (that just breaks any connection with Muzei), and turning off battery optimisation.

I love the app but its unusable with this problem. I am using Lineage OS 14.

Thanks"
romannurik/muzei,closed,Where's the MathUtil.class?,[],"in ScrimUtil.class, there's a ""MathUtil.constrain(0, 1, (float) Math.pow(x, 3));""  could you tell me  where' s MathUtil.class"
romannurik/muzei,closed,Muzei keeps switching Sources,[],"No matter how many times I switch the source to Backdrops, within a day it'll switch back to Featured Art."
romannurik/muzei,closed,Feature request: Option to disable brightness gesture.,[],"When I double tap my home screen, the wallpaper brightness changes. I have a double tap gesture set for my launcher, so I am constantly changing the brightness of the screen when I don't want to.

Please add an option to disable this function in Muzei."
romannurik/muzei,closed,Fix querying MuzeiProvider,[],"MuzeiProvider incorrectly still attempted to return the sources._id column, which doesn't exist anymore. This caused issues with other apps, such as [Action Launcher](https://play.google.com/store/apps/details?id=com.actionlauncher.playstore), that were attempting to query Muzei to get the current wallpaper."
romannurik/muzei,closed,"Add a Single Artwork source, use it for ""Use As..."" operations",[],"Avoid cases where the user specifically sets a wallpaper from another app via the ""Use As..."" operation and then the artwork changes because of Gallery's refresh schedule.

This also reduces the visibility of the GalleryDatabase, ChosenPhoto, and ChosenPhotoDao as they are now purely implementation details of the Gallery source rather than a public API that the main module relies on.

Fixes #413"
romannurik/muzei,open,Translation to Brazilian Portuguese,[],
romannurik/muzei,closed,Wallpapers from gallery functionality does not work,[],"When I try to setup a wallpaper from gallery using muzei it does not work.
I noticed that muzei has no permission to read from storage. Is this the issue?"
romannurik/muzei,closed,Blur effect bug in the main Activity,"[Label(name=""bug"")]","Steps to reproduce

Open the main Activity to see the wallpaper in full
Lock the screen
Unlock again 
The wallpaper gets blurred and stuck in that state.

After this it cannot be scrolled and double click does not work to unblur it. "
romannurik/muzei,closed,Automatically retry updateAppWidget if maximum bitmap memory usage exceeded,[],"Continuously reduce the size of the app widget image until it fits under the maximum bitmap memory usage limit, which apparently is too low for some devices.

Caused by java.lang.IllegalArgumentException
RemoteViews for widget update exceeds maximum bitmap memory usage (used: 13003236, max: 12441600)
arrow_right
android.os.Parcel.readException (Parcel.java:1688)
android.os.Parcel.readException (Parcel.java:1637)
com.android.internal.appwidget.IAppWidgetService$Stub$Proxy.updateAppWidgetIds (IAppWidgetService.java:647)
android.appwidget.AppWidgetManager.updateAppWidget (AppWidgetManager.java:474)
android.appwidget.AppWidgetManager.updateAppWidget (AppWidgetManager.java:547)
com.google.android.apps.muzei.widget.AppWidgetUpdateTask.doInBackground (AppWidgetUpdateTask.java:139)
com.google.android.apps.muzei.widget.AppWidgetUpdateTask.doInBackground (AppWidgetUpdateTask.java:55)"
romannurik/muzei,closed,"Update to Google Play services 11.8.0, move to Wear GoogleApi",[],Replace deprecated GoogleApiClient based Wearable APIs with the new GoogleApi based solutions
romannurik/muzei,closed,Properly rotate widget and notification image,[],"Use the rotation information to ensure that the images in the widget and notification large icon / Android Wear background are properly rotated.

Fixes #505 "
romannurik/muzei,closed,Update to Paging alpha4-1,[],
romannurik/muzei,closed,Change notification bar to dark mode when night mode is ON,[],"Any plans to implement dark notification bar when night mode is ON, it would be a nice addition.

Done a hacky implementation here https://github.com/riyaz/muzei/commit/be6652d351d52125aa5d26ab00c8a2d80d16cc9d

"
romannurik/muzei,closed,Incomplete download of artwork,[],"I been experiencing incomplete display of artwork as shown below. Today is the second time it has happened. The previous time it occurred was October 10.
At first, I thought this was related to #53, but the black bar is persistent. Also, screen rotation is disabled on my device. Additionally, I tried changing the blur, grey level, etc with no results. Only deleting the muzei data and cache causes the image to appear fully.
I suspect that the image is not being downloaded completely before it is displayed. If that is the case, perhaps checking the validity of the image with some kind of hash could be used to detect incomplete download. 
 
![screenshot_20171010-140131](https://user-images.githubusercontent.com/9604511/32811766-508b5aca-c956-11e7-8697-80eaccfaac40.png) ![screenshot_20171114-153957](https://user-images.githubusercontent.com/9604511/32811767-5175234e-c956-11e7-9053-d5e870e1a666.png)



"
romannurik/muzei,closed,Replace CheatSheet with TooltipCompat,[],"Use TooltipCompat to ensure UI consistency 

<img src=""https://user-images.githubusercontent.com/3997169/32775107-79c1030a-c969-11e7-9f0f-834948c12875.jpg"" width=""300"" alt=""Inconsistent tooltip UI"">
"
romannurik/muzei,closed,Widget rotation,[],"It would be nice if the picture on the widget had correct orientation/rotation applied too.
In the case of photographs with orientation data. "
romannurik/muzei,closed,Move Muzei to using Bottom Nav,[],"Expose all of the main functionality of Muzei on a global bottom nav:
- Muzei (the main art details screen that Muzei already starts on)
- Sources (the Sources settings screen)
- Effects (the 'Advanced' settings screen)

Tapping on the art details screen not only hides the art details information, but also the bottom nav, retaining the full screen view of the artwork. Tapping on the Muzei bottom navigation button when it is already selected also triggers the full screen view.

This replaces the existing method of reaching the Sources and Effects screens via the 'Customize' option in the overflow menu on the art details screen. The SettingsActivity that contains the Sources/Effects screen is still in use as the configuration activity for setting the wallpaper, but is otherwise not accessible.

The About Muzei option is no longer in the global overflow menu for the SettingsActivity, but is now in the overflow menu for the art details screen (i.e., where Customize used to be)."
romannurik/muzei,closed,Feature: Add option to regulate the opacity of the gradient at the edges of the screen,[],"Evening,

I've just installed your app and fell in love with it. The integration with Mysplash makes it simply superb, and the ""next artwork"" button for the status bar was a nice touch. I've just got one issue with it and it is the dark gradient that's cast along the top and bottom edges of the screen.

Don't get me wrong, I do recognize its usefulness. Indeed, it does prevent the randomized background image from interfering with the icons on the foreground placed at the statusbar and side-by-side with the drawer icon. It's just that it is a compromise that I'm more than happy to yield in favor of displaying the background image at its full force. After all, as an experienced user of my own device, I know the location an function of my icons by heart. Furthermore, I don't have that many icons in place to start with.

Hence, **I would like to propose for you to add, under the Settings > Advanced menu, a forth ""gradients"" slider to regulate the opacity from the aforementioned gradients**. That is my request.

My regards,"
romannurik/muzei,closed,"Dedup notification settings on O+, improve menu handling",[],"Notification settings on Android 8.0+ devices are handled at the system level. Remove Muzei's internal checkbox for showing notifications on 8.0+ to prevent confusion on which switch to turn on or off.

For users who are just upgrading to Android 8.0, we migrate the user's setting to the notification channel. For those that have disabled the notification in app but have not disabled it at the system level and already have the channel created, push a separate notification asking them to review their settings (and disable the notification again if they so choose).

As we no longer have notification settings within Muzei, we disable the `NOTIFICATION_PREFERENCES` intent filter on O+ by moving it to a separate `<activity-alias>` that we can disable based on API level.

Notification Settings will still be available within Muzei, but only as 'Notification Settings' overflow menu item in the Sources screen. Pre-O, this will open a dialog to enable/disable the in-app setting, while O+ it will just open the system settings for the channel.

This also reworks how the two Settings fragments use menus, switching to the standard ActionBar APIs."
romannurik/muzei,closed,Restrict widget image's size to the screen size,[],"Widgets are limited to ~1.5x the screen size in memory and that's big enough for our needs.

Exception java.lang.RuntimeException: An error occurred while executing doInBackground()
Caused by java.lang.IllegalArgumentException: RemoteViews for widget update exceeds maximum bitmap memory usage (used: 12916836, max: 12441600)
android.os.Parcel.readException (Parcel.java:1688)
android.os.Parcel.readException (Parcel.java:1637)
com.android.internal.appwidget.IAppWidgetService$Stub$Proxy.updateAppWidgetIds (IAppWidgetService.java:647)
android.appwidget.AppWidgetManager.updateAppWidget (AppWidgetManager.java:474)
android.appwidget.AppWidgetManager.updateAppWidget (AppWidgetManager.java:547)
com.google.android.apps.muzei.widget.AppWidgetUpdateTask.doInBackground (AppWidgetUpdateTask.java:146)
com.google.android.apps.muzei.widget.AppWidgetUpdateTask.doInBackground (AppWidgetUpdateTask.java:57)
android.os.AsyncTask$2.call (AsyncTask.java:306)
java.util.concurrent.FutureTask.run (FutureTask.java:237)
java.util.concurrent.ThreadPoolExecutor.runWorker (ThreadPoolExecutor.java:1133)
java.util.concurrent.ThreadPoolExecutor$Worker.run (ThreadPoolExecutor.java:607)
java.lang.Thread.run (Thread.java:761)"
romannurik/muzei,closed,Implement the WallpaperColors API for O_MR1 devices,[],Allow the launcher to query for the current artwork's colors and notify any active listeners when the artwork changes.
romannurik/muzei,closed,"Update to compileSdkVersion 27, Support Library 27.0.0",[],
romannurik/muzei,closed,Fix issues reported by lint,[],
romannurik/muzei,closed,Allow onTryUpdate throwing RetryException to increment retry attempts,[],"Previously, the exponential backoff provided by RetryException only applies in cases where the network wasn't connected. Update the contract so that we'll also exponentially back off if onTryUpdate throws a RetryException.

This helps in cases such as #493 "
romannurik/muzei,open,Use ExifInterface's getRotationDegrees/isFlipped,[],Use [getRotationDegrees()](https://developer.android.com/reference/android/support/media/ExifInterface.html#getRotationDegrees()) and [isFlipped()](https://developer.android.com/reference/android/support/media/ExifInterface.html#isFlipped()) to correctly orient images.
romannurik/muzei,closed,Convert to using AmbientMode for Wear Activity,[],Use [`AmbientMode`](https://developer.android.com/reference/android/support/wear/ambient/AmbientMode.html) as described in the [training](https://developer.android.com/training/wearables/apps/always-on.html#ambient-mode-class) so we can have ambient support for our Wear activities.
romannurik/muzei,closed,Use API 27's WallpaperColors API,[],"Muzei should override [onComputeColors](https://developer.android.com/reference/android/service/wallpaper/WallpaperService.Engine.html#onComputeColors%28%29) to let the system know the colors in the current wallpaper, calling [notifyColorsChanged()](https://developer.android.com/reference/android/service/wallpaper/WallpaperService.Engine.html#notifyColorsChanged()) when the artwork changes."
romannurik/muzei,closed,Muzei is killing my battery,[],"So I have made a custom plugin to use Dropbox as an art source inspired a lot by the [National Geographic](https://github.com/msal/muzei-nationalgeographic) plugin.

In `onTryUpdate` the very first thing I do is checking for Wifi [just like in the aforementioned plugin](https://github.com/msal/muzei-nationalgeographic/blob/3aeac1641506074ffb9edd82b3c2b02f4e010e24/muzei-nationalgeographic/src/java/de/msal/muzei/nationalgeographic/NationalGeographicArtSource.java#L229-L235) and likewise throw a [RetryException](http://api.muzei.co/reference/com/google/android/apps/muzei/api/RemoteMuzeiArtSource.RetryException.html) if not on Wifi.
The API docs say it should use an exponential backoff on fail, which as I understand it means ""retry less and less frequently if you keep failing"" but this is not really what I see happening:

```
10-25 21:00:07.608 12443 14044 W MuzeiArtSource: Error fetching, scheduling retry, id=DropboxFolderArtSource
10-25 21:01:09.251 12443 14077 W MuzeiArtSource: Error fetching, scheduling retry, id=DropboxFolderArtSource
10-25 21:01:46.315 12443 14108 W MuzeiArtSource: Error fetching, scheduling retry, id=DropboxFolderArtSource
10-25 21:02:09.322 12443 14132 W MuzeiArtSource: Error fetching, scheduling retry, id=DropboxFolderArtSource
10-25 21:03:09.315 12443 14148 W MuzeiArtSource: Error fetching, scheduling retry, id=DropboxFolderArtSource
10-25 21:03:19.325 12443 14222 W MuzeiArtSource: Error fetching, scheduling retry, id=DropboxFolderArtSource
10-25 21:03:36.513 12443 14238 W MuzeiArtSource: Error fetching, scheduling retry, id=DropboxFolderArtSource
10-25 21:05:29.251 12443 14253 W MuzeiArtSource: Error fetching, scheduling retry, id=DropboxFolderArtSource
10-25 21:07:30.354 12443 14295 W MuzeiArtSource: Error fetching, scheduling retry, id=DropboxFolderArtSource
10-25 21:09:30.442 12443 14341 W MuzeiArtSource: Error fetching, scheduling retry, id=DropboxFolderArtSource
10-25 21:11:30.495 12443 14401 W MuzeiArtSource: Error fetching, scheduling retry, id=DropboxFolderArtSource
10-25 21:14:31.366 12443 14448 W MuzeiArtSource: Error fetching, scheduling retry, id=DropboxFolderArtSource
10-25 21:14:41.554 12443 14481 W MuzeiArtSource: Error fetching, scheduling retry, id=DropboxFolderArtSource
10-25 21:16:30.607 12443 14564 W MuzeiArtSource: Error fetching, scheduling retry, id=DropboxFolderArtSource
10-25 21:18:31.359 12443 14637 W MuzeiArtSource: Error fetching, scheduling retry, id=DropboxFolderArtSource
10-25 21:19:04.985 12443 14686 W MuzeiArtSource: Error fetching, scheduling retry, id=DropboxFolderArtSource
10-25 21:20:47.320 12443 14884 W MuzeiArtSource: Error fetching, scheduling retry, id=DropboxFolderArtSource
10-25 21:22:30.620 12443 14988 W MuzeiArtSource: Error fetching, scheduling retry, id=DropboxFolderArtSource
10-25 21:25:29.389 12443 15028 W MuzeiArtSource: Error fetching, scheduling retry, id=DropboxFolderArtSource
10-25 21:26:20.545 12443 15075 W MuzeiArtSource: Error fetching, scheduling retry, id=DropboxFolderArtSource
10-25 21:28:30.628 12443 15091 W MuzeiArtSource: Error fetching, scheduling retry, id=DropboxFolderArtSource
10-25 21:30:35.341 12443 15145 W MuzeiArtSource: Error fetching, scheduling retry, id=DropboxFolderArtSource
10-25 21:31:29.380 12443 15170 W MuzeiArtSource: Error fetching, scheduling retry, id=DropboxFolderArtSource
10-25 21:34:31.312 12443 15214 W MuzeiArtSource: Error fetching, scheduling retry, id=DropboxFolderArtSource
10-25 21:35:41.315 12443 15258 W MuzeiArtSource: Error fetching, scheduling retry, id=DropboxFolderArtSource
10-25 21:36:17.321 12443 15296 W MuzeiArtSource: Error fetching, scheduling retry, id=DropboxFolderArtSource
10-25 21:36:27.900 12443 15303 W MuzeiArtSource: Error fetching, scheduling retry, id=DropboxFolderArtSource
10-25 21:37:36.254 12443 15321 W MuzeiArtSource: Error fetching, scheduling retry, id=DropboxFolderArtSource
10-25 21:39:29.329 12443 15353 W MuzeiArtSource: Error fetching, scheduling retry, id=DropboxFolderArtSource
10-25 21:40:35.326 12443 15387 W MuzeiArtSource: Error fetching, scheduling retry, id=DropboxFolderArtSource
10-25 21:40:45.336 12443 15399 W MuzeiArtSource: Error fetching, scheduling retry, id=DropboxFolderArtSource
10-25 21:42:42.172 12443 15419 W MuzeiArtSource: Error fetching, scheduling retry, id=DropboxFolderArtSource
10-25 21:43:36.334 12443 15442 W MuzeiArtSource: Error fetching, scheduling retry, id=DropboxFolderArtSource
10-25 21:45:52.356 12443 15483 W MuzeiArtSource: Error fetching, scheduling retry, id=DropboxFolderArtSource
10-25 21:46:45.357 12443 15529 W MuzeiArtSource: Error fetching, scheduling retry, id=DropboxFolderArtSource
10-25 21:47:47.311 12443 15549 W MuzeiArtSource: Error fetching, scheduling retry, id=DropboxFolderArtSource
10-25 21:49:31.494 12443 15567 W MuzeiArtSource: Error fetching, scheduling retry, id=DropboxFolderArtSource
10-25 21:49:41.515 12443 15572 W MuzeiArtSource: Error fetching, scheduling retry, id=DropboxFolderArtSource
10-25 21:50:58.240 12443 15614 W MuzeiArtSource: Error fetching, scheduling retry, id=DropboxFolderArtSource
10-25 21:51:19.894 12443 15639 W MuzeiArtSource: Error fetching, scheduling retry, id=DropboxFolderArtSource
10-25 21:52:53.321 12443 15658 W MuzeiArtSource: Error fetching, scheduling retry, id=DropboxFolderArtSource
10-25 21:56:04.339 12443 15708 W MuzeiArtSource: Error fetching, scheduling retry, id=DropboxFolderArtSource
10-25 21:56:14.395 12443 15743 W MuzeiArtSource: Error fetching, scheduling retry, id=DropboxFolderArtSource
10-25 21:56:27.678 12443 16188 W MuzeiArtSource: Error fetching, scheduling retry, id=DropboxFolderArtSource
10-25 21:58:53.336 12443 16558 W MuzeiArtSource: Error fetching, scheduling retry, id=DropboxFolderArtSource
```

That's 45 attempts within one hour which basically wakes up my phone all the time.

Actually how I noticed it was even it's in my pocket doing nothing the phone was getting warm.
Checking out the battery usage yielded:

![screenshot_20171025-204822](https://user-images.githubusercontent.com/514215/32002663-f5f506fc-b9d7-11e7-8a3a-b4b4f896a813.png)
![screenshot_20171025-204933](https://user-images.githubusercontent.com/514215/32002664-f61d6f48-b9d7-11e7-9ba9-1e27700b237a.png)
![screenshot_20171025-204925](https://user-images.githubusercontent.com/514215/32002666-f6975c22-b9d7-11e7-995b-b208fb2ab868.png)

FWIW in my plugin I set the update frequency to 8 hours and I'm using a Nexus 5 with stock Android 6.0.1.

Any ideas as to how to fix this? What's the best way to handle such ""do only on Wifi"" cases?"
romannurik/muzei,closed,AlarmManager.set() may be delayed,[],"Hi,
I found that AlarmManager.set() is used to schedule retry download in TaskQueueService.
Just for your information, the alarms registered by this API could be batched by the system from API 19 ([doc](https://developer.android.com/reference/android/app/AlarmManager.html#set(int,%20long,%20android.app.PendingIntent))). The exact triggering time for the tasks could vary."
romannurik/muzei,closed,"Ensure decoded images are presented in ARGB_8888, not RGBA_F16",[],"Renderscript does not support RGBA_F16 images as might be decoded from JPEG images with an embedded color profile on API 26+ devices. By having BitmapRegionLoader always set the inPreferredConfig to ARGB_8888, we ensure that the resulting images can work with Renderscript.

Exception android.renderscript.RSInvalidStateException: Bad bitmap type: RGBA_F16
android.renderscript.Allocation.elementFromBitmap (Allocation.java:2767)
android.renderscript.Allocation.typeFromBitmap (Allocation.java:2772)
android.renderscript.Allocation.createFromBitmap (Allocation.java:2811)
android.renderscript.Allocation.createFromBitmap (Allocation.java:3063)
com.google.android.apps.muzei.util.ImageBlurrer.<init> (ImageBlurrer.java:43)
com.google.android.apps.muzei.render.MuzeiBlurRenderer$GLPictureSet.load (MuzeiBlurRenderer.java:387)
com.google.android.apps.muzei.render.MuzeiBlurRenderer.setAndConsumeBitmapRegionLoader (MuzeiBlurRenderer.java:262)
com.google.android.apps.muzei.render.RenderController$3$1.run (RenderController.java:108)
com.google.android.apps.muzei.render.GLTextureView$GLThread.guardedRun (GLTextureView.java:1238)
com.google.android.apps.muzei.render.GLTextureView$GLThread.run (GLTextureView.java:1015)"
romannurik/muzei,closed,Fix supportsNextArtwork,[],"In cases where a source moves from supporting 'Next Artwork' to not supporting it, make sure the Source is also updated."
romannurik/muzei,closed,Update to Android plugin 3.0.0-beta7,[],"Remove no longer required buildToolsVersion field as per
https://androidstudio.googleblog.com/2017/10/android-studio-30-beta-7-is-now.html"
romannurik/muzei,closed,Update build tools to 26.0.2,[],
romannurik/muzei,closed,Update versions of everything,[],"- Build tools
- Architecture Components
- Google Play services
- Wearable Library
- okhttp"
romannurik/muzei,closed,Allow users to browse available artwork,[],"Users should be able to view all of the artwork available from an artwork source and select a specific one to display.

This is a generalization of what the 'My Gallery' source already provides, but would be done by Muzei itself."
romannurik/muzei,closed,Feature Request: freeze wallpaper option,[],"Sometimes a wallpaper comes up that I really like and want to keep it for awhile, so I'd like to be able to suspend the app from switching wallpapers. I've tried extending the interval in that case, but then it immediately switches to a new wallpaper and applies the new interval to that one. Also, I don't see any way to go back to the previous wallpaper, so a ""back"" button would also be a nice option."
romannurik/muzei,closed,Ugly blank space for wide artwork,[],"Wide artwork with short height produces an ugly blank black space. Is there a way that this can be stretched or that the artwork can be skipped for a better one?

<img src=""https://user-images.githubusercontent.com/11140545/30676622-944d8556-9e4c-11e7-87b5-fd2c2681303b.png"" alt=""screenshot_20170920-212657"" width=""50%"">

<img src=""https://user-images.githubusercontent.com/11140545/30676623-9581badc-9e4c-11e7-97fd-65e38d13d1d2.png"" alt=""screenshot_20170920-212641"" width=""50%"">

"
romannurik/muzei,closed,Fix Gallery image sizes,[],Updates logic to correctly resize images to smaller only if there is more than one image for a ChosenPhoto.
romannurik/muzei,closed,Update Gradle plugin for Android Studio 3.0 Beta 6,[],
romannurik/muzei,closed,"Move to alpha9-1 of Room/Lifecycle, add Paging to Gallery",[],"Simplifies the logic of GallerySettings via Paging as well as switches from two layouts, one of which used PercentRelativeLayout to just a single ConstraintLayout.

Fixes NOT NULL issue with Artwork caused by SourceSubscriberService as well."
romannurik/muzei,closed,"Update Gradle plugin for Studio 3.0 Beta 5, Google Play services 11.2.2",[],
romannurik/muzei,closed,"Update for Studio 3.0 Beta 4, Support Library 26.0.2",[],
romannurik/muzei,closed,Update Gradle plugin for Android Studio 3.0 Beta 4,[],
romannurik/muzei,closed,Convert Muzei and Gallery to use Room,[],"Use [Room](https://developer.android.com/topic/libraries/architecture/room.html) for all internal database access across both Muzei and the Gallery art source.

This will allow us to decouple the external access through `MuzeiProvider` from the internal database implementation, giving needed flexibility. It also means we can use POJOs throughout the codebase, instead of relying strictly on a `Cursor`.

This also served as a good opportunity to clean up some ANRs due to accessing the database on the main thread."
romannurik/muzei,closed,Gradle 'muzei' project refresh failed: Error:This Gradle plugin requires Studio 3.0 minimum,[],"I pulled project and imported in Android Studio. Gradle sync processed but i'm getting following error :

```
Gradle 'muzei' project refresh failed: 
Error:This Gradle plugin requires Studio 3.0 minimum
```

but, my Android Studio Gradle settings used `Use default gradle wrapper`, and Service directory path have `gradle-4.1-rc-1-all` directory.

Android Studio version is 2.3.3.

help me, please! 
"
romannurik/muzei,closed,Fix Wearable crashes,[],"Wearable 2.0.4 is bad and should feel bad.

Exception java.lang.NoClassDefFoundError: Failed resolution of: Landroid/support/wearable/watchface/IWatchFaceService$Stub;
android.support.wearable.watchface.WatchFaceService$Engine.onSetBinder (WatchFaceService.java:459)
android.support.wearable.watchface.WatchFaceService$Engine.onCommand (WatchFaceService.java:426)
android.service.wallpaper.WallpaperService$Engine.doCommand (WallpaperService.java:977)
android.service.wallpaper.WallpaperService$IWallpaperEngineWrapper.executeMessage (WallpaperService.java:1191)
com.android.internal.os.HandlerCaller$MyHandler.handleMessage (HandlerCaller.java:37)
android.os.Handler.dispatchMessage (Handler.java:102)
android.os.Looper.loop (Looper.java:148)
android.app.ActivityThread.main (ActivityThread.java:5422)
java.lang.reflect.Method.invoke (Method.java)
com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run (ZygoteInit.java:726)
com.android.internal.os.ZygoteInit.main (ZygoteInit.java:616)

Caused by java.lang.ClassNotFoundException: Didn't find class ""android.support.wearable.watchface.IWatchFaceService$Stub"" on path: DexPathList[[zip file ""/system/framework/com.google.android.wearable.jar"", zip file ""/data/app/net.nurik.roman.muzei-1/base.apk""],nativeLibraryDirectories=[/data/app/net.nurik.roman.muzei-1/lib/arm, /vendor/lib, /system/lib]]
dalvik.system.BaseDexClassLoader.findClass (BaseDexClassLoader.java:56)
java.lang.ClassLoader.loadClass (ClassLoader.java:511)
java.lang.ClassLoader.loadClass (ClassLoader.java:469)
android.support.wearable.watchface.WatchFaceService$Engine.onSetBinder (WatchFaceService.java:459)
android.support.wearable.watchface.WatchFaceService$Engine.onCommand (WatchFaceService.java:426)
android.service.wallpaper.WallpaperService$Engine.doCommand (WallpaperService.java:977)
android.service.wallpaper.WallpaperService$IWallpaperEngineWrapper.executeMessage (WallpaperService.java:1191)
com.android.internal.os.HandlerCaller$MyHandler.handleMessage (HandlerCaller.java:37)
android.os.Handler.dispatchMessage (Handler.java:102)
android.os.Looper.loop (Looper.java:148)
android.app.ActivityThread.main (ActivityThread.java:5422)
java.lang.reflect.Method.invoke (Method.java)
com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run (ZygoteInit.java:726)
com.android.internal.os.ZygoteInit.main (ZygoteInit.java:616)"
romannurik/muzei,closed,Update version code for Muzei 2.3.3 RC 2,[],
romannurik/muzei,closed,Only disable plugins targeting API 26 on API 26+ devices,[],
romannurik/muzei,closed,Update version numbers for Muzei 2.3.3 RC 1,[],
romannurik/muzei,closed,Use a shared ViewModel+LiveData for Gallery Settings + Import Dialog,[],"Have the Import Photos dialog and the Gallery Settings Activity share
the same list of GET_CONTENT activities by moving the loading and
retrieval to a shared ViewModel.

Also fixes lingering Lint warnings in GallerySettingsActivity."
romannurik/muzei,closed,Update Gradle and Gradle Plugin for Studio 3.0 Beta 3,[],
romannurik/muzei,closed,Restrict writing to Muzei's Content Provider,[],
romannurik/muzei,closed,Update library versions,[],"- Lifecycle to 1.0.0-alpha9
- Google Play services to 11.2.0
- Wearable to 2.0.4

And switches us to use google() for the repository name and centralizes
all versions to the root build.gradle file."
romannurik/muzei,closed,Fix issues when sources target API 26,[],"The current Muzei API does not support targeting API 26 (on either Muzei
or the source's side). With source's potentially targeting API 26 without
testing their Muzei integrations, Muzei should defensively switch away
from those sources and warn users that they are unable to use that
source.

Does some minor Lint fixing of the SettingsChooseSourceFragment as well.

Caused by java.lang.IllegalStateException: Not allowed to start service Intent { act=com.google.android.apps.muzei.api.action.SUBSCRIBE cmp=com.backdrops.wallpapers/.muzei.ArtSource (has extras) }: app is in background uid null
android.app.ContextImpl.startServiceCommon (ContextImpl.java:1505)
android.app.ContextImpl.startService (ContextImpl.java:1461)
android.content.ContextWrapper.startService (ContextWrapper.java:644)
com.google.android.apps.muzei.SourceManager.unsubscribeToSelectedSource (SourceManager.java:273)
com.google.android.apps.muzei.SourceManager.unsubscribeToSelectedSource (SourceManager.java:93)
java.lang.reflect.Method.invoke (Method.java)
android.arch.lifecycle.ReflectiveGenericLifecycleObserver.invokeCallback (ReflectiveGenericLifecycleObserver.java:69)
android.arch.lifecycle.ReflectiveGenericLifecycleObserver.invokeMethodsForEvent (ReflectiveGenericLifecycleObserver.java:53)
android.arch.lifecycle.ReflectiveGenericLifecycleObserver.invokeCallbacks (ReflectiveGenericLifecycleObserver.java:60)
android.arch.lifecycle.ReflectiveGenericLifecycleObserver.onStateChanged (ReflectiveGenericLifecycleObserver.java:45)
android.arch.lifecycle.LifecycleRegistry$ObserverWithState.sync (LifecycleRegistry.java:209)
android.arch.lifecycle.LifecycleRegistry.handleLifecycleEvent (LifecycleRegistry.java:102)
com.google.android.apps.muzei.MuzeiWallpaperService.onDestroy (MuzeiWallpaperService.java:104)
android.app.ActivityThread.handleStopService (ActivityThread.java:3569)
android.app.ActivityThread.-wrap26 ()
android.app.ActivityThread$H.handleMessage (ActivityThread.java:1703)
android.os.Handler.dispatchMessage (Handler.java:105)
android.os.Looper.loop (Looper.java:164)
android.app.ActivityThread.main (ActivityThread.java:6541)
java.lang.reflect.Method.invoke (Method.java)
com.android.internal.os.Zygote$MethodAndArgsCaller.run (Zygote.java:240)
com.android.internal.os.ZygoteInit.main (ZygoteInit.java:767)"
romannurik/muzei,closed,Update Gradle Plugin for Android Studio 3.0 Beta 2,[],
romannurik/muzei,closed,Update Gradle Plugin for Android Studio 3.0 Beta 1,[],
romannurik/muzei,closed,Update Support Library to 26.0.1,[],"Fixes crashes when using FontCompat 26.0.0 as described in
https://developer.android.com/topic/libraries/support-library/revisions.html#26-0-1"
romannurik/muzei,closed,"Support ""android.resource"" type artwork",[],"Maybe someone(like me) want to develop a Muzei source that provide a set of images, we can let Muzei support the resources artwork.

With doing that, in `MuzeiArtSource.onUpdate`, we can publish an artwork with image uri in a format of `android.resource://<packageName>/<resourceType>/<resourceEntryName>` or `android.resource://<packageName>/<resourceId>`."
romannurik/muzei,closed,Update firebase-plugins to 1.1.1,[],Fixes https://issuetracker.google.com/issues/38419426
romannurik/muzei,closed,Stop dismissing 'Import photo from' dialog on rotations,[],@ianhanniballake could you review? I have run into this problem couple of times so I decided to fix it.
romannurik/muzei,closed,Android Wear 2.0 background issue,[],"I've noticed that when I have Muzei set up on my phone and watch, the wallpaper will change on my phone but not on the watch (I'm using the Asus Zenwatch 3). I've tried clearing the app data on the watch app, rebooting the watch, rebooting the phone as well as uninstalling and reinstalling the app on the watch all to no avail. Is there any way to fix this?"
romannurik/muzei,closed,Use a static Random for the Gallery,[],"Rather than create a new instance of Random every time a new photo needs to be chosen, use a static Random instance, mirroring the approach used by the Featured Art source."
romannurik/muzei,closed,Update Gradle plugin & Gradle version for Android Studio 3.0 Canary 9,[],
romannurik/muzei,closed,Update Google Play services to 11.0.4,[],
romannurik/muzei,closed,Update Lifecycle to 1.0.0-alpha7,[],
romannurik/muzei,closed,Application unexpectedly turns off from time to time.,[],"Hi. As mentioned in the title, Muzei just turns off from time to time. No crashing or otherwise strange behaviour.

Phone: Nexus 5X
System: 7.1.2"
romannurik/muzei,closed,Move inset of API 25 app shortcuts into the background itself,[],"Rather than rely on each shortcut to add the inset, bake it into the background drawable itself."
romannurik/muzei,closed,Fix size of Artwork Info app shortcut on API 26 devices,[],Use a single reusable foreground vector drawable for all API levels
romannurik/muzei,closed,Update Gradle plugin to 3.0.0-alpha8,[],For use with Android Studio 3.0 Canary 8
romannurik/muzei,closed,Update to Support Library 26.0.0,[],
romannurik/muzei,closed,Android studio 3.0 canary 7,[],
romannurik/muzei,closed,Update forces endless reboot,[],"Version from July 16 causes immediate reboot after update from Google Play. Long boot with ""optimizing apps"" process is followed by the same subsequent reboot.

Only solution is remove application using adb shell from recovery.

Affected phone is Google Galaxy Nexus with Cyanogenmod 12.1-20160719."
romannurik/muzei,closed,Update version code for Muzei 2.3.2 RC 3,[],"Update to avoid building against Canary 6

Avoid crashes due to AAPT and vector drawables crashing on API 19 devices.

Caused by android.content.res.Resources$NotFoundException: Resource ID #0x7f080058
android.content.res.Resources.getValue (Resources.java:1131)
android.support.v7.widget.AppCompatDrawableManager.loadDrawableFromDelegates (AppCompatDrawableManager.java:330)
android.support.v7.widget.AppCompatDrawableManager.getDrawable (AppCompatDrawableManager.java:195)
android.support.v7.widget.AppCompatDrawableManager.getDrawable (AppCompatDrawableManager.java:188)
android.support.v7.widget.AppCompatDrawableManager.checkVectorDrawableSetup (AppCompatDrawableManager.java:755)
android.support.v7.widget.AppCompatDrawableManager.getDrawable (AppCompatDrawableManager.java:193)
android.support.v7.widget.TintTypedArray.getDrawableIfKnown (TintTypedArray.java:88)
android.support.v7.app.AppCompatDelegateImplBase.<init> (AppCompatDelegateImplBase.java:128)
android.support.v7.app.AppCompatDelegateImplV9.<init> (AppCompatDelegateImplV9.java:149)
android.support.v7.app.AppCompatDelegateImplV11.<init> (AppCompatDelegateImplV11.java:29)
android.support.v7.app.AppCompatDelegateImplV14.<init> (AppCompatDelegateImplV14.java:54)
android.support.v7.app.AppCompatDelegate.create (AppCompatDelegate.java:202)
android.support.v7.app.AppCompatDelegate.create (AppCompatDelegate.java:183)
android.support.v7.app.AppCompatActivity.getDelegate (AppCompatActivity.java:520)
android.support.v7.app.AppCompatActivity.onCreate (AppCompatActivity.java:71)
com.google.android.apps.muzei.MuzeiActivity.onCreate (MuzeiActivity.java:44)
android.app.Activity.performCreate (Activity.java:5231)
android.app.Instrumentation.callActivityOnCreate (Instrumentation.java:1087)
android.app.ActivityThread.performLaunchActivity (ActivityThread.java:2201)
android.app.ActivityThread.handleLaunchActivity (ActivityThread.java:2286)
android.app.ActivityThread.access$800 (ActivityThread.java:144)
android.app.ActivityThread$H.handleMessage (ActivityThread.java:1246)
android.os.Handler.dispatchMessage (Handler.java:102)
android.os.Looper.loop (Looper.java:212)
android.app.ActivityThread.main (ActivityThread.java:5135)
java.lang.reflect.Method.invokeNative (Method.java)
java.lang.reflect.Method.invoke (Method.java:515)
com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run (ZygoteInit.java:877)
com.android.internal.os.ZygoteInit.main (ZygoteInit.java:693)
dalvik.system.NativeStart.main (NativeStart.java)"
romannurik/muzei,closed,Fix 2.3.2 rc1,[],"Fix issues discovered in Muzei 2.3.2 RC 1, update version code for RC 2"
romannurik/muzei,closed,Update version code for Muzei 2.3.2 RC,[],
romannurik/muzei,closed,Update to Lifecycle 1.0.0-alpha4,[],Remove no longer needed proguard rules
romannurik/muzei,closed,Update version code for Muzei 2.3.2 Beta 4,[],
romannurik/muzei,closed,Upgrade to okhttp 3.8.1,[],
romannurik/muzei,closed,Upgrade to Google Play services 11.0.2 and Plugin 3.1.0,[],
romannurik/muzei,closed,Better exception handling from ContentProviders,[],"Update the GalleryProvider and MuzeiProvider to better handle error cases without crashing Muzei. Namely, removing the use of SQLExceptions entirely and handling SecurityExceptions when fetching gallery image metadata."
romannurik/muzei,closed,Fix Gallery deletion/force logic for folders,[],"When forcing a folder, we should pick an image from that folder to force, rather than try to force the tree URI itself.

We now use the token of the artwork as the chosen photo URI: this allows us to correctly swap to another image when the folder is removed."
romannurik/muzei,closed,Fix 2.3.2 beta2,[],Fixes for Beta 2 in preparation for Beta 3
romannurik/muzei,closed,Improve integrations with the service's lifecycle,[],"- Fix a crash when disabling Muzei after a reboot on Android N+ devices
- Ensure that the notification stays in sync with Muzei and is only shown when Muzei is active
- Hide the 'Next' button from the widget when Muzei is not active"
romannurik/muzei,closed,7.1.2+ Storage permissions problem,[],"I am implementing a muzei plugin that creates and stores images locally inside Android/data/com.example.myplugin/files/images/ . It works perfectly on 5.0+ android versions but from 7.1.2+ onwards, while running the newest version of Muzei it doesn't have access to the Myplugin generated images anymore

With the last iteration of Muzei I've found out that the Muzei doesn't has permissions by default to the storage which gave me 2 options:

1) I created something similar to the setupActivity - GallerySetupActivity to check and give permissions but this unfortunately only gave permissions to Myplugin app, keeping Muzei with the Storage permission disabled

2) I created a FileProvider as per the android documentation ( on https://developer.android.com/training/secure-file-sharing/setup-sharing.html ) but it doesn't work because it's not exported=false:

```java
6-27 00:37:25.268 1580-1860/? W/ActivityManager: Permission Denial: opening provider android.support.v4.content.FileProvider from ProcessRecord{93cfe6b 19711:net.nurik.roman.muzei/u0a86} (pid=19711, uid=10086) that is not exported from UID 10091
06-27 00:37:25.269 19711-20218/? E/DownloadArtworkTask: Error downloading artwork
                                                        java.io.FileNotFoundException: No access to content://com.example.myplugin.fileprovider/mypluginimages/577fdc4c-30ac-4d71-931c-5c1068e8b46a.png: java.lang.SecurityException: Permission Denial: opening provider android.support.v4.content.FileProvider from ProcessRecord{93cfe6b 19711:net.nurik.roman.muzei/u0a86} (pid=19711, uid=10086) that is not exported from UID 10091
```

If I try to put the FileProvider with exported=true it doesn't work as well failing with the expected error of:

```java
Unable to get provider android.support.v4.content.FileProvider: java.lang.SecurityException: Provider must not be exported
```

My code for the point 2 of exported=false:
```java
var intent = Intent(Intent.ACTION_VIEW, Uri.parse(bg.uri)).addFlags(Intent.FLAG_GRANT_READ_URI_PERMISSION)
        publishArtwork(Artwork.Builder()
                .imageUri(Uri.parse(bg.uri))
                .title(bg.title)
                .byline(bg.byLine)
                .viewIntent(intent)
                .build())
```

Where bg.uri was saved to a Realm database like this:

```java
addBackground(imageName, ""Unknown Myplugin, c. 1984"", Date(), FileProvider.getUriForFile( context, ""com.example.myplugin.fileprovider"", file).toString(), forGallery)
```

Does anybody has a suggestion for sharing files between my plugin and Muzei or this is something that is not possible from this version onwards?"
romannurik/muzei,closed,Add long press on artwork to pin the widget on Android O devices,[],"Android O allows you to pin a widget from within your app. Let users long press the artwork detail screen to bring up the pin the widget screen on supported devices.

This is done asynchronously as to provide a realistic widget preview that includes the actual artwork being shown and whether or not the next artwork button is shown. This makes for a seamless transition when placing the preview on the home screen.

Understandably, putting this behind a long press does not necessarily help with discoverability, but the widget is definitely a very optional piece of Muzei. Future work should be done to find a more discoverable surface for this functionality."
romannurik/muzei,closed,Update dependency versions,[],
romannurik/muzei,closed,Remove reliance on implicit broadcast receivers in the manifest,[],Switch implicit broadcast receivers for widget updates and source package changes to LifecycleObservers that only run while the wallpaper is active.
romannurik/muzei,closed,Update Gradle Plugin and Gradle version for Android Studio 3.0 Canary 4,[],
romannurik/muzei,closed,Prevent the New Wallpaper notifications from showing a badge by default,[],"Users are very aware that their wallpaper changed (their background changed after all), so badging the Muzei app is unnecessary."
romannurik/muzei,closed,Ensure the Artwork Info Shortcut is updated,[],Need to actually register the ContentObserver.
romannurik/muzei,closed,Update version code for Muzei 2.3.2 Beta 2,[],
romannurik/muzei,closed,Ensure Muzei builds from the command line,[],"With the move to Android Studio 3.0 and the [new Android Plugin](https://developer.android.com/studio/preview/features/new-android-plugin.html), a number of [migration steps](https://developer.android.com/studio/preview/features/new-android-plugin-migration.html) were required to get Muzei building from the command line."
romannurik/muzei,closed,Use the Lifecycle Architecture Component in MuzeiWallpaperService,[],"Instead of having a large block of code in an `initialize()` block for `MuzeiWallpaperService` and a separate `activateWallpaper()` in `MuzeiWallpaperService.MuzeiWallpaperEngine`, take advantage of the [Lifecycle Architecture Component](https://developer.android.com/topic/libraries/architecture/lifecycle.html) to move each piece to separate `LifecycleObserver`s."
romannurik/muzei,closed,Improve Reliability of Featured Art and Gallery art sources,[],
romannurik/muzei,closed,Move fonts to res/font,[],"Convert both the main and Wear app to use [Fonts in XML](https://developer.android.com/preview/features/fonts-in-xml.html).

This includes moving the fonts to `res/font`, building a custom `<font-family>`, and using `ResourcesCompat.getFont()`."
romannurik/muzei,closed,Update notifications to use Notification Channels,[],As per https://developer.android.com/preview/features/notification-channels.html
romannurik/muzei,closed,Build Muzei in Android Studio 3.0 Canary 3,[],"With the move to use Android O APIs, Android Studio 3.0 Canary 3 should be used."
romannurik/muzei,closed,Ensure that the adaptive launcher icon is always v26+,[],"On Android Studio 3.0 Canary 2, aapt2 does not automatically put the adaptive icons in a v26 folder as per https://issuetracker.google.com/issues/62316340"
romannurik/muzei,closed,Convert the Artwork Info app shortcut to use an adaptive icon,[],
romannurik/muzei,closed,Update version name and codes for 2.3.2 Beta 1,[],
romannurik/muzei,closed,Crash fixes for Muzei 2.3.1,[],Fix a number of crashes in Muzei 2.3.1
romannurik/muzei,closed,"Compile with API 26, add an adaptive icon",[],"Add an adaptive icon version of Muzei's launcher icon based on the SVG
artwork of the existing launcher icon."
romannurik/muzei,closed,Gradle updates,[],"Update Gradle Plugin, Wearable Support Library, and remove no longer needed product flavors"
romannurik/muzei,closed,Allow Tasker to change the art source,[],Create another Tasker action that would allow it to change Muzei to another source
romannurik/muzei,closed,Bug or API change ?,[],"Just observed by luck a strange bug / behavior change (maybe 2 bugs if 1 is not normal too)

My app provides a Muzei provider still linked with muzei API 2.0

1) Muzei is no more the active wallpaper but Muzei still refresh it's wallpaper from my provider.

2) I was running a debug build of my app with disabled things at the time of the refresh. So the provider throws RetryException in onTryUpdate as the provider was not aware of that and the error should have been recoverable. And with Muzei 2.3.1 the retries where infinite every 10 seconds.

Previously the retry time would have been increasing and not hammering like that.

Is this a normal change tied to some API 2.3 change? Or a bug?"
romannurik/muzei,closed,Add Firebase Perf,[],Disables Firebase Perf in debug builds
romannurik/muzei,open,Create a Favorites art source,[],"Muzei should provide a 'Favorites' art source. Users would be able to favorite any artwork from other sources. These favorite images would be saved by Muzei without needing to manually download the image or worry about where it is stored.

Ideally, these favorite images could be associated with your Google account so when setting up a new device you'd have access to your old favorites just by logging in.

See discussion on [this Google+ post](https://plus.google.com/109038422348319759883/posts/bkQiZwQVRsy)."
romannurik/muzei,closed,Create a Single Image MuzeiArtSource,[],"Instead of having the `PhotoSetAsTargetActivity` use the Gallery art source, it should have its own 'Single Image' art source. This means that the image won't change if the user specifically sets it to that image.

It could also be used elsewhere in Muzei to decouple a specific image from the current art source's reloading schedule."
romannurik/muzei,closed,Add Complication Support to Muzei watch face,[],Use the [new complication tools](https://android-developers.googleblog.com/2017/05/android-wear-new-complications-tools.html) to add complication support to the Muzei watch face.
romannurik/muzei,closed,Update dependencies,[],Switch to Google's Maven Repository and Google Play services 10.2.6
romannurik/muzei,closed,Split MuzeiActivity into multiple fragments,[],"Rather than a monolithic MuzeiActivity, split its functionality into three fragments:
- IntroFragment which controls activating Muzei
- TutorialFragment providing a one time tutorial
- ArtDetailFragment as the main view"
romannurik/muzei,closed,Not using native resolution for wallpaper,[],"Hi,
i have a 720x1280 screen and 720x1280 wallpapers on the local storage.
Why does the app zoom into the picture instead of taking the whole picture for wallpaper?
The preview works well.

Android 7.1.2
Muzei 2.3"
romannurik/muzei,closed,Gallery: Always switch to the first added picture,[],"When you first select a photo in the 'My Photos' plugin's setting screen, it should auto-switch to that photo, rather than continuing to show a random photo."
romannurik/muzei,closed,Update version codes for Muzei 2.3.1 RC 3,[],
romannurik/muzei,closed,Remove overly chatty logging,[],Now just output a single line when artwork is removed from the cache
romannurik/muzei,closed,Update version for Muzei 2.3.1 RC 2,[],
romannurik/muzei,closed,Fix NPE when adding images from Document Tree URI,[],"We skip trees that error out.

Exception java.lang.NullPointerException: Attempt to get length of null array
android.os.Parcel.readException (Parcel.java:1690)
android.database.DatabaseUtils.readExceptionFromParcel (DatabaseUtils.java:183)
android.database.DatabaseUtils.readExceptionFromParcel (DatabaseUtils.java:135)
android.content.ContentProviderProxy.query (ContentProviderNative.java:421)
android.content.ContentResolver.query (ContentResolver.java:534)
android.content.ContentResolver.query (ContentResolver.java:475)
com.google.android.apps.muzei.gallery.GalleryArtSource.addAllImagesFromTree (GalleryArtSource.java:300)
com.google.android.apps.muzei.gallery.GalleryArtSource.publishNextArtwork (GalleryArtSource.java:193)
com.google.android.apps.muzei.gallery.GalleryArtSource.onUpdate (GalleryArtSource.java:157)
com.google.android.apps.muzei.api.MuzeiArtSource.processHandleCommand (MuzeiArtSource.java:784)
com.google.android.apps.muzei.api.MuzeiArtSource.onHandleIntent (MuzeiArtSource.java:690)
com.google.android.apps.muzei.gallery.GalleryArtSource.onHandleIntent (GalleryArtSource.java:141)
com.google.android.apps.muzei.api.MuzeiArtSource$ServiceHandler.handleMessage (MuzeiArtSource.java:311)
android.os.Handler.dispatchMessage (Handler.java:102)
android.os.Looper.loop (Looper.java:154)
android.os.HandlerThread.run (HandlerThread.java:61)"
romannurik/muzei,closed,Update version codes for Muzei 2.3.1 RC,[],
romannurik/muzei,closed,Replace deprecated ExifInterface.getLatLong(float[]),[],Use the new double[] getLatLong() method instead.
romannurik/muzei,closed,Catch NumberFormatException from ExifInterface,[],"Caused by java.lang.NumberFormatException: Invalid int: ""????""
java.lang.Integer.invalidInt (Integer.java:138)
java.lang.Integer.parse (Integer.java:410)
java.lang.Integer.parseInt (Integer.java:367)
java.lang.Integer.parseInt (Integer.java:334)
android.support.media.ExifInterface$ExifAttribute.getIntValue (ExifInterface.java:819)
android.support.media.ExifInterface.handleThumbnailFromJfif (ExifInterface.java:2869)
android.support.media.ExifInterface.setThumbnailData (ExifInterface.java:2841)
android.support.media.ExifInterface.loadAttributes (ExifInterface.java:1638)
android.support.media.ExifInterface.<init> (ExifInterface.java:1315)"
romannurik/muzei,closed,Android O: Remove dependency on manifest receivers for implicit broadcasts,[],Remove all dependencies on [implicit broadcasts to manifest receivers](https://developer.android.com/preview/features/background.html#broadcasts).
romannurik/muzei,closed,Android O: Update API to work well with Background Service Limitations,[],The current `MuzeiArtSource` API is `startService` based. It should be redesigned to work better with [Background Service Limitations](https://developer.android.com/preview/features/background.html#services) as well as Doze and App Standby.
romannurik/muzei,open,Android O: Comply with background execution limits,[],Android O introduces new [background execution limits](https://developer.android.com/preview/features/background.html). Muzei should move most of its processing entirely away from Services and use jobs when possible.
romannurik/muzei,open,Android O: Evaluate usage of Autosizing TextViews,[],Evaluate whether it makes sense to switch any of our `TextView`s to be [Autosizing TextViews](https://developer.android.com/preview/features/autosizing-textview.html) to handle differing amounts of text.
romannurik/muzei,open,Android O: Evaluate Content Provider Paging,[],[Content Provider paging](https://developer.android.com/about/versions/oreo/android-8.0.html#cpp) could prove useful to Muzei as it uses Content Providers extensively.
romannurik/muzei,closed,Android O: Pin widget from within Muzei,[],Muzei has a 'Next Artwork' widget - users should be able to [pin the widget](https://developer.android.com/preview/features/pinning-shortcuts-widgets.html#widgets) directly from within the Muzei UI.
romannurik/muzei,closed,Android O: Add an adaptive icon,[],[Adaptive Icons](https://developer.android.com/preview/features/adaptive-icons.html) ensures that the launcher icon is consistent across all apps. Muzei should update its launcher icon to be an adaptive icon.
romannurik/muzei,closed,Android O: Move fonts to XML,[],[Working with Fonts](https://developer.android.com/preview/features/fonts-in-xml.html) is considerably easier in Android O. Muzei should move its custom fonts to XML and create a font family.
romannurik/muzei,closed,Android O: Update notifications to use channels,[],[Notification channels](https://developer.android.com/preview/features/notification-channels.html) give users more control over a particular set of notifications. Muzei should have a notification channel for the 'New Artwork' notifications.
romannurik/muzei,closed,Update versions for Muzei 2.3.1 Beta 6,[],
romannurik/muzei,closed,Handle call() with persisted tree URIs,[],"Tree URIs without documents IDs don't correspond with individual artworks, so we can just ignore them.

Exception java.lang.IllegalArgumentException: Invalid URI: content://com.google.android.apps.muzei.documents/tree/by_date
android.provider.DocumentsContract.getDocumentId (DocumentsContract.java:917)
com.google.android.apps.muzei.provider.MuzeiDocumentsProvider.getArtworkUriForDocumentUri (MuzeiDocumentsProvider.java:132)
com.google.android.apps.muzei.provider.MuzeiDocumentsProvider.call (MuzeiDocumentsProvider.java:191)
android.content.ContentProvider$Transport.call (ContentProvider.java:404)
android.content.ContentResolver.call (ContentResolver.java:1449)
com.google.android.apps.muzei.gallery.GalleryProvider.deleteChosenPhotos (GalleryProvider.java:255)
com.google.android.apps.muzei.gallery.GalleryProvider.delete (GalleryProvider.java:204)
android.content.ContentProviderOperation.apply (ContentProviderOperation.java:311)
android.content.ContentProvider.applyBatch (ContentProvider.java:1785)
com.google.android.apps.muzei.gallery.GalleryProvider.applyBatch (GalleryProvider.java:168)
android.content.ContentProvider$Transport.applyBatch (ContentProvider.java:320)
android.content.ContentProviderClient.applyBatch (ContentProviderClient.java:438)
android.content.ContentResolver.applyBatch (ContentResolver.java:1319)
com.google.android.apps.muzei.gallery.GallerySettingsActivity$12$1.run (GallerySettingsActivity.java:531)
android.os.Handler.handleCallback (Handler.java:751)
android.os.Handler.dispatchMessage (Handler.java:95)
android.os.Looper.loop (Looper.java:154)
android.os.HandlerThread.run (HandlerThread.java:61)"
romannurik/muzei,closed,Add generic exception catching around manual persist permission calls,[],"ContentResolver.call() can fail in many unique ways if we accidentally call it on the wrong ContentProvider. Since it only matters if we're reading from MuzeiDocumentsProvider, we can safely ignore any exceptions that raise from attempting a call()."
romannurik/muzei,closed,Update version codes for Muzei 2.3.1 Beta 5,[],
romannurik/muzei,closed,"Minor version bump for Support Library, Google Play services, Wearable",[],"Upgrade:
- Support Library to 25.3.1
- Google Play services to 10.2.1
- Wearable Support Library to 2.0.1"
romannurik/muzei,closed,Fix PanView issues with zero size images,[],"Done in two parts: excluding images with a zero width or height and
ensuring that the scaled sizes are at least 1 pixel.

Exception java.lang.IllegalArgumentException: width and height must be > 0
android.graphics.Bitmap.createBitmap (Bitmap.java:877)
android.graphics.Bitmap.createBitmap (Bitmap.java:856)
android.graphics.Bitmap.createBitmap (Bitmap.java:787)
android.graphics.Bitmap.createScaledBitmap (Bitmap.java:663)
com.google.android.apps.muzei.util.PanView.updateScaledImage (PanView.java:145)
com.google.android.apps.muzei.util.PanView.setImage (PanView.java:123)
com.google.android.apps.muzei.FullScreenActivity.onLoadFinished (FullScreenActivity.java:211)
com.google.android.apps.muzei.FullScreenActivity.onLoadFinished (FullScreenActivity.java:51)
android.app.LoaderManagerImpl$LoaderInfo.callOnLoadFinished (LoaderManager.java:489)
android.app.LoaderManagerImpl$LoaderInfo.onLoadComplete (LoaderManager.java:457)
android.content.Loader.deliverResult (Loader.java:144)
android.content.AsyncTaskLoader.dispatchOnLoadComplete (AsyncTaskLoader.java:265)
android.content.AsyncTaskLoader$LoadTask.onPostExecute (AsyncTaskLoader.java:92)
android.os.AsyncTask.finish (AsyncTask.java:667)
android.os.AsyncTask.-wrap1 (AsyncTask.java)
android.os.AsyncTask$InternalHandler.handleMessage (AsyncTask.java:684)
android.os.Handler.dispatchMessage (Handler.java:102)
android.os.Looper.loop (Looper.java:154)
android.app.ActivityThread.main (ActivityThread.java:6119)
java.lang.reflect.Method.invoke (Method.java)
com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run (ZygoteInit.java:886)
com.android.internal.os.ZygoteInit.main (ZygoteInit.java:776)"
romannurik/muzei,closed,Replace moveSharedPreferencesFrom with our own preference migration,[],"moveSharedPreferencesFrom has the unfortunate side effect of requiring
users force stop Muzei (or reboot their device) after the migration
to get their user settings to work again. By moving to our own
migration strategy, we can ensure that upgrading users can instantly
use their current settings."
romannurik/muzei,closed,Limit the cache size to 10 images per source + persisted URIs,[],"Instead of infinitely storing all past artwork, Muzei should only
store the last 10 artwork from each source.

A special exception should be made for artwork that other apps have
persistent access to via the MuzeiDocumentsProvider - those artwork
should never be deleted. Due to how the persistent Uris work on API 25
and lower devices, the Gallery source must manually tell the
MuzeiDocumentsProvider that it is persisting/releasing each URI to avoid
those URIs from being deleted by the MuzeiProvider.

Fixes #383 "
romannurik/muzei,closed,Muzei keeps growing in storage space used,[],"Every artwork that is shown is stored by Muzei, leading to Muzei continuing to grow in storage space. Muzei should limit itself to not use so much storage space."
romannurik/muzei,closed,Obtain version name through BuildConfig,[],Simplifies the logic of obtaining the version name.
romannurik/muzei,closed,Upgrade to Gradle tools 2.3.1,[],
romannurik/muzei,closed,Fix blurring destination Allocation,[],"ImageBlurrer attempts to reuse an Allocation when the Bitmap used to create it was recycled (by MuzeiBlurRenderer). Creating an Allocation wraps the Bitmap, rather than creating a copy so we can create a new Allocation for each new destination Bitmap, preventing reuse abuse.

Moves the source Bitmap input to ImageBlurrer to the constructor to make it clear that there is always one source image (passing in a different image of a different size would have failed anyways). Also fixed an issue where the ScriptIntrinsicColorMatrix was not destroyed."
romannurik/muzei,closed,Support long aspect ratio devices,[],As per https://android-developers.googleblog.com/2017/03/update-your-app-to-take-advantage-of.html
romannurik/muzei,closed,per-page multi wallpaper,[],"Is it possible to apply a different wallpaper on different home screen pages?
(like [multipicture live wallpaper](https://play.google.com/store/apps/details?id=org.tamanegi.wallpaper.multipicture))"
romannurik/muzei,closed,Fix About Logo NPE,[],"Exception java.lang.NullPointerException:
com.google.android.apps.muzei.settings.AboutActivity$3.run (AboutActivity.java:118)
android.os.Handler.handleCallback (Handler.java:808)
android.os.Handler.dispatchMessage (Handler.java:103)
android.os.Looper.loop (Looper.java:193)
android.app.ActivityThread.main (ActivityThread.java:5322)
java.lang.reflect.Method.invokeNative (Method.java)
java.lang.reflect.Method.invoke (Method.java:515)
com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run (ZygoteInit.java:829)
com.android.internal.os.ZygoteInit.main (ZygoteInit.java:645)
dalvik.system.NativeStart.main (NativeStart.java)"
romannurik/muzei,closed,[Feature Request] Native Tasker Art Source Support,[],"Having Tasker ""Go To Next Artwork"" Plugin support in Beta 4 (d1c7b1f894e5e141d62984de6d903a808d1ff96d) is fantastic. It would be great if we could have full Tasker-as-an-Art-Source built-in natively!

Perhaps Muzei could check to see if Tasker is installed, and if it is, show Tasker as an art source option. Then you could have your Tasker task send over Image(s), Title(s), Subtitle(s), View URL(s), and the number of seconds you want Muzei to wait before going to the next image."
romannurik/muzei,closed,Update versions for Muzei 2.3 Beta 4,[],Main only push of Muzei 2.3 Beta 4 (Wear has not changed)
romannurik/muzei,closed,Gallery: Catch IllegalArgumentExceptions when attempting to open files,[],"Exception java.lang.IllegalArgumentException: can't open file: /storage/744C-65EA/Capas/Streets-wallpaper-10596780.jpg
android.database.DatabaseUtils.readExceptionFromParcel (DatabaseUtils.java:165)
android.database.DatabaseUtils.readExceptionWithFileNotFoundExceptionFromParcel (DatabaseUtils.java:146)
android.content.ContentProviderProxy.openTypedAssetFile (ContentProviderNative.java:692)
android.content.ContentResolver.openTypedAssetFileDescriptor (ContentResolver.java:1107)
android.content.ContentResolver.openAssetFileDescriptor (ContentResolver.java:944)
android.content.ContentResolver.openFileDescriptor (ContentResolver.java:797)
android.content.ContentResolver.openFileDescriptor (ContentResolver.java:751)
com.google.android.apps.muzei.gallery.GalleryProvider.openFileChosenPhoto (GalleryProvider.java:514)
com.google.android.apps.muzei.gallery.GalleryProvider.openFile (GalleryProvider.java:489)
android.content.ContentProvider.openAssetFile (ContentProvider.java:1374)
android.content.ContentProvider.openTypedAssetFile (ContentProvider.java:1554)
android.content.ContentProvider.openTypedAssetFile (ContentProvider.java:1620)
android.content.ContentProvider$Transport.openTypedAssetFile (ContentProvider.java:419)
android.content.ContentResolver.openTypedAssetFileDescriptor (ContentResolver.java:1107)
android.content.ContentResolver.openAssetFileDescriptor (ContentResolver.java:944)
android.content.ContentResolver.openInputStream (ContentResolver.java:664)
com.google.android.apps.muzei.gallery.GalleryArtSource.ensureMetadataExists (GalleryArtSource.java:400)
com.google.android.apps.muzei.gallery.GalleryArtSource.publishNextArtwork (GalleryArtSource.java:250)
com.google.android.apps.muzei.gallery.GalleryArtSource.onHandleIntent (GalleryArtSource.java:148)
com.google.android.apps.muzei.api.MuzeiArtSource$ServiceHandler.handleMessage (MuzeiArtSource.java:292)
android.os.Handler.dispatchMessage (Handler.java:102)
android.os.Looper.loop (Looper.java:148)
android.os.HandlerThread.run (HandlerThread.java:61)"
romannurik/muzei,closed,Gallery: Hide GET_CONTENT activities that aren't exported/don't have permission,[],"Exception java.lang.SecurityException: Permission Denial: starting Intent { act=android.intent.action.GET_CONTENT cat=[android.intent.category.OPENABLE] typ=image/* cmp=com.lostpixels.fieldservice/com.ipaulpro.afilechooser.FileChooserActivity (has extras) } from ProcessRecord{95a0d2c 17019:net.nurik.roman.muzei/u0a160} (pid=17019, uid=10160) not exported from uid 10118
android.os.Parcel.readException (Parcel.java:1620)
android.os.Parcel.readException (Parcel.java:1573)
android.app.ActivityManagerProxy.startActivity (ActivityManagerNative.java:2707)
android.app.Instrumentation.execStartActivity (Instrumentation.java:1574)
android.app.Activity.startActivityForResult (Activity.java:3933)
android.support.v4.app.BaseFragmentActivityJB.startActivityForResult (BaseFragmentActivityJB.java:50)
android.support.v4.app.FragmentActivity.startActivityForResult (FragmentActivity.java:79)
android.app.Activity.startActivityForResult (Activity.java:3894)
android.support.v4.app.FragmentActivity.startActivityForResult (FragmentActivity.java:859)
com.google.android.apps.muzei.gallery.GallerySettingsActivity.requestGetContent (GallerySettingsActivity.java:427)
com.google.android.apps.muzei.gallery.GallerySettingsActivity.access$700 (GallerySettingsActivity.java:96)
com.google.android.apps.muzei.gallery.GallerySettingsActivity$9.onClick (GallerySettingsActivity.java:402)
android.support.v7.app.AlertController$AlertParams$3.onItemClick (AlertController.java:1045)
android.widget.AdapterView.performItemClick (AdapterView.java:310)
android.widget.AbsListView.performItemClick (AbsListView.java:1145)
android.widget.AbsListView$PerformClick.run (AbsListView.java:3073)
android.widget.AbsListView$3.run (AbsListView.java:3910)
android.os.Handler.handleCallback (Handler.java:746)
android.os.Handler.dispatchMessage (Handler.java:95)
android.os.Looper.loop (Looper.java:148)
android.app.ActivityThread.main (ActivityThread.java:5443)
java.lang.reflect.Method.invoke (Method.java)
com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run (ZygoteInit.java:728)
com.android.internal.os.ZygoteInit.main (ZygoteInit.java:618)"
romannurik/muzei,closed,Upgrade Support Library to 25.3.0,[],
romannurik/muzei,closed,Adds a Tasker plugin to trigger the 'Next Artwork' action,[],As per the Tasker documentation: http://www.twofortyfouram.com/developer
romannurik/muzei,closed,Move AsyncTasks to proper Executors,[],Ensure that multiple AsyncTasks can run concurrently
romannurik/muzei,closed,v2.3 missing in F-Droid Store,[],"When I take a look in the playstore I notice, that ""Muzei's"" current version is v2.3. In the F-Droid store the current version is v1.0.1.

What's the reason for the different versions? Is this Github-project still alive?

Kind Regards,

Krawei"
romannurik/muzei,open,"Make the Muzei blur, dim, etc part of a larger effects system",[],"It would be convenient to allow developers to ship separate effects that would plug into Muzei. For example, this would allow effects like the [live rain wallpaper](https://play.google.com/store/apps/details?id=com.andrewou.weatherback) to be used alongside Muzei's art plugin system."
romannurik/muzei,open,Allow users to select multiple active sources,[],"Similar to how [Multimuze](https://play.google.com/store/apps/details?id=com.getgoodcode.multimuze) works, it would be nice to be able to select multiple sources at the same time, rotating between them at some set amount of time or on a schedule, etc."
romannurik/muzei,open,Add a percent indicator for dim/blur/grey when adjusting,[],Fine tuning the exact dim/blur/grey setting would be a lot easier if there was an indicator of the exact value/percent currently being adjusted.
romannurik/muzei,closed,Update version codes for Muzei 2.3.1 Beta 3,[],
romannurik/muzei,closed,Use getCallingPackage() for MuzeiProvider permission checks,[],
romannurik/muzei,closed,"Move API versioning to version.properties, switch to integer",[],Use a separate API code for injecting into the API manifest metadata element.
romannurik/muzei,closed,Fix crash on zero size Bitmaps in GLPictureSet.load,[],"Exception java.lang.IllegalArgumentException: width must be > 0
android.graphics.Bitmap.checkWidthHeight (Bitmap.java:378)
android.graphics.Bitmap.createBitmap (Bitmap.java:684)
android.graphics.Bitmap.createScaledBitmap (Bitmap.java:615)
com.google.android.apps.muzei.render.MuzeiBlurRenderer$GLPictureSet.load (MuzeiBlurRenderer.java:378)
com.google.android.apps.muzei.render.MuzeiBlurRenderer.setAndConsumeBitmapRegionLoader (MuzeiBlurRenderer.java:262)
com.google.android.apps.muzei.render.MuzeiBlurRenderer.onSurfaceCreated (MuzeiBlurRenderer.java:169)
net.rbgrn.android.glwallpaperservice.GLThread.guardedRun (GLWallpaperService.java:662)
net.rbgrn.android.glwallpaperservice.GLThread.run (GLWallpaperService.java:536)

Exception java.lang.IllegalArgumentException: width must be > 0
android.graphics.Bitmap.nativeCreateScaledBitmap (Bitmap.java)
android.graphics.Bitmap.createScaledBitmap (Bitmap.java:932)
com.google.android.apps.muzei.render.MuzeiBlurRenderer$GLPictureSet.load (MuzeiBlurRenderer.java:378)
com.google.android.apps.muzei.render.MuzeiBlurRenderer.setAndConsumeBitmapRegionLoader (MuzeiBlurRenderer.java:262)
com.google.android.apps.muzei.render.MuzeiBlurRenderer.onSurfaceCreated (MuzeiBlurRenderer.java:169)
net.rbgrn.android.glwallpaperservice.GLThread.guardedRun (GLWallpaperService.java:662)
net.rbgrn.android.glwallpaperservice.GLThread.run (GLWallpaperService.java:536)"
romannurik/muzei,closed,Fix null Uri passed to GallerySettingsActivity,[],"Exception java.lang.NullPointerException: Attempt to invoke virtual method 'java.lang.String android.net.Uri.toString()' on a null object reference
com.google.android.apps.muzei.gallery.GallerySettingsActivity$19.run (GallerySettingsActivity.java:1042)
android.os.Handler.handleCallback (Handler.java:739)
android.os.Handler.dispatchMessage (Handler.java:95)
android.os.Looper.loop (Looper.java:148)
android.os.HandlerThread.run (HandlerThread.java:61)"
romannurik/muzei,closed,Improve build speeds,[],"Add dexOptions.preDexLibraries true and use resConfigs ""en"" for the dev product flavor."
romannurik/muzei,closed,Update to com.android.tools.build:gradle:2.3.0,[],
romannurik/muzei,closed,Add buttons to get the app,[],Buttons with links to F-Droid and Google Play Store
romannurik/muzei,closed,Handle widgets of width and height of zero pixels,[],"Why a widget would be zero pixels in width and height, I don't know, but we shouldn't generate a scaled Bitmap in those cases.

Caused by java.lang.IllegalArgumentException: width and height must be > 0
android.graphics.Bitmap.createBitmap (Bitmap.java:829)
android.graphics.Bitmap.createBitmap (Bitmap.java:808)
android.graphics.Bitmap.createBitmap (Bitmap.java:739)
android.graphics.Bitmap.createScaledBitmap (Bitmap.java:615)
com.google.android.apps.muzei.widget.AppWidgetUpdateTask.scaleBitmap (AppWidgetUpdateTask.java:171)
com.google.android.apps.muzei.widget.AppWidgetUpdateTask.doInBackground (AppWidgetUpdateTask.java:131)
com.google.android.apps.muzei.widget.AppWidgetUpdateTask.doInBackground (AppWidgetUpdateTask.java:52)
android.os.AsyncTask$2.call (AsyncTask.java:295)
java.util.concurrent.FutureTask.run (FutureTask.java:237)
android.os.AsyncTask$SerialExecutor$1.run (AsyncTask.java:234)
java.util.concurrent.ThreadPoolExecutor.runWorker (ThreadPoolExecutor.java:1113)
java.util.concurrent.ThreadPoolExecutor$Worker.run (ThreadPoolExecutor.java:588)
java.lang.Thread.run (Thread.java:818)"
romannurik/muzei,closed,Fix NextArtworkActivity so that it works correctly,[],It needs to be exported so that third party launchers can access it. excludeFromRecents and a separate taskAffinity ensure that it is not added to Muzei's task.
romannurik/muzei,closed,Update versions for Muzei 2.3.1 Beta 2,[],
romannurik/muzei,closed,Remove pending job check from complication scheduling,[],"When calling scheduleComplicationUpdateJob from within onStartJob, the job is still marked as pending. This meant that the pending job check made it so that the job was only scheduled once, rather than repeatedly every time the job is started. As JobScheduler automatically replaces pending jobs with the newly scheduled job, there's no downside to scheduling it every time."
romannurik/muzei,closed,"Convert API module to Android Library, prepare for release",[],"- Converts the API module to an Android Library (and hence, an AAR)
- Embeds the Muzei API version and the new WRITE_PROVIDER permission in the manifest via manifest merging
- Transition much of the Javadoc generation code to Gradle itself, removing the requirement to run a shell script
- Add Support Library Annotations where appropriate
- Fix Lint warnings and errors
- Fix all Javadoc warnings and errors
- Update the API version to 2.3 to match the Muzei app's version."
romannurik/muzei,closed,Upgrade to the official 2.0.0 Wearable Support Library,[],
romannurik/muzei,closed,Adds a 'Next Artwork' activity usable by third party launchers,[],"Activity is hidden from normal users, but users of launchers such as Nova Launcher can use this activity in gestures to trigger the 'Next Artwork' action."
romannurik/muzei,closed,Avoid scaling an image for the widget with a height/width of 0,[],
romannurik/muzei,closed,Pre-scale widget images to avoid exceeding the maximum bitmap memory usage,[],
romannurik/muzei,closed,Update version numbers for Muzei 2.3.1 Beta 1,[],
romannurik/muzei,closed,Add an app widget with a next artwork action,[],Incorporates the example-contract-widget directly into Muzei and adds support for the 'Next artwork' action directly from the widget.
romannurik/muzei,closed,Prevent ConcurrentModificationException when using GalleryProvider,[],"Exception java.util.ConcurrentModificationException:
java.util.LinkedHashMap$LinkedHashIterator.remove (LinkedHashMap.java:356)
com.google.android.apps.muzei.gallery.GalleryProvider.applyBatch (GalleryProvider.java:178)
android.content.ContentProvider$Transport.applyBatch (ContentProvider.java:315)
android.content.ContentProviderClient.applyBatch (ContentProviderClient.java:419)
android.content.ContentResolver.applyBatch (ContentResolver.java:1286)
com.google.android.apps.muzei.gallery.GallerySettingsActivity$19.run (GallerySettingsActivity.java:1047)
android.os.Handler.handleCallback (Handler.java:739)
android.os.Handler.dispatchMessage (Handler.java:95)
android.os.Looper.loop (Looper.java:148)
android.os.HandlerThread.run (HandlerThread.java:61)"
romannurik/muzei,closed,Restrict bundling Wear apps to the prod productFlavor,[],"As we both product flavors and build types, required the workaround mentioned in here to add a configurations block: https://code.google.com/p/android/issues/detail?id=74658#c43"
romannurik/muzei,closed,Add additional debug logging around artwork complications,[],
romannurik/muzei,closed,Update Support Library and Okhttp dependencies,[],
romannurik/muzei,closed,Release the minor changes in the API with a minor version increase?,[],"I know that you guys are planning to have much more improvement on the API side. But until then, what about releasing the current state with a minor version increase?

I'm particularly looking into `attribute` field in the `Artwork` class. That would be really handy."
romannurik/muzei,closed,Improve ambiguous logging messages,[],
romannurik/muzei,closed,Artwork downloads should only be rescheduled for not roaming networks,[],"On API 24+ devices, we should only re-attempt to download art when the device is not roaming."
romannurik/muzei,closed,Fix complications not updating when there are multiple complications,[],"

Instead of checking for the count in the ProviderService, check for the existence of a pending job in the JobService. This is more resilient to failures as it keeps the logic on the JobScheduler side rather than trying to track if the job is scheduled separately."
romannurik/muzei,closed,Update tools plugin to 2.3.0-rc1 for Android Studio 2.3 RC 1 support,[],
romannurik/muzei,closed,Fix accidental duration increase in AboutActivity animation,[],
romannurik/muzei,closed,Fix crashes found in Muzei 2.3,[],Fix all outstanding crashes reported in Muzei 2.3
romannurik/muzei,open,Muzei should tell you if your selected source was removed,[],"When the selected source is removed, Muzei defaults back to the Featured Art source. It would be nice if Muzei told you this happened to prevent user confusion.

This might be an appropriate snackbar for the Source settings screen as then it would be a contextual note of what happened since the last time you visited the settings screen."
romannurik/muzei,closed,Upgrade to Google Play services 10.2,[],
romannurik/muzei,closed,PhotoSetAsTargetActivity does not work with Backdrops,"[Label(name=""bug"")]","PhotoSetAsTargetActivity should work properly with any given URI, persisting access to the underlying photo and then properly setting it as the background."
romannurik/muzei,closed,Support for HTTPS TLS connections on older devices,[],"Devices with SDK version between 16 and 20 (and even some on 21) support TLS but TLS is not enabled by default.
Many websites are switching to HTTPS requiring the use of TLS (i.e. NASA sites)

This patch adds a factory for creating OkHttpClient with TLS enabled on those SDK versions.
It then modifies DownloadArtTask so it uses that factory.

Without this patch Muzei fails to download images from those websites on those devices because with TLS disabled the SSL handshake fails.

Background:
For example it fails to download images using my muzei source that fetches images from the NASA / SDO project website that switched to TLS at the end of 2016.
https://github.com/marcopar/SDOViewer
It is possible to reproduce the problem running Muzei and my source on a API19 emulator instance.

This patch has been built following the indications on this OkHttp tracker:
https://github.com/square/okhttp/issues/2372
As you can see the issue is referred by several other trackers recognizing the problem.


"
romannurik/muzei,closed,Artwork not synchronized with date change,[],"Since there is one wallpaper per day, the artwork should be changing at midnight. However, my artwork changes are not synced with my local date change, presumably they are changing at midnight UTC because I live on the west coast of North America.

I'm running android 5.1, if that is relevant.
"
romannurik/muzei,closed,Update version code for potential final build of Muzei 2.3,[],
romannurik/muzei,closed,Only animate settings cog when the visibility is changing,[],Fixes #310 
romannurik/muzei,closed,"Improve complications: long text, small image, system health",[],Support additional complication types (`LONG_TEXT` and `SMALL_IMAGE`) and only enable the boot complete receiver if needed to reduce memory pressure if no Muzei complications are used.
romannurik/muzei,closed,Upgrade to Support Library 25.1.1,[],
romannurik/muzei,closed,"Reduce memory usage, fix activity leak",[],"Reduces the amount of memory needed by Muzei by
- Fixing a leak of `MuzeiActivity` (the main activity)
- Correctly destroying the `GLPicture`s by ensuring the `MuzeiBlurRenderer`'s `destroy()` method is called before the `GLThread` is finished
- Reducing the number of blur keyframes from 5 to 2 on non-low-RAM devices (reducing the number of pre-computed `GLPicture` instances)

Helps considerably with #31 although the `MuzeiWallpaperService` should be moved to its own process to provide the best memory savings (allowing the rest of the process to be completely removed from memory)."
romannurik/muzei,closed,Handle StackOverflowErrors associated with ExifInterface,[],"android.support.media.ExifInterface.readImageFileDirectory (ExifInterface.java:2618)
android.support.media.ExifInterface.readImageFileDirectory (ExifInterface.java:2795)
android.support.media.ExifInterface.readImageFileDirectory (ExifInterface.java:2795)
android.support.media.ExifInterface.readImageFileDirectory (ExifInterface.java:2795)"
romannurik/muzei,closed,Harden notifications migration to device protected storage,[],Ensure that only one migration is happening simultaneously.
romannurik/muzei,closed,Disable Firebase Analytics on debug builds,[],
romannurik/muzei,closed,Upgrade to tools 2.3.0-beta3 and re-enable build cache,[],2.3.0-beta3 fixes https://code.google.com/p/android/issues/detail?id=229171 which allows us to re-enable using the build cache
romannurik/muzei,closed,"Correct notifications, Wearable Support Library",[],"Fixes issue where the notification setting was not actually being used, upgrades to Wearable Support Library 2.0.0-beta2 which is the stable version appropriate for pushing to production."
romannurik/muzei,closed,Dim/blur/grey settings not applying on user change in settings,[],"On my Pixel running 7.1.1, using Beta 7, dragging any of the sliders in advanced settings doesn't seem to take any effect ðŸ˜•"
romannurik/muzei,closed,Prepare for the Beta 7 Release,[],Updates the version code for Beta 7 and sets the Wear app's [standalone flag](https://developer.android.com/wear/preview/features/app-distribution.html#specifying-app-as-standalone) to false as Muzei's Wear app still requires the phone app to load artwork.
romannurik/muzei,closed,Use image URI and token for notification dismissal,[],"Instead of only using the ID, also use the image URI and token if available. This prevents cases where the source republishes the same artwork again (causing a new ID, but the same image URI/token) and bothering the user with yet another notification that they already dismissed"
romannurik/muzei,closed,Open up write API to external apps,[],"Allow third party apps to directly write source information updates and artwork into Muzei's `ContentProvider` from outside of their `MuzeiArtSource`. This means the `com.google.android.apps.muzei.WRITE_PROVIDER` permission is no longer a `signature` permission and third party apps can add it to their manifest and that the `MuzeiProvider` is completely hardened to only allow valid API usage.

Two new helper methods were created to facilitate this:
- `MuzeiContract.Artwork.createArtwork()` which returns a `Builder` you can use the `publish()` artwork. Unlike the previous API which had Muzei loading a URI, this API loads URIs on the source side and also supports directly publishing a `Bitmap` or from any `InputStream`.
- `MuzeiContract.Sources.updateSource()` which returns a `Builder` you can use to `send()` updated source information

This does not yet fully replace the `MuzeiArtSource` structure - each artwork is still associated with a `MuzeiArtSource`. However, this does allow developers to move away from using `scheduleUpdate` (as it is alarm based and cannot take into account network connectivity) and instead schedule jobs and write artwork directly in their `JobService`.

Example workflow that works with this structure:
- In `onEnabled()`, schedule a repeated job to reload artwork
- In `onUpdate()` with `UPDATE_REASON_USER_NEXT`, immediately load new artwork
- In `onDisabled()`, cancel your repeated job

Note that while these APIs do support writing to multiple `ContentProvider`s via their `contentAuthorities()` methods, the correct set of content authorities are not yet passed to the `MuzeiArtSource`, effectively meaning that these APIs only support updating `Muzei` itself."
romannurik/muzei,closed,Direct boot improvements,[],"Improve support for Direct Boot by:
- Adding a 15 second delay in caching artwork in device protected storage to avoid thrashing when the user is quickly going through artwork
- Rescheduling the Direct Boot caching job so that it runs after every change and not just the first one after boot
- Respect the user's blur, dim, and grey settings in Direct Boot
- Respect the 'Apply blur on lockscreen' setting in Direct Boot"
romannurik/muzei,closed,"Update to Gradle 3.3 stable, Tools 2.3.0-beta2, disable build cache",[],"Updates to Gradle 3.3 and Tools 2.3.0-beta2 to support development in Android Studio 2.3 Beta 2.

Disables the build cache due to https://code.google.com/p/android/issues/detail?id=229171"
romannurik/muzei,closed,"2.3 Beta6: Fix FileUriExposedException, Gallery Permissions",[],"Fixes crashes found in Muzei 2.3 Beta 6:

- Remove invalid artwork View Intents (invalid URIs and file:// URIs)
- Issues persisting permissions for selected Gallery art (causing photo removals, crashes, and artwork info issues)"
romannurik/muzei,closed,"Update Tools Plugin to 2.3.0-beta1, Gradle to 3.2.1",[],
romannurik/muzei,closed,Short flicker of lock screen overlay when unlocking phone with muzei set as home AND lock screen,[],"Hello,

This is my first time using Github, so not sure if this is the correct place to ask about this, but I can't seem to find anyone else having this issue, so I thought I would make a post about it. 

I just downloaded muzei, and I love it so far! However, I've noticed a small and slightly aggravating flicker every time i unlock my phone. 

The lock screen overlay seems to hang around for a bit when unlocking the phone, but only if muzei is set as the lock screen and the home screen wallpaper. 

FYI: I'm using a galaxy s7 with action launcher 3. (note that the same thing happens when using touchwiz as my launcher)

Here is a gif of the unlock animation using the default samsung lock screen:

![videotogif_2017 01 03_14 16 45 1](https://cloud.githubusercontent.com/assets/24900126/21619975/147e0250-d1c0-11e6-8806-46188d7ca652.gif)




And here is the unlock animation using muzei as the lock and home screen wallpaper. I've tried messing around with a bunch of different settings, but this delay on the lock screen icons happens every time.


![videotogif_2017 01 03_14 18 29 1](https://cloud.githubusercontent.com/assets/24900126/21619971/0b93efb0-d1c0-11e6-9331-d75f71badead.gif)

Thanks for the great app!




"
romannurik/muzei,closed,Muzei Force closes on Android 7.1.1 on activating the Autotools source,[],On my Galaxy S5 running CM 7.1.1 Muzei force closes on activating the Autotools source. I need to clear the Muzei data before the app is accessible again. Do you have any suggestions?
romannurik/muzei,closed,Brief flicker of settings cog when changing from the featured art source to the gallery source,[],"When switching sources, the settings cog sometimes flickers:

![change-sources-flicker](https://cloud.githubusercontent.com/assets/100155/21428648/23428072-c829-11e6-8f5a-1376de28fb0d.gif)

This doesn't occur when changing from Gallery to Featured Art, but does occur vice versa."
romannurik/muzei,closed,Artwork info when importing from Photos doesn't seem to work,[],"Pressing ""Touch to view"" (artwork info) shows a black screen; seemingly the Photos app can't render content:// URLs? Perhaps the view intent should refer back to the original, or just not have a view intent while this is broken :-/"
romannurik/muzei,closed,Catch FileUriExposedExceptions when starting view intents,[],"With Muzei targeting API 24 now, we cannot use startActivity with Intents that include file:// URIs. Unfortunately, at least one extension sends such view intents. We now catch those errors."
romannurik/muzei,closed,Disable Crash Reporting on debug Wear builds,[],"Similar to the main app, only enable Crash Reporting on prod builds, ensuring that the Crash Reporting console reflects only issues from real users."
romannurik/muzei,closed,Use try-with-resources when possible,[],"With a minSdkVersion of 19, we can use try-with-resources to automatically close Cursors, InputStreams, and OutputStreams instead of needing finally blocks."
romannurik/muzei,closed,Fix GallerySettingsCrash when attempting animation of a detached view,[],"java.lang.IllegalStateException: Cannot start this animator on a detached view!
	at android.view.RenderNode.addAnimator(RenderNode.java:812)
	at android.view.RenderNodeAnimator.setTarget(RenderNodeAnimator.java:300)
	at android.view.RenderNodeAnimator.setTarget(RenderNodeAnimator.java:282)
	at android.animation.RevealAnimator.<init>(RevealAnimator.java:37)
	at android.view.ViewAnimationUtils.createCircularReveal(ViewAnimationUtils.java:55)
	at com.google.android.apps.muzei.gallery.GallerySettingsActivity$18$3.run(GallerySettingsActivity.java:896)

Caused by attempting to create a circular reveal on a detached view. Simple enough to not run the animation if the view is detached."
romannurik/muzei,closed,Fix MuzeiRendererFragment crash on low memory devices,[],"Exception java.lang.IllegalStateException: Immutable bitmap passed to Canvas constructor
android.graphics.Canvas.<init> (Canvas.java:150)
com.google.android.apps.muzei.render.MuzeiRendererFragment$1.onBitmapLoaded (MuzeiRendererFragment.java:116)

Caused by creating an immutable Bitmap when blurring. Turns out, there's no benefit from making the Bitmap immutable so making it mutable fixes the problem."
romannurik/muzei,closed,Switch to framework Renderscript,[],"Since increasing the minSdkVersion, we can now use the framework Renderscript. This should ensure better compatibility, less crashes, and also gives us a much smaller overall APK since we no longer need the Renderscript Support Library's native libraries.

Removed ABI split code as it is no longer necessary."
romannurik/muzei,closed,Increment version codes for Muzei 2.3 Beta 5,[],
romannurik/muzei,closed,Upgrade to latest versions of everything,[],"Upgrade to
- Support Library 25.1.0 (implement ExifInterface Support Library)
- Wearable Support Library 2.0.0-beta1 (implement open Play Store on phone action)
- Build tools 25.0.2
- okhttp 3.5.0
- Google Play services/Firebase 10.0.1 (Firebase Crash reporting out of beta!)
- targetSdkVersion to 25 (remove resizing of MuzeiActivity, add wallpaper.info context fields)"
romannurik/muzei,closed,Add initial support for Direct Boot,[],"Allows Muzei wallpapers to appear while the device is in Direct Boot mode (i.e., before the user has unlocked the device).

Currently this does not take into account user preferences for blurring, dimming, or lock screen specific behavior.

It also assumes that only reading the image is done while in Direct Boot mode. No support for inserts, updates, deletes, or queries until the user is unlocked."
romannurik/muzei,closed,Fix crash issues with Beta 4,[],"Fix two additional crash issues found in Beta 4:
- Concurrent modification exceptions when applying batch operations
- Uri.parse failing when unmarshalling an Artwork object out of a Cursor"
romannurik/muzei,closed,Harden the MuzeiProvider against incorrect data/invalid usage,[],"Ensure that every artwork insert, source insert, and source update is valid."
romannurik/muzei,closed,Remove unnecessary API version checks,[],"Now that the minSdkVersion of Muzei is KitKat, we can remove compat calls and version checks that no longer apply"
romannurik/muzei,closed,French translation for the main app,[],
romannurik/muzei,closed,Disable Firebase Crash Reporting on Dev Builds,[],"To prevent cluttering the Firebase Console with crashes for development builds, move the firebase-crash dependency to the ""prod"" product flavor. This allows us to still build prodDebug builds to test firebase-crash, but allows developers to continue to use devDebug and not bother others with crashes."
romannurik/muzei,closed,Fix 2.3 beta 4 crashes part 2,[],"Fixes a number of issues
- User property value lengths (actually need to be capped at 36 characters)
- Properly selecting sources
- ExifInterface crashes
- Empty directories for the Gallery extension
- Synchronization issues with SourceState"
romannurik/muzei,closed,"Upgrade to Gradle Plugin 2.3.0-alpha1, Support Library 25.0.1",[],
romannurik/muzei,closed,Use OnSharedPreferenceChangeListener for Blur/Dim/Grey,[],"Since we are already persisting Blur/Dim/Grey changes to SharedPreferences, we can use an OnSharedPreferenceChangeListener instead of EventBus."
romannurik/muzei,closed,Remove the SourceManager Singleton,[],"Instead of having a SourceManager singleton managing some shared state, replace it with just a few static methods that get their information from the source of truth: the Sources table in the MuzeiProvider.

This also ensures that we don't have a singleton referencing the application context (which causes issues with Instant Run)."
romannurik/muzei,closed,"Add analogue watchface, and date on/off option",[],"As in the title, an analogue option with an option to turn the date on/off would be nice."
romannurik/muzei,closed,Re-add support for rotated images,[],"Ensure Muzei wallpapers and Wear display images with the correct rotation based on Exif data.

Has the unfortunate side effect for requiring a temporary file prior to Android 7.0 due to ExifInterface only supporting files on earlier versions of Android, but the speed difference is neglibile."
romannurik/muzei,closed,Fix issues found in Muzei 2.3 Beta 4,[],"Fix crashes and edge cases exposed in Muzei 2.3 Beta 4
- Don't try to migrate data from no longer valid sources from SharedPreferences to MuzeiProvider
- Don't throw `IllegalStateException`s from GalleryProvider since callers are not prepared to handle runtime exceptions
- Catch `SecurityException`s generated by attempting to access no longer valid tree URIs in the Gallery. Now we just remove those URIs (as they are indeed no longer valid)"
romannurik/muzei,closed,Update version codes to 2.3 Beta 4,[],
romannurik/muzei,closed,Fix crashes reported in 2.3 Beta 3,[],"Fixes a number of crashes reported in Muzei 2.3 Beta 3:
- Replaces IllegalStateException on loading artwork with null
- Destroys a no longer used ImageBlurrer
- Only allows BitmapRegionLoaders with a width/height > 0
- Don't crash when you have no active network when activating the wallpaper
- Don't load null artwork URIs
- Fix race condition on updating the quick settings tile
- Prevent Gallery from attempting to animate a detached view
"
romannurik/muzei,closed,Remove syncing of sources to Wear,[],"With Wear gaining more independence, it no longer makes sense to sync sources (which are a very local thing) to Android Wear.

Instead, all artwork synced over to Wear is now attributed to a new DataLayerArtSource, which exists on the Wear side. This has two side benefits:
- All sources now have a valid ComponentName which apps can use to retrieve information about the source using PackageManager
- Fixes a crash issue where older versions of Muzei did not include a ComponentName with the Artwork, causing the Wear app to crash as it assumed a non-null ComponentName.
"
romannurik/muzei,closed,Version Upgrades,[],"Upgrade to latest Android Gradle plugin, Support Library, and Google Play services
"
romannurik/muzei,closed,Ensure that tree URI permissions are persisted,[],"Work around issues where checkCallingUriPermission returns false for tree URIs from other apps.
"
romannurik/muzei,closed,Fix crash when art sources publish without artwork,[],"Art Sources can publish updates without attaching artwork, causing Muzei to crash.
"
romannurik/muzei,open,Support Android TV as a screen saver,[],"It should not be too difficult to extend the mobile app to support Android TV for the screen saver.
"
romannurik/muzei,closed,Add an Artwork Info shortcut,[],"Add quick access to the Artwork Info through a dynamic shortcut that is updated every time the artwork is updated.
"
romannurik/muzei,closed,Ensure the ArtworkLoadingStateChangedEvent is fired,[],"The DownloadArtworkJobService did not properly fire the ArtworkLoadingStateChangedEvent on completion due to a missing super call.
"
romannurik/muzei,closed,Integrate feedback from 2.3 Beta 3: Wearable edge cases,[],"Improve handling of activate/install Muzei notifications when Muzei Wear app is installed without the phone app and disable the complication provider until the first real image is available.

Also improves a long standing issue with example-contract-widget which was preventing testing of the API.
"
romannurik/muzei,closed,Fix crashes found in 2.3 Beta 1,[],"Fix crash issues with Muzei 2.3 Beta 1 including
- Race conditions when apps were reading artwork as new artwork was being inserted
- Wear Renderscript/ProGuard issues
- Gallery crashing due to not correctly adding the `IS_TREE_URI` column

Also increments the version code in preparation for Beta 2
"
romannurik/muzei,closed,Ensure build type of embedded Wear apps match main app,[],"main release builds will include a wearable release build
main publicBeta builds will include a wearable publicbeta build
"
romannurik/muzei,closed,Reduce number of APKs by using the universal binary for non ARM devices.,[],"The number of mips and x86 devices is so low that it is not worth specifically supporting those devices with a split APK - the universal APK will allow those devices to continue to work at some expense of increased download size.
"
romannurik/muzei,closed,Add basic analytics and user properties,[],"Add analytics around the most important flows such as first time activation, wallpaper and watch face usage, etc.

Added user properties:
- `device_type` to filter Android vs Wear
- `selected_source` to filter analytics/crashes by the current source
"
romannurik/muzei,closed,Enable Dex in Process + Daemon,[],"Per https://medium.com/google-developers/faster-android-studio-builds-with-dex-in-process-5988ed8aa37e
"
romannurik/muzei,closed,Better activation flow for Wear app,[],"Handle cases where the Wear app is installed but the phone app isn't installed (common on Wear 2.0 devices) and improve the case where Muzei is installed on the phone but isn't activated.
"
romannurik/muzei,closed,Fix logic on detecting removed Gallery images,[],"The Gallery art source should publish a new artwork if the current artwork is removed. Fixes the logic so that this doesn't force a double load of artwork every time the GalleryArtSource is created.
"
romannurik/muzei,closed,Add missing applicationId needed for Firebase,[],"Firebase needs an explicit applicationId for manifest merging
"
romannurik/muzei,closed,Wear Publishing Optimizations,[],"Move Wear app to minSdkVersion 23, adds publicBeta buildType to mirror phone side, and limits ABI support for Wear app to only armeabi-v7a and x86 (the only ones actually used for Android Wear devices)
"
romannurik/muzei,closed,Centralize the Tools and Google Services Plugin versions,[],"Move the tools and Google Services Gradle plugin versions into the root project. Use the same format for all of them (only keep the version number in the root project).
"
romannurik/muzei,closed,Add Firebase Crash+Analytics,[],"Adds Firebase Crash and Firebase Analytics to both the phone/tablet app and the Wear app to allow better measurement of usage.

Only the basics right now: no custom analytics/crash logging
"
romannurik/muzei,closed,Split Wear versioning from phone versioning,[],"When it comes to publishing Wear 2.0 directly to the Play Store, they must have a separate version code from the phone app to support multiple APKs.
"
romannurik/muzei,closed,Quick Settings Tile for 'Next Artwork' command,[],"Make it easy for users to quickly go to the next artwork via a quick settings tile. If Muzei is not activated, the tile will offer to activate Muzei.
"
romannurik/muzei,closed,Split main APKs by ABI,[],"As Renderscript includes native libraries that constitute 45%+ of the total APK size, provide split APKs that only package in exactly the native library that is needed for that device.
"
romannurik/muzei,closed,Removes unnecessary LinearLayout from settings_ab_spinner_list_item,[],"Removes unnecessary LinearLayout from settings_ab_spinner_list_item
# Before

![screenshot_20161008-143038](https://cloud.githubusercontent.com/assets/802308/19215194/1ce4f8d0-8d65-11e6-89e4-7c79df5c308f.png)
# After

![screenshot_20161008-143024](https://cloud.githubusercontent.com/assets/802308/19215195/22aac7fe-8d65-11e6-8a68-f819239e51e7.png)
"
romannurik/muzei,closed,Ensure that ACTION_ARTWORK_CHANGED broadcasts work,[],"With the changes in loading data, both ARTWORK and ARTWORK_ID URIs are passed to notifyChange(). This fixes ARTWORK_CHANGED broadcasts so that they happen on both types of URIs.
"
romannurik/muzei,closed,Disable long press to exit on Wear 2.0 devices,[],"Long press to exit is no longer suggested for Wear 2.0 devices as per https://developer.android.com/wear/preview/behavior-changes.html#activity-dismissal
"
romannurik/muzei,closed,"Upgrade to latest build tools, Support Library, and Google Play services",[],"Upgrade to the latest version of the libraries used. Centralize shared libraries into the top level Gradle file to ease future maintenance.
"
romannurik/muzei,closed,Add CATEGORY_OPENABLE to all OPEN_DOCUMENT/GET_CONTENT intents,[],"While I seriously doubt any DocumentsProvider will be providing virtual files that have a mime type of ""image/*"", better save than sorry (as Muzei does require openable files)
"
romannurik/muzei,closed,Support adding folders to the Gallery source,[],"On API 21+ devices, we can use [OPEN_DOCUMENT_TREE](https://developer.android.com/reference/android/content/Intent.html#ACTION_OPEN_DOCUMENT_TREE) to gain persistent access to an entire folder. Add support to the Gallery source so that it can have persistent, ongoing access to entire folders.

Photos are pulled recursively from all folders and the next image is randomly chosen from all photos (giving equal weight to all photos, whether they are from a folder or directly added).

The single Add FloatingActionButton now triggers a toolbar when tapped on API 21+ devices, showing the two separate actions (adding photos or adding a folder).
"
romannurik/muzei,closed,Upgrade to Gradle Plugin 2.2.0,[],"To support development in the now stable Android Studio 2.2
"
romannurik/muzei,closed,DownloadArtworkTask openUri request header not support,[],"can not download source need request header
"
romannurik/muzei,closed,Improve the workflow for importing photos with GET_CONTENT,[],"The previous workflow for importing photos had a number of downsides:
- The warning dialog felt punitive towards the user even though it wasn't their choice that the app they want to use only supports GET_CONTENT
- The standard Storage Access Framework UI allowed users to import photos that they should really be adding via ACTION_OPEN_DOCUMENT

Since we can query the exact activities supporting GET_CONTENT, we can improve the workflow by:
- Handling only one app by directly starting that Activity
- Handling more than one app by having the user choose which app they want to import photos from

This has the side benefit that there is no need for a scary dialog anymore and photos cannot be imported if adding them directly is an option
"
romannurik/muzei,closed,Gallery: Use URI Based Permissions instead of storing a copy when possible,[],"Change the default action for adding photos to be `ACTION_OPEN_DOCUMENT` instead of `ACTION_GET_CONTENT`. This allows the Gallery extension to use URI based permissions to read the selected images on demand rather than store a copy of each and every photo selected (which led to a large amount of storage space used for large photo galleries).

In addition, this ensures that photos that are deleted or changed in the source are reflected in the Gallery.

A new menu item is added to the overflow menu that allows users to 'Import Photos' using `ACTION_GET_CONTENT` to support apps still using a `GET_CONTENT` Activity, with a warning of the downsides beforehand.
"
romannurik/muzei,closed,Upgrade to Gradle Plugin 2.2.0-rc1,[],"To support building in Android Studio 2.2 RC
"
romannurik/muzei,closed,Change Gallery to using a ContentProvider,[],"Switch the Gallery art source to store its data in a ContentProvider and have the new GalleryProvider own storing the copies of the images. Changes the UI components to read/write data directly from the GalleryProvider.

Removes no longer used actions, extras, and fixes a large number of lint warnings.
"
romannurik/muzei,closed,Update to Gradle Plugin 2.2.0-beta3,[],"To support development in Android Studio 2.2 Beta 3
"
romannurik/muzei,closed,Ensure every inserted artwork has a valid component name,[],"For existing art sources, they did not specify the component name and it needs to be manually added on Muzei's side.
"
romannurik/muzei,closed,Shorten DocumentsProvider directory names,[],
romannurik/muzei,closed,Move artwork retries to use JobScheduler on API 21+,[],"Instead of retrying whenever the network connectivity changes, use JobScheduler to schedule the retry job and backoff logic.
"
romannurik/muzei,closed,Google Play Update?,[],"I'm asking this here, because I bet some other people have this question. The version in the play store is pretty out dated. Any chance of a update / beta channel for this wonderful app? I don't mind compiling from source, but having the update be streamlined would be awesome.
"
romannurik/muzei,closed,Handle art sources without an android:description,[],"We can safely assume that apps without an android:description on their MuzeiArtSource don't want a description shown (perhaps they are setting it at runtime). Don't crash Muzei in this cases. Fixes GH-165
"
romannurik/muzei,closed,Upgrade to Gradle 2.2.0-beta2 to support Android Studio 2.2 Beta 2,[],
romannurik/muzei,closed,"Ensure MuzeiArtSource publishes prior to being destroyed, min API 18",[],"HandlerThread.quit() will drop pending messages, potentially dropping the final published update as the IntentService is stopped. Switch to API 18's quitSafely() method to ensure any pending publishes are actually done.
"
romannurik/muzei,closed,Only send ArtworkLoadingStateChange with loading=true if load is needed,[],"Only send a loading=true ArtworkLoadingStateChangedEvent if there is actual loading to be done
"
romannurik/muzei,closed,Update to Support library 24.2.0,[],"Update to the latest Support Library 24.2.0. Use DiffUtil to build the correct notify() calls for when the Gallery's URIs change
"
romannurik/muzei,closed,"Fix complications, Wear image resizing",[],"Fixes issues where
- JobService's started with `addTriggerContentUri` need to be manually rescheduled after they are triggered as per documentation
- Complications falling out of sync with SharedPreferences when uninstalled/reinstalled
- Images being synced to Wear not properly resized down to ~320 pixels
"
romannurik/muzei,closed,Muzei Archive site does not load: No 'Access-Control-Allow-Origin' header,"[Label(name=""web-archive"")]","When going to http://muzeiapi.appspot.com/archive/2016/8

I receive the following errors in the Console and nothing loads:
XMLHttpRequest cannot load http://storage.googleapis.com/muzeifeaturedart/archivemeta/20160819.txt. No 'Access-Control-Allow-Origin' header is present on the requested resource. Origin 'http://muzeiapi.appspot.com' is therefore not allowed access.
XMLHttpRequest cannot load http://storage.googleapis.com/muzeifeaturedart/archivemeta/201607.txt. No 'Access-Control-Allow-Origin' header is present on the requested resource. Origin 'http://muzeiapi.appspot.com' is therefore not allowed access.
"
romannurik/muzei,closed,Remove the Gallery Settings selection toolbar when back is pressed,[],
romannurik/muzei,closed,Add a Muzei Artwork DocumentsProvider,[],"Builds out a DocumentsProvider which allows users to select Muzei Artwork via `ACTION_GET_CONTENT`/`ACTION_OPEN_DOCUMENT`/`ACTION_OPEN_DOCUMENT_TREE` in the following structure

Muzei
- Artwork by Date
  - (a list of all artwork sorted by date added)
- Artwork by Source
  - Source 1
    - (a list of all artwork from source 1 sorted by date added)
  - Source 2
    - (a list of all artwork from source 2 sorted by date added)
  - etc

Supports deleting previous (non-current) artwork.
"
romannurik/muzei,closed,Remove all instances of Class.getSimpleName() for logging,[],"While getSimpleName() is convenient, it falls apart when using ProGuard, which Muzei uses. Also caught a number of cases where the logging tag was more than the max 23 characters.
"
romannurik/muzei,closed,Use MuzeiProvider as the source for all artwork updates,[],"Move notification and Wearable artwork loading to rely solely on MuzeiProvider as source of truth. Instead of tying them into RealRenderController, they are now managed at the MuzeiWallpaperService level.

This also enables adding Source columns to any Artwork query (owing to the join it already does) as well as updates exactly how notification large icons/backgrounds are made - they are no longer square cropped.
"
romannurik/muzei,closed,Only write helpful Artwork warnings for other apps,[],"Muzei itself knows how to handle a null artwork just fine, but other apps may not. Ensure that logging remains to help the other apps, but does not occur when it is Muzei itself using the artwork provider
"
romannurik/muzei,closed,Reduce SourceManager contention when updating sources,[],"SourceManager uses synchronized to manage access to the selected source it maintains. By reducing the amount of code that needs to be in these synchronized blocks, we reduce contention and apparent freezes when changing sources.
"
romannurik/muzei,closed,Update to Gradle Plugin 2.2.0-beta1,[],"To support development in Android Studio 2.2 Beta
"
romannurik/muzei,closed,Fix issues syncing to Wear,[],"Fix two issues associated with syncing to wear. Namely, assuming the ComponentName for a source is always valid (not true with a phone synced to Wear source info) and handling the race case where the artwork row syncs before the source row syncs, leading to an issue with the foreign key constraint we have set up.
"
romannurik/muzei,closed,Add a LARGE_IMAGE Artwork Complication to the Wear app,[],"Allow other watch faces to use Muzei artwork as the background of their watch face
"
romannurik/muzei,closed,Delete artwork being written when an error occurs.,[],"Instead of keeping a possibly incomplete or a failed file for artwork being written to MuzeiProvider, if we detect an IOException on writing we'll try to delete the artwork file, allowing the other side to retry.
"
romannurik/muzei,closed,Correct the majority of Lint issues,[],"Lint warnings, errors? No way.
"
romannurik/muzei,closed,Fix crash when sources are added without a WANTS_NETWORK value,[],
romannurik/muzei,closed,Fix interpolator lint issue - move to anim directory,[],"Per lint, custom interpolators should be in the anim directory.
"
romannurik/muzei,closed,Tie subscribing and network changes to the wallpaper lifecyle,[],"Much of the activities that Muzei does should only be done when the wallpaper is active (i.e., the MuzeiWallpaperService is created). This fixes an issue where we wouldn't properly subscribe to sources when in preview mode and Muzei would continue to listen for network changes at all times (even when the wallpaper was disabled!). Now both events are done only when the wallpaper service is created.
"
romannurik/muzei,closed,"Update Gradle and Gradle Plugin for Android Studio 2.2, Preview 7",[],
romannurik/muzei,closed,Limit Network Connectivity Callbacks,[],"Try to limit network connectivity callbacks to only apps that want network connectivity changes. Even then, don't send network change events to apps on API 24+ that target API 24+ as those apps should be following the behavior changes in API 24 which restrict network change events.
"
romannurik/muzei,closed,Ensure ArtworkCacheIntentService handles receiving the same artwork,[],"MuzeiProvider openOutputStream() will return null if it has already cached the artwork. We need to make sure ArtworkCacheIntentService is aware of that and handles that case correctly (i.e., don't attempt to write it again).
"
romannurik/muzei,closed,Ensure we don't subscribe/unsubscribe for preview wallpaper services,[],"When in Preview mode, we don't necessarily want to subscribe/unsubscribe to our current source
"
romannurik/muzei,closed,"Move artwork storage to MuzeiProvider, minSdk=19",[],"Fully deprecates ArtworkCache in place of having MueiProvider store and cache artwork. This required updating the minSdkVersion to 19 to use [ParcelFileDescriptor.open() with an OnCloseListener](https://developer.android.com/reference/android/os/ParcelFileDescriptor.html#open%28java.io.File, int, android.os.Handler, android.os.ParcelFileDescriptor.OnCloseListener%29) which is needed to properly send notifyChange() to Muzei and to other apps.

This removes the previous behavior where Muzei would need to locally cache the Artwork object and _not_ update MuzeiProvider until the artwork was cached. Instead, it can immediately write the Artwork metadata to MuzeiProvider, knowing that notifyChange() won't be called until the artwork is cached.

Another consequence of this move is that the Artwork table no longer has only a single entry: it'll have one row for each previously loaded piece of artwork. Some attention was made to ensure that the first row is always the most recent artwork from the enabled source, but this also means a join every time the Artwork table is queried. This may cause issues with integrations that specifically use `BaseColumns.ID` in their selection, etc. (as they'll now need to fully qualify it with the table name), but given that there was always only a single row, I don't suspect anyone is actually doing this.

Some future looking work was also done here in converting TaskQueueService to using the new DownloadArtworkTask. This will ease future moves to a JobScheduler based approach for API 21+ devices.

Right now the MuzeiProvider cache is **not** limited in size. For quick reloading art sources, this is probably not appropriate and the number/size should be capped. Given that these are considered files (and not cache), they currently won't be deleted until data is cleared on Muzei. Will explore this issue and whether a setting/control is needed within Muzei in a future pull request.
"
romannurik/muzei,closed,Remove EventBus library from gallery module,[],"A simple local broadcast works just as well
"
romannurik/muzei,closed,Upgrade to Google Play services 9.2.1 to work around ProGuard issue,[],"Per https://developers.google.com/android/guides/releases#june_2016_-_v92
"
romannurik/muzei,closed,Upgrade Support Library to 24.1.1,[],"Move to a centralized Support Library version and upgrade to version 24.1.1
"
romannurik/muzei,closed,Update play services to latest version,[],"I was building the latest version and saw that gradle projects `wearable` and `main` are using different versions of play services. 

Updated play services to latest version and make sure that wearable and phone are using the same version.
"
romannurik/muzei,closed,Switch from mavenCentral to jcenter,[],"There are two reasons for doing this:
1. `gradle:2.2.0-alpha6` doesn't resolve with `mavenCentral`, only with `jcenter` (the latest in `mavenCentral` seems to be 2.1.2, published June 6th, 2016.
2. Google made the switch to center as the default some time back (see the 24th comment by Tor on [this issue](https://code.google.com/p/android/issues/detail?id=72061) for details).
"
romannurik/muzei,closed,Split the Gallery source into its own module,[],"The Gallery source is intertwined with the main module, making changes in one affect the other and introducing code coupling when these should be independent items.

It also prevented future work on potentially unbundling the gallery source and building a standalone Wear app that does not include the gallery source which would use a common base code.

This pull request moves the gallery source into its own module and allows it to be built without any dependency on the main module.
"
romannurik/muzei,closed,Remove the deprecated Time class from the watchface,[],"Replace with Calendar
"
romannurik/muzei,closed,Featured art source cleanup,[],"Clean up a few lingering issues with the featured art source:
- Changed the module name to source-featured-art to match the hyphenated names of the other modules
- Prefixed all resources to properly namespace them
- Removed a redundant load when subscribing
- Make parsing next update timestamps use a fixed Locale to prevent issues with non-US default locales breaking timestamp parsing
"
romannurik/muzei,closed,Split the Featured Art source into its own module,[],"Decouples the Featured Art source from the main module, segmenting all featured art specific code and resources away from the main module.
"
romannurik/muzei,closed,Remove the need for a custom Application class.,[],"We only need to subscribe to the current source if the Wallpaper Service is active so let's do it there than every time the app starts. Similarly, there is no need to keep a subscription around once the wallpaper is destroyed so attempt to unsubscribe.
"
romannurik/muzei,closed,Upgrade to Gradle plugin 2.2.0-alpha5,[],"Android Studio 2.2 Preview 5 requires 2.2.0-alpha5.
"
romannurik/muzei,closed,Upgrade to latest versions of almost everything,[],"Upgrade to
- Gradle 2.10
- Compile SDK 24
- v24.0.0 of Support Library
- Play services Wearable to 9.2 (phone), 8.4 (watch)
- Wearable Support Library 1.4.0
- Okhttp 3.3.1
- Picasso:2.5.2
- EventBus 3.0.0
- Retrofit 2.1.0 (example-source-500px)
"
romannurik/muzei,closed,Support for quadratic Bezier curves.,[],"Add support for quadratic Bezier curves through Q and q commands in SVG Path parser.
"
romannurik/muzei,closed,Android N issue,[],"On my 6P with the Android N preview Muzei can't see to change backgrounds correctly. It works a few times, then stops updating. When I open the app it shows me the activate button like it isn't set as the background any more. 
"
romannurik/muzei,closed,Support for quadratic Bezier curves.,[],"Add support for quadratic Bezier curves through Q and q commands in SVG Path parser.
#205
"
romannurik/muzei,closed,Quadratic bezier curves support,[],"I'm trying to use your [SVGPathParser](https://github.com/romannurik/muzei/blob/master/main/src/main/java/com/google/android/apps/muzei/util/SvgPathParser.java) but it throws an error when trying to parse paths with Q commands for Quadratic bezier curves.

Is there any reason they haven't been included? Any solution to this?

Thanks.
"
romannurik/muzei,closed,Update on f-droid,[],"Can you update muzei app on f-droid to the latest version? The last update was from 2014. This is my favorite wallpaper app and I really miss it after purging google from my android phone.
"
romannurik/muzei,closed,Question about Customize Option,[],"In the main menu of muzei (when you choose image from your own gallery) there are two buttons in bottom right hand corner. One button changes the wallpaper. The other button opens a menu where the only option is ""customize""

I wanted to know if you're planning on adding more options to this menu. If not, can pressing that button automatically default to ""customize""? It seems like a redundant extra amount of clicks.
"
romannurik/muzei,closed,Remove no longer needed PROVIDE_BACKGROUND permission for watch face,[],"Watch faces do not need the PROVIDE_BACKGROUND permission nor do they need android:allowEmbedded=""true"" and android:taskAffinity=""""
"
romannurik/muzei,closed,Move Source Information to Content Provider,[],"Replace much of SourceManager with a public Sources table, allowing external apps to determine what extension posted which Artwork and what actions, etc. they support.

The selected Source is also sent over to Wearable devices.
"
romannurik/muzei,closed,(Request) synced wallpapers across devices,[],"I use Muzei on my phone, watch, and tablet. I'm using the same source and the same settings for my phone and tablet, but they're never on the same image. Genuinely don't know how hard this would be to implement, but it's something I'd love to see.
"
romannurik/muzei,closed,Wallpaper not centralised,[],"This issue has been fixed previously, but now is happening again, probably due to some Google changes. It would be good to have it looked at again.

With the stock launcher on a Nexus 6p and only one pane, only the far left of the image is visible.

Because the image is likely to be centred on the focal point, it would be nice if the image was centred in the launcher.

(x is the centre)
1 Pane:
[x]

2 Panes:
[ ]x[ ]

3 Panes:
[ ][x][ ]

And so on.
"
romannurik/muzei,closed,Gradle Syncing Error,[],"I pulled project and imported in Android Studio. Gradle sync processed but i'm getting following error, building debug APK for testing. Please help me out.Thanks
**Error:Execution failed for task ':api:javadoc'.

> A problem occurred starting process 'command './javadoc-scripts/generate_javadoc.sh''**
"
romannurik/muzei,closed,Application is incompatible with my OS/device,[],"CyanogenMod 13 on a Samsung Galaxy S4 GT-I9505. The Play Store says the app is not compatible with my device. It's Marshmallow, so def not an issue with API version. Also, it worked on CyanogenMod 12.1 (Android 5.1.1).
"
romannurik/muzei,open,[Request] Fit the artwork in the screen,[],"It would be nice if in the open app one could see the entire artwork at once, that is the artwork would fit the screen. This is usually how I like to look at artwork, instead of panning.
"
romannurik/muzei,closed,Cleanup Lint warnings and unused code,[],
romannurik/muzei,closed,Initial wallpaper is broadcasted 3 times. ,[],"BroadcastReceiver is great but the initial wallpaper is broadcasted 3 times when the app first installed. 
2 times when the app is started. Once when the wallpaper is actually set. 
"
romannurik/muzei,closed,Add setupActivity for sources,[],"Replaces requiresSetup metadata tag with a separate setupActivity metadata element, allowing sources to completely separate the setup logic from their Settings activity if they chose. Rework the Gallery extension to take advantage of this, removing the need for a specific GallerySettingsProxyActivity.

Current flow for the Gallery source is now:
- If the storage permission is granted or the user previously selected any images, enable the source on click
- Otherwise, ask for the storage permission
- If denied, send the user to the Settings activity to show rationale/a link to app settings or allow users to select photos
"
romannurik/muzei,closed,Decouple date format on watch from locale,[],"Due to memory limitations of watches, they often have a more limited set of supported locales - e.g. for moto360 it's lited at https://motorola-global-portal.custhelp.com/app/answers/detail/a_id/100837
The watch will default to English US if your phone uses any other locale - setting e.g. date format to a different one than the phone displays. It would be nice to send the date format from the phone to the watch - either by using the phone's locale or allow to override it.
"
romannurik/muzei,closed,"App not launchable from system live wallpapers - System says ""App isn't installed""",[],"Tested on a rooted moto X 2013, with Lollipop 5.1

This issue occurs with both the Google Now launcher as well as Nova Launcher.

Strangely, a third party app (backdrops) can access the Muzei settings, but Muzei doesn't actually activate.

![Image of issue](http://i.imgur.com/tMzLUcY.jpg)
"
romannurik/muzei,closed,Marshmallow/Doze preventing wallpaper rotation,"[Label(name=""bug"")]","I've noticed Doze stops wallpaper rotation, completely. Android developer documentation says ""Standard AlarmManager alarms are deferred to the next maintenance window"" but this doesn't seem to be the case - the alarms are ignored and never run. I've noticed this with my plugin, which I've set to instruct Muzei to change wallpaper every 3 hours - it will be days before it changes, and only then because my phone happened to be awake when the alarm was scheduled to fire. It would make sense to update Muzei so API 21+ devices use JobScheduler, and let older devices continue to use AlarmManager.set().
"
romannurik/muzei,closed,Update Wear Google Play services dependency to 8.3,[],
romannurik/muzei,closed,Convert WearableListenerServices to new filterable approach,[],"Rather than receiving all data/messages in a single WearableListenerServices, Google Play services 8.3 allows filtering to only specific messages/data APIs, simplifying the logic. Moves the main app's Wearable code into its own package out of the global namespace.
"
romannurik/muzei,closed,Ensure Android Wear wallpaper updates immediately.,[],"In Google Play services 8.3, DataApi calls may be delayed up to 30 minutes. Calling setUrgent() ensures the wallpaper is updated on the Android Wear side immediately upon being updated on the phone side (subject to connectivity, of course) as explained in the 8.3 blog post: http://android-developers.blogspot.com/2015/11/whats-new-in-google-play-services-83.html
"
romannurik/muzei,closed,Double tap not working on BlackBerry Priv (Android 5.1.1),[],"Blur can be turned on/off on the lock screen successfully, but on the home screen double tap has no effect and image remains blurred. Love the app and had been using it on my previous phone (Note 4).

Thanks.
"
romannurik/muzei,closed,Allow flexability in options for lockscreen/homescreen image adjustments.,[],"Apparently I am different from some users (e.g #1) and would like my image _blurred_ while the lockscreen is active, while the homescreen image is sharp. To indicate visually to me that one of them is an ""inactive"" state and the other is ""active"" and in focus. But that's just a preference.

How I would invision enabling this would be to do away with the ""Apply blur on lockscreen"" checkbox, and instead put a simple 2-option select on top of the sliders, one being for lockscreen, one being for homescreen. Then the sliders apply the values you set for the currently active option. The picture behind would show the preview same as current.

In this way people could change how the image appears on either to their hearts content - maybe you want your image faded to greyscale when your lockscreen is up, but then restored to full color when you unlock (or visa versa)?

Cheers for the great app so far.
"
romannurik/muzei,closed,Feature Request: Allow user to pause updating,[],"Allow a user to pause the updating of a wallpaper if they find one they really like. The intent of this feature request is to allow users to stop the automatic updating indefinitely when they find a background that appeals to them. I would expect there would be a pause button when clicking on the Muzei app. 
"
romannurik/muzei,closed,Add widget button to go to next artwork,[],"Stealing the idea from Minima:
It would be great to have a simple widget to click on the home screen to go to the next artwork.  Right now, the user has to open the app and click the ""Next Artwork"" button.
"
romannurik/muzei,closed,Use local files rather than remote urls,[],"Artwork.Builder requires a url to a downloadable image from the web.
Can I use a locally saved file, like:

```
publishArtwork(new Artwork.Builder()
    ...
    .imageUri(Uri.fromFile(new File(""/sdcard/some_wallpaper.png"")))
    ...
    .build());
```

My motivation is to generate a bitmap, save it and pass the url for the saved file to Muzei.

Thanks
"
romannurik/muzei,closed,HTTP Basic Authentication,[],"@ianhanniballake does Muzei support links that have authentication attached to them? That is, going to a URL that is protected with htaccess authentication. I'm loading in artwork from a json file and it's imperative that I use authentication. 

Here's an example URL of what I mean: http://ValidUsername:ValidPassword@www.example.com

When I try to put this as a URL, Muzei and my app crash. Any ideas?
"
romannurik/muzei,closed,"When adding multiple pictures, use both getData and getClipData. Someâ€¦",[],"â€¦ ContentProviders (e.g. Google Photos) use both and reading only getData ignores multiple images. This is extra annoying when the pictures are downloaded first.
"
romannurik/muzei,closed,Android M Permission Issue,[],"I'm not entirely sure if this is 100% accurate but there appears to be a permission issue on Android M which is causing a crash to occur. I've talked with my fellow developer friends who run Lollipop and they say there's no issue. I was able to pull this error off the logcat:

```
09-21 23:37:48.276 15354-15354/? E/AndroidRuntime: FATAL EXCEPTION: main
09-21 23:37:48.276 15354-15354/? E/AndroidRuntime: Process: net.nurik.roman.muzei, PID: 15354
09-21 23:37:48.276 15354-15354/? E/AndroidRuntime: java.lang.RuntimeException: Unable to create application com.google.android.apps.muzei.MuzeiApplication: java.lang.SecurityException: Not allowed to start service Intent { act=com.google.android.apps.muzei.api.action.SUBSCRIBE cmp=com.daviidh.android.wallpaper/wallpaper.android.daviidh.com.evolvewallpapers.muzei.ArtSource (has extras) } without permission none
09-21 23:37:48.276 15354-15354/? E/AndroidRuntime:     at android.app.ActivityThread.handleBindApplication(ActivityThread.java:4710)
09-21 23:37:48.276 15354-15354/? E/AndroidRuntime:     at android.app.ActivityThread.-wrap1(ActivityThread.java)
09-21 23:37:48.276 15354-15354/? E/AndroidRuntime:     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1405)
09-21 23:37:48.276 15354-15354/? E/AndroidRuntime:     at android.os.Handler.dispatchMessage(Handler.java:102)
09-21 23:37:48.276 15354-15354/? E/AndroidRuntime:     at android.os.Looper.loop(Looper.java:148)
09-21 23:37:48.276 15354-15354/? E/AndroidRuntime:     at android.app.ActivityThread.main(ActivityThread.java:5417)
09-21 23:37:48.276 15354-15354/? E/AndroidRuntime:     at java.lang.reflect.Method.invoke(Native Method)
09-21 23:37:48.276 15354-15354/? E/AndroidRuntime:     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:726)
09-21 23:37:48.276 15354-15354/? E/AndroidRuntime:     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:616)
09-21 23:37:48.276 15354-15354/? E/AndroidRuntime:  Caused by: java.lang.SecurityException: Not allowed to start service Intent { act=com.google.android.apps.muzei.api.action.SUBSCRIBE cmp=com.daviidh.android.wallpaper/wallpaper.android.daviidh.com.evolvewallpapers.muzei.ArtSource (has extras) } without permission none
09-21 23:37:48.276 15354-15354/? E/AndroidRuntime:     at android.app.ContextImpl.startServiceCommon(ContextImpl.java:1245)
09-21 23:37:48.276 15354-15354/? E/AndroidRuntime:     at android.app.ContextImpl.startService(ContextImpl.java:1222)
09-21 23:37:48.276 15354-15354/? E/AndroidRuntime:     at android.content.ContextWrapper.startService(ContextWrapper.java:581)
09-21 23:37:48.276 15354-15354/? E/AndroidRuntime:     at com.google.android.apps.muzei.SourceManager.subscribeToSelectedSource(SourceManager.java:217)
09-21 23:37:48.276 15354-15354/? E/AndroidRuntime:     at com.google.android.apps.muzei.MuzeiApplication.onCreate(MuzeiApplication.java:34)
09-21 23:37:48.276 15354-15354/? E/AndroidRuntime:     at android.app.Instrumentation.callApplicationOnCreate(Instrumentation.java:1013)
09-21 23:37:48.276 15354-15354/? E/AndroidRuntime:     at android.app.ActivityThread.handleBindApplication(ActivityThread.java:4707)
09-21 23:37:48.276 15354-15354/? E/AndroidRuntime:     at android.app.ActivityThread.-wrap1(ActivityThread.java)Â 
09-21 23:37:48.276 15354-15354/? E/AndroidRuntime:     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1405)Â 
09-21 23:37:48.276 15354-15354/? E/AndroidRuntime:     at android.os.Handler.dispatchMessage(Handler.java:102)Â 
09-21 23:37:48.276 15354-15354/? E/AndroidRuntime:     at android.os.Looper.loop(Looper.java:148)Â 
09-21 23:37:48.276 15354-15354/? E/AndroidRuntime:     at android.app.ActivityThread.main(ActivityThread.java:5417)Â 
09-21 23:37:48.276 15354-15354/? E/AndroidRuntime:     at java.lang.reflect.Method.invoke(Native Method)Â 
09-21 23:37:48.276 15354-15354/? E/AndroidRuntime:     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:726)Â 
09-21 23:37:48.276 15354-15354/? E/AndroidRuntime:     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:616)Â 
09-21 23:37:48.329 13054-13080/? E/Surface: getSlotFromBufferLocked: unknown buffer: 0xb373a470
```

Note that `wallpaper.android.daviidh.com.evolvewallpapers.muzei.ArtSource` is the package name of my custom app. 

I've checked the permissions section in the app info screen and it says Storage is turned on but there isn't anything else. Is this a permission issue?
"
romannurik/muzei,closed,Recommended rotation (i. e. update) period,[],"It would be great to have a Muzei-wide option to specify a recommended update period. This and #59 [seem to be](https://www.reddit.com/r/Android/comments/3jxz5q/earth_view_from_google_if_youre_looking_for_more/) highly demanded options. I think it should be an application-wide setting, because at this point extensions are forced to implement it themselves.

Implementation ideas.
- Create a setting at the UI.
- Add a method `MuzeiArtSource.html#scheduleUpdate()`. Please notice that this method has no parameters. This way the application-wide setting will be used instead extension-wide one.
- A more radical approach is to replace `MuzeiArtSource.html#scheduleUpdate(long)` with `MuzeiArtSource.html#scheduleUpdate()`, but it will break all existing extensions.
"
romannurik/muzei,closed,"Use locale defined month/date format. e.g. in Germany, this is dd.MM.",[],"I tested it in emulator by hardcoding a different locale directly in code. Assuming Locale.getDefaultLocale returns the locale as defined by the user.
"
romannurik/muzei,closed,Update AndroidManifest.xml,[],"Fixed settings activity (wrong one).
"
romannurik/muzei,closed,Update AndroidManifest.xml,[],"Added deep links to main activity and settings activity.
"
romannurik/muzei,closed,Delay option,[],"It could be useful to add an option for specify the seconds (or never, in order to see always the background in clear).
"
romannurik/muzei,closed,Version update,[],"Combine version.properties files to ensure that main and wearable version code always stay in sync
"
romannurik/muzei,closed,Implement simple blur toggle interactive watch face,[],"Allow tapping on the watchface to toggle between the image and a blurred/dimmed version of the image.

Also updates:
- peek card opacity (transparent when blurred, opaque when not blurred)
- Only use view protection when not blurred
- Shadow behind time/date only shown when not blurred
"
romannurik/muzei,closed,Date fixes,[],"Fixes issues with date display including the shadow on round devices, recent changes in density, and hiding the date when there isn't enough vertical space (such as when there are very tall peek cards)
"
romannurik/muzei,closed,Double tap not working?,[],"Hi,

Love the app!

Unfortunately, double tap on home screen to focus is not working for me.
(Samsung Galaxy S6 Edge, non-rooted, stock ROM, no custom launchers)

Any ideas?

Thanks,
Jakob
"
romannurik/muzei,open,Feature request: Add option to customize temporary focus duration,[],"I think it might be nice if we could customize the temporary focus duration - say between 3 seconds and 15 seconds.

main/src/main/java/com/google/android/apps/muzei/MuzeiWallpaperService.java line 67:

``` java
private static final long TEMPORARY_FOCUS_DURATION_MILLIS = 3000;
```

and line 246:

``` java
mMainThreadHandler.postDelayed(mBlurRunnable, TEMPORARY_FOCUS_DURATION_MILLIS);
```
"
romannurik/muzei,closed,Feature request: Allow artwork download only on WiFi,[],"It would be great if one could set Muzei app to only download new artwork when phone is connected to a WiFi network because if one is roaming (with data enabled for emergency data only), then they must set a static background on the device to prevent Muzei from downloading artwork on a daily basis.
"
romannurik/muzei,closed,Spanish translation,[],"I love Muzei, and I realised that it was not translated to Spanish. I thought that a little effort would make the app much better for a lot of people. So I decided to translate it!

I've translated every strings.xml files except app name, app description, author name and version template strings.
"
romannurik/muzei,closed,Image download problem. ,[],"I am using an online source that I cannot control. Some of the images are given with `Content-Type: application/octet-stream` which makes Muzei not working because of this line https://github.com/romannurik/muzei/blob/master/main/src/main/java/com/google/android/apps/muzei/util/IOUtil.java#L120

It is actually good for protection. But the problem is that after that `IOException` the last background image becomes stuck until the user manually opens the app and click next. 

The app behaves like this is a `RetryError` and retries the image infinitely. Instead it should try to load the next image. 
"
romannurik/muzei,closed,"Crashing on Galaxy S4 (I337) ""Resources Not Found Exception""",[],"This crash happens as soon as I try to open the ""Settings"" or ""Customize"" option. Here is the log output:

```
06-29 18:32:01.566  17077-17077/? E/AndroidRuntimeï¹• FATAL EXCEPTION: main
    Process: net.nurik.roman.muzei, PID: 17077
    android.content.res.Resources$NotFoundException: String resource ID #0x0
            at android.content.res.Resources.getText(Resources.java:1334)
            at android.content.res.Resources.getString(Resources.java:1428)
            at com.google.android.apps.muzei.settings.SettingsChooseSourceFragment.updateSources(SettingsChooseSourceFragment.java:363)
            at com.google.android.apps.muzei.settings.SettingsChooseSourceFragment.onResume(SettingsChooseSourceFragment.java:226)
            at android.app.Fragment.performResume(Fragment.java:2162)
            at android.app.FragmentManagerImpl.moveToState(FragmentManager.java:943)
            at android.app.FragmentManagerImpl.moveToState(FragmentManager.java:1082)
            at android.app.BackStackRecord.run(BackStackRecord.java:833)
            at android.app.FragmentManagerImpl.execPendingActions(FragmentManager.java:1467)
            at android.app.FragmentManagerImpl$1.run(FragmentManager.java:452)
            at android.os.Handler.handleCallback(Handler.java:739)
            at android.os.Handler.dispatchMessage(Handler.java:95)
            at android.os.Looper.loop(Looper.java:145)
            at android.app.ActivityThread.main(ActivityThread.java:5942)
            at java.lang.reflect.Method.invoke(Native Method)
            at java.lang.reflect.Method.invoke(Method.java:372)
            at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:1399)
            at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:1194)
```

The device is running Android 5.0.1 on baseband OC3.
"
romannurik/muzei,closed,"Expand ""Gray"" slider to saturate",[],"It's beautiful when blurred images are saturated. Please allow the current ""Gray"" slider to also go the other way into saturated :D
"
romannurik/muzei,closed,"""Wear only"" mode",[],"It would be nice to have a Android Wear only mode that would fetch smaller version of the photo and update even tho the user didn't set Muzei as his background.

I personal just want my watch BG to be updated every now and then, but would like to keep my current background on my phone. As of right now, it seem like I need to ""start"" Muzei  every morning for it to kick refresh every X minutes.
"
romannurik/muzei,closed,"Some minor memory enhancements, expecially when blur is absent.",[],
romannurik/muzei,closed,Use the CapabilityApi to send activate messages to the correct node,[],"Replaces the Wearable.NodeApi.getConnectedNodes() call with a call to Wearable.CapabilityApi.getCapability(), ensuring that only the main app (which has the capability 'activate_muzei') will receive the message to activate Muzei, rather than other Wearable devices or the cloud node.
"
romannurik/muzei,closed,Moves base theme to Theme.AppCompat.NoActionBar,[],"As of AppCompat 22.1.0, themes that do not want to use an action bar must contain both
    <item name=""windowActionBar"">false</item>
    <item name=""windowNoTitle"">true</item>

Which is automatically done for us when you extend Theme.AppCompat.NoActionBar. As all of our themes, use a Toolbar and not the provided action bar, we can switch our base theme to Theme.AppCompat.NoActionBar and remove the windowActionBar=false declarations scattered throughout our themes.
"
romannurik/muzei,closed,Update dependencies to latest versions,[],"Updates Support Library to 22.2.0, Gradle plugin to 1.2.3, compile SDK version to 22, build tools to 22.0.1, and Google Play services to 7.5.0
"
romannurik/muzei,closed,Local art source requires `onUpdate` when created,[],"I noticed last night that I was unable to display my local art source in Muzei, so I added in some log messages. When I went to the art picker and chose my source, the log would print that my service was created and then Muzei crashes ( same error as #45 ).

After spending some time debugging my art source, I found the solution was to manually add an `onUpdate` call in my `onCreate` method:

```
 @Override
 public void onCreate() {
     super.onCreate();
     Log.d(TAG, ""Created"");
     removeAllUserCommands();
     onUpdate(0);
 }
```

I'm not sure if this is intentional, but it didn't have that line in the example, so this should be documented if that is the case.
"
romannurik/muzei,closed,Local art source doesn't change when source file is overwritten.,[],"I'm creating an art source which is based on a series of drawables in my app. The art source converts the drawable into a file which is then sent via `publishArtwork`.

Originally I just converted the current drawable to the same file, `/storage/emulated/0/mdessert.png`. When this happened however, the wallpaper did not appear to update. It was always stuck on the original image.

I modified my example so that each drawable was converted to its own file and the unique file uri was published. This method allows the wallpaper to update as expected. 

Looking through I source, I did not find the exact cause of this behavior, but I suspect that Muzei checks whether the uri updated before it actually updates. I think this behavior should be changed so it updates on `publishArtwork`, or add a flag which lets Muzei know the file itself has been overwritten so it can redraw the file.

Below is my `onUpdate` method.

```
 @Override
protected void onUpdate(int reason) {
    Log.d(TAG, ""Update"");
    SettingsManager sm = new SettingsManager(this);
    String d = sm.getString(R.string.current_image);
    Dessert dessert = MUtils.getDessertFromString(d);

    //Open my app
    Intent i = new Intent(this, MainActivity.class);
    //Convert drawable to bitmap
    Bitmap icon = BitmapFactory.decodeResource(getApplicationContext().getResources(),
            dessert.getDrawable());
    //Now bitmap to file
    FileOutputStream out = null;
    String path = Environment.getExternalStorageDirectory().toString();
    File file = new File(path, ""mdesserts/""+getResources().getResourceEntryName(dessert.getDrawable())+"".png""); 

    try {
        out = new FileOutputStream(file);
        icon.compress(Bitmap.CompressFormat.PNG, 100, out);
    } catch (Exception e) {
        e.printStackTrace();
    } finally {
        try {
            if (out != null) {
                out.close();
            }
        } catch (IOException e) {
            e.printStackTrace();
        }
    }

    try {
        publishArtwork(new Artwork.Builder()
                        .title(String.format(getString(R.string.android_m), dessert.getName()))
                        .byline(dessert.getPhotographer())
                        .imageUri(Uri.fromFile(file))
                        .token(dessert.getName())
                        .viewIntent(i)
                        .build()
        );
        Log.d(TAG, ""Published"");
    } catch(Exception e) {
        Log.d(TAG, ""Didnt work"");
        e.printStackTrace();
    }

    Log.d(TAG, ""Scheduling update"");
    scheduleUpdate(System.currentTimeMillis() + ROTATE_TIME_MILLIS);
}
```
"
romannurik/muzei,closed,implement support for ActionLauncher 3's theming API,[],"As there is such a nice integration between the form watch face and muzei I thought it might be cool to have the same kind of integration into aciton launcher. As the code is really simple I guess that would be a nice addition :)

I took the blurred version of the image as a base to match the color in the launcher as good as possible. If this is not a good idea it can easily be changed by moving the code piece around to the correct place.

What do you think?
"
romannurik/muzei,closed,Crash when using my photos,[],"It has problems with some images, ( big ones ).
"
romannurik/muzei,closed,Causing UI Crash in 5.0,[],"After installing the app, the UI crashes randomly with the message: ""system.ui has stopped""

Using Asus Zenfone 2.
"
romannurik/muzei,closed,"Some minor memory enhancements, expecially when blur is absent.",[],"This avoids blur object creation in MuzeiBlurRenderer when not needed and some minor enhancements
"
romannurik/muzei,closed,Update .muzei,[],
romannurik/muzei,closed,Add parallax effect based on the device rotation?,[],"It would be be quite nice to have an effect where the image shifts slightly based on the physical rotation of the device. An extra slider that controlled the offset (set at 0 by default for no movement) would be perfect. 

This option would be great for users that only use a single screen but still want the background to have some movement or those that use launchers which handle things differently. It would also help the static items to stand out more on the moving background.
"
romannurik/muzei,closed,Muzei for Lockscreen in LG G2/G3,[],"Hi,

My apologies if this is a wrong forum to ask this. This is my first time using Github and so forgive me if I am doing something wrong

I love Muzei and have been using it right from the first week it was released. I recently shifted to a LG G2 and LG G3 (Yes, I use both - one for work and one for personal). I realized that Muzei doesn't change the lockscreen wallpaper like it did in my earlier Samsung device.

Can you please consider adding the feature where Muzei can change both the Homescreen and Lockscreen wallpaper on LG G2/G3 stock ROM?

Thanks for the wonderful app
"
romannurik/muzei,closed,Remove double call to super.onPeekCardPositionUpdate() from watch face,[],"Don't want to call the super method twice.
"
romannurik/muzei,closed,Version cleanup,[],"Update Muzei API to build against API 22 and removes no longer needed <meta-data> elements as they are included by default by Google Play services 7.0
"
romannurik/muzei,closed,Update to Google Play services 7.0,[],"Removes ProGuard configurations as they are now automatically included as part of the Google Play services AAR as per https://plus.google.com/+IanLake/posts/1HfDuFFkMXG
"
romannurik/muzei,closed,Add date to Android Wear watch face,[],"Show date on the watch face in MM/dd or dd-MM (locale dependent) format:
- Round: Date is shown above the time (as time is centered on the screen / floating directly above peek card)
- Square: Date is shown below the time (as the time is in the upper right corner)

TODO: Setting to control whether it appears
"
romannurik/muzei,closed,Crashes on Android 5.1,[],"Crashes on Android 5.1 as soon as the app is launched. 
"
romannurik/muzei,closed,getSharedPreferences is useless,"[Label(name=""api"")]","I couldn't find any way to share preferences between `MuzeiArtSource` and `settingsActivity`.

I know there is `static getSharedPreferences`, but it returns `SharedPreferences`, and then I couldn't find a way to use them in `PreferenceFragment` (or `PreferenceActivity`).

So in all plugins I found on Github, people still do this in `MuzeiArtSource`:

``` java
SharedPreferences prefs = PreferenceManager.getDefaultSharedPreferences(this);
boolean b = prefs.getBoolean(""derp"", false);
```
###### Solutions
1. Add another `EXTRA` to the `Intent` providing preferences name.
2. Add another static method for getting preference name.

We will then be able to do this in `PreferenceFragment`:

``` java
getPreferenceManager().setSharedPreferencesName(""PrefsName"");
```

Sure, we can use `muzeiartsource_PrefsName` these days, but it's undocumented. So maybe, document it is possible soulution number 3.
"
romannurik/muzei,closed,Scrolling/parallax effect,[],"An option or way to disable the scrolling/parallax effect would be nice. It really is only a waste of CPU power and can sometimes be jittery or laggy.
"
romannurik/muzei,closed,[WIP] ADD: Daydream service,[],"Very much empirical but working...
"
romannurik/muzei,closed,Wallpapers are jittery,[],"I just have two wallpapers set right now and they both appear to be jittery when the blur effect it applied. I have no idea of how to reproduce this as it happens randomly. 
![screenshot_2015-03-03-17-11-52 1](https://cloud.githubusercontent.com/assets/3253145/6477684/4813ed9e-c24c-11e4-8e9f-5e8cccaef308.png)
![screenshot_2015-03-03-17-12-00 1](https://cloud.githubusercontent.com/assets/3253145/6477688/55478110-c24c-11e4-9d74-6e14d75cf734.png)
"
romannurik/muzei,closed,Update to Gradle Plugin 1.1.0,[],"Uses [Elvis Operators](http://groovy.codehaus.org/Operators#Operators-ElvisOperator%28?:%29) on signing config properties as they can no longer be null.
"
romannurik/muzei,closed,Current Artwork Application,"[Label(name=""api"")]","Hello, is any way to get current Artwork Application ( Muzei Plugin ) package?
I know I can get Artwork and Bitmap.
"
romannurik/muzei,closed,Old scrolling effect,[],"Since 2.0 came out, Muzei has handled scrolling differently. It used to dynamically reach the end of wallpaper regardless of how many screens there are. That was perfect for my use case. Now that it doesn't do that and it crops at the ends, I have many angry users that I cannot please now.
"
romannurik/muzei,closed,Add auto save wallpapers option,[],"I'd love a global Muzei option to auto save each new wallpaper, such that it applied to any Muzei extension responsible for changing the wallpaper.
"
romannurik/muzei,closed,Cache and reuse generated cubic gradient drawables,[],"I doubt this will make any significant performance improvement since the gradients aren't generated very often, but we use this internally and just wanted to contribute back in case you think it'd be useful!
"
romannurik/muzei,closed,Add intent to get to Advanced Settings,[],"For one of my apps, I provide access to my muzei extension settings in the overflow menu of my app. This makes it easier for users, but I would also like to make it easy to access the Muzei advanced settings. I currently can't skip right to that, but can only get to the source selection screen via intents.
"
romannurik/muzei,closed,Added option to refresh on double tap,[],"In settings, user now has the option to refresh the wallpaper on
double-tap, instead of de-blur. This takes away the need to re-launch
the app every time the user wants to go to the next image.
"
romannurik/muzei,closed,Web archive is broken,"[Label(name=""web-archive"")]","01.144 attribute 'month' of 'datetime.date' objects is not writable
Traceback (most recent call last):
  File ""/base/data/home/runtimes/python27/python27_lib/versions/third_party/webapp2-2.3/webapp2.py"", line 545, in dispatch
    return method(_args, *_kwargs)
  File ""/base/data/home/apps/s~muzeiapi/8.381155868569835202/handlers/tasks.py"", line 152, in get
    next_month.month = 1
AttributeError: attribute 'month' of 'datetime.date' objects is not writable
"
romannurik/muzei,closed,"Move Gradle, build tools, and compile/target SDK to main build.gradle",[],"In order to not touch every build.gradle file every time either the gradle plugin updates or the build tools updates or the newest SDK comes out, we can move all of these values to the main build.gradle file as suggested here: http://tools.android.com/tech-docs/new-build-system/tips

This update also updates the gradle plugin 1.0.0 to 1.0.1 and build tools 21.1.1 to 21.1.2
"
romannurik/muzei,closed,Add analog watch face,"[Label(name=""android-wear""), Label(name=""enhancement"")]","Add an analog watch face option
"
romannurik/muzei,open,BackupAgent for advanced settings.,[],"I would still consider this a work in progress. I've opened this pull request mostly for a discussion around the changes I've made.

This BackupAgent will backup the advanced settings stored in the default
SharedPreferences. Backing up the default preferences is a bit hacky
since the name isn't easily accessible. Ideally, this would be moved
over to a named SharedPreferences so future OS updates don't break the
backing naming.

Also, need a proper way to handle the backup api key so it isn't stored
in the source code.

This is in reference to #110 @romannurik any thoughts on the way it uses the default preferences? Should I create named preferences and provide an upgrade path? 
"
romannurik/muzei,closed,Add Analytics,"[Label(name=""enhancement"")]","Adding Analytics will help surface what actions are used most often, whether users are able to find the appropriate settings, and overall help build a better understanding of how people use Muzei. Ideally this should also allow slicing data by what art source is currently active (to narrow down issues caused by particular sources) and help with crash reporting by allowing segmentation by device and Android version.

This could be done via Google Analytics or indirectly through Google Tag Manager (which would feed data to Google Analytics).
"
romannurik/muzei,open,Change background based on currently playing music,"[Label(name=""enhancement"")]","Use the [MediaController](https://developer.android.com/reference/android/media/session/MediaController.html) added in Android 5.0 to listen for changes in the current playing music and update the background to match the album art of the playing track.

Currently we publish the current artwork image and artwork details to the Muzei API. Ideally this should do the same (using the track name and album+artist for the details) to ensure that third parties stay in sync, but not show the 'new artwork' notification.

After music stops playing, the existing source should resume with its current artwork. Any artwork changes that occur while music is playing should be ignored (for purposes of display/API update purposes).

This should be an option that users can enabled/disable at will via the Advanced settings screen.
"
romannurik/muzei,closed,Easy way to build without play-services,[],"I tried to update this app on fdroid, a free/libre/open-source app ""store"", but failed to strip play-services dependency completly. Is there an easy way to build this app without play-services and wearable?
"
romannurik/muzei,closed,"Muzei 2.0.1 crashes on Galaxy S3, HTC Butterfly and other devices",[],"Related to the RenderScript support library.

E/AndroidRuntime( 8059): android.support.v8.renderscript.RSRuntimeException: Error loading RS jni library: java.lang.UnsatisfiedLinkError: unknown failure
E/AndroidRuntime( 8059):    at android.support.v8.renderscript.RenderScript.create(RenderScript.java:1018)
E/AndroidRuntime( 8059):    at android.support.v8.renderscript.RenderScript.create(RenderScript.java:1055)
E/AndroidRuntime( 8059):    at android.support.v8.renderscript.RenderScript.create(RenderScript.java:1041)
E/AndroidRuntime( 8059):    at com.google.android.apps.muzei.util.ImageBlurrer.<init>(ImageBlurrer.java:39)
E/AndroidRuntime( 8059):    at com.google.android.apps.muzei.render.MuzeiBlurRenderer$GLPictureSet.load(MuzeiBlurRenderer.java:359)
E/AndroidRuntime( 8059):    at com.google.android.apps.muzei.render.MuzeiBlurRenderer.setAndConsumeBitmapRegionLoader(MuzeiBlurRenderer.java:272)
E/AndroidRuntime( 8059):    at com.google.android.apps.muzei.render.RenderController$2$1.run(RenderController.java:98)
E/AndroidRuntime( 8059):    at com.google.android.apps.muzei.render.GLTextureView$GLThread.guardedRun(GLTextureView.java:1238)
E/AndroidRuntime( 8059):    at com.google.android.apps.muzei.render.GLTextureView$GLThread.run(GLTextureView.java:1015)
"
romannurik/muzei,closed,SvgPathParser fails on parsing this SVG,[],"SVG:

``` xml
<?xml version=""1.0"" encoding=""utf-8""?>
<svg version=""1.1"" xmlns=""http://www.w3.org/2000/svg"" x=""0px"" y=""0px"" viewBox=""0 0 1000 300"">
    <path id=""R"" fill=""#231F20"" d=""M254.984,99.799c6.622-1.081,16.486-1.892,27.432-1.892c13.513,0,22.972,2.027,29.458,7.162
        c5.405,4.324,8.378,10.676,8.378,19.054c0,11.622-8.243,19.594-16.081,22.432v0.405c6.351,2.567,9.864,8.648,12.162,17.027
        c2.838,10.27,5.675,22.161,7.432,25.675h-21.081c-1.486-2.567-3.648-10-6.351-21.216c-2.433-11.351-6.351-14.459-14.729-14.594
        h-6.216v35.81h-20.405V99.799z M275.389,138.988h8.108c10.27,0,16.351-5.135,16.351-13.108c0-8.378-5.676-12.567-15.135-12.702
        c-5,0-7.838,0.405-9.324,0.675V138.988z""/>
    <path id=""t"" fill=""#231F20"" d=""M856.597,104.664v18.918h14.729v15.135h-14.729v23.919c0,7.973,1.892,11.621,8.107,11.621
        c2.567,0,4.595-0.27,6.081-0.54l0.135,15.54c-2.702,1.081-7.567,1.757-13.378,1.757c-6.621,0-12.161-2.298-15.405-5.676
        c-3.783-3.919-5.675-10.271-5.675-19.594v-27.027h-8.784v-15.135h8.784v-14.324L856.597,104.664z""/>
    <path id=""r"" fill=""#231F20"" d=""M953.894,145.339c0-9.729-0.271-16.081-0.541-21.756h17.702l0.676,12.162h0.541
        c3.378-9.594,11.486-13.648,17.837-13.648c1.893,0,2.838,0,4.324,0.27v19.324c-1.486-0.271-3.243-0.541-5.54-0.541
        c-7.567,0-12.702,4.054-14.054,10.405c-0.271,1.352-0.405,2.974-0.405,4.595v33.513h-20.54V145.339z""/>
</svg>
```

![SVG to png](https://cloud.githubusercontent.com/assets/3610345/5578826/94b90502-902f-11e4-8389-7f3d2bc33c78.png)
(SVG -> PNG)

Code:

``` java
public interface LogoPaths {
    public static final String[] GLYPHS = {
            ""M254.984,99.799c6.622-1.081,16.486-1.892,27.432-1.892c13.513,0,22.972,2.027,29.458,7.162"" // R
                    + ""c5.405,4.324,8.378,10.676,8.378,19.054c0,11.622-8.243,19.594-16.081,22.432v0.405c6.351,2.567,9.864,8.648,12.162,17.027""
                    + ""c2.838,10.27,5.675,22.161,7.432,25.675h-21.081c-1.486-2.567-3.648-10-6.351-21.216c-2.433-11.351-6.351-14.459-14.729-14.594""
                    + ""h-6.216v35.81h-20.405V99.799z M275.389,138.988h8.108c10.27,0,16.351-5.135,16.351-13.108c0-8.378-5.676-12.567-15.135-12.702""
                    + ""c-5,0-7.838,0.405-9.324,0.675V138.988z"",
            ""M856.597,104.664v18.918h14.729v15.135h-14.729v23.919c0,7.973,1.892,11.621,8.107,11.621"" // t
                    + ""c2.567,0,4.595-0.27,6.081-0.54l0.135,15.54c-2.702,1.081-7.567,1.757-13.378,1.757c-6.621,0-12.161-2.298-15.405-5.676""
                    + ""c-3.783-3.919-5.675-10.271-5.675-19.594v-27.027h-8.784v-15.135h8.784v-14.324L856.597,104.664z"",
            ""M953.894,145.339c0-9.729-0.271-16.081-0.541-21.756h17.702l0.676,12.162h0.541"" // r
                    + ""c3.378-9.594,11.486-13.648,17.837-13.648c1.893,0,2.838,0,4.324,0.27v19.324c-1.486-0.271-3.243-0.541-5.54-0.541""
                    + ""c-7.567,0-12.702,4.054-14.054,10.405c-0.271,1.352-0.405,2.974-0.405,4.595v33.513h-20.54V145.339z""
    };

}
```

Output:
![Ouput in GIF format](https://cloud.githubusercontent.com/assets/3610345/5578845/cf64fb02-902f-11e4-91ac-91b24f8c9ffd.gif)
![Output in PNG format](https://cloud.githubusercontent.com/assets/3610345/5578873/68791b3e-9030-11e4-97e4-0f6eab508f17.png)

I was trying to implement the muzei animation in a test project (which is not going to be released, It's for learning purposes), on the most characters (I don't have tested all) it pass (without [shorthand/smooth curveto](http://www.w3.org/TR/SVG/paths.html#PathDataCurveCommand), paths because that isn't supported in this parser), but as showed above it fails on some characters. 

Is it possible to fix this? I can try to fix it by myself, but that takes some time (I'm new to Android/Java programming).

I hope what I have requested is possible.
"
romannurik/muzei,closed,Update AppCompat from 21.0.2 to 21.0.3,[],"Update to `com.android.support:appcompat-v7:21.0.3` to ensure we have the latest bug fixes
"
romannurik/muzei,closed,Limit Wearable timeout,[],"Fixes #122 by
1) Doing a check on API level before attempting to connect to the Wearable API (as Wearable API is not available prior to Android 4.3 / Jelly Bean MR2 so no need to attempt to connect)
2) Limiting the timeout to 5 seconds to reduce any delay even on 4.3+ devices.
"
romannurik/muzei,closed,Long delay switching photos,[],"Hi, new to Android, very new to Muzei, however after the first install I noticed a big delay using both gallery photos and the 500px demo, selecting a new image with the right arrow option caused the new image name and details to appear immediately but the image took 30 seconds to refresh, it was being caused by 

RealRenderController.java
113             WearableController.updateDataLayer(mContext, currentArtwork, loader);

This call in my Fairphone FP1 waits 30 seconds then throws an exception, commenting out the line and rebuilding gave me snappy updates.

I'm afraid I don't know enough as yet about android or Wearables to offer anything more than reporting the issue.
"
romannurik/muzei,closed,Add date option to watch face,"[Label(name=""android-wear""), Label(name=""enhancement"")]","Add support for showing the date on the Android Wear watch face
"
romannurik/muzei,closed,Optimize when to create scaled watch face background,[],"Previously, we would create the scaled image in onDraw the first time after a resize event or after a new image was loaded. However, by utilizing onSurfaceChanged we can retrieve the current width and height prior to onDraw, allowing us to move the scaling from onDraw(). This also allows us to handle the more common case of a new image being loaded and allows us to scale the new image on the background thread.
"
romannurik/muzei,closed,Less 2nd row artists and more genuises,[],"I don't know if it's a matter of taste of the people who select the paintings, but I think it shows a lack of artistical culture to see second and third class works while thre isn't (or I haven't seen them; have looked at almost every paiting in your archive website) more than 4 or 5 spanish paintings, all by Juan Gris. It's a bit like making an art music playlist without german compositions.
Don't you really know VelÃ¡zquez ( http://www.metmuseum.org/toah/hd/vela/hd_vela.htm ). Yeah, Delacroix is nice, but just ""nice"". Christ, Las meninas! (http://www.artchive.com/artchive/V/velazquez/velazquez_atlee.html ). What about Goya, ""father"" of modern expessionsm ( https://www.guernicamag.com/daily/john_sevigny_on_francisco_goya ); and El greco (not spanish born, right), Murillo, ZubarÃ¡n, Sorolla... (let appart Gris, Picasso, DalÃ­, MirÃ³, or contemporary painters like Tapies, Palazuelo, Antonio LÃ³pez, BarcelÃ³, Saura, etc, etc)? I can't believe it.

The selection seems to suffer the typical anglosaxon student taste: ""pretty"" and easy to understand paintings: The french (the great and the mediocres, which are the majority, like everywhere; but you know, britons and americans feel their legs spread when they think of anything french), the italians (mainly Renaissance and early Baroque painters, ignoring that besides Modigliani, there have been more good italian painters after the XVII century), some flemish artists (yeah, they are awesome), and a lot of mediocre british painters.
There aren't either many modern nor contemporary paintings on your selection (and here, we can't discuss there would be many american, and several great british painters which would deserve to be listed).

Ok, that was my criticism, not technology related since I'm an art teacher, not a techie guy at all. I hope you won't take it personally, it's not my intention, only want to ""slap"" a little you face to tell you Â«Hey, wake up! There are more and better paintings that the ones they taught you in hight school or the paintings and painters you have seen mention on american moviesÂ».

Cheers.

P.S.: Ok, at least you know about Las meninas and was the painting of the day in march. Hadn't seen it. My apologies. But still a painting doesn't make a difference. My post is as valid as before.
"
romannurik/muzei,closed,Home screen icon changed to placeholder,[],"The home screen Muzei app icon changed to a placeholder, a 3d Android. I think this happened after a Muzei upgrade.

This is on a Nexus 4 running Lollipop.
"
romannurik/muzei,closed,Improve Watch Face first run experience,[],"In the case where the user has just updated to Muzei 2.0+ (i.e., went from no Wearable app to a Wearable app) AND has not yet had their wallpaper change, there may be cases where the DataLayer has valid artwork, but it is not yet cached locally or made available via the Artwork API.

In those cases, the Muzei watch face would show a notification stating that the user should activate Muzei when no artwork is found. Instead, we should attempt to retrieve the artwork from the DataLayer first and only if that fails should we show the activate Muzei notification.

Note: this moves a lot of code from MuzeiWearableListenerService to ArtworkCacheIntentService, but the functionality is identical.
"
romannurik/muzei,closed,Fix Double Tap Detection on Certain Devices,"[Label(name=""bug"")]","#18 seems to have broken a large number of device's ability to double tap to unblur. Investigate the issue and fix or revert the PR.
"
romannurik/muzei,closed,Ability to select folders for Gallery art source,"[Label(name=""enhancement"")]","Instead of selecting pictures one or multiple at a time, allow adding entire directories to the Gallery art source. Include all pictures in the directory, including when new pictures are added to the directory.
"
romannurik/muzei,closed,Remove Wearable.API warning messages when API is unavailable,[],"When `connectionResult.getErrorCode() == ConnectionResult.API_UNAVAILABLE`, this means we are on an unsupported device and we should not attempt to update the data layer. However, since that status is unlikely to change over the course of the app's lifecycle, creating a warning message each and every time this happens is unnecessary. Instead, we can do a simple verbose statement that does not spam logcat unless specifically requested.
"
romannurik/muzei,closed,Prevent transient crashes due to invalid images,[],"when building notifications / syncing to Wearables

Adds additional null checks, replaces IllegalArgumentException with Log message. Also does not update ContentProvider if cache image location was not able to be saved, preventing invalid images or image desync with artwork details.
"
romannurik/muzei,closed,Use Renderscript Support Library,[],"Instead of relying on possibly buggy native Renderscript implementations, use the Support Library version which is consistent across all devices/API versions.
"
romannurik/muzei,closed,"Muzei & Muzei settings are two separeted ""recent"" tasks","[Label(name=""bug"")]","![screenshot_2014-12-11-12-03-35](https://cloud.githubusercontent.com/assets/721244/5394292/03605846-813c-11e4-9082-ea5c17d65c54.png)
"
romannurik/muzei,open,Use BackupAgent to sync preferences,"[Label(name=""enhancement"")]",
romannurik/muzei,open,Sync chosen gallery photos to Drive,"[Label(name=""enhancement"")]",
romannurik/muzei,closed,Typeface selector for watch face,"[Label(name=""android-wear""), Label(name=""enhancement"")]",
romannurik/muzei,closed,Settings UI wallpaper broken when going through system wallpaper picker,"[Label(name=""bug"")]",
romannurik/muzei,closed,Tap actions take #3,[],"This Pull Request covers the introduction of configurable tap actions.
The Double-Tap action and the Three-Finger action can be set to any of these values:
- Nothing
- Show original Artwork (= default behavior for Double-Tap and currently built into Muzei)
- Next Artwork (sends the Next command to the ArtSource)
- View Artwork details (opens the provided view Intent from the ArtSource)

This pull request has been re-based to the latest changes
"
romannurik/muzei,closed,NPE: texImage2D can't be used with a null bitmap.,[],"This NPE occurs when the device boots.

Using Genymotion Emulator - Lollipop x64. I'm fairly certain I've reproduced this in the past on a number of devices, but I don't have any with me now. 

Steps to reproduce:
I can't confirm whether this occurs for other custom extensions, but it does for mine. 
1. Install MuzeiMusicExtension: https://github.com/timusus/MuzeiMusicExtension or https://play.google.com/store/apps/details?id=com.simplecity.muzei.music
2. Set MuzeiMusicExtension as your selected extension.
3. Play a song, wait until the artwork is displayed as the wallpaper.
4. Reboot the device

Sure, I might be doing something wrong in the custom extension - passing in a dodgy uri or whatever - but in any case, Muzei should be able to prevent this crash with a null check - right?

Here's the stacktrace:

```
    Process: net.nurik.roman.muzei, PID: 2482
    java.lang.NullPointerException: texImage2D can't be used with a null Bitmap
            at android.opengl.GLUtils.texImage2D(GLUtils.java:157)
            at com.google.android.apps.muzei.render.GLUtil.loadTexture(GLUtil.java:90)
            at com.google.android.apps.muzei.render.GLPicture.<init>(GLPicture.java:156)
            at com.google.android.apps.muzei.render.MuzeiBlurRenderer$GLPictureSet.load(MuzeiBlurRenderer.java:335)
            at com.google.android.apps.muzei.render.MuzeiBlurRenderer.setAndConsumeBitmapRegionLoader(MuzeiBlurRenderer.java:256)
            at com.google.android.apps.muzei.render.RenderController$1$1.run(RenderController.java:78)
            at net.rbgrn.android.glwallpaperservice.GLThread.guardedRun(GLWallpaperService.java:644)
            at net.rbgrn.android.glwallpaperservice.GLThread.run(GLWallpaperService.java:536)
```
"
romannurik/muzei,closed,Build a full screen Android Wear app,"[Label(name=""enhancement"")]","Current Android Wear experience is limited to notifications. However, we can provide a better full screen experience by building an Android Wear app. This FullScreenActivity shows a pannable (scroll and fling including edge effects) full screen image of the current artwork with the ability to tap to display a card with the artwork title and byline (and tap again to hide).

It slightly shrinks the artwork so that you can pan in at most one direction (i.e., the longer of the two dimensions of the image) rather than a great deal in one direction and a small bit in the other direction.

NOTE: As a result of this change, images sent to Wearable devices are no longer cropped.
"
romannurik/muzei,closed,Uncouple Wallpaper Life Cycle from Loading/Rendering Process,"[Label(name=""enhancement"")]","The entire source subscribing/loading/rendering framework only runs when the wallpaper is active. This means that other consumers of the wallpaper (such as the example widget) will not get updates when the wallpaper is disabled.

Ideally, the wallpaper should just be one of many consumers of Muzei controlled artwork and third parties should be able to register as a consumer so that they can receive new artwork even if those users don't want to specifically use the live wallpaper.
"
romannurik/muzei,closed,Handle Invalid Images without crashing,[],"Previously, Muzei assumed that if a file specified by an art source was downloaded that it was a valid image, leading to crashes when loading the BitmapRegionLoader on an invalid file. This fix attempts to open the image immediately after writing it to ensure that the image is valid and able to be parsed by Muzei. By doing this at the ArtworkCache level, we can properly mark the error state and show grumpy mcpuzzles for invalid images.
"
romannurik/muzei,closed,Update all dependencies to latest stable versions,[],"All:
- Gradle version: 2.1 to 2.2.1 (required for Android Studio 1.0 RC2)
- Gradle plugin: 0.14.1 to 0.14.4
- Build tools: 21.1 to 21.1.1

Main:
- okhttp:1.2.1 to okhttp:2.1.0 and okhttp-urlconnection:2.1.0
- picasso:2.1.1 to picasso:2.4.0
- eventbus:2.2.0 to eventbus:2.4.0
- support-v4:21.0.0 is transitively added via appcompat, removed from build.gradle
- appcompat-v7:21.+ to appcompat-v7:21.0.2
- recyclerview-v7:21.+ to recyclerview-v7:21.0.2

example-source-500px:
- retrofit:1.7.1 to retrofit:1.8.0

provider:
- Reordering build.gradle to match others

wearable:
- Reordering build.gradle to match others
"
romannurik/muzei,closed,Crash in android.opengl.GLUtils.texImage2D,"[Label(name=""bug"")]","After entering in this state it keep crashing. The only solution is to clear app data.
I was using a remote art source on a pretty bad wifi connection.

```
                           Process created for service net.nurik.roman.muzei/com.google.android.apps.muzei.MuzeiWallpaperService
                           PID: 10073   UID: 10108   GIDs: {50108, 9997, 3003, 1028, 1015} abi=armeabi-v7a

                   art  I  Late-enabling -Xcheck:jni
                 Event  D  No subscribers registered for event class com.google.android.apps.muzei.event.ArtworkLoadingStateChangedEvent
                        D  No subscribers registered for event class de.greenrobot.event.NoSubscriberEvent
                        D  No subscribers registered for event class com.google.android.apps.muzei.event.ArtworkLoadingStateChangedEvent
                        D  No subscribers registered for event class de.greenrobot.event.NoSubscriberEvent
                        D  No subscribers registered for event class com.google.android.apps.muzei.event.WallpaperActiveStateChangedEvent
                        D  No subscribers registered for event class de.greenrobot.event.NoSubscriberEvent
    GLWallpaperService  D  onSurfaceCreated()
                 Event  D  No subscribers registered for event class com.google.android.apps.muzei.event.WallpaperSizeChangedEvent
                        D  No subscribers registered for event class de.greenrobot.event.NoSubscriberEvent
            Adreno-EGL  I  <qeglDrvAPI_eglInitialize:410>: QUALCOMM Build: 10/28/14, c33033c, Ia6306ec328
                 Event  D  No subscribers registered for event class com.google.android.apps.muzei.event.ArtworkLoadingStateChangedEvent
                        D  No subscribers registered for event class de.greenrobot.event.NoSubscriberEvent
muzei_RealRenderContro  D  Loading artwork with rotation: 0
        WearableClient  D  WearableClientImpl.onPostInitHandler: done
                   art  I  Ignoring second debugger -- accepting and dropping
adb l                 Event  D  No subscribers registered for event class com.google.android.apps.muzei.event.SwitchingPhotosStateChangedEvent
                        D  No subscribers registered for event class de.greenrobot.event.NoSubscriberEvent
                        D  No subscribers registered for event class com.google.android.apps.muzei.event.ArtworkSizeChangedEvent
                        D  No subscribers registered for event class de.greenrobot.event.NoSubscriberEvent
                  skia  D  --- decoder->decodeRegion returned false
        AndroidRuntime  E  FATAL EXCEPTION: GLThread 6488
                        E  Process: net.nurik.roman.muzei, PID: 10073
                        E  java.lang.NullPointerException: texImage2D can't be used with a null Bitmap
                        E      at android.opengl.GLUtils.texImage2D(GLUtils.java:157)
                        E      at com.google.android.apps.muzei.render.GLUtil.loadTexture(GLUtil.java:90)
                        E      at com.google.android.apps.muzei.render.GLPicture.<init>(GLPicture.java:156)
                        E      at com.google.android.apps.muzei.render.MuzeiBlurRenderer$GLPictureSet.load(MuzeiBlurRenderer.java:346)
                        E      at com.google.android.apps.muzei.render.MuzeiBlurRenderer.setAndConsumeBitmapRegionLoader(MuzeiBlurRenderer.java:267)
                        E      at com.google.android.apps.muzei.render.RenderController$2.run(RenderController.java:101)
                        E      at net.rbgrn.android.glwallpaperservice.GLThread.guardedRun(GLWallpaperService.java:644)
                        E      at net.rbgrn.android.glwallpaperservice.GLThread.run(GLWallpaperService.java:536)
```

Using this revision https://github.com/romannurik/muzei/commit/270dff4de75a9eee4229cb360c412420871f230c
"
romannurik/muzei,closed,Update API doc with the ContentProvider API after publishing,[],
romannurik/muzei,closed,"""Back to default"" for advanced settings","[Label(name=""enhancement"")]",
romannurik/muzei,closed,Allow only downloading images over wifi,"[Label(name=""duplicate""), Label(name=""enhancement""), Label(name=""network"")]",
romannurik/muzei,closed,Add attribution field to API,"[Label(name=""api""), Label(name=""enhancement"")]","For showing small text like ""wikiart.org"" or ""(C) John Smith""
"
romannurik/muzei,closed,Fix scrollbars in archive site,"[Label(name=""bug""), Label(name=""web-archive"")]","Possibly as easy as `overscroll-y:auto` instead of `visible`
"
romannurik/muzei,closed,New API: Retrieve current Artwork details and Image,"[Label(name=""enhancement"")]","Instead of external applications needing to re-implement all of Muzei or redownload images that Muzei has already cached, we provide a ContentProvider with a single table and single row which stores the current Artwork details and implements openFile() to give access to the already cached artwork Bitmap. 

MuzeiContract has been added to the api library as well as helper methods for serializing/deserializing Artwork with ContentProvider classes. To remove the requirement to have an always running ContentObserver, Muzei also sends out a ACTION_ARTWORK_CHANGED broadcast so that apps can be started only when data is changed.

Added an example-contract-widget module which displays the current artwork (and has a content description of the current title or byline) to demonstrate the API on phones/tablets.

In addition, this API also bridges over the Artwork detail and image onto Android Wear devices, ensuring only one copy of the image is sent over Bluetooth to the Wearable and providing the exact same API for both types of devices.
"
romannurik/muzei,closed,Question about SourceState.java setUserCommands,[],"Hello, I have read a little code about Muzei, very good project to study. 

But I have a question while read the sourcecode in SourceState.java, why in setUserCommands() function, need to new a ArrayList, while the variable mUserCommands is already has a ArrayList reference?

Thanks!
"
romannurik/muzei,closed,"Update to RetroFit 1.7.1, fix compilation issues with 500px example",[],"In #65, we moved from setServer() to setEndpoint(). However, that method does not exist in the Retrofit 1.3.0 we were using. Update to Retrofit 1.7.1 to gain access to the setEndpoint() method. Also fixes the deprecation of isNetworkError().
"
romannurik/muzei,closed,Default to app name for notification title if there is no artwork title,[],"Previously notifications for artwork with no title would have an empty title but 'New wallpaper' as its text, which looks really weird, particularly on Android Wear devices. Instead, we use the app name in place of an empty title which ensures the notification looks correct even if there is no title associated with the artwork.

Tested with Muzei Ghibli: https://play.google.com/store/apps/details?id=net.ebt.muzei.miyazaki
"
romannurik/muzei,closed,High CPU usage on Nexus 9,"[Label(name=""bug""), Label(name=""performance"")]","Muzei is utilizing a much higher CPU than expected on the Nexus 9. This also seems to be causing unusual heating of the device near the CPU.

http://i.imgur.com/alu2GHJ.png

http://i.imgur.com/ft972lq.png

As soon as muzei is disabled, the device begins to cool down. Any ideas?
"
romannurik/muzei,closed,"Add notification actions: Next, Custom commands, and Open details",[],"This PR focuses on adding notification actions to the existing new artwork notifications in an effort to make it easier to interact with Muzei (being particularly important on Android Wear devices).

For sources that support the 'Next Artwork' built in action (`BUILTIN_COMMAND_ID_NEXT_ARTWORK`), we now show a 'Next' action in the notification so that users can skip to the next artwork in response to a notification.

Only for Android Wear devices, we also include a 'More' action which brings up the list of custom user commands so that the user can take these custom actions without pulling their phone out. This only appears if the source registers custom user commands.

For sources that include a `viewIntent` in their artwork, we now show a 'Details' action which directly links to this intent.
"
romannurik/muzei,closed,Update to Gradle plugin 0.14.1 and build tools 21.1,[],"For Android Studio 0.9.1
"
romannurik/muzei,closed,Add Intent Filter to link directly to notification settings on Android 5...,[],"....0+ devices

Per [Cyril Mottier's G+ post](https://plus.google.com/+CyrilMottier/posts/YY6tbJrJMra), Android 5.0 adds the ability to directly link to an application's notification settings when long pressing on the notification. Adding this functionality allows users to directly jump to Muzei's notification settings (part of the Advanced settings screen) from the notification.
"
romannurik/muzei,closed,Update build tools to 21.0.2,[],"Update to the latest build tools to pull in latest fixes
"
romannurik/muzei,closed,Intent to open Advanced Settings,[],"I need to be able to open Muzei's advanced settings within my own settings menu to make it easier to access for my users
!
[image](https://cloud.githubusercontent.com/assets/2546510/4726488/fe13eb9c-5962-11e4-9152-fe64bb6a9d44.png)
"
romannurik/muzei,closed,Use ContextCompat/EnvironmentCompat to simplify file directory logic,[],"Support Library provides ContextCompat.getExternalCacheDirs and ContextCompat.getExternalFilesDirs with alongside EnvironmentCompat.getStorageState allow use to simplify the logic of picking the best cache and files directories in a backward compatible way.
"
romannurik/muzei,closed,Move Gallery Settings change intervals to strings.xml,[],"Gallery Settings change interval strings were hardcoded in the menu XML file. Moving them to strings.xml to allow future translations to include these strings
"
romannurik/muzei,closed,Export Gallery Settings activity,[],"Fixes #71 and brings Gallery Settings activity in line with third party extension requirements.
"
romannurik/muzei,closed,Optimize notification large icon and Android Wear background sizes,[],"Large icon size is set by android.R.dimen.notification_large_icon_height and changed between pre-Android 5.0 and 5.0. To ensure the best large icon, we use the provided dimension - Android by default does not center crop too large of images so the fixed size was giving strange results, particularly on low resolution devices.

While there isn't a set size for BigPictureStyle backgrounds, this background is used on Android Wear devices, which suggest a 400x400px background per http://developer.android.com/training/wearables/notifications/creating.html#AddWearableFeatures - we load a separate background image of this size.
"
romannurik/muzei,closed,Implement Android 5.0 notification color and public version,[],"Notifications in Android 5.0 can have a background color over the small icon and can specify a separate public and private version (where potentially sensitive details can be hidden from the public version). This implements both features, using a blue grey color matching the system apps' notification color and hiding the image and the artwork title from the public version.
"
romannurik/muzei,closed,"Update to Android 5.0 SDK, build tools, and Support Library (v21)",[],"No changes to actual functionality or taking advantage of new APIs.
"
romannurik/muzei,closed,Add basic RTL support to layouts,[],"Replaces instances of left/right with start/end to declare initial support for RTL layouts. Did not touch settings_advanced_fragment_include_content.xml as that should be covered in #77
"
romannurik/muzei,closed,Convert Advanced Settings Layout to GridLayout,[],"GridLayouts are the new, more performant alternative to TableLayout (as explored in #3). This diff converts the advanced settings layout to use a GridLayout, allowing text to align to the right properly and grow the width of the left column as the text changes (as would happen in different languages).

This uses some extremely lightweight Space elements with columnSpan=""2"" to add spacing between rows (rather than applying a marginTop to an element and aligning as was done in the RelativeLayout). To keep the number of views low, however, the checkbox rows that only a single element still use marginTop
"
romannurik/muzei,closed,Update Gradle and Build Tools to latest releases,[],"Gradle Plugin to 0.13.0, Gradle to 2.1, Build Tools to 20.0.0, Android plugin renamed to new 'com.android.application'.

This will ensure that Muzei compile and build out of the box on Android Studio 0.8.11 (which is now the minimum compatible version).
"
romannurik/muzei,closed,Add Serbian translation,[],
romannurik/muzei,closed,Ensure GLPicture loading does not freeze on low blur amounts,[],"On some devices such as the Nexus 10 and Samsung Galaxy Note 2014, when you use a low amount of blur (triggering the mMaxPrescaledBlurPixels == 0 case), blurrer.destroy() freezes the app, causing images to no longer load until you force stop the app. As the ImageBlurrer is not actually needed unless mMaxPrescaledBlurPixels is greater than 0, we can move the allocation and destruction of it inside the else block. This ensures that the app works as expected in either case.

Fixes #63 
"
romannurik/muzei,closed,Make keystore.props.file local.properties' entry optional,[],"A stumbling block for any Muzei developer who initially tries to checkout and then import Muzei into Android Studio is that the keystore.props.file entry in local.properties is required, causing the import to error out until you 1) figure out why the error occurred and 2) figure out how to fix it.

As there are few, if any, Muzei developers who need to build a release build (the only time when these values are actually required), we can make the keystore.props.file value optional, allowing new developers to immediately checkout, import, and build a debug APK without issue.

Building a release build with a null storeFile will error out the build as expected, but in that case the developer is more likely to know where to look - in the signingConfig.releaseConfig section which defines this loading behavior.
"
romannurik/muzei,closed,Era Dominance,[],"What's up with the dominance of late 19th and early 20th century works in this app? Is this a restriction of some API that you're using? It seems 95% of these paintings are from a period between 1870 and 1920. Occasionally there are some from earlier (e.g. I think there was a Bosch painting recently), but it's a rarity.
"
romannurik/muzei,closed,GallerySettingsActivity is not exported,[],"per http://api.muzei.co/reference/com/google/android/apps/muzei/api/MuzeiArtSource.html, the `settingsActivity` of a `MuzeiArtSource` must be exported. This is not important for the Muzei app itself (since it's accessing its own Activity), but for 3rd parties utilizing Muzei extensions this prevents changing the settings of this plugin.
"
romannurik/muzei,closed,Identify Wallpaper,[],"Many times I absentmindedly close the new wallpaper notification, then later decide I want to know more about the featured piece.  Is there a place to identify the current wallpaper when the notification is not present?  If not, perhaps it could be added to the settings menu.

BTW, this is one of my favorite Android apps.  Thanks for making it!
"
romannurik/muzei,closed,Muzei Crash when downloading,"[Label(name=""bug""), Label(name=""duplicate"")]","I got this Stacktrace appearing in my Google Play Developer console quite often. I'm downloading Images via URL from a webserver (using most recent Muzei API). Any ideas?

Stacktrace:
java.lang.IndexOutOfBoundsException: Invalid index 1, size is 0
at java.util.ArrayList.throwIndexOutOfBoundsException(ArrayList.java:255)
at java.util.ArrayList.get(ArrayList.java:308)
at com.google.android.apps.muzei.api.internal.SourceState.toBundle(SourceState.java:107)
at com.google.android.apps.muzei.api.MuzeiArtSource.publishCurrentState(MuzeiArtSource.java:696)
at com.google.android.apps.muzei.api.MuzeiArtSource.publishCurrentState(MuzeiArtSource.java:684)
at com.google.android.apps.muzei.api.MuzeiArtSource.access$000(MuzeiArtSource.java:190)
at com.google.android.apps.muzei.api.MuzeiArtSource$1.handleMessage(MuzeiArtSource.java:272)
at android.os.Handler.dispatchMessage(Handler.java:102)
at android.os.Looper.loop(Looper.java:136)
at android.app.ActivityThread.main(ActivityThread.java:5118)
at java.lang.reflect.Method.invokeNative(Native Method)
at java.lang.reflect.Method.invoke(Method.java:515)
at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:794)
at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:610)
at dalvik.system.NativeStart.main(Native Method)
"
romannurik/muzei,closed,Desaturation effect fix,[],"- Now supports pre-API19 via a call to a deprecated method (recommended way only supports 19+)
- Now supports desaturation with no blur
"
romannurik/muzei,closed,Fixed a RTE by bypassing a call requiring API 19+,[],"Running the main activity on a pre-API-19 device was causing a runtime exception.

I don't know what other ramifications this ""fix"" has (i.e. now doesn't implement some new feature on pre 19 devices), but it now at least stops crashing :+1: 
"
romannurik/muzei,closed,Image gets stretch on double tap.,"[Label(name=""bug"")]","I saw while developping my plugin for Muzei. 
I used the fallowing image : https://dl.dropboxusercontent.com/u/43794636/original.jpg
When it is blurred it's good, but when I double tap, the image gets stretch and weird.

I get the same behavior when I'm in the app and not on the launcher.

I confess that the ratio of the image is not perfect for a wallpaper...

![2014-09-02 21 08 34](https://cloud.githubusercontent.com/assets/2813530/4125884/f5afddec-32e5-11e4-8324-621a24ac69f5.png)
![2014-09-02 21 08 26](https://cloud.githubusercontent.com/assets/2813530/4125886/f7d7c580-32e5-11e4-823c-1a7ecff0ad1a.png)

![original](https://cloud.githubusercontent.com/assets/2813530/4125878/e1adcd4a-32e5-11e4-9029-9a6655f605ff.jpg)
"
romannurik/muzei,closed,Replaced deprecated 'setServer()' with 'setEndpoint()',[],"setServer() has been deprecated and it is removed from retrfit v1.5. So i have changed it to setEndpoint(). According to retrofit setEndpoint() is the replacement for setServer(). 
"
romannurik/muzei,closed,Ability to setup the page count available in the home screen and crop-center the bitmap,[],"People with only 2 page on their home screen see only the left part of the image but often the most interesting part is the center of the image. To illustrate, in green the image, in black the home screen's pages and in red the part of the image that won't be visible.

![screen shot 2014-08-26 at 8 39 37 pm](https://cloud.githubusercontent.com/assets/773377/4055096/fedbeeaa-2d9b-11e4-891f-eebcc1cac048.png)

see http://www.reddit.com/r/Android/comments/2enp7r/the_studio_ghibli_muzei_extension_is_the_reason/ck19eji

Could be an option.

Thanks
"
romannurik/muzei,closed,Disable blur freezes,[],"On my Samsung Galaxy Note 2014 edition the app freezes completely, when I drag the blur slider all the way to the left. Leaving it around 5-10 pixels to the right works, but the last bit causes it to freeze.
I can't re-enter the app until I manually clear the app data.
The Dim slider works fine
"
romannurik/muzei,closed,Request: ability to set image focal point,[],"When setting the wallpaper with the Google Now launcher, I can scroll around the image in order to select the point which will be displayed on the leftmost home screen, which seems to default to the centre of the image.

It would be nice if Muzei had this functionality, at least for the My Photos source. Currently Muzei will always show the leftmost section of the image on the leftmost home screen.
"
romannurik/muzei,closed,Tap actions,"[Label(name=""enhancement"")]","This Pull Request covers the introduction of configurable tap actions.
The Double-Tap action and the Three-Finger action can be set to any of these values:
- Nothing
- Show original Artwork (= default behavior for Double-Tap and currently built into Muzei)
- Next Artwork (sends the Next command to the ArtSource)
- View Artwork details (opens the provided view Intent from the ArtSource)

This pull request has been re-created based on the newest master branch
"
romannurik/muzei,closed,Muzei API 1.0.1 bug - ConcurrentModificationException,[],"I got this error in my log on the Play Store:

```
java.util.ConcurrentModificationException
at java.util.HashMap$HashIterator.nextEntry(HashMap.java:806)
at java.util.HashMap$KeyIterator.next(HashMap.java:833)
at com.google.android.apps.muzei.api.MuzeiArtSource.publishCurrentState(MuzeiArtSource.java:683)
at com.google.android.apps.muzei.api.MuzeiArtSource.access$000(MuzeiArtSource.java:190)
at com.google.android.apps.muzei.api.MuzeiArtSource$1.handleMessage(MuzeiArtSource.java:272)
at android.os.Handler.dispatchMessage(Handler.java:102)
at android.os.Looper.loop(Looper.java:136)
at android.app.ActivityThread.main(ActivityThread.java:5102)
at java.lang.reflect.Method.invoke(Native Method)
at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:779)
at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:595)
```

It happend on this device:
- Android version: Android 4.4
- Device: Moto X (ghost)

It seems that it has something to do with the List object.
"
romannurik/muzei,closed,only optional download of new wallpaper without WLAN,"[Label(name=""enhancement""), Label(name=""network"")]","Muzei always downloads wallpapers with any Internet connection - even if this is a non-flatrate, non-stable vor slow connection... If this would be restricted to WLAN , this would be fine :-)
"
romannurik/muzei,closed,Muzei wallpaper widget,"[Label(name=""enhancement"")]","I'd like to request the addition of a widget that displays the wallpaper from Muzei. I use the Aviate launcher and I'd love to use Muzei with it, but the only way Aviate supports backgrounds is with widgets or direct references to image files.
"
romannurik/muzei,closed,Error: cannot instantiate service ... interface ... cannot be instantiated,[],"I am getting the error when running an example app (based on this example) on my Nexus 4:

<code>cannot instantiate service ... interface ... cannot be instantiated</code>

Searched endless on the line, but could not find a solution, other than the note that an interface cannot be instantiated. But I do not know how to work around it.

More details and code examples here:
http://stackoverflow.com/questions/24070304/android-error-cannot-instantiate-service-interface-cannot-be-instantiated/
"
romannurik/muzei,closed,Muzei Deblur on Lockscreen,"[Label(name=""duplicate"")]","Hello,

Is it possible to add an option to deblur photo when on Lockscreen, then smoothly blur it when the phone is unlocked? Since most people have clean Lockscreens, it would look very well to emphasize the image with full clarity.
"
romannurik/muzei,closed,French translation,[],
romannurik/muzei,closed,Muzei Widget,"[Label(name=""enhancement"")]","Add a simple widget which allows the user to open the activity and skip the current artwork displayed.

A user of my Tumblr for Muzei extension sent the request so I thought I would take a crack at it.
http://jimmithy.tumblr.com/post/86502807543/hello-there-first-of-all-i-would-like-to

Design could probably do with some work, but what do you think?

![widget](https://cloud.githubusercontent.com/assets/1126762/3056683/6c35491c-e1cd-11e3-8b06-3a414456d60b.png)
"
romannurik/muzei,closed,Black box on screen rotations,"[Label(name=""bug"")]","I sometimes find a black section appear briefly in the lower portion of my phones wallpaper, during screen rotations.

This frequently happens after turning the screen back on, and also happens after exiting some apps.

After about a second it fixes itself.

The easiest way to reproduce this I found was as follows:
1. Hold the phone landscape
2. Open the camera app (screen then rotates to landscape)
3. Press the home button (another rotation back to portrait, with a black section in the wallpaper briefly appearing)

It's only a minor thing, but not ideal. I'd like to track down the cause of the delay if possible.
"
romannurik/muzei,closed,Crash on custom source,"[Label(name=""bug"")]","The application crashes when I select a custom source.

```
Exception when starting activity net.nurik.roman.muzei/com.google.android.apps.muzei.MuzeiActivity
android.os.DeadObjectException
    at android.os.BinderProxy.transact(Native Method)
    at android.app.ApplicationThreadProxy.scheduleLaunchActivity(ApplicationThreadNative.java:750)
    at com.android.server.am.ActivityStackSupervisor.realStartActivityLocked(ActivityStackSupervisor.java:967)
    at com.android.server.am.ActivityStackSupervisor.startSpecificActivityLocked(ActivityStackSupervisor.java:1063)
    at com.android.server.am.ActivityStack.resumeTopActivityLocked(ActivityStack.java:1622)
    at com.android.server.am.ActivityStack.resumeTopActivityLocked(ActivityStack.java:1247)
    at com.android.server.am.ActivityStack.startPausingLocked(ActivityStack.java:805)
    at com.android.server.am.ActivityStack.finishActivityLocked(ActivityStack.java:2455)
    at com.android.server.am.ActivityStack.finishTopRunningActivityLocked(ActivityStack.java:2329)
    at com.android.server.am.ActivityStackSupervisor.finishTopRunningActivityLocked(ActivityStackSupervisor.java:2035)
    at com.android.server.am.ActivityManagerService.handleAppCrashLocked(ActivityManagerService.java:9543)
    at com.android.server.am.ActivityManagerService.makeAppCrashingLocked(ActivityManagerService.java:9436)
    at com.android.server.am.ActivityManagerService.crashApplication(ActivityManagerService.java:10081)
    at com.android.server.am.ActivityManagerService.handleApplicationCrashInner(ActivityManagerService.java:9632)
    at com.android.server.am.NativeCrashListener$NativeCrashReporter.run(NativeCrashListener.java:86)
```
"
romannurik/muzei,closed,grumpy mcpuzzles error,"[Label(name=""bug"")]","I'm getting this error with every source, even my own photos. Not sure how to fix this. Tried reinstalling and rebooting, doesn't seem to work
"
romannurik/muzei,closed,"Display settings crash with Muzei installed (Lenovo B6000, 4.2.2)","[Label(name=""bug"")]","With Muzei installed Display settings crash on a Lenovo B6000 running 4.2.2.

I'm not sure whether Muzei or Lenovo is at fault here (I'm guessing the latter), but I figured it was worth posting here anyway.

I hope the logs below are of some use.

```
04-05 13:14:14.383  12702-12702/? E/AndroidRuntimeï¹• FATAL EXCEPTION: main
    android.content.res.Resources$NotFoundException: String resource ID #0x0
            at android.content.res.Resources.getText(Resources.java:750)
            at android.content.res.Resources.getString(Resources.java:834)
            at com.android.settings.DisplaySettings.parseString(DisplaySettings.java:663)
            at com.android.settings.DisplaySettings.onResume(DisplaySettings.java:539)
            at android.app.Fragment.performResume(Fragment.java:1738)
            at android.app.FragmentManagerImpl.moveToState(FragmentManager.java:919)
            at android.app.FragmentManagerImpl.moveToState(FragmentManager.java:1057)
            at android.app.BackStackRecord.run(BackStackRecord.java:694)
            at android.app.FragmentManagerImpl.execPendingActions(FragmentManager.java:1435)
            at android.app.FragmentManagerImpl$1.run(FragmentManager.java:441)
            at android.os.Handler.handleCallback(Handler.java:725)
            at android.os.Handler.dispatchMessage(Handler.java:92)
            at android.os.Looper.loop(Looper.java:153)
            at android.app.ActivityThread.main(ActivityThread.java:5299)
            at java.lang.reflect.Method.invokeNative(Native Method)
            at java.lang.reflect.Method.invoke(Method.java:511)
            at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:841)
            at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:608)
            at dalvik.system.NativeStart.main(Native Method)
```
"
romannurik/muzei,closed,[REQUEST] Panning wallpaper,[],"Since most of the wallpapers are wider than a single screen, would it be possible to add an option to automatically pan the wallpaper left and right when navigating through the home screens?
"
romannurik/muzei,closed,Add 30 min rotate interval [2/2],[],
romannurik/muzei,closed,Add 30 min rotate interval [1/2],[],
romannurik/muzei,closed,Fixes #45 - Bad image URL crashes Muzei,[],"This makes it so when a given Uri has no scheme (like, say, www.example.com), it will pop up Grumpy McPuzzles.
"
romannurik/muzei,closed,Bad image URL crashes Muzei,"[Label(name=""bug""), Label(name=""duplicate"")]","I'm writing an extension, which pulls the image URLs from a web site.  When the URL is formatted incorrectly, Muzei crashes.  It should be made more error tolerant.  Most of the time this shouldn't be a problem, but if the web site designer changes the site, the code retrieving the image URLs could be bad/incorrect until the extension can be updated.  

To duplicate, publish artwork using a URI like ""www.example.com"".

Here is the stack trace:
03-06 22:48:08.053   20350-5944/? E/AndroidRuntimeï¹• FATAL EXCEPTION: IntentService[TaskQueueService]
    Process: net.nurik.roman.muzei, PID: 20350
    java.lang.NullPointerException
            at com.google.android.apps.muzei.util.IOUtil.readFullyWriteToOutputStream(IOUtil.java:210)
            at com.google.android.apps.muzei.util.IOUtil.readFullyWriteToFile(IOUtil.java:202)
            at com.google.android.apps.muzei.ArtworkCache.maybeDownloadCurrentArtworkSync(ArtworkCache.java:122)
            at com.google.android.apps.muzei.TaskQueueService.onHandleIntent(TaskQueueService.java:56)
            at android.app.IntentService$ServiceHandler.handleMessage(IntentService.java:65)
            at android.os.Handler.dispatchMessage(Handler.java:102)
            at android.os.Looper.loop(Looper.java:136)
            at android.os.HandlerThread.run(HandlerThread.java:61)
"
romannurik/muzei,closed,App Switcher Background Image Broken,[],"The app switcher is broken in the current release of Muzei. Normally, the app switcher is overlaid over a darkened version of the background image. When Muzei is activated, the background simply appears black. Additionally, the animation that transitions from the current view to the app switcher disappears when Muzei is activated.
"
romannurik/muzei,closed,Translation into Russian,[],"Added translation into Russian. To do this, extracted some strings in resources.
"
romannurik/muzei,closed,"An extension idea, Wikimedia Commons as a source",[],"Wikimedia Commons is repository of free licensed images which is mainly used by Wikipedia, would be nice someone looking for an addon idea for muzei (or in the app itself) develop a Wikimedia Commons addon as a source.
Some may helpful info about Wikimedia Commons:
- Almost all images and files on Wikimedia Commons are hierarchical categorized and here are some categories that really worth to see, [featured pictures of Wikimedia Commons](https://commons.wikimedia.org/wiki/Category:Featured_pictures_on_Wikimedia_Commons), [paintings by painter category which every category of it has several images](https://commons.wikimedia.org/wiki/Category:Paintings_by_painter)
- MediaWiki (the software powered Wikipedia, Wikimedia Commons and ...) has a [Special:Random/File](http://commons.wikimedia.org/wiki/Special:Random/File) page that everytime visited it will raise new page. There is also a random category [Special:Random/Category](http://commons.wikimedia.org/wiki/Special:Random/Category).
- MediaWiki has a lot good [API to let its contents be accessed](http://commons.wikimedia.org/w/api.php). [API:Random](https://www.mediawiki.org/wiki/API:Random)
- [This](https://commons.wikimedia.org/w/index.php?title=Special%3ACategoryTree&target=CommonsRoot&mode=categories&namespaces=) is category tree viewer from [Category:CommonsRoot](https://commons.wikimedia.org/wiki/Category:CommonsRoot) which is parent of all categories on Wikimedia Commons. Would be nice if the extension would provide that category viewer first then let user would select the category. that would be most prefect Wikimedia Commons integration that would be possible.

Only tricky part of it IMO would be finding count of images on a category then choosing a random one. Also on some categories or when using Special:Random/File there is a need to filter pictures from other media. So for now using [Special:Random/File](http://commons.wikimedia.org/wiki/Special:Random/File) (or its API) or just surfing the 200 first may would be best.

Anyway this was my idea to build an addon for muzei. I don't feel I have time for that for now and I know this bug tracker is not for addon idea but I raised my idea here so in case someone would pick the idea, would be nice. If you fill this idea is not good or after a while no one picked it, please feel free WON'TFIX it. Thank you
"
romannurik/muzei,closed,Request: Support to customize Referer header for Artwork,[],"Some websites force to give the proper `Referer` header to fetch high resolution original images.  It would be helpful for implementing source extensions for such websites if [`Artwork`](http://api.muzei.co/reference/com/google/android/apps/muzei/api/Artwork.html) class can optionally take a `Referer` header (or more generally any headers list) to customize.

Thanks!
"
romannurik/muzei,closed,Data usage issue,[],"Muzei with APOD plugin consumed all my mobile data in just few days. :-1: Needed to uninstall it until the issue is resolved. Also in relation I think (but this is subjective) that recent few days (after installing Muzei) the battery was drained faster. Galaxy Note II, stock Android 4.3.

![screenshots_2014-02-26-09-13-14](https://f.cloud.github.com/assets/6791397/2267784/aeef57fe-9ebe-11e3-98d9-3c9e5ca7c145.png)
"
romannurik/muzei,closed,Maintain branding of wallpaper source extension,[],"- Alpha of brand icon and information serves the purpose of
  indicating the selected extension
"
romannurik/muzei,closed,add Chromecast feature,[],"Can you add the possibility to Cast pictures using the Chromecast API ?
"
romannurik/muzei,closed,synchronized access to the mSubscriptions map,[],"This should fix the current plugin crashes regarding a ConcurrentModificationException.
Another solution would be to execute the ArtSource actions in the Service thread but it looks like there has been a reason for passing these actions to the mHandler.
Reference issue report: #34
"
romannurik/muzei,closed,Open third party extension app info on long press.,"[Label(name=""enhancement"")]",
romannurik/muzei,closed,IndexOutOfBoundsException in SourceState.toBundle,"[Label(name=""bug"")]","While integrating Muzei to an app I had this crash, unfortunatly I don't have steps to reproduce. It happend when I was in Muzei app and I was using the next button.

ps: while updating artworks the extension can potentially change the availables custom command (I remove or add commands because we cannot disable/enable them), it is may be related ?
Thanks

``` java
E/AndroidRuntime( 8652): java.lang.IndexOutOfBoundsException: Invalid index 3, size is 3
E/AndroidRuntime( 8652):    at java.util.ArrayList.throwIndexOutOfBoundsException(ArrayList.java:255)
E/AndroidRuntime( 8652):    at java.util.ArrayList.get(ArrayList.java:308)
E/AndroidRuntime( 8652):    at com.google.android.apps.muzei.api.internal.SourceState.toBundle(SourceState.java:107)
E/AndroidRuntime( 8652):    at com.google.android.apps.muzei.api.MuzeiArtSource.publishCurrentState(MuzeiArtSource.java:696)
E/AndroidRuntime( 8652):    at com.google.android.apps.muzei.api.MuzeiArtSource.publishCurrentState(MuzeiArtSource.java:684)
E/AndroidRuntime( 8652):    at com.google.android.apps.muzei.api.MuzeiArtSource.access$000(MuzeiArtSource.java:190)
E/AndroidRuntime( 8652):    at com.google.android.apps.muzei.api.MuzeiArtSource$1.handleMessage(MuzeiArtSource.java:272)
E/AndroidRuntime( 8652):    at android.os.Handler.dispatchMessage(Handler.java:102)
E/AndroidRuntime( 8652):    at android.os.Looper.loop(Looper.java:136)
E/AndroidRuntime( 8652):    at android.app.ActivityThread.main(ActivityThread.java:5017)
E/AndroidRuntime( 8652):    at java.lang.reflect.Method.invoke(Native Method)
E/AndroidRuntime( 8652):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:779)
E/AndroidRuntime( 8652):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:595)
```
"
romannurik/muzei,closed,Extension crash,"[Label(name=""bug"")]","First, I have to say that the issue may come from my implementation.
I'm getting a lot of crash with this stacktrace:

```
java.util.ConcurrentModificationException
       at java.util.HashMap$HashIterator.nextEntry(HashMap.java:806)
       at java.util.HashMap$KeyIterator.next(HashMap.java:833)
       at com.google.android.apps.muzei.api.MuzeiArtSource.publishCurrentState(MuzeiArtSource.java:683)
       at com.google.android.apps.muzei.api.MuzeiArtSource.access$000(MuzeiArtSource.java:190)
       at com.google.android.apps.muzei.api.MuzeiArtSource$1.handleMessage(MuzeiArtSource.java:272)
       at android.os.Handler.dispatchMessage(Handler.java:102)
       at android.os.Looper.loop(Looper.java:136)
       at android.app.ActivityThread.main(ActivityThread.java:5017)
       at java.lang.reflect.Method.invoke(Method.java)
       at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:779)
       at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:595)
```

I first thought I call too often setUserCommands method, but I realised that I also had this crash in a version in which I never called it.

Does some other extension developers get this crash?
Did you manage to fix it on your side or does it need a fix in the API?
"
romannurik/muzei,closed,Huge bandwidth usage,"[Label(name=""bug""), Label(name=""network"")]","![screenshot_2014-02-20-14-31-45](https://f.cloud.github.com/assets/263346/2218759/a7f77a22-9a35-11e3-9789-712caa8b2e98.png)
(Mirror: http://i.imgur.com/exolwoT.png)

I think this was an Alarm Managing issue. Yesterday I changed my date to today's date to test a different app. Then today this happened. Ouch. Good thing I was on Wifi!

After a reboot everything went back to normal. Am monitoring the usage now.
"
romannurik/muzei,closed,Settings activity,[],"I want to create a settings activity, my activity open above the previous one. How do you replace the previous one like in the 500px extension ?
"
romannurik/muzei,open,Huge memory footprint,"[Label(name=""bug""), Label(name=""performance"")]","The app ""crashed"" (black background, had to reactivate it) a couple of times on my Nexus 5, so I decided to have a look at the memory usage from the developer options.
As you can see from the screenshots below, it seems like the app is retaining a lot of memory (almost 90MB), isn't it too much? I didn't had time to do an accurate profiling, but I can do it if you want.
FYI, I'm using it with a static wallpaper from my gallery (so I think you are keeping in memory only 2 images: the original one and the blurred one).

![2014-02-17 03 05 22](https://f.cloud.github.com/assets/749308/2203897/308a9c2e-992e-11e3-8fe4-e5f943857ca5.png)
![2014-02-17 03 05 12](https://f.cloud.github.com/assets/749308/2203898/360116ec-992e-11e3-9c97-d97d625fbbc1.png)
"
romannurik/muzei,closed,Saturation,"[Label(name=""enhancement"")]","Besides dimm and blur saturation would be a nice advanced option. I do not like bright colors on the screen, reducing the saturation would provide that. Sorry, my Java is limited that I can only write an (enhancement) issue and no pull request.
"
romannurik/muzei,closed,Added get more extensions menu opening play store uri,"[Label(name=""enhancement"")]","Same principal as employed within DashClock
"
romannurik/muzei,closed,Configurable Tap-Actions,"[Label(name=""enhancement"")]","This Pull Request covers the introduction of configurable tap actions.
The Double-Tap action and the Three-Finger action can be set to any of these values:
- Nothing
- Show original Artwork (= default behavior for Double-Tap and currently built into Muzei)
- Next Artwork (sends the Next command to the ArtSource)
- View Artwork details (opens the provided view Intent from the ArtSource)

This pull request combines all previous ones as they are built upon each other.
"
romannurik/muzei,closed,Reason for incompatibility,[],"Do you know why the app is incompatible with both my devices?

![http://i.imgur.com/7Q8JHJW.png](http://i.imgur.com/7Q8JHJW.png)
"
romannurik/muzei,closed,Show playing music artwork on Android 4.4+ devices,"[Label(name=""enhancement"")]","Use the RemoteController API introduced in Android 4.4 to show music artwork as your background when music is playing, resuming the selected source when music is paused/stopped.

This is off by default and must be enabled in the Advanced settings (this also provides users the chance to enable the system level permission that is required before we can receive music artwork).

MusicListenerService serves as the main entry point for music callbacks (specifically, play state and music artwork) and serves events for each. This class is started and controlled fully by the system, but its lifecycle can be assumed to always be started once permission is enabled for the user.

The music events are handled by the MusicAwareRealRenderController. This leaves the Demo and Real render controllers to ensure that they do not show music controls (as would be if we added this earlier in the hierarchy) and also helps better encapsulate the logic. Although due to the transparent nature of the detail mode, the MusicAwareRealRenderController also hides the music artwork in detail mode to ensure the user can view the current source artwork even if music is playing.
"
romannurik/muzei,closed,Removed leftover DashClock reference in APIs,[],"Looks like there's a leftover DashClock reference in the API docs :)
"
romannurik/muzei,closed,3 finger action + TableLayout,[],"Based on the Double-Tap actions I added a Three-Finger action setting so that moving to the next Artwork and focusing the Artwork can be laid to different gestures
"
romannurik/muzei,closed,Automated source select to cycle through sources,[],"Hi, I was wondering if it would be possible to have an 'Automated Source Select' option, to cycle through sources? 

Reason being that there are a number of sources that would be cool to have as the sources concurrently (e.g. 500px + APOD + NatGeo), but at the moment we can only select one at a time.

Essentially it would an automated version of going into the Muzei settings, selecting a different source, pressing the tick/accept button, and then pressing the 'Set Wallpaper' button.

The way I see it working is that you configure the installed sources as you want them, then enable an 'Automated Source Select' option (under advanced options), which would have the following sub options:

Sources: checklist to select which of the installed sources you want to cycle through (maybe this option isn't necessary, just uninstall sources you don't want)
Select type: select the sources randomly or sequentially
Select frequency: how often to select the sources (minutes or hours etc)

I imagine the pseudo workflow would be something like:
- load Automated Source Select options
- get the source:
  - get array/list of (selected) sources
  - if only 1 source 
    - set source = sourceList[0]
  - else
    - if select type == ""random""
      - generate random number within array limits
      - set source = sourceList[randNum]
    - if select type == ""sequential"" / as the default select type
      //would need some playing around with keeping track of the previous source here
      - source = sourceList[previous source + 1] //or wrap around list if at ulimit of array
  - return source
- set the source as the returned source // From a quick look I think its SourceManager.selectSource(source);
- schedule the next update
"
romannurik/muzei,closed,DoubleTap-Action preference for the advanced settings,[],"Added a ""double-tap action"" setting to the advanced settings.
Values for this setting are ""Show Original Artwork""(default) and ""Next Artwork"".

I had to mess with forward referencing views in the RelativeLayout in the SettingsAdvancedFragment so that ""DIM"" and ""BLUR"" get as wide as ""D-TAP"". Perhaps another layout (Table) would make sense there?
"
romannurik/muzei,closed,Added Double-Tap action preference,[],"added a ""double-tap action"" setting to the advanced settings.
Values for this setting are ""Deblur""(default) and ""Next Artwork"".

I had to mess with forward referencing views in the RelativeLayout in the SettingsAdvancedFragment so that ""DIM"" and ""BLUR"" get as wide as ""D-TAP"". Perhaps another layout (Table) would make sense there?
"
romannurik/muzei,closed,Use local content,[],"There is a way to use use local images already downloaded?
the imageUri method supports only web Uri.
"
romannurik/muzei,closed,Guidelines to create Settings Activity,[],"Are any guidelines or examples of the design of the Settings Activity for the plugins?
"
romannurik/muzei,closed,Validate the double tap before toggling the focus of the wallpaper,[],"This change makes sure that the wallpaper is tapped before toggling the focus when the user double taps. 
Kinda in reference to issue https://github.com/romannurik/muzei/issues/16.
"
romannurik/muzei,closed,Remove `OnGlobalLayoutListener` after computing grid size.,[],"This change calls `ViewTreeObserver.removeOnGlobalLayoutListener` after
we're finished computing the size of the `GridView` columns and items, rookie. 
"
romannurik/muzei,closed,Opening a folder and clicking on an app is intercepted and de-blurs the wallpaper,[],"I use folders a lot and see this happen. It's momentary disruption of de-blurring, before the opened app takes over the screen. 
"
romannurik/muzei,closed,Italian Translation,"[Label(name=""duplicate"")]","I've moved the hardcoded descriptions of `gallery_settings.xml` to `strings.xml` and provided Italian translation
"
romannurik/muzei,closed,Wallpaper not showing up on Recent apps menu,[],"The wallpaper should be shown as the background for the recent apps menu. When Muzei is used, we can only see a solid black background.
"
romannurik/muzei,closed,Image Centring (Single Pane Launchers),"[Label(name=""enhancement"")]","With the stock launcher on a Nexus 5 and only one pane only the far left of the image is visible.

Because the image is likely to be centred on the focal point. It would be nice if the image was centred in the launcher.

(x is the centre)
1 Pane:
[x]

2 Panes:
[ ]x[ ]

3 Panes:
[ ][x][ ]

And so on.
"
romannurik/muzei,closed,Request: Parallax effect,"[Label(name=""enhancement"")]","As one of the few motion effects that is interesting in motion yet not distracting at rest, I think that a parallax effect would be a perfect final addition to this wallpaper.  Would this be feasible?  Desirable?
"
romannurik/muzei,closed,[REQUEST] Ability to add animated GIF's and PNG's,"[Label(name=""enhancement"")]","Currently the app will load a GIF image, but not set it as a background. Sadly all the other apps for setting GIF's as live wallpapers are not open source. Not to mention they lack muzei's polish!

Thanks
"
romannurik/muzei,closed,[REQUEST] Ability to rotate wallpapers,"[Label(name=""enhancement"")]","I would like to request the ability to rotate wallpapers as I have a number of landscape images I would like to use.

Thanks
"
romannurik/muzei,closed,Added French translation,[],"Here are the French translations, everything should be fine. I also had a friend proof-read it to be sure.
"
romannurik/muzei,closed,Blur/dim advanced settings not working,[],"I'm running the app on a Nexus 5 running Android version 4.4.2. Below is the list of issues I've encountered, as well as the steps to reproduce:

**Blur/Dim settings not working**
- After installing (or clearing app data)
- I go through the first launch steps: activate, then view ""Settings..."", adjust settings, ""Set wallpaper""
- Tap the Muzei icon from my launcher
- Browse to dots > customize > advanced settings
- Adjust the sliders and nothing happens. No changes are applied when I click the checkmark. 

**Additional ""Choose Source"" options overriding my selected option**
- Again, this is after a first run of the app
- Launch app and ""choose source""
- Set to My Photos or 3rd party extension (ex: Muzei - Reddit)
- The source will change initially but I can never change it back to Featured Art. If it does change back the image appears missing (shows black).

My only work around for the above has been to force quite, clear data, then restart the app.

I'm loving the app though, great work!
"
romannurik/muzei,closed,Can't go back to Featured Art,[],"I installed the [Reddit pics extension](https://play.google.com/store/apps/details?id=com.deeptrouble.muzei.picsfromreddit) and after enabling it I was unable to go back to Featured Art.

If I selected Feature Art, it would show the correct title (Starry Night), but it would still show the picture from the extension. Uninstalling the extension didn't change the wallpaper, and restarting my phone with the extension uninstalled left me with a black wallpaper. I had to clear the data for Muzei to be able to get back to the Featured Art.

Nexus 5, Android 4.4.2

I'll look into this later if you haven't already fixed it.
"
romannurik/muzei,closed,viewIntent,[],"What is the correct way to use this to start an application activity with some params ?

Since you use toUri on intent it seems I can't use Parcelable extra since they won't pass this.

I then tried to create intent with a forced action but in the logs it always ends with a no activity found for intent : 

E/muzei_MuzeiActivity(1906): android.content.ActivityNotFoundException: No Activity found to handle Intent { act=android.intent.action.VIEW dat=movie/759 flg=0x10000000 }

The data is correctly set but not the action :(
The intent is created with new Intent(String action,Uri data) and works without problems in my app.
"
romannurik/muzei,closed,Wiki API jar link,[],"Very small issue, but I felt in the bug corrected between 0.9 and 1.0 ;)

The wiki link to download jar sends to 0.9 while 1.0 is downloadable on maven and works of course better.
"
romannurik/muzei,closed,Add Italian localisation,[],"Translated all the strings to Italian.

Depends on #3 to be able to correctly render the advances preferences due to a layout issue that needs to be fixed.
"
romannurik/muzei,closed,Fix advanced preference layout issue,"[Label(name=""bug"")]","I am localizing the app in Italian and I found a little issue with the Advanced settings layout.

As it is right now, the labels (blur & dim) are in a `RelativeLayout` and their size is determined by the blur label size. This means that, if the dim label is longer (as is in Italian), the dim label gets cut and wraps to a new line.

I had to change the advanced preferences fragment layout include to using a `TableLayout`, and also added `lines='1'` attribute to the `TextView`s.
"
romannurik/muzei,closed,OGL crash on Nexus 4,"[Label(name=""bug"")]","Crash stack trace:

```
E/muzei_GLUtilï¹• Error loading texture (empty texture handle)
    java.lang.Throwable
            at com.google.android.apps.muzei.util.LogUtil.LOGE(LogUtil.java:101)
            at com.google.android.apps.muzei.render.GLUtil.loadTexture(GLUtil.java:95)
            at com.google.android.apps.muzei.render.GLPicture.<init>(GLPicture.java:156)
            at com.google.android.apps.muzei.render.MuzeiBlurRenderer$GLPictureSet.load(MuzeiBlurRenderer.java:335)
            at com.google.android.apps.muzei.render.MuzeiBlurRenderer.setAndConsumeBitmapRegionLoader(MuzeiBlurRenderer.java:256)
            at com.google.android.apps.muzei.render.RenderController$1$1.run(RenderController.java:78)
            at com.google.android.apps.muzei.render.GLTextureView$GLThread.guardedRun(GLTextureView.java:1238)
            at com.google.android.apps.muzei.render.GLTextureView$GLThread.run(GLTextureView.java:1015)
02-12 09:50:39.196  27554-27977/? E/AndroidRuntimeï¹• FATAL EXCEPTION: GLThread 1133
    Process: net.nurik.roman.muzei, PID: 27554
    java.lang.RuntimeException: Error loading texture (empty texture handle).
            at com.google.android.apps.muzei.render.GLUtil.loadTexture(GLUtil.java:97)
            at com.google.android.apps.muzei.render.GLPicture.<init>(GLPicture.java:156)
            at com.google.android.apps.muzei.render.MuzeiBlurRenderer$GLPictureSet.load(MuzeiBlurRenderer.java:335)
            at com.google.android.apps.muzei.render.MuzeiBlurRenderer.setAndConsumeBitmapRegionLoader(MuzeiBlurRenderer.java:256)
            at com.google.android.apps.muzei.render.RenderController$1$1.run(RenderController.java:78)
            at com.google.android.apps.muzei.render.GLTextureView$GLThread.guardedRun(GLTextureView.java:1238)
            at com.google.android.apps.muzei.render.GLTextureView$GLThread.run(GLTextureView.java:1015)
```

Happened on Nexus 4, Android 4.4.2, CM11m3. Built from source (no modifications) on master head.
"
romannurik/muzei,closed,Add option to disable blur while screen is locked,"[Label(name=""enhancement"")]","I was perusing the reviews on the Play Store when I noticed someone mentioning they'd like the ability to see the artwork in its full, unblurred glory while the keyguard is up and blurring once more when the screen is unlocked. Seemed simple enough so I whipped this up.
"
