repository,state,title,label,body
mozilla/MozStumbler,open,Map Update,[],"Hello, is the project still working? Will the map be updated? I keep recording with Netstumbler regularly. The map of Network Cellinfo is not renewed, but is based on location services mozilla.

Regards"
mozilla/MozStumbler,open,Oreo adaptive icon shape,[],"Please add support for icon shape

https://developer.android.com/guide/practices/ui_guidelines/icon_design_adaptive.html
https://material.io/guidelines/style/icons.html

you should fix it to upload new version to google play
https://www.xda-developers.com/google-play-app-updates-must-target-android-8-0/"
mozilla/MozStumbler,open,Updated Czech translation,[],
mozilla/MozStumbler,open,Features/device fingerprint,[],
mozilla/MozStumbler,open,Switch to Pontoon for translations,[],"I know, that there is not much work going into MozStumbler atm.
But in-case people start working on it again, one improvement to how localization is handled could be made:
the project could switch away from Github to Mozilla Pontoon:
https://pontoon.mozilla.org/

Just as an idea.
I just translated one project there, it's great and super intuitive :)"
mozilla/MozStumbler,open,Update Russian,[],
mozilla/MozStumbler,open,Update README.md,[],"Hi,

This small and useless PR adds a button to get your app on F-Droid and Google Play :+1: "
mozilla/MozStumbler,closed,We should allow retries if the MLS times out or returns an error,[],"From bugzilla https://bugzilla.mozilla.org/show_bug.cgi?id=1132247:

For a discussion, see https://bugzilla.mozilla.org/show_bug.cgi?id=1116217#c8

Right now, SearchEngineManager will save an empty countrycode/region on failure. We should not save anything, and allow a retry attempt."
mozilla/MozStumbler,open,Consider replacing java.util.timer* with android Handler class,[],"From bugzilla https://bugzilla.mozilla.org/show_bug.cgi?id=1268612

The Timer class creates a separate thread, which can affect the performance of resource-constrained mobile devices. The Android Handler class can be used to synchronize such events with separate threads, such as the main thread. See [1] for an example implementation.

This bug is specifically for the mozstumbler (I'll file another for the main code base). For a list of uses of the timer class:

https://mxr.mozilla.org/mozilla-central/search?string=java.util.timer&find=mobile%2Fandroid&findi=&filter=^[^\0]*%24&hitlimit=&tree=mozilla-central

Victor, can you take a look at this?

[1]: http://android-developers.blogspot.com/2007/11/stitch-in-time.html"
mozilla/MozStumbler,open,Lost previous contributions at 50k,[],"From bugzilla https://bugzilla.mozilla.org/show_bug.cgi?id=1239377:

Steps to reproduce:

Reports are lost after reaching 50,000 reports 


Actual results:

All the stumbled data was lost 


Expected results:

The data should not be lost"
mozilla/MozStumbler,open,Previous Contributions are not showing,[],"From bugzilla https://bugzilla.mozilla.org/show_bug.cgi?id=1402441:

Steps to reproduce:

I Started locating a place while I was traveling .and I tried to upload the result ie way that I routed


Actual results:

When I Uploaded the location route result I found that my Last contribution points to Mozilla location services was not in that website I have location points about nearly 15000 .But the point is now reduced to 10


Expected results:

My new Points have to be added to Older contribution points with Mozilla location services"
mozilla/MozStumbler,open,Add MozStumbler login UI/service for username to Fennec Stumbler,[],"From bugzilla: https://bugzilla.mozilla.org/show_bug.cgi?id=1052393

A big missing feature for MozStumbler on Fennec is the possibility to add the username so your total results - Leaderboard"
mozilla/MozStumbler,open,Does not detect MLS Locations sometimes and also ignores WIFI points at times,[],"From Bugzilla https://bugzilla.mozilla.org/show_bug.cgi?id=1201257:

User Agent: Mozilla/5.0 (Windows NT 10.0; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/44.0.2403.157 Safari/537.36

Steps to reproduce:

I use Mozilla Stumbler regularly and it works alright most of the time. I use a Redmi Note 4G device - Kitkat Android OS.


Actual results:

Every now and then it stops detecting WiFi points or MLS Locations and only picks up WiFi points. 
The reverse also happens when I travel long distance, I end up collecting only Cell points and miss out on all the WiFi points. Again, MLS Locations show up every now and then. 


Expected results:

As the area definitely has WiFi spots and Cell networks, its only natural to collect both. But this issue tends to happen quite often nowadays."
mozilla/MozStumbler,open,mozstumbler-crashes.stage.mozaws.net certificate expired in April 2017,[],"https://mozstumbler-crashes.stage.mozaws.net/ expired in April 2017.

MozStumbler continuously retries to submit a crash log, but the submission is aborted because the certificate has expired."
mozilla/MozStumbler,open,Bad reports,[],"I keep getting bad report errors when uploading:

![img_20171227_130557_550](https://user-images.githubusercontent.com/3584732/34382470-08779f82-eb07-11e7-83d1-63f23b98b616.jpg)

I have tried reinstalling many times. Any thoughts?
"
mozilla/MozStumbler,open,CookieSyncManager is not needed since API 21,[],"Hi,

I found that in [PreferncesScreen](https://github.com/mozilla/MozStumbler/blob/53160b00be84fe88ec5d09d3a2346007a53c9a57/android/src/main/java/org/mozilla/mozstumbler/client/subactivities/PreferencesScreen.java#341), CookieSyncManager is instantiated. I know it was invoked to avoid crash for using CookieManager. Bu according to the [doc](https://developer.android.com/reference/android/webkit/CookieSyncManager.html). It is deprecated since API 21 and on newer API levels, CookieSyncManager can work well alone.

There's no need to instantiate this class if the app is running on devices with API level higher than 21."
mozilla/MozStumbler,open,Detected acidentially WMS service with an Antenna Layer,[],"I detected on admin.ch a Open data service which seems to publish all Antenna location in Switzerland.

[WMS List - DE](https://www.geo.admin.ch/content/geo-internet/de/geo-services/geo-services/portrayal-services-web-mapping/web-map-services-wms/_jcr_content/contentPar/mapmanual.iframe.html)
[Main Page - DE](https://www.geo.admin.ch/de/geo-dienstleistungen/geodienste/darstellungsdienste-webmapping-webgis-anwendungen/web-map-tiling-services-wmts.html)
[License](https://www.geo.admin.ch/en/home/meta/responsabilities-and-contacts.html)
[WMS-Server](https://wms.geo.admin.ch/)
[API](http://api3.geo.admin.ch/api/faq/index.html)

I hope it's useful for you
"
mozilla/MozStumbler,open,map tiles are not downloaded,[],"Since a few days, map is no longer rendered, looks caused by the app not being able to resolve otile4.mqcdn.com (same for 1, 2 and 3) maybe MapQuest changed something?"
mozilla/MozStumbler,closed,Leaderboard not updating,[],The leaderboard has not updated in a while and I suspect that my device has stopped uploading again. How can I check if my contributions are being received?
mozilla/MozStumbler,open,Android command is no longer included in the SDK,[],"Tried cloning the project but encountered this problem while building the project.

Error: The ""android"" command is no longer included in the SDK. Any reference to it (eg. by third-party plugins) should be removed."
mozilla/MozStumbler,open,Crash really often,[],"Hello,

MozStumbler crash really often on my Razr i (x86 - no google services)

Here is a log : 
[2017-06-25-14-44-56.txt](https://github.com/mozilla/MozStumbler/files/1104158/2017-06-25-14-44-56.txt)

MozStumbler version: 1.8.6
Android version: 4.4

Thanks !
"
mozilla/MozStumbler,open,stumbler could not activate GPS,[],since updating on Fairphone2 from androud 5 to 6 stumbler only work if another program use GPS. at moment i use osmand to get stumbler running
mozilla/MozStumbler,closed,"Fix #1800: Open-source builds use non-existent mapquest tiles, use MapBox instead",[],"screenshot:
<img width=""307"" alt=""screen shot 2017-05-12 at 4 01 53 pm"" src=""https://cloud.githubusercontent.com/assets/5495083/26014853/6b3e2526-372c-11e7-927d-f187997f7faa.png"">
"
mozilla/MozStumbler,open,"Proposal for enhancement:  gathering cellular frequencies (ARFCN,UARFCN,EARFCN)",[],"Hi,

with Android 7  (API level 24), access to the current cell's frequency has been added for 2G/UMTS/LTE cellular radio access technologies (e.g. https://developer.android.com/reference/android/telephony/CellIdentityLte.html#getEarfcn() ).

I think it would be useful to gather this information through Mozilla Stumbler as there may be opportunities to use this data via MLS in new applications. I could think of generating maps with frequency band usage per geographical region, optimized cellular cell selection algorithms in cellular devices, etc.

So the enhancement proposal would be to add the above mentioned frequencies to the data set which is gathered and reported by Mozilla Stumbler.

Kind Regards
/g"
mozilla/MozStumbler,closed,OSM tiles are outdated,[],Map box online is fully up to date with OSM. But MozStumbler is months old at least.
mozilla/MozStumbler,open,Leader board stops updating for user; must reinstall Android app,[],"My reports upload but the leader board data has been static for close to a week.

Update: Nothing I could do would trigger a change in my Leaderboard stats... even though over the last week or so I've added close to 15,000 new observations.

I did everything I could think of to trigger it to update. The data appeared to upload correctly, with my total count updating locally... but the Leaderboard remained the same.

This morning I fully reinstalled the app and reconnected to my Firefox user. Suddenly, uploads are changing my Leaderboard stats again!

HOWEVER -- something is very fishy:
a) I live in a rural area with a lot of ""non blue"" areas. I can tell the blue-area-map IS updating with my contributions
b) However those contributions were NOT counted in the Leaderboard

I've been keeping a parallel *.GPX track file, so I can share the following example of my missing data...

On this date: Apr 7, 2017 6:07pm MDT (aka 2017-04-08T00:09:35 (UTC) )

I was newly mapping the following location: 39.024 N, -104.755 W

Can anyone look in the master database to see what happened to my entries? My user id was and is mrpete.

Thank you!"
mozilla/MozStumbler,open,Security,[],New security make
mozilla/MozStumbler,closed,First attmempt,[],Looking to contribute. Saw this from issue #1507 
mozilla/MozStumbler,open,Added Hungarian translation,[],I made the Hungarian translation file for the project.
mozilla/MozStumbler,closed,No longer uploading reports,[],"A couple of days ago, the app stopped uploading reports. I have many to send but no way to do so. Backed up the reports then uninstalled and reinstalled the app. Still not even sending new reports. Any suggestions?"
mozilla/MozStumbler,open,Sending data when a connection becomes available.,[],"Running version 1.8.5 on Android.
Since my rural county has no apparant reports of towers I can see visually, 
I accumulated a couple thousand reports, but was unable to tell if it was sending any of what I collected, when I got an online connection, at the end of traveling offline. 
I finally tried pressing the up arrow in the lower left of the menu, and now it is very slowly decreasing Ready to send, and adding to Already Sent.
My question, does it store up and remember activity across multiple sessions, separated by a power off condition.? and periods of ""no internet connection"" conditions?
I now finally see some report*.gz files, but the first one shows a unix date of this month. How can I tell if my December activity was uploaded successfully?
Why can't it send them all in a burst, instead of taking an hour while I wait.
The confusion deepens because the number of files in this directory matches the number ""already sent."" I understand from reading and searching, that these are debug reports.
Where are the ""Ready to send"" reports at? Why does it have to be online to generate the reports?"
mozilla/MozStumbler,open,Merge pull request from gustavo cs  (fix bug #1614),[],Using system date format rather than locale date format.
mozilla/MozStumbler,closed,Merge pull request #1614 from gcsdev-patch,[],Using system date format rather than locale date format.
mozilla/MozStumbler,open,App Android: un-stumbled areas and and other minor bugs,[],"> un-stumbled areas: It is not sufficiently clear. I would expect to see in the app, I understand that instead I have to go to the site, but even here I see a kind of measles and do not understand what you really need to do. See Attachment. 
> Dark to dark. The item view standings in the screenshot you see bad, the phone does not show up (this item only)
> There is a problem with automatic google translator in the play store. Ii translates ""point"" to ""& Bull"". See the attach. The problem is google-translator but if you take away the points is better. Those who can not speak English remains disoriented
> The up arrow button in the menu does not do anything

I've Android 6.0 EMUI 4.1.1 Huawey P9 lite no logo (Huawey VNS-L31.
Regards, Raffaele
![mozilla stumbler](https://cloud.githubusercontent.com/assets/24221053/20662727/ffbe45dc-b554-11e6-9ced-ea7fcd9013df.png)
"
mozilla/MozStumbler,closed,Update zh-TW l10n,[],
mozilla/MozStumbler,open,Mozilla Stumbler occasionally crashes while collecting data,[],"Build: Mozilla Stumbler 1.8.6, 7aaf00b-dirty, installed from F-Droid.

I don't know what exactly leads Mozilla Stumbler to a crash. I started it to collect data, then walked along the street. When I came home, I found that Mozilla Stumbler was off. I read the logcat, and found:

10-15 19:24:15.090 19228  5468 E AndroidRuntime: FATAL EXCEPTION: Thread-6069
10-15 19:24:15.090 19228  5468 E AndroidRuntime: Process: org.mozilla.mozstumbler, PID: 19228
10-15 19:24:15.090 19228  5468 E AndroidRuntime: Theme: themes:{}
10-15 19:24:15.090 19228  5468 E AndroidRuntime: java.lang.InternalError: Thread starting during runtime shutdown
10-15 19:24:15.090 19228  5468 E AndroidRuntime:    at java.lang.Thread.nativeCreate(Native Method)
10-15 19:24:15.090 19228  5468 E AndroidRuntime:    at java.lang.Thread.start(Thread.java:1063)
10-15 19:24:15.090 19228  5468 E AndroidRuntime:    at org.apache.http.impl.conn.tsccm.AbstractConnPool.enableConnectionGC(AbstractConnPool.java:145)
10-15 19:24:15.090 19228  5468 E AndroidRuntime:    at org.apache.http.impl.conn.tsccm.ThreadSafeClientConnManager.createConnectionPool(ThreadSafeClientConnManager.java:125)
10-15 19:24:15.090 19228  5468 E AndroidRuntime:    at org.apache.http.impl.conn.tsccm.ThreadSafeClientConnManager.<init>(ThreadSafeClientConnManager.java:103)
10-15 19:24:15.090 19228  5468 E AndroidRuntime:    at org.acra.util.HttpRequest.getHttpClient(HttpRequest.java:214)
10-15 19:24:15.090 19228  5468 E AndroidRuntime:    at org.acra.util.HttpRequest.send(HttpRequest.java:141)
10-15 19:24:15.090 19228  5468 E AndroidRuntime:    at org.acra.sender.HttpSender.send(HttpSender.java:225)
10-15 19:24:15.090 19228  5468 E AndroidRuntime:    at org.acra.SendWorker.sendCrashReport(SendWorker.java:179)
10-15 19:24:15.090 19228  5468 E AndroidRuntime:    at org.acra.SendWorker.checkAndSendReports(SendWorker.java:141)
10-15 19:24:15.090 19228  5468 E AndroidRuntime:    at org.acra.SendWorker.run(SendWorker.java:77)
10-15 19:24:15.109  2540  3436 I chatty  : uid=1000(system) Binder_A expire 1 line
10-15 19:24:15.116  2540  2580 I chatty  : uid=1000(system) ActivityManager expire 1 line
10-15 19:24:15.175  2540  2680 D WifiService: Client connection lost with reason: 4
10-15 19:24:15.202  2540  2796 I ActivityManager: Process org.mozilla.mozstumbler (pid 19228) has died
"
mozilla/MozStumbler,open,Get a message “WLAN is disabled”,[],"It would be nice when MozStumber could display a message when WLAN is disabled, and that data colloction is limited therefor. (I often forget to switch on WLAN)
"
mozilla/MozStumbler,open,Getting error while building project,[],"Error:(215, 0) No such property: bootClasspath for class: com.android.build.gradle.AppPlugin
I'ed followed every instructions on Readme,md Can someone help me with this error?
![image](https://cloud.githubusercontent.com/assets/10434201/17947612/1b433144-6a6b-11e6-879d-221f071c8466.png)

Thanks
"
mozilla/MozStumbler,open,Mozstumber crash after a few seconds,[],"I have installed the Google Play version today, but totally failed to use it more than a few seconds, because it always crash (on a Samsung S3 mini and an LG E460).

I sent the crash reports via android. It contains a lot of information, here are a few of them:

> Nom de la classe d'exception
> java.lang.NoSuchMethodError
> 
> Fichier source
> StumblerBundle.java
> 
> Methode source
> toMLSGeosubmit
> 
> Numéro de la ligne
> 129

The crash is easily reproducible, don't hesitate to ask for more details.
"
mozilla/MozStumbler,closed,Update Travis CI build status image in README.md,[],"This pull request contains two changes for the Travis CI build status image:
- Change it to link to the build status instead for the logo image.
- Show the build status of the dev branch, instead of whatever branch was built last.
"
mozilla/MozStumbler,closed,MapQuest does not provide the OpenStreetMap-Tiles anylonger,[],"MapQuest discontinued their free/anonymous access to their OpenStreetMap-tiles. This means that Mozilla Stumbler will always show a grey grid rather than the OpenStreetMap.

The only free plan by MapQuest only includes 15,000 requests per month. Since this is not enough for Mozilla Stumbler, a new (maybe Mozilla-hosted?) tiles provider is required.

As @lua86 mentioned: It is also possible not to use tiles at all and render the raw map data live.

See also:
http://devblog.mapquest.com/2016/06/15/modernization-of-mapquest-results-in-changes-to-open-tile-access/
"
mozilla/MozStumbler,open,Gradle build sync failed,[],"Hi,
I was trying to build android project from source but its failing while building showing errors
`Error:(215, 0) No such property: bootClasspath for class: com.android.build.gradle.AppPlugin
<a href=""openFile:/home/jatin/AndroidProjects/MozStumbler/android/build.gradle"">Open File</a>`
i've also followed the Readme File for configuring run/debug configurations where its showing 
`gradle project sync failed. Please fix your project and try again.`

![screenshot from 2016-07-03 08-25-39](https://cloud.githubusercontent.com/assets/10434201/16543585/50818996-40f9-11e6-9a88-88d3eac7f8d1.png)

Please help
Thanks
"
mozilla/MozStumbler,open,Wigle.net KML import fail,[],"Hello,
I have a wifi network geolocalization database with 16k records in kml/sql format
I tried to import within the android MozStumbler app but it crashed
I guess the wigle kml is not compatible, is there a way to convert and import it?
"
mozilla/MozStumbler,closed,F-Droid build still failed,[],"The F-Droid build have been updated (https://github.com/mozilla/MozStumbler/issues/1795) but they failed to build :

https://f-droid.org/wiki/page/org.mozilla.mozstumbler#1.8.6

It seems that they use gradle 2.2 whereas it's not available.

```
Available gradle versions: 2.13 2.12 2.11 2.10 2.9 2.8 2.7 2.6 2.5 2.4 2.3 2.2.1 2.1 1.12 1.11 1.10 1.9 1.8 1.7 1.6 1.4
```

Is it possible to fix it please ?

Thanks !
"
mozilla/MozStumbler,closed,Cant see my name in Leaderboard :(,[],"For my country there is relatively less Stumbler data (esp of my region). There are only 20 users for my country at link https://location-leaderboard.services.mozilla.com/
So i want to help out the project. 
I installed stumbler and sent some 20 reports since yesterday, but my nick (which i entered in stumbler app) is not showing up there

Let me know what can be the issue like so that i start stumbling more
Thanks

CC @crankycoder @garvankeeley 
"
mozilla/MozStumbler,closed,F-droid MozStumbler version is still 1.7.14,[],"Is it possible to update the app in F-droid please ?

Thanks !
"
mozilla/MozStumbler,open,Better crash recovery,[],"Issue #1790 lead me to loose a lot of reports. That issue is fixed, but I ran into another crash issue now. (This crash happen after using the camera app, so I suspect a OOM issue.)

When I reopen Stumbler after a crash, I see all metrics display 0 excepts for ”Ready to send reports” that will show a number of reports. After a few seconds after restarting, this number will also go down to 0. However, my positioning the leaderboard isn’t updated and the number of reports in the current session stays at 0; so I believe this data is lost. Stumbler obviously finds the data it hasn’t yet submitted after restarting from a crash, but for some reason it can’t recover and submit it.

The crash recovery mechanism should probably be updated and attempt to recover the queued data reports from the previous session data instead of deleting it.
"
mozilla/MozStumbler,closed,put an API 17 guard around grabbing the age for wifi signals,[],"This fixes #1792 

@hannosch r?

The relevant documentation is here:

http://developer.android.com/reference/android/location/Location.html#getElapsedRealtimeNanos()

And a sample crash on Android 4.1.2:

```
java.lang.NoSuchMethodError: android.location.Location.getElapsedRealtimeNanos
at org.mozilla.mozstumbler.service.stumblerthread.datahandling.StumblerBundle.toMLSGeosubmit(StumblerBundle.java:129)
at org.mozilla.mozstumbler.service.stumblerthread.Reporter.flush(Reporter.java:201)
at org.mozilla.mozstumbler.service.stumblerthread.Reporter.onReceive(Reporter.java:135)
at android.support.v4.content.LocalBroadcastManager.executePendingBroadcasts(LocalBroadcastManager.java:297)
at android.support.v4.content.LocalBroadcastManager.sendBroadcastSync(LocalBroadcastManager.java:278)
at org.mozilla.mozstumbler.service.stumblerthread.scanners.ScanManager$4.run(ScanManager.java:176)
at java.util.Timer$TimerImpl.run(Timer.java:284)
```

We'll need to patch Fennec as well.
"
mozilla/MozStumbler,closed,Need API17 guard around Location.getElapsedRealtimeNanos,"[Label(name=""bug"")]","getElapsedRealtimeNanos() is only available on API17 and up.  Stumbler supports lower API levels.
"
mozilla/MozStumbler,open,Collect and submit indoor positioning data,[],"Currently MozStumbler only records data if it has a recent anchoring GPS position, has moved 30 meters or more, and a minimum time interval has passed.

But for indoor positioning, much finer data is needed. MozStumbler should detect when it is indoors (e.g. by the lack of GPS) and, as an option, switch to a WiFi-only scanning mode.
"
mozilla/MozStumbler,closed,Frequent crashes and datalosses,[],"Ever since the update that introduced the new login system, I’ve had troubles with crashes while out stumbling. Restarting the app shows now queued reports and the leaderboard confirms that the data is indeed lost. I don’t have any details or logs (don’t have logcat when out and about) other than this not being a problem prior to this update.
"
mozilla/MozStumbler,open,Bluetooth Networks,[],"Collect ""Bluetooth Networks"" with mozstumbler.
Ichnaea is prepared.
"
mozilla/MozStumbler,open,Leaderboard stats issues,[],"Sometimes I gain more points in the new leaderboard than I have new observations. I started to investigate that, and I think I found a possible cause.

I have one `jsonrows` file that has 50 entries, others have less. When that file gets uploaded, after a while the server returns `error 502`. As a result that file will be kept around and upload of the same will be reattempted next time. Is it possible that parts of the uploaded observations data are still counted on the server-side each time, despite of the error being returned? cc @jaredkerim

Also there does not seem to be a mechanism to automatically or manually retry to upload leaderboard data (only MLS data).
"
mozilla/MozStumbler,closed,Fix NPE,[],"Fix `NullPointerException` if for example the connection timed out.
"
mozilla/MozStumbler,closed,Fix power settings button alignment,[],"@crankycoder The alignment of the power settings button is not as nice as it was before (#1779).
This PR fixes it for me, see screenshots.

**Old:**
![stumbler_1](https://cloud.githubusercontent.com/assets/3845150/14876870/ae0be3d2-0d18-11e6-8dad-03c426d06d12.png)

**Current:**
![stumbler_2](https://cloud.githubusercontent.com/assets/3845150/14876957/4fcfce4a-0d19-11e6-922d-d6a9e43ea915.png)

**Fixed:**
![stumbler_3](https://cloud.githubusercontent.com/assets/3845150/14876880/bdf302bc-0d18-11e6-95fd-eb6a98c92073.png)
"
mozilla/MozStumbler,open,Javadoc no longers builds in libstumbler,"[Label(name=""bug"")]","#1783 is a hack to work around a problem where the Javadocs are no longer included in JAR files that are uploaded into bintray.

The old code used undocumented features of gradle to clobber the classpath used by the Javadoc task to build documentation.

Amazing. Builds fail because we can't build documentation using undocumented features of the build system.

This really needs to get fixed properly so we ship Javadoc with our JAR files.
"
mozilla/MozStumbler,closed,dropped javadoc requirements when building libstumbler,[],"I have no idea why, but Javadoc compiles have broken.
"
mozilla/MozStumbler,closed,Features/1779 appcompat ui fix,[],"This should fix the remaining issues with #1779 by adding:
- icon to the title
- changing the back button to be a regular actionbar menu toggle
"
mozilla/MozStumbler,open,UI glitches cause failures starting in appcompat 23.3.0,"[Label(name=""enhancement"")]","The build currently works with appcompat 23.0.0 and support 23.0.0, but opening the PreferencesScreen causes a crash starting in at least appcompat v23.3.0.  This might affect other versions > 23.0.0, but I haven't tested yet.
"
mozilla/MozStumbler,closed,Update strings,[],"Update strings
"
mozilla/MozStumbler,closed,appcompat-v4:23 and appcompat-v7:23 GUI glitches,"[Label(name=""bug"")]","The change to use appcompat at SDK level 23 has broken some of the UI.

Things I've noticed which are not 'broken' but just different:
- Initial welcome screen 
- Triple button over the map view now renders the ""View Leaderboard"" inline rather than below
- PrefencesScreen is now full screen and rendering has been modified slightly.  All UI controls have been updated.

Broken things:
- Power saving button is now whited out in the popup drawer

We need to update the button to not be whited out and verify this on at least a couple versions of Android.  I'm running Android 5.1.1 and have a Nexus 5 device running Android 6 that I can test on.
"
mozilla/MozStumbler,closed,Features/1776 fxa no config,[],"I've added 3 toasts:

""Trying to load Firefox Accounts Configuration"" when the FetchFxaConfiguration task is run
""Firefox Accounts configuration could not be loaded"" on failure to load the configuration JSON correctly
""Firefox Accounts configuration is loaded"" all expected fields in the FxA config JSON were parsed correctly.
"
mozilla/MozStumbler,closed,Features/fdroid 1.8x try2,[],
mozilla/MozStumbler,closed,FxA login seems to do nothing for some users intermittently,"[Label(name=""bug"")]","@popey on twitter says the FxA login does nothing a lot.  8 times in a row.

> @popey: @crankycoder Ah, now it works after the 8th time I press it.

https://twitter.com/popey/status/722452112630816768

I no-op in the case of horrible network failure instead of throwing up what I thought would be alarming login errors on the assumption that network failures would happen, but infrequently.

This seems to not be the case.

Failure to obtain FxA login configuration should fire an ACRA log as well as display an android Toast to alert the user that FxA could not be reached.
"
mozilla/MozStumbler,closed,Features/fdroid 1.8x,[],"F-Droid is much more picky than the Google Play store.  strings.xml cleaned up.  

Version numbers aligned in libstumbler and the primary application project.

targetSdkVersion bumped to version 23 from 18 for the build.

appcompat library versions are dependant on SDK versions, these weren't aligned with SDK 23 before.

appcompat versions are now pinned to v23.0.0 for both v4 and v7 libraries to provide stability.

``` bash
$ fdroid build org.mozilla.mozstumbler -l
INFO: Building version 1.8.5 (1080500) of org.mozilla.mozstumbler
INFO: Getting source for revision 9a99675
INFO: Creating local.properties file at build/org.mozilla.mozstumbler/local.properties
INFO: Creating local.properties file at build/org.mozilla.mozstumbler/android/local.properties
INFO: Cleaned build.gradle of keysigning configs at build/org.mozilla.mozstumbler/android/build.gradle
INFO: Running 'prebuild' commands in build/org.mozilla.mozstumbler/android
INFO: Cleaning Gradle project...
INFO: Scanning source for common problems...
WARNING: Found JAR file at android_studio/stumbler_codestyle.jar
WARNING: Found JAR file at gradle/wrapper/gradle-wrapper.jar
WARNING: Found JAR file at libraries/stumbler/gradle/wrapper/gradle-wrapper.jar
INFO: Creating source tarball...
INFO: Building Gradle project...
INFO: Successfully built version 1.8.5 of org.mozilla.mozstumbler
INFO: success: org.mozilla.mozstumbler
INFO: Finished.
INFO: 1 builds succeeded
```
"
mozilla/MozStumbler,closed,Clear FxA loginstate when PrefScreen is first created,[],"If the preference screen is loaded and the FxA login is inconsistent - that is the email address is not available but a bearer token is available, clear the FxA login state.

This is a fix for #1772 in v1.8.3
"
mozilla/MozStumbler,closed,F-Droid build failed,[],"The v. 1.8.3 F-Droid build failed :

https://f-droid.org/wiki/page/org.mozilla.mozstumbler/lastbuild_1080300

Is it possible to fix it please ?

Thanks !
"
mozilla/MozStumbler,closed,Detect if FxA is logged in and no email address has been saved.,[],"This is a follow up to #1770.

We need to kick out users who are logged in to Firefox Accounts on application startup, but there is no email address saved in the preferences.

In this event, we need to throw up a notification toast, or a notification alert to tell the user that they have been logged out of Firefox Accounts and need to login again.
"
mozilla/MozStumbler,closed,Fix some issues,[],"- `invalidateOptionsMenu` requires higher API level
- fix string resources
"
mozilla/MozStumbler,closed,FxA email not displayed,[],"The Firefox Account status does not show the email address after login.
That is because the FxA-JSON only contains `uid` and `displayName`, `email` is not set.
See `PreferencesScreen.processProfileRead` and `PreferencesScreen.setFxALoginTitle`.
"
mozilla/MozStumbler,closed,dropped the clickbox from the metrics view to enable MLS queries,[],"This fixes a long standing UI nit that's been bothering me.  

When you enable MLS queries in the settings screen, you also have to find the little checkbox at the bottom of the MetricsView; the pop out drawer; and turn that on as well.

I think we had this split initially when we were just testing the MLS query ability before we had a way to render the locations.

This no longer makes any sense - if users turn on the MLS query setting in the preferences - we should just render the layer.
"
mozilla/MozStumbler,closed,added code to disable IP based fallbacks when doing geolocate,[],"This fixes #1751 
"
mozilla/MozStumbler,closed,Features/bug 1763,[],"This should fix #1763 as well as some potential null pointer errors.

The first commit changes the getStringPref to always return at least an empty string.  

The second traces through the code and updates any NULL checks and updates them to use a TextUtils.isEmpty call instead.

I also threw in a fix on line https://github.com/mozilla/MozStumbler/compare/dev...crankycoder:features/bug-1763?expand=1#diff-a6528dd8a2b6cae0b0a6242120e0262fL534  where the old code just used the hashcode of the user's email address.  I now just use a random integer for the default display name.
"
mozilla/MozStumbler,open,"Icons for GPS, cell tower, wifi and observations no longer make sense to display",[],"We originally created these icons at the top of the stumbler to give users a way to aid them in gaining points on the old leaderboard.

The new leaderboard only cares about total number of reports, we should probably remove the icons, or better yet - simplify them to be more meaningful.
"
mozilla/MozStumbler,closed,Features/bug 1764,[],"Fix for #1764 - force the nickname field to be enabled if we write a non-empty value to it.
"
mozilla/MozStumbler,closed,Inconsistent disabling of the display name field in the FxA enabled stumbler client,"[Label(name=""bug"")]","When we were prototyping the new leaderboard, inconsistencies with the way the display name field is disabled creeped in.

On initial login to FxA through the stumbler, the display name field does not toggle to an enabled state.
"
mozilla/MozStumbler,closed,Saving a blank displayname in the stumbler client causes a crash,"[Label(name=""bug"")]",
mozilla/MozStumbler,open,Updating the display name in firefox accounts directly doesn't update the stumbler client,"[Label(name=""bug""), Label(name=""enhancement"")]","An update over the web UI over at https://accounts.firefox.com/settings does not show up ever in mozstumbler even after a force stop and start.
"
mozilla/MozStumbler,closed,Bugfix for #1760,[],"This should fix #1760 by testing if FxA config was loaded and forcing the leaderboard menu item to be enabled/disabled based on logins and fxa config loading.
"
mozilla/MozStumbler,closed,Short circuit FxA login to a failed state if any failure occurs.  ,"[Label(name=""bug"")]","Need to be careful that all internal state of FxA is set to reasonable defaults so we don't null pointer.  Ex: FxA Profile

``` java
java.lang.NullPointerException: Attempt to invoke virtual method 'int java.lang.String.length()' on a null object reference
at android.text.TextUtils.split(TextUtils.java:344)
at org.mozilla.mozstumbler.client.subactivities.PreferencesScreen.getFxaScopes(PreferencesScreen.java:536)
at org.mozilla.mozstumbler.client.subactivities.PreferencesScreen$8.onPreferenceClick(PreferencesScreen.java:304)
at android.preference.Preference.performClick(Preference.java:985)
at android.preference.PreferenceScreen.onItemClick(PreferenceScreen.java:214)
at android.widget.AdapterView.performItemClick(AdapterView.java:305)
at android.widget.AbsListView.performItemClick(AbsListView.java:1146)
at android.widget.AbsListView$PerformClick.run(AbsListView.java:3053)
at android.widget.AbsListView$3.run(AbsListView.java:3860)
at android.os.Handler.handleCallback(Handler.java:739)
at android.os.Handler.dispatchMessage(Handler.java:95)
at android.os.Looper.loop(Looper.java:135)
at android.app.ActivityThread.main(ActivityThread.java:5254)
at java.lang.reflect.Method.invoke(Native Method)
at java.lang.reflect.Method.invoke(Method.java:372)
at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:903)
at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:698)
```
"
mozilla/MozStumbler,closed,"Disable ""view leaderboard"" if FxA is not logged in","[Label(name=""bug"")]",
mozilla/MozStumbler,closed,Stumbler 1.8 - Leaderboard web view unreadable,"[Label(name=""bug"")]","I'm using the 1.8.0 APK from Github. When clicking on the ""leaderboard"" link in the top-right menu, all I get is a fairly empty looking screen. I'm on a Nexus 4:

![mozstumbler-1 8-leaderboard](https://cloud.githubusercontent.com/assets/483109/14438825/48ddf3ee-0028-11e6-99ce-23b545a8ae40.png)
"
mozilla/MozStumbler,closed,Stumbler 1.8 - FxAccounts not working,"[Label(name=""bug"")]","I'm using the 1.8.0 APK installed from Github. When clicking on the ""Firefox Accounts"" option in the settings I only get back a dialog: ""Unfortunately, Mozilla Stumbler has stopped.""

I did enable crash reporting inside the app and tried again. I have Nexus 4.

![mozstumbler-1 8-crash](https://cloud.githubusercontent.com/assets/483109/14438713/c8799cee-0027-11e6-9321-b943eaba5dbc.png)
"
mozilla/MozStumbler,closed,Update LB_SUBMIT_URL,[],"For a release build, this should probably point to the real thing? Or should this config go into the product flavors lbdev/stage/prod sections?
"
mozilla/MozStumbler,closed,Features/gps speed heading,[],"This adds float fields for GPS Speed, GPS Heading and pressure sensors to the geosubmit upload.  

A separate commit will handle the whitespace and import optimizations as there are lots of orphaned imports across the codebase.
"
mozilla/MozStumbler,closed,Adds millisec timestamp from epoch for GPS and Wifi,[],"- add timestamps for wifi on geosubmit
- dropped unused getLocation methods
- added a proper timestamp fixture into the geosubmit test

Both timestamps are millisecond accuracy from the epoch.  The top level timestamp for the geosubmit blob is extracted from the GPS scan.
"
mozilla/MozStumbler,open,Add coverity scans,"[Label(name=""Good first bug"")]","Docs: https://scan.coverity.com/travis_ci

Moziilla Central found some static analysis bugs (see: https://bugzilla.mozilla.org/show_bug.cgi?id=1258703).

Let's get static analysis tools added.  The travis docs for coverity seem pretty decent.
"
mozilla/MozStumbler,closed,applied patch from bugzilla issue 1258703,[],"Backport patch from bugzilla ticket 1258703

https://bugzilla.mozilla.org/show_bug.cgi?id=1258703
"
mozilla/MozStumbler,closed,Disable geoip fallback in map view queries,"[Label(name=""enhancement"")]","We got a couple of reports about confusing results of the ""Show MLS position"" option on the map.

One thing we could do, is to explicitly disable the GeoIP fallback in the MLS queries we use to get those results. Instead of getting a lot of lines that all go to the same far away place, we'd get no lines at all for these. At least that should add less visual clutter on the map.

I think all we'd have to do is extend `StumblerBundle.toMLSGeolocate` (https://github.com/mozilla/MozStumbler/blob/dev/libraries/stumbler/src/main/java/org/mozilla/mozstumbler/service/stumblerthread/datahandling/StumblerBundle.java#L154) to do this.

The fallback options are another top-level JSONObject with values of:

```
    ""fallbacks"": {
        ""lacf"": false,
        ""ipf"": false
    }
```

The full example at https://mozilla.github.io/ichnaea/api/geolocate.html shows this.

The `ipf` disables GeoIP (IP-based fallback). I'd also disable `lacf` (cell location area based fallback), as area fallback also means we don't have information about the concrete cell observed at the given point.

In addition we probably need to change `AsyncGeolocate.doInBackground` (https://github.com/mozilla/MozStumbler/blob/dev/android/src/main/java/org/mozilla/mozstumbler/client/mapview/AsyncGeolocate.java#L75) and instead of:

```
if (resp.isErrorCode400BadRequest()) {
```

do

```
if (resp.isErrorCode4xx()) {
```

Otherwise not found responses (404) would contain a valid JSON body, but not one that has any coordinate fields, and thus would break. By treating 'not found' as a kind of error, the logic should simply stop trying to do a MLS query for the particular observation point.

@crankycoder what do you think?
"
mozilla/MozStumbler,closed,added a lb-stage directive for stage builds of leaderboard,[],
mozilla/MozStumbler,closed,App reports the same location for 30+ km.,[],"Hi, All!
I've started collecting data with Mozilla Stumbler about a week ago, but, all the time I've got the similar picture:

![screenshot](http://screenspic.appspot.com/pic?gid=agxzfnNjcmVlbnNwaWNyFQsSDFVwbG9hZGVkRmlsZRjJ26EEDA)

It's definitely wrong, to have this only location during all my 30+ kilometers trip.
What it could be?
And, **how fast my collected data will get to work?** (will be used for location calculation)

P.S.
I've got single SIM, Nexus 5, Android 6 device.
"
mozilla/MozStumbler,closed,Fix for #1747 - flips the android:allowBackup flag to false,[],
mozilla/MozStumbler,closed,FxA requires us to store access tokens securely,[],"Problem:

The stumbler will be storing acces tokens and refresh tokens.  

If the user does an application backup from Android - adb will also copy the application's internal storage data - including the FxA tokens.

The <android> tag in the AndroidManifest.xml file needs to have `android:allowBackup` set to false to disallow backups.   

The only downside I can see is that a user who has gathered stumbling data which has not yet been submitted will lose that data and associated points on the leaderboard after a backup/restore.  
"
mozilla/MozStumbler,closed,Add new leaderboard change into an in-app changelog,[],
mozilla/MozStumbler,open,Update build documentation for leader board ,"[Label(name=""Good first bug"")]","The new leader board introduces a new build flavour ""leaderboard"". 

The assemble and install directives have now been changed because of this to indicate lbdev or lbprod targets. 

Update the docs for command line builds and Android Studio setup. 

The Makefile and gradle scripts have already been updated. 
"
mozilla/MozStumbler,open,Add MozStumbler to apkfiles,[],"We can add MozStumbler to yet-another app store thing.   I'd like to have deployments to app stores done as a build step as the process right now is overly time consuming.

http://www.apkfiles.com/submit
"
mozilla/MozStumbler,closed,MozStumbler-1.7.14 Build Error with Android Studio 1.5.1,[],"I tried every possible solution which I could find from the internet and I installed every necessary SDK but the problem remains.

The error message is as below and the IDE log is attached. Did anyone encounter the same issue? 
1. Gradle project sync failed. Basic functionality (e.g. editing, debugging) will not work properly.
2. Error:(214, 0) No such property: bootClasspath for class: com.android.build.gradle.AppPlugin
   <a href=""openFile:D:\OpencellId\Mozilla\MozStumbler-1.7.14\android\build.gradle"">Open File</a>

[idea - MozillaStumbler.txt](https://github.com/mozilla/MozStumbler/files/87348/idea.-.MozillaStumbler.txt)
"
mozilla/MozStumbler,closed,Webview isn't rendering the leaderboard properly for user profile,[],"The leaderboard view isn't properly loading any scoreboard content. Not sure why.

The URL being loaded seems to be correct at: 

http://cloudvm.jaredkerim.com/?profile=a9d5037ea99e492b8af24eb2605b3865
"
mozilla/MozStumbler,closed,Configuration URL parsing,[],"All the Configuration for the stumbler should be extracted from the BuildConfig and loaded from a JSON blob.

A sample can be found here: http://cloudvm.jaredkerim.com/api/v1/fxa/config/

``` json

{
  ""redirect_uri"": ""http:\/\/cloudvm.jaredkerim.com\/api\/v1\/fxa\/redirect\/"",
  ""scopes"": ""profile leaderboard"",
  ""profile_uri"": ""https:\/\/stable.dev.lcip.org\/profile\/"",
  ""client_id"": ""8068585724a0bc0a"",
  ""oauth_uri"": ""https:\/\/oauth-stable.dev.lcip.org\/""
}

```
"
mozilla/MozStumbler,closed,New leaderboard JSON blob has a nested fxa namespace,[],"After the OAuth2 authentication occurs, the final JSON blob that the leaderboard will return looks something like this:

``` json
 {
     ""leaderboard_uid"": ""a9d5037ea99e492b8af24eb2605b3865"",
     ""fxa_uid"": ""86638715e74d47279251adca928a5f74"",
     ""fxa_auth_data"": {
         ""access_token"": ""ef5f3069b764d7248cb44e884ada18a7f6ad5b622568a4674aae29f42b0f8676"",
         ""token_type"": ""bearer"",
         ""expires_in"": 1209600,
         ""auth_at"": 1452282315,
         ""scope"": ""profile leaderboard""
     }
}
```

Nopte that all the fxa_auth_data is straight from FxA.  I need to refactor the processWebSvcAuthResponse method to properly extract the access_token from the fxa_auth_data namespace instead of assuming it's a top level item.
"
mozilla/MozStumbler,closed,Update fork,[],
mozilla/MozStumbler,open,MozStumbler stops collecting data,[],"I observed that MozStumbler often stops collecting data after some (varying) time when the screen is locked. When I unlock to see if MozStumbler is still working, data collection immeadiately resumes. If I keep the screen switched on, no such problem appears.

I am not sure what is going on, I can only guess from what I observe: The stop of data collection seems to coincide with the moment you switch to a network with a different MNC. This happens e.g. for roaming when you cross a border but it also happens a lot in the German O₂-network which was recently merged with the E-Plus network: my phone switches frequently between MNC 03 and MNC 07. I don't know how to provide meaningful logfiles to check if my theory is correct.
"
mozilla/MozStumbler,closed,Incorrect MLS location ,[],"I am not sure if anything (either cell ID database or algorithm) goes wrong but I guess this is not simply an accuracy problem. Please have a look at the attached snapshots which shows the incorrect MLS location reported for either Cell only or WiFi + Cell report (as marked in a yellow oval). Actually, it reports a location 200Km away. Would it be possible to check this? Thanks.

![screenshot_2015-12-23-12-02-57-marked](https://cloud.githubusercontent.com/assets/16408756/11971803/d26c481a-a97d-11e5-8f92-9c742abf6358.png)

![screenshot_2015-12-23-12-02-15](https://cloud.githubusercontent.com/assets/16408756/11971811/ef4f05f8-a97d-11e5-8200-fd16e3c61ad5.png)

![screenshot_2015-12-23-13-55-25](https://cloud.githubusercontent.com/assets/16408756/11971827/082a4d4e-a97e-11e5-9d36-1cc846ad1434.png)
"
mozilla/MozStumbler,closed,Switch back to FxA's display_name for the user's visible name on leaderboard,[],
mozilla/MozStumbler,open,UI improvement suggestion : re-think reports icons shape and colour,[],"Hi,

I've been using MozStumbler for a few months now, but I've always been put off by the reports icons. I mainly use MozStumbler when driving either in new or known areas to map/update networks in both urban and rural areas.

The icons I encounter the most often are ""cell only"" (blue square) and ""cell + wifi"" (green dot). However, I spontaneously confuse both… and after a bit of thinking, I've found why, and think they could/should be changed. Here's why :
- Wi-fi APNs are often home routers, which are physically ""boxy"", hence spring to my mind as ""square"" rather than ""dot""
- A quick search for ""Wi-fi"" on an image search yields either dominantly black or blue results (ex : https://www.google.fr/search?tbm=isch&q=wi-fi)

-> For those reasons, I believe that ""wifi only"" reports would be most spontaneously understood as ""blue square""
- On the other hand, cell towers are… well… towers, which I easily picture as circular pylons, hence ""dot"" more than ""square"" (ex : https://upload.wikimedia.org/wikipedia/commons/6/6b/Painted_cell_tower.jpg)
- The official GSM logo is mainly red : https://upload.wikimedia.org/wikipedia/commons/5/5d/GSMLogo.svg (though square too)

-> For those reasons, I believe that ""cell only"" reports would be most spontaneously understood as ""red dot"".
- For ""cell + wi-fi"", I don't have any set idea. While a violet icon (blue + red) might be logical, as a color-blind, I know it would not stand out well against either red or blue. A green icon may be a better idea, to convey the idea of an ""ideal"" report, since both cell + wi-fi data are gathered.
- No idea about the shape, as no ""mix"" between a square and a dot would seem to mean anything. Maybe a top-pointing triangle, or a small star ? As a default, I guess a dot would be a ""least worse"" option, to better convey the idea of precise location.

-- EDIT --
Since I'm stupid, I did not notice that I'm actually proposing to represent ""cell + wi-fi"" as a green dot… which would definitely NOT stand out well (for most colourblind people) against red dot for ""cell only"". So let's use either another colour (like yellow ?), or another shape indeed (that's the best option IMO, as no amount of colourblindness can turn a dot to a triange !).
-- /EDIT --

Now, I don't want you to think this request is of the ""I don't like it so it needs to change according to my will"" kind, but rather as a ""blue squares/green dots must probably have been chosen at random (during dev time), but why not give it a bit more thought now ?"". :-)

I also understand that as a cosmetic issue that did not cause any problem so far, its priority is very low. On the other hand, swapping two icons is only minimal work (I guess).

Lastly, since mankind is adverse to change (though tech people much less ;-) ), I know that lots of people either won't see the use or will oppose it, due to habit. To that, I reply the following :
- New users (may they be numerous !) will never know the icons were not the same before, but they would benefit from well-thougt ones.
- Existing users may agree/welcome/adapt to the current proposal. It's never too late for improvement !
- Only existing users who do NOT agree/welcome/adapt to the current proposal will be hurt by the change.

So what do you guys think ?
"
mozilla/MozStumbler,open,Keep screen on but dimmed when scanning,"[Label(name=""Good first bug"")]","Hi,

I order to save a bit of power, why not add an extra ""dim screen"" option when ""keep screen on while scanning"" is on ?
"
mozilla/MozStumbler,closed,Filter for own mobile hotspot,[],"Hi!

Mobile personal hotspots aren't really helpful for building a geolocation-map as they move with the user. 
So it would be really nice if one could filter out his/her own ones to make the map more accurate and keep the ""data pollution"" down.
Or are there algorithms serverside to detect this?
"
mozilla/MozStumbler,closed,Android M fix for neighbouring cells,[],"Reworks #1710
"
mozilla/MozStumbler,closed,MozStumbler for iOS,[],"We need a MozStumbler for iOS Port :) 
"
mozilla/MozStumbler,closed,Update German translations,[],
mozilla/MozStumbler,closed,reports aren't deleted,[],"is it intended that reports are saved on the sd card? I thought that you said in the past, that you want to save them in the apps folder (to be save from other apps)
they aren't even deleted on my tablet (might be SELinux blocking the access?) -> Samsung Galaxy Tab 3 10.1 (android 4.4)

there are 10660 gz files in there :O (on my smartphone there are 16000 files)
it's 2,56mb big, but 41,64MB on the device because the files are so small
takes quite some time to open such a folder :D 
"
mozilla/MozStumbler,closed,Fix zoom,[],"In some cases, especially when using pinch to zoom, the coverage overlay mode is not updated.

There is a `MapListener` in [MapFragment.java#L171](https://github.com/mozilla/MozStumbler/blob/dev/android/src/main/java/org/mozilla/mozstumbler/client/mapview/MapFragment.java#L171) to trigger `updateOverlayCoverageLayer`. 
But the `DelayedMapListener` will sometimes cancel a zoom event when dispatching a scroll event. So as a result the zoom listener will not run.

Using separate `Runnables` in `DelayedMapListener` fixes the problem.

Not using `DelayedMapListener` also fixes the problem, but I do not know if that is somehow otherwise problematic. The code was introduced in d8e1faae9f88c269d41fd759d561b42789fa192f. 
"
mozilla/MozStumbler,open,Precache osm tile data for offline stumbling,[],"Currently MozStumbler uses online map tiles to render map.

But if OsmAnd~ is installed on the device and using offline maps, it would be ideal for MozStumbler to use the same offline map data (`.obf` files).

OsmAnd~ offline map data location will be in any of the locations..

`$EXTERNAL_STORAGE/osmand/map.obf`
`$EXTERNAL_STORAGE/Android/data/net.osmand.plus/files/map.obf`
`$SECONDARY_STORAGE/Android/data/net.osmand.plus/files/map.obf`
`/data/data/net.osmand.plus/no_backup/map.obf`

Unless the user changes the map data location, it will be in the path 
`$EXTERNAL_STORAGE/osmand/map.obf`

Please support including this offline map data for rendering.
"
mozilla/MozStumbler,closed,Update zh-TW l10n,[],
mozilla/MozStumbler,closed,MozStumbler lacks l10n,[],"MozStumbler should be translated :)
"
mozilla/MozStumbler,closed, The MLS android app abruptly stops generating reports even though the GPS is set.,[],"No MLS reports were generated along an 8 miles stretch even though the GPS was working perfectly fine.

Steps to reproduce it : 
1. Switch on the Mozilla Stumbler app and GPS on android phone.
2. Stumble around for over an hour, ensure that you are constantly moving.
3. Also Stumble in those areas where you are unable to find cellular network on phone.

At some point of time the app stops generating reports even though the GPS is set.

Actual result :
No reports were generated even though the GPS was working perfectly fine.

Expected result :
MLS reports should have been generated.

Sometimes because of the app stops working too and the user is unaware of it.

I also suggest adding one more map legend which indicates that no reports are being generated for a given stretch.

Screenshot : https://bugzilla.mozilla.org/attachment.cgi?id=8627132&action=edit
"
mozilla/MozStumbler,open,Failed updates from Github should not crash the stumbler. ,[],"@crankycoder Release 1.7.12 offers update to v1.7.14. Then crashes when trying to update:

```
E/AndroidRuntime﹕ FATAL EXCEPTION: AsyncTask #2
    Process: org.mozilla.mozstumbler, PID: 28156
    java.lang.RuntimeException: An error occured while executing doInBackground()
            at android.os.AsyncTask$3.done(AsyncTask.java:304)
            at java.util.concurrent.FutureTask.finishCompletion(FutureTask.java:355)
            at java.util.concurrent.FutureTask.setException(FutureTask.java:222)
            at java.util.concurrent.FutureTask.run(FutureTask.java:242)
            at android.os.AsyncTask$SerialExecutor$1.run(AsyncTask.java:231)
            at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1112)
            at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:587)
            at java.lang.Thread.run(Thread.java:818)
     Caused by: java.lang.reflect.UndeclaredThrowableException
            at $Proxy1.getUrlAsFile(Unknown Source)
            at org.mozilla.mozstumbler.client.Updater.downloadFile(Updater.java:249)
            at org.mozilla.mozstumbler.client.Updater.access$500(Updater.java:32)
            at org.mozilla.mozstumbler.client.Updater$5.doInBackground(Updater.java:208)
            at org.mozilla.mozstumbler.client.Updater$5.doInBackground(Updater.java:204)
            at android.os.AsyncTask$2.call(AsyncTask.java:292)
            at java.util.concurrent.FutureTask.run(FutureTask.java:237)
            at android.os.AsyncTask$SerialExecutor$1.run(AsyncTask.java:231)
            at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1112)
            at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:587)
            at java.lang.Thread.run(Thread.java:818)
     Caused by: java.lang.reflect.InvocationTargetException
            at java.lang.reflect.Method.invoke(Native Method)
            at java.lang.reflect.Method.invoke(Method.java:372)
            at org.mozilla.mozstumbler.svclocator.DynamicProxy.invoke(DynamicProxy.java:89)
            at java.lang.reflect.Proxy.invoke(Proxy.java:397)
            at $Proxy1.getUrlAsFile(Unknown Source)
            at org.mozilla.mozstumbler.client.Updater.downloadFile(Updater.java:249)
            at org.mozilla.mozstumbler.client.Updater.access$500(Updater.java:32)
            at org.mozilla.mozstumbler.client.Updater$5.doInBackground(Updater.java:208)
            at org.mozilla.mozstumbler.client.Updater$5.doInBackground(Updater.java:204)
            at android.os.AsyncTask$2.call(AsyncTask.java:292)
            at java.util.concurrent.FutureTask.run(FutureTask.java:237)
            at android.os.AsyncTask$SerialExecutor$1.run(AsyncTask.java:231)
            at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1112)
            at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:587)
            at java.lang.Thread.run(Thread.java:818)
     Caused by: java.io.FileNotFoundException: https://github.com/mozilla/MozStumbler/releases/download/v1.7.14/MozStumbler-v1.7.14.apk
            at com.android.okhttp.internal.http.HttpURLConnectionImpl.getInputStream(HttpURLConnectionImpl.java:206)
            at com.android.okhttp.internal.http.DelegatingHttpsURLConnection.getInputStream(DelegatingHttpsURLConnection.java:210)
            at com.android.okhttp.internal.http.HttpsURLConnectionImpl.getInputStream(HttpsURLConnectionImpl.java:25)
            at org.mozilla.mozstumbler.service.core.http.HttpUtil.getUrlAsFile(HttpUtil.java:116)
            at java.lang.reflect.Method.invoke(Native Method)
            at java.lang.reflect.Method.invoke(Method.java:372)
            at org.mozilla.mozstumbler.svclocator.DynamicProxy.invoke(DynamicProxy.java:89)
            at java.lang.reflect.Proxy.invoke(Proxy.java:397)
            at $Proxy1.getUrlAsFile(Unknown Source)
            at org.mozilla.mozstumbler.client.Updater.downloadFile(Updater.java:249)
            at org.mozilla.mozstumbler.client.Updater.access$500(Updater.java:32)
            at org.mozilla.mozstumbler.client.Updater$5.doInBackground(Updater.java:208)
            at org.mozilla.mozstumbler.client.Updater$5.doInBackground(Updater.java:204)
            at android.os.AsyncTask$2.call(AsyncTask.java:292)
            at java.util.concurrent.FutureTask.run(FutureTask.java:237)
            at android.os.AsyncTask$SerialExecutor$1.run(AsyncTask.java:231)
            at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1112)
            at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:587)
            at java.lang.Thread.run(Thread.java:818)
```
"
mozilla/MozStumbler,closed,MozStumbler tracking data but showing no reports ready ,[],"MozStumbler in 1.7.13 is finding new locations and wifi but when I look at the side pane it shows no reports ready to upload and the most recent upload ways days ago.

Nothing useful in logs as to why its not generating reports to send
"
mozilla/MozStumbler,closed,UnknownHostException,[],"Seeing this Stumbler_HttpUtil: post error:java.net.UnknownHostException: Unable to resolve host ""fill me in please"": No address associated with hostname

In 1.7.13
"
mozilla/MozStumbler,closed,Make PowerSavingScreen scroll-able.,[],"PowerSavingScreen was not scroll-able, thus on small screen devices layout was getting cut. Wrapped the layout in <ScrollView> to make it scroll-able. 
"
mozilla/MozStumbler,open,TileLoader BufferUnderflowException,[],"I noticed a bug using the current v1.7.12 release. Some tiles where not showing up, they just stayed gray. Zooming in and out did not fix the problem. Killing the app also did not solve it.
Clearing the cache did help.

This was reported in the log:

> Stumbler_ractTileLoader:Error downloading tile: [...]:java.nio.BufferUnderflowException
"
mozilla/MozStumbler,closed,Report an atomicity issue,[],"Hi, Developers of MozStumbler, 

I am writing to report an atomicity issue. I would very appreciate if you could check below for details and confirm with us whether it is a real problem. 

File: mozilla/MozStumbler/android/src/main/java/org/mozilla/osmdroid/tileprovider/util/CloudmadeUtil.java
Location: Line 128
Description:
Data race may manifest if thread_1 happen to set mToken.length==0 in 128, which assign ""mToken"" a new memory address, then thread_2 and thread_3 synch on the new ""mToken"" address, which is different from what thread_1 is locked on. They may simultaneously modify mToken.
"
mozilla/MozStumbler,open,LBUploadTask.java:23: error: cannot find symbol,[],"/Users/bkerensa/mozs/MozStumbler/android/src/main/java/org/mozilla/mozstumbler/client/leaderboard/LBUploadTask.java:23: error: cannot find symbol
        private static final String SUBMIT_URL = BuildConfig.LB_SUBMIT_URL;
                                                            ^
  symbol:   variable LB_SUBMIT_URL
  location: class BuildConfig
/Users/bkerensa/mozs/MozStumbler/android/src/main/java/org/mozilla/mozstumbler/client/leaderboard/LBUploadTask.java:23: error: Illegal static declaration in inner class LBUploadTask.LBSubmitter
        private static final String SUBMIT_URL = BuildConfig.LB_SUBMIT_URL;
                                    ^
  modifier 'static' is only allowed in constant variable declarations
Note: Some input files use or override a deprecated API.
"
mozilla/MozStumbler,open,exception in :android:compileFdroidReleaseJava when building apk,[],"org.gradle.api.tasks.TaskExecutionException: Execution failed for task ':android:compileFdroidReleaseJava'.
    at org.gradle.api.internal.tasks.execution.ExecuteActionsTaskExecuter.executeActions(ExecuteActionsTaskExecuter.java:69)
    at org.gradle.api.internal.tasks.execution.ExecuteActionsTaskExecuter.execute(ExecuteActionsTaskExecuter.java:46)
    at org.gradle.api.internal.tasks.execution.PostExecutionAnalysisTaskExecuter.execute(PostExecutionAnalysisTaskExecuter.java:35)
    at org.gradle.api.internal.tasks.execution.SkipUpToDateTaskExecuter.execute(SkipUpToDateTaskExecuter.java:64)
    at org.gradle.api.internal.tasks.execution.ValidatingTaskExecuter.execute(ValidatingTaskExecuter.java:58)
    at org.gradle.api.internal.tasks.execution.SkipEmptySourceFilesTaskExecuter.execute(SkipEmptySourceFilesTaskExecuter.java:42)
    at org.gradle.api.internal.tasks.execution.SkipTaskWithNoActionsExecuter.execute(SkipTaskWithNoActionsExecuter.java:52)
    at org.gradle.api.internal.tasks.execution.SkipOnlyIfTaskExecuter.execute(SkipOnlyIfTaskExecuter.java:53)
    at org.gradle.api.internal.tasks.execution.ExecuteAtMostOnceTaskExecuter.execute(ExecuteAtMostOnceTaskExecuter.java:43)
    at org.gradle.api.internal.AbstractTask.executeWithoutThrowingTaskFailure(AbstractTask.java:305)
    at org.gradle.execution.taskgraph.AbstractTaskPlanExecutor$TaskExecutorWorker.executeTask(AbstractTaskPlanExecutor.java:79)
    at org.gradle.execution.taskgraph.AbstractTaskPlanExecutor$TaskExecutorWorker.processTask(AbstractTaskPlanExecutor.java:63)
    at org.gradle.execution.taskgraph.AbstractTaskPlanExecutor$TaskExecutorWorker.run(AbstractTaskPlanExecutor.java:51)
    at org.gradle.execution.taskgraph.ParallelTaskPlanExecutor.process(ParallelTaskPlanExecutor.java:51)
    at org.gradle.execution.taskgraph.DefaultTaskGraphExecuter.execute(DefaultTaskGraphExecuter.java:88)
    at org.gradle.execution.SelectedTaskExecutionAction.execute(SelectedTaskExecutionAction.java:29)
    at org.gradle.execution.DefaultBuildExecuter.execute(DefaultBuildExecuter.java:62)
    at org.gradle.execution.DefaultBuildExecuter.access$200(DefaultBuildExecuter.java:23)
    at org.gradle.execution.DefaultBuildExecuter$2.proceed(DefaultBuildExecuter.java:68)
    at org.gradle.execution.DryRunBuildExecutionAction.execute(DryRunBuildExecutionAction.java:32)
    at org.gradle.execution.DefaultBuildExecuter.execute(DefaultBuildExecuter.java:62)
    at org.gradle.execution.DefaultBuildExecuter.execute(DefaultBuildExecuter.java:55)
    at org.gradle.initialization.DefaultGradleLauncher.doBuildStages(DefaultGradleLauncher.java:149)
    at org.gradle.initialization.DefaultGradleLauncher.doBuild(DefaultGradleLauncher.java:106)
    at org.gradle.initialization.DefaultGradleLauncher.run(DefaultGradleLauncher.java:86)
    at org.gradle.launcher.exec.InProcessBuildActionExecuter$DefaultBuildController.run(InProcessBuildActionExecuter.java:80)
    at org.gradle.launcher.cli.ExecuteBuildAction.run(ExecuteBuildAction.java:33)
    at org.gradle.launcher.cli.ExecuteBuildAction.run(ExecuteBuildAction.java:24)
    at org.gradle.launcher.exec.InProcessBuildActionExecuter.execute(InProcessBuildActionExecuter.java:36)
    at org.gradle.launcher.exec.InProcessBuildActionExecuter.execute(InProcessBuildActionExecuter.java:26)
    at org.gradle.launcher.daemon.server.exec.ExecuteBuild.doBuild(ExecuteBuild.java:47)
    at org.gradle.launcher.daemon.server.exec.BuildCommandOnly.execute(BuildCommandOnly.java:34)
    at org.gradle.launcher.daemon.server.exec.DaemonCommandExecution.proceed(DaemonCommandExecution.java:119)
    at org.gradle.launcher.daemon.server.exec.WatchForDisconnection.execute(WatchForDisconnection.java:35)
    at org.gradle.launcher.daemon.server.exec.DaemonCommandExecution.proceed(DaemonCommandExecution.java:119)
    at org.gradle.launcher.daemon.server.exec.ResetDeprecationLogger.execute(ResetDeprecationLogger.java:24)
    at org.gradle.launcher.daemon.server.exec.DaemonCommandExecution.proceed(DaemonCommandExecution.java:119)
    at org.gradle.launcher.daemon.server.exec.StartStopIfBuildAndStop.execute(StartStopIfBuildAndStop.java:33)
    at org.gradle.launcher.daemon.server.exec.DaemonCommandExecution.proceed(DaemonCommandExecution.java:119)
    at org.gradle.launcher.daemon.server.exec.ForwardClientInput$2.call(ForwardClientInput.java:71)
    at org.gradle.launcher.daemon.server.exec.ForwardClientInput$2.call(ForwardClientInput.java:69)
    at org.gradle.util.Swapper.swap(Swapper.java:38)
    at org.gradle.launcher.daemon.server.exec.ForwardClientInput.execute(ForwardClientInput.java:69)
    at org.gradle.launcher.daemon.server.exec.DaemonCommandExecution.proceed(DaemonCommandExecution.java:119)
    at org.gradle.launcher.daemon.server.exec.LogToClient.doBuild(LogToClient.java:60)
    at org.gradle.launcher.daemon.server.exec.BuildCommandOnly.execute(BuildCommandOnly.java:34)
    at org.gradle.launcher.daemon.server.exec.DaemonCommandExecution.proceed(DaemonCommandExecution.java:119)
    at org.gradle.launcher.daemon.server.exec.EstablishBuildEnvironment.doBuild(EstablishBuildEnvironment.java:70)
    at org.gradle.launcher.daemon.server.exec.BuildCommandOnly.execute(BuildCommandOnly.java:34)
    at org.gradle.launcher.daemon.server.exec.DaemonCommandExecution.proceed(DaemonCommandExecution.java:119)
    at org.gradle.launcher.daemon.server.exec.DaemonHygieneAction.execute(DaemonHygieneAction.java:39)
    at org.gradle.launcher.daemon.server.exec.DaemonCommandExecution.proceed(DaemonCommandExecution.java:119)
    at org.gradle.launcher.daemon.server.exec.StartBuildOrRespondWithBusy$1.run(StartBuildOrRespondWithBusy.java:46)
    at org.gradle.launcher.daemon.server.DaemonStateCoordinator$1.run(DaemonStateCoordinator.java:246)
    at org.gradle.internal.concurrent.DefaultExecutorFactory$StoppableExecutorImpl$1.run(DefaultExecutorFactory.java:64)
Caused by: org.gradle.api.internal.tasks.compile.CompilationFailedException: Compilation failed; see the compiler error output for details.
    at org.gradle.api.internal.tasks.compile.JdkJavaCompiler.execute(JdkJavaCompiler.java:44)
    at org.gradle.api.internal.tasks.compile.JdkJavaCompiler.execute(JdkJavaCompiler.java:35)
    at org.gradle.api.internal.tasks.compile.NormalizingJavaCompiler.delegateAndHandleErrors(NormalizingJavaCompiler.java:97)
    at org.gradle.api.internal.tasks.compile.NormalizingJavaCompiler.execute(NormalizingJavaCompiler.java:50)
    at org.gradle.api.internal.tasks.compile.NormalizingJavaCompiler.execute(NormalizingJavaCompiler.java:36)
    at org.gradle.api.internal.tasks.compile.CleaningJavaCompilerSupport.execute(CleaningJavaCompilerSupport.java:34)
    at org.gradle.api.internal.tasks.compile.CleaningJavaCompilerSupport.execute(CleaningJavaCompilerSupport.java:25)
    at org.gradle.api.tasks.compile.JavaCompile.performCompilation(JavaCompile.java:158)
    at org.gradle.api.tasks.compile.JavaCompile.compile(JavaCompile.java:138)
    at org.gradle.api.tasks.compile.JavaCompile.compile(JavaCompile.java:92)
    at org.gradle.internal.reflect.JavaMethod.invoke(JavaMethod.java:63)
    at org.gradle.api.internal.project.taskfactory.AnnotationProcessingTaskFactory$IncrementalTaskAction.doExecute(AnnotationProcessingTaskFactory.java:235)
    at org.gradle.api.internal.project.taskfactory.AnnotationProcessingTaskFactory$StandardTaskAction.execute(AnnotationProcessingTaskFactory.java:211)
    at org.gradle.api.internal.project.taskfactory.AnnotationProcessingTaskFactory$IncrementalTaskAction.execute(AnnotationProcessingTaskFactory.java:222)
    at org.gradle.api.internal.project.taskfactory.AnnotationProcessingTaskFactory$StandardTaskAction.execute(AnnotationProcessingTaskFactory.java:200)
    at org.gradle.api.internal.tasks.execution.ExecuteActionsTaskExecuter.executeAction(ExecuteActionsTaskExecuter.java:80)
    at org.gradle.api.internal.tasks.execution.ExecuteActionsTaskExecuter.executeActions(ExecuteActionsTaskExecuter.java:61)
"
mozilla/MozStumbler,open,Offer Nightly Builds,[],"Since for whatever reason I cannot build on the latest stable Android Studio it would be nice
if we could have nightly MozStumbler builds. Their are features like high power mode I would love to try but cannot since a update has not been offered through Google Play in awhile.
"
mozilla/MozStumbler,closed,Features/travis containers,[],"Switch to containerized builds in travis for faster CI builds.
"
mozilla/MozStumbler,closed,Features/upgrade android m sdk 23,[],"This bumps the SDK version to 23 for both Travis and the gradle builds for libstumbler and the MozStumbler client.
"
mozilla/MozStumbler,closed,Target Android API 23,[],"Please target Android API 23
"
mozilla/MozStumbler,open,Debug Build Instructions Outdated,[],"The android studio debug build instructions are outdated as there is a newer version of studio but also they are not complete from A to B. Can you update screenshots but also give complete instructions?
"
mozilla/MozStumbler,closed,getNeighboringCellInfo() is deprecated on Android M.,[],"On Android M, don't call this function, and on older OS's keep using it.

https://bugzilla.mozilla.org/show_bug.cgi?id=1195854
"
mozilla/MozStumbler,closed,Move unlimited zoom pref to settings,[],"See #1474 / #1491

Should we note that zoom is still limited in low-res map mode?
"
mozilla/MozStumbler,open,support android auto,[],"I think it would for sure make sense if MozStumbler would support Android auto in the future :)
-> you won't need to worry about your smartphones battery and stuff
and it could start and stop when your motor gets turned on and off automatically then

https://developer.android.com/auto/index.html
"
mozilla/MozStumbler,closed,Move application data to dedicated location,[],"What do you think about moving location of the folder with data from default user-location to `./Android/data/`? Currently the folder is easily accessible by users, can be deleted/modified by accident by user or cleaning applications.

Android supports 'private' data folders by design, current implementation of MozStumbler doesn't follow those 'guidelines' (not really guidelines, or I can't find them, but it's a good practice). Personally I find it annoying when apps mess with my folders, when they have their dedicated location to store data. Screenshots and link will tell you more.

> [All apps (root or not) have a default data directory, which is /data/data/<package_name>. By default, the apps databases, settings, and all other data go here. If an app expects huge amounts of data to be stored, or for other reasons wants to ""be nice to internal storage"", there's a corresponding directory on the SDCard (Android/data/<package_name>)](http://android.stackexchange.com/questions/47924/where-android-apps-store-data/47951#47951)
> [more info](http://android.stackexchange.com/questions/46926/android-folder-hierarchy/46934#46934)

Example usage:

```
Log.i(TAG, getExternalFilesDir(STORAGE_SERVICE).getAbsolutePath());
Log.i(TAG, getExternalFilesDir(null).getAbsolutePath());
Log.i(TAG, getDataPath());

/storage/emulated/0/Android/data/app.id/files/storage
/storage/emulated/0/Android/data/app.id/files
/storage/emulated/0/Android/data/app.id/files/download/
```

I make the same issue for every project that stores data in user location instead in dedicated location. If you want to quickly copy some code I wrote to solve this issue for another project feel free to take it from a commit that fixed it for AIMSICD: https://github.com/SecUpwN/Android-IMSI-Catcher-Detector/commit/f3e8161539dd6b98c0d4ea879a103632ed445a02
"
mozilla/MozStumbler,closed,Simple high-power mode,[],"Basically fixes #1386. It should also increase the accuracy of exported GPS tracks (#490) when enabled.

Effects:
- Allow scans every 15m (instead of 30m), but still only every 2s (~27km/h)
- Scan for WiFi every 2s (instead of 4s)
- Allow max of 3 WiFi scans per GPS position (instead of 2)
"
mozilla/MozStumbler,closed,Bugzilla 1171213: remove multiprocess flag on prefs,[],"We are no longer using a multi-process model, this flag isn't needed.
"
mozilla/MozStumbler,closed,Allow exporting points that have no radio data,[],"GPX tracks (#490) are incomplete when the path contains observations without radio data.
The second commit modifies the `Reporter` to also send intents for observations without radio data, but without counting or adding them to the `DataStorageManager`. They are also filtered in the client so that they are not displayed on the map.
"
mozilla/MozStumbler,closed,Integrate Stumbler with new Leaderboard Dev Instance,[],"There is a new dev instance for the leaderboard available here:

http://leaderboard-dev.jaredkerim.com/

It implements the leaderboard whose API spec can be found here:

https://github.com/JaredKerim-Mozilla/leaderboard-server

The FXA client_id for this instance is:

86cd25bed2c63936

You should be able to point the stumbler to that dev URL with that FXA client_id and walk through a successful full login flow and then submit data to it.
"
mozilla/MozStumbler,closed,Updated Polish translation,[],
mozilla/MozStumbler,closed,A lot of class not found exceptions logged,[],"```
07-30 19:35:08.007 D/Stumbler_lemetryWrapper(25919): Class not found!
07-30 19:35:09.999 D/Stumbler_lemetryWrapper(25919): Class not found!
07-30 19:35:12.011 D/Stumbler_lemetryWrapper(25919): Class not found!
07-30 19:35:13.982 D/Stumbler_lemetryWrapper(25919): Class not found!
07-30 19:35:15.994 D/Stumbler_lemetryWrapper(25919): Class not found!
07-30 19:35:18.006 D/Stumbler_lemetryWrapper(25919): Class not found!
07-30 19:35:20.008 D/Stumbler_lemetryWrapper(25919): Class not found!
07-30 19:35:21.950 D/Stumbler_lemetryWrapper(25919): Class not found!
07-30 19:35:24.022 D/Stumbler_lemetryWrapper(25919): Class not found!
07-30 19:35:25.974 D/Stumbler_lemetryWrapper(25919): Class not found!
07-30 19:35:27.946 D/Stumbler_lemetryWrapper(25919): Class not found!
07-30 19:35:29.948 D/Stumbler_lemetryWrapper(25919): Class not found!
07-30 19:35:31.980 D/Stumbler_lemetryWrapper(25919): Class not found!
07-30 19:35:33.962 D/Stumbler_lemetryWrapper(25919): Class not found!
07-30 19:35:35.994 D/Stumbler_lemetryWrapper(25919): Class not found!
07-30 19:35:37.996 D/Stumbler_lemetryWrapper(25919): Class not found!
07-30 19:35:39.988 D/Stumbler_lemetryWrapper(25919): Class not found!
07-30 19:35:41.980 D/Stumbler_lemetryWrapper(25919): Class not found!
07-30 19:35:43.992 D/Stumbler_lemetryWrapper(25919): Class not found!
07-30 19:35:46.004 D/Stumbler_lemetryWrapper(25919): Class not found!
07-30 19:35:47.976 D/Stumbler_lemetryWrapper(25919): Class not found!
07-30 19:35:50.018 D/Stumbler_lemetryWrapper(25919): Class not found!
07-30 19:35:53.151 D/Stumbler_lemetryWrapper(25919): Class not found!
07-30 19:35:55.973 D/Stumbler_lemetryWrapper(25919): Class not found!
07-30 19:35:59.117 D/Stumbler_lemetryWrapper(25919): Class not found!
07-30 19:36:03.983 D/Stumbler_lemetryWrapper(25919): Class not found!
07-30 19:36:08.017 D/Stumbler_lemetryWrapper(25919): Class not found!
07-30 19:36:10.970 D/Stumbler_lemetryWrapper(25919): Class not found!
```

When I have stumbler and logcat on at the same time, this messages causes catlog to freeze for a few seconds, look at times-temps how often it happens.
"
mozilla/MozStumbler,closed,Reports not being uploaded,[],"Automatic upload isn't happening, and whenever I try to manually upload the reports, the button changes to refresh button and back to upload within a second.

NOTE: This happened suddenly. It was working fine till Sunday evening.
"
mozilla/MozStumbler,open,Make map legend clearer,"[Label(name=""Good first bug"")]","What do the satellite and the binoculars mean?

Also, it says that blue squares are cell only reports, but I commonly get blue circles (and I suspect they're the same).

When the satellite says 4/6, what is that supposed to mean?

These things should be explained in the app or at least in the accompanying documentation.
"
mozilla/MozStumbler,open,Android App uploads the reports automatically even if 'Auto-upload only on Wi-Fi' is not checked.,[],"I've noticed this several times that the Android App uploads the reports automatically even if 'Auto-upload only on Wi-Fi' is not checked.

Here are the environment specifications and other details which might help:

1) Android Phone:  MotoG 2nd Gen 
2) Android version: 5.0.2
3) Kernel version: 3.4.42-g48d3b85
4) Build Number: LXB22.46-28
4) Mozilla Stumbler version: 1.7.12 d7b3156

Please let me know if any other details are required.
"
mozilla/MozStumbler,closed,Multiple users with same nick show in leaderboard with combined reports,[],"If anyhow two or more person have same nick in the app, their reports are combined and updated in the leader board with the common nick.
A proper authentication system is needed for this. May be persona or a similar system would be better.
"
mozilla/MozStumbler,open,Location can be spoofed when Mock Locations is enabled,[],"When a user has Mock Locations enabled in the developer settings of android they can use any route simulation app to create a fake location change which gets accounted in the stumbler app for android. 

Workaround:-
1). Test to check if mock locations is enabled or not.
2). Check the GPS state change.
3). Check for NMEA data onLocationChanged
"
mozilla/MozStumbler,closed,Export as GPX file,[],"Fixes #490. The code is based on the KML export code, but without the ability to load a file.
"
mozilla/MozStumbler,closed,Minor fixes,[],"Fixes #1622
Fixes a `IntentReceiverLeaked`
"
mozilla/MozStumbler,open,"Make sure on all the pages mentioning the app, that towers are mentioned too.",[],"On
https://play.google.com/store/apps/details?id=org.mozilla.mozstumbler
it says cell towers but on
https://location.services.mozilla.com/apps
it doesn't.

Make sure on all the pages mentioning the app, that towers are mentioned too.

Also document if the user can still use the app but only collect towers, or only collect wifi, etc.
"
mozilla/MozStumbler,closed,Allow user to access the data he has uploaded,[],"After uploading with Tower Collector, the user can always retrieve his data from the opencellid.org database. MozStumbler should offer or document a means for a user to access the data he has uploaded too. E.g., I want to retrieve a copy of all the points I uploaded last week.
"
mozilla/MozStumbler,open,Allow manual uploading in addition to forced uploading,[],"Tower Collector allows the user to upload when he wants to, i.e., be able to connect to wifi without necessarily uploading. MozStumbler should do so too.
"
mozilla/MozStumbler,closed,allow the user to keep / export a copy of his data,[],"Tower Collector allows the user to keep / export a copy of his data. MozStumbler should do so too.
"
mozilla/MozStumbler,closed,Improve KML export,[],"This fixes a bug in the KML export and hopefully cleans up some code.
1. The heading for an observation was computed from the current position to the previous one, which is in the wrong direction. The heading icon specified in the KML file was showing downwards at 0 heading, which visually compensated this bug.
2. I switched to use the `Location` class instead of `GeoPoint` in the `ObservationPoint` to store more of the original information (i.e. accuracy, speed, `hasAltitude`). This can later be used for GPX export (#490).
"
mozilla/MozStumbler,open,Loading KML file is broken,[],"Loading a previously saved KML file has no effect, points are not shown on the map. As far as I can tell, this feature broke in 3aceac1afc9a9660a3be1538697a969e080b9b3c.
"
mozilla/MozStumbler,closed,"issue #1680, ensure update UI is on main thread",[],
mozilla/MozStumbler,closed,Bug1680,[],"issue #1680
"
mozilla/MozStumbler,closed,Fix1679 upload crash after refactor for LB backend,[],"Fixes for issue #1679.
"
mozilla/MozStumbler,open,Application Stops working after 4-5 hours of continuous stumbling,[],"Hi ,

I saw that the application stopped working even when everything was fine . Please look into the screenshot.
![stumble](https://cloud.githubusercontent.com/assets/2819529/8691980/18166622-2ae7-11e5-94e0-91619fc119ad.jpg)
"
mozilla/MozStumbler,closed,Sailfish app,[],"I learned about https://location.services.mozilla.com/ today and the [apps](https://location.services.mozilla.com/apps) page only lists this project and [community projects](https://wiki.mozilla.org/CloudServices/Location/Software).

There is no Sailfish app, so Sailfish users are closed out unless they use the Android version which again requires aliendalvik/Jolla phone and aliendalvik drains battery.
- [Jolla Harbour (submitting apps to Jolla Store)](https://harbour.jolla.com/)
- [Sailfish OS homepage](https://sailfishos.org/)
  - [Developing apps](https://sailfishos.org/develop/)
"
mozilla/MozStumbler,closed,minor code cleanup,[],
mozilla/MozStumbler,open,KML File List operation crashes,"[Label(name=""bug"")]","```
STACK_TRACE 
0   java.lang.NullPointerException
1   at org.mozilla.mozstumbler.client.serialize.KMLFragment.getFileList(KMLFragment.java:256)
2   at org.mozilla.mozstumbler.client.serialize.KMLFragment.setButtonsEnabledState(KMLFragment.java:113)
3   at org.mozilla.mozstumbler.client.serialize.KMLFragment.showProgress(KMLFragment.java:95)
4   at org.mozilla.mozstumbler.client.serialize.KMLFragment.onReadComplete(KMLFragment.java:119)
5   at org.mozilla.mozstumbler.client.serialize.ObservationPointSerializer.onPostExecute(ObservationPointSerializer.java:317)
6   at org.mozilla.mozstumbler.client.serialize.ObservationPointSerializer.onPostExecute(ObservationPointSerializer.java:43)
7   at android.os.AsyncTask.finish(AsyncTask.java:631)
8   at android.os.AsyncTask.access$600(AsyncTask.java:177)
9   at android.os.AsyncTask$InternalHandler.handleMessage(AsyncTask.java:644)
10  at android.os.Handler.dispatchMessage(Handler.java:99)
11  at android.os.Looper.loop(Looper.java:137)
12  at android.app.ActivityThread.main(ActivityThread.java:4867)
13  at java.lang.reflect.Method.invokeNative(Native Method)
14  at java.lang.reflect.Method.invoke(Method.java:511)
15  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:1007)
16  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:774)
17  at dalvik.system.NativeStart.main(Native Method)
```
"
mozilla/MozStumbler,open,Metrics view updated from wrong thread (ACRA crash),[],"```
android.view.ViewRootImpl$CalledFromWrongThreadException: Only the original thread that created a view hierarchy can touch its views.
at android.view.ViewRootImpl.checkThread(ViewRootImpl.java:7081)
at android.view.ViewRootImpl.invalidateChildInParent(ViewRootImpl.java:1107)
at android.view.ViewGroup.invalidateChild(ViewGroup.java:4529)
at android.view.View.invalidate(View.java:11809)
at android.view.View.invalidate(View.java:11750)
at android.widget.TextView.checkForRelayout(TextView.java:8047)
at android.widget.TextView.setText(TextView.java:4866)
at android.widget.TextView.setText(TextView.java:4719)
at android.widget.TextView.setText(TextView.java:4694)
at org.mozilla.mozstumbler.client.navdrawer.MetricsView.updateSentStats(MetricsView.java:291)
at org.mozilla.mozstumbler.client.navdrawer.MetricsView.access$100(MetricsView.java:45)
at org.mozilla.mozstumbler.client.navdrawer.MetricsView$1.onReceive(MetricsView.java:81)
at android.support.v4.content.LocalBroadcastManager.executePendingBroadcasts(LocalBroadcastManager.java:297)
at android.support.v4.content.LocalBroadcastManager.sendBroadcastSync(LocalBroadcastManager.java:278)
at org.mozilla.mozstumbler.service.stumblerthread.scanners.ScanManager$4.run(ScanManager.java:180)
at java.util.Timer$TimerImpl.run(Timer.java:284)
```
"
mozilla/MozStumbler,open,new async uploader FileNotFoundException causing crash (not in release),"[Label(name=""bug"")]","I think we need to double check if the storage directory somehow got wiped out.    If the directory is not there, we should try to recreate it.  

If that fails, we should immediately terminate the application.

On application startup, if the storage directory can't be created - there should be some kind of meaningful notification to the user that no reports can be saved or loaded from Android storage.

We see this crash show up dozens of times from individual devices - so this is a pretty high priority.

Crash report from 1.7.12 :

```
STACK_TRACE 
0   java.io.FileNotFoundException: /data/data/org.mozilla.mozstumbler/files/reports/report-t1434113604197-r0-w0-c0.gz: open failed: ENOENT (No such file or directory)
1   at libcore.io.IoBridge.open(IoBridge.java:456)
2   at java.io.RandomAccessFile.<init>(RandomAccessFile.java:117)
3   at org.mozilla.mozstumbler.service.stumblerthread.datahandling.base.SerializedJSONRowsList$Iterator.readFile(SerializedJSONRowsList.java:44)
4   at org.mozilla.mozstumbler.service.stumblerthread.datahandling.base.SerializedJSONRowsList$Iterator.getAtCurrentIndex(SerializedJSONRowsList.java:27)
5   at org.mozilla.mozstumbler.service.stumblerthread.datahandling.base.JSONRowsStorageManager.getNextBatch(JSONRowsStorageManager.java:139)
6   at org.mozilla.mozstumbler.service.uploadthread.AsyncUploader.uploadReports(AsyncUploader.java:165)
7   at org.mozilla.mozstumbler.service.uploadthread.AsyncUploader.doInBackground(AsyncUploader.java:81)
8   at org.mozilla.mozstumbler.service.uploadthread.AsyncUploader.doInBackground(AsyncUploader.java:43)
9   at android.os.AsyncTask$2.call(AsyncTask.java:292)
10  at java.util.concurrent.FutureTask.run(FutureTask.java:237)
11  at android.os.AsyncTask$SerialExecutor$1.run(AsyncTask.java:231)
12  at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1112)
13  at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:587)
14  at java.lang.Thread.run(Thread.java:818)
15  Caused by: android.system.ErrnoException: open failed: ENOENT (No such file or directory)
16  at libcore.io.Posix.open(Native Method)
17  at libcore.io.BlockGuardOs.open(BlockGuardOs.java:186)
18  at libcore.io.IoBridge.open(IoBridge.java:442)
19  ... 13 more
20  android.system.ErrnoException: open failed: ENOENT (No such file or directory)
21  at libcore.io.Posix.open(Native Method)
22  at libcore.io.BlockGuardOs.open(BlockGuardOs.java:186)
23  at libcore.io.IoBridge.open(IoBridge.java:442)
24  at java.io.RandomAccessFile.<init>(RandomAccessFile.java:117)
25  at org.mozilla.mozstumbler.service.stumblerthread.datahandling.base.SerializedJSONRowsList$Iterator.readFile(SerializedJSONRowsList.java:44)
26  at org.mozilla.mozstumbler.service.stumblerthread.datahandling.base.SerializedJSONRowsList$Iterator.getAtCurrentIndex(SerializedJSONRowsList.java:27)
27  at org.mozilla.mozstumbler.service.stumblerthread.datahandling.base.JSONRowsStorageManager.getNextBatch(JSONRowsStorageManager.java:139)
28  at org.mozilla.mozstumbler.service.uploadthread.AsyncUploader.uploadReports(AsyncUploader.java:165)
29  at org.mozilla.mozstumbler.service.uploadthread.AsyncUploader.doInBackground(AsyncUploader.java:81)
30  at org.mozilla.mozstumbler.service.uploadthread.AsyncUploader.doInBackground(AsyncUploader.java:43)
31  at android.os.AsyncTask$2.call(AsyncTask.java:292)
32  at java.util.concurrent.FutureTask.run(FutureTask.java:237)
33  at android.os.AsyncTask$SerialExecutor$1.run(AsyncTask.java:231)
34  at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1112)
35  at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:587)
36  at java.lang.Thread.run(Thread.java:818)
37  
```
"
mozilla/MozStumbler,closed,We need to add FxA support for refresh tokens as they are going live to production ,[],"OAuth bearer tokens are currently assumed to be long lived without an expiry.

FxA is rolling out refresh tokens to expire tokens at a 2 week interval initially, then much less.  The libfxa-android library needs support to issue a refresh token command.

I propose that we simply do the refresh opportunistically.  On application startup, we should try to refresh the token with the FxA server, and on upload we should attempt to refresh the token again.

We should always assume that the bearer token we are holding is correct unless the leaderboard server tells us otherwise.

In the context of the legacy leaderboard, this means that we can either :  

a) implement an FxA endpoint that handles Access Token -> Bearer token exchange and refresh token
b) Revert the FxA login code in the dev branch.

Which option do you like best? @hannosch ?  @garvankeeley ?

https://mail.mozilla.org/pipermail/dev-fxacct/2015-July/001639.html
"
mozilla/MozStumbler,closed,"When the user changes his/her username , Stumbler application generates his points with new user name instead of adding the existing points to the username using the email id.",[],
mozilla/MozStumbler,closed,added guards around the leaderboard,[],"I added a couple guards to prevent the leaderboard code from storing or uploading records if FxA isn't logged in.  This was causing me confusion while testing the TLS code - mostly because the  leaderboard server isn't running and stumbler was spewing HTTP POST errors.
"
mozilla/MozStumbler,closed,constrain the crypto protocols we use per android api level,[],"This should fix #1645 
"
mozilla/MozStumbler,closed,Features/fxa 0.9.12,[],"This upgrades the stumbler to use the fxa-android library at version 0.9.12 which cleans up the callback API a little.
"
mozilla/MozStumbler,closed,"leaderboard submit: remove email address, only need bearer token",[],
mozilla/MozStumbler,open,Metrics view is not reporting uploaded info correctly,"[Label(name=""UI/UX""), Label(name=""bug"")]","Running the latest master, after uploading
- ""Already sent"": I see last uploaded as 'never', and Reports not incrementing.
- the ""Ready to send"" can go to zero, and still show (0.x KB), but that is not shown in the screenshot.
  Not sure when all this got broken, need to bisect. 
  ![2015-07-02 16 22 06](https://cloud.githubusercontent.com/assets/5495083/8482353/3db0e036-20b7-11e5-80c5-0e9207fe2489.png)
"
mozilla/MozStumbler,open,Disable uploads if Mock Locations is enabled in android,[],
mozilla/MozStumbler,closed,Fix unlimited zoom,[],"First commit:
- cleanup some code
- make the full unlimited zoom mode apply only in high res mode

Second commit:
- add an additional coverage overlay that is used if zoom is lower than the current minimum coverage zoom level

Fixes #1506, fixes #1481
"
mozilla/MozStumbler,closed,easting-northing patches for LBUploadTask,[],
mozilla/MozStumbler,closed,added FxA bearer token to the LBUploadTask headers,[],
mozilla/MozStumbler,closed,add leaderboard url to config,[],
mozilla/MozStumbler,open,MozStumbler doesn't check for an available connection during uploading,"[Label(name=""Good first bug""), Label(name=""bug"")]","MozStumbler keeps on trying to upload reports even if I deactivate all connections.
Is that intended behaviour? 
"
mozilla/MozStumbler,closed,Features/fxa login,[],"Don't merge this yet.  Let's have a talk about this next week during work week. 

Adds FxA logins to the stumbler and removes the old email/nickname setup.

Nicknames are disabled until FxA is logged in.  Email address from FxA is used to populate the email preference now.

No tests yet, I'm going to upgrade all the test infrastructure so that we have better Android Studio integration.  That'll be in a separate PR. 
"
mozilla/MozStumbler,closed,A way to force unpause?,[],"Is there a way to force the application to ""unpause""?

What happens is that it pauses appropriately when I stand still (e.g. at the office) but I want to force it to start scanning again as soon as I know I'm about to move (e.g. a quick coffee run from the office).

What I have in mind is a ""Play"" button on the lock screen widget.

I'm on Nexus 5 with vanilla Google Android 5.0.
"
mozilla/MozStumbler,closed,Add position following in passive mode,[],"Add position following for passive mode which can be enabled for testing in developer options
"
mozilla/MozStumbler,closed,Fix NPE,[],"Fix NPE

```
9126-9126/org.mozilla.mozstumbler.debug E/Stumbler_ocationService﹕ Error loading trie data.
    java.lang.NullPointerException: Attempt to invoke virtual method 'java.lang.String java.io.BufferedReader.readLine()' on a null object reference
            at org.mozilla.mozstumbler.service.core.offline.OrderedCityTiles.parse_csv(OrderedCityTiles.java:44)
            at org.mozilla.mozstumbler.service.core.offline.OrderedCityTiles.<init>(OrderedCityTiles.java:27)
            at org.mozilla.mozstumbler.service.core.offline.LocationService.<init>(LocationService.java:53)
            at java.lang.reflect.Constructor.newInstance(Native Method)
            at java.lang.reflect.Constructor.newInstance(Constructor.java:288)
            at org.mozilla.mozstumbler.svclocator.ServiceConfig.load(ServiceConfig.java:36)
            at org.mozilla.mozstumbler.client.MainApp.defaultServiceConfig(MainApp.java:156)
            at org.mozilla.mozstumbler.client.MainApp.onCreate(MainApp.java:202)
            at android.app.Instrumentation.callApplicationOnCreate(Instrumentation.java:1012)
            at android.app.ActivityThread.handleBindApplication(ActivityThread.java:4553)
            at android.app.ActivityThread.access$1500(ActivityThread.java:151)
            at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1364)
            at android.os.Handler.dispatchMessage(Handler.java:102)
            at android.os.Looper.loop(Looper.java:135)
            at android.app.ActivityThread.main(ActivityThread.java:5254)
            at java.lang.reflect.Method.invoke(Native Method)
            at java.lang.reflect.Method.invoke(Method.java:372)
            at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:903)
            at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:698)

```
"
mozilla/MozStumbler,open,java.lang.NullPointerException : at org.mozilla.mozstumbler.service.stumblerthread.motiondetection.MotionSensor.stop(MotionSensor.java:121),[],"Reported in ACRA on Android 4.1.2 on Samsung Golden on v1.7.12 of the stumbler
"
mozilla/MozStumbler,open,Don't use Context.MODE_MULTI_PROCESS in Stumbler prefs (deprecated in Android M) ,[],"https://bugzilla.mozilla.org/show_bug.cgi?id=1171302
"
mozilla/MozStumbler,open,Investigate Android M doze/standby modes,[],"https://bugzilla.mozilla.org/show_bug.cgi?id=1172633

I think these modes will benefit the app, but bugs are certainly possible.
"
mozilla/MozStumbler,open,Mozilla Stumbler isn't collecting any data.,[],"Facing this problem from last few months. 
After updating my android one phone (symphony roar a50) from kitkat 4.4 to lollipop 5.1 Mozilla Stumbler is not collecting any data... tried out by installing different version but the result is same... 
"
mozilla/MozStumbler,closed,Updated Polish translation,[],
mozilla/MozStumbler,closed,Mozilla Stumbler for Android not collecting any data,[],"I am using Huwaei ascend p6-u06. I installed Mozilla Stumbler for Android but it does not collect any data. I checked GPS and Wifi. Everything is working fine.
"
mozilla/MozStumbler,closed,Fix significant motion sensor initial state,[],"The initial state of the significant motion sensor is active. I fixed that and inverted the semantic of the variable to hopefully make it more comprehensible.
This is really a small bug, I only noticed it because the false positive motion filter was triggered although I had motion sensors disabled.
"
mozilla/MozStumbler,closed,Fix for #1653,[],"Moves the tally method to remove the need to cast.
"
mozilla/MozStumbler,closed,Crashing in dev 91e9b740dfefa,"[Label(name=""bug"")]","```
Caused by: java.lang.ClassCastException: org.mozilla.mozstumbler.service.stumblerthread.datahandling.base.SerializedJSONRows cannot be cast to org.mozilla.mozstumbler.service.stumblerthread.datahandling.ReportBatch
at org.mozilla.mozstumbler.service.uploadthread.AsyncUploaderMLS.tally(AsyncUploaderMLS.java:50)
at org.mozilla.mozstumbler.service.uploadthread.AsyncUploader.uploadReports(AsyncUploader.java:140)
at org.mozilla.mozstumbler.service.uploadthread.AsyncUploader.doInBackground(AsyncUploader.java:81)
at org.mozilla.mozstumbler.service.uploadthread.AsyncUploader.doInBackground(AsyncUploader.java:43)
```
"
mozilla/MozStumbler,closed,Features/offline merged to dev,[],"WIP patches to enable offline geolocation
"
mozilla/MozStumbler,closed,"bug 1650, tally object may not be populated if no upload occured.",[],"Fix for issue #1650
"
mozilla/MozStumbler,closed,NPE crash in latest (unreleased) code,[],"Steps to reproduce (I hope):
- disable internet connections
- start MozStumbler
- stop scanning

```
org.mozilla.mozstumbler.debug E/AndroidRuntime﹕ FATAL EXCEPTION: AsyncTask #1
    Process: org.mozilla.mozstumbler.debug, PID: 15254
    java.lang.RuntimeException: An error occured while executing doInBackground()
            at android.os.AsyncTask$3.done(AsyncTask.java:304)
            at java.util.concurrent.FutureTask.finishCompletion(FutureTask.java:355)
            at java.util.concurrent.FutureTask.setException(FutureTask.java:222)
            at java.util.concurrent.FutureTask.run(FutureTask.java:242)
            at android.os.AsyncTask$SerialExecutor$1.run(AsyncTask.java:231)
            at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1112)
            at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:587)
            at java.lang.Thread.run(Thread.java:818)
     Caused by: java.lang.NullPointerException: Attempt to invoke virtual method 'int java.lang.Integer.intValue()' on a null object reference
            at org.mozilla.mozstumbler.service.uploadthread.AsyncUploaderMLS.tallyCompleted(AsyncUploaderMLS.java:58)
            at org.mozilla.mozstumbler.service.uploadthread.AsyncUploader.uploadReports(AsyncUploader.java:170)
            at org.mozilla.mozstumbler.service.uploadthread.AsyncUploader.doInBackground(AsyncUploader.java:81)
            at org.mozilla.mozstumbler.service.uploadthread.AsyncUploader.doInBackground(AsyncUploader.java:43)
            at android.os.AsyncTask$2.call(AsyncTask.java:292)
            at java.util.concurrent.FutureTask.run(FutureTask.java:237)
            at android.os.AsyncTask$SerialExecutor$1.run(AsyncTask.java:231)
            at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1112)
            at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:587)
            at java.lang.Thread.run(Thread.java:818)
```
"
mozilla/MozStumbler,closed,Add developer option to test passive scanning,[],"Adds a simple developer option to visually test the passive scanning mode, and fixes #1583.
"
mozilla/MozStumbler,closed,Fix: passive mode battery checker never starts,[],"The `mPassiveModeBatteryChecker` is never started. I assume that is a bug and regression from 6b8dc2d19b129d4dbdbca18b2d20075c7aeefd9f.
"
mozilla/MozStumbler,closed,Updated Polish translation,[],
mozilla/MozStumbler,open,Add a quick tile for mozstumbler on cyanogenmod (using the new SDK),[],"It would be awesome if I could start MozStumbler in the background (the scanning) through the quick tiles under Cyanogenmod.
This should be possible soon when the Cyanogenmod SDK gets published.

What do you think about such an addition? It would be even easier than a widget since you can access it while using another app.

https://www.cyngn.com/developer-blog/introducing-the-cyanogen-platform-sdk
"
mozilla/MozStumbler,closed,Force SSLv3 to go away,"[Label(name=""bug"")]","Android < 4.4 has a bug that tries to use SSLv3 when falling back from TLSv1.

There's a code snippet here that should force that problem to go away

http://stackoverflow.com/questions/26649389/how-to-disable-sslv3-in-android-for-httpsurlconnection/29946540#29946540
"
mozilla/MozStumbler,open,Add dual sim support on dual sim phones for effective stumbling.,[],"It seems mozilla stumbler doesn't detect the cellid-info of second sim on dual sim phones.

Add dual sim support on dual sim phones, for a more effective stumbling.
"
mozilla/MozStumbler,closed,Fix for #1640,[],"This is fix for #1640. I can't reproduce this bug at all, so this is just a guard and a testcase exercising the guard.

Note that I do not unpack the gzip data as that would be very CPU intensive.
"
mozilla/MozStumbler,closed,Features/1640 fdroid is crazy,[],"I can't reproduce this bug at all.  I suspect the error on ichnaea is someone mangling our MLS code and re-using the fdroid supplied API key.

In anycase, this PR adds a check for filepaths and just short circuits. I do not unpack the gzip data because that's pretty CPU intensive and I worry about battery life.
"
mozilla/MozStumbler,closed,Makes email a required field,[],"This builds on #1639 and adds a testcase.
"
mozilla/MozStumbler,open,F-droid build uploading broken body,"[Label(name=""bug"")]","I've gotten a couple error reports on the service side for our f-droid build uploading a broken body. Instead of a proper gzip encoded body or a JSON payload, it sends the literal value `'/data/data/org.fdroid.fdroid/files/fdroid/repo/../../index.html'` as the body.

These are requests against https://location.services.mozilla.com/v1/geosubmit?key=... with our f-droid api key.
"
mozilla/MozStumbler,closed,fix Make email field in bug submisison required #1637,[],"Hi, please check #1637 , thanks.

Note. The ""file_bug_sender_email_hint"" in string file needs to be translated into multiple languages.
"
mozilla/MozStumbler,open,Opt out SSID needs to include empty string SSID,"[Label(name=""enhancement"")]","https://github.com/mozilla/MozStumbler/blob/509f0975edc2b1d16f0b6df03911f43ab52b1315/libraries/stumbler/src/main/java/org/mozilla/mozstumbler/service/stumblerthread/blocklist/SSIDBlockList.java#L17

should really check for an empty SSID string as well as NULL.
"
mozilla/MozStumbler,closed,Make email field in bug submisison required,"[Label(name=""Good first bug""), Label(name=""enhancement"")]","A lot of bugs we get filed in the stumbler have insufficient detail for us to act on the problem, and without an email address we have no way to get more details about the bug.
"
mozilla/MozStumbler,closed,Refactor data storage to common base,[],"This is required for leaderboards to re-use the data storage backend.
"
mozilla/MozStumbler,closed,Fix typo,[],
mozilla/MozStumbler,closed,Data points missing after Cyanogenmod upgrade,[],"I recently switched from Cyanogenmod 11 (Android 4.4.4) to 12.1 (Android 5.1.1) on my Nexus 7 (2012) , not an OS upgrade , a complete nuke and pave.

Yesterday I went out on my first day out MozStumbling , checked the map today and can see there are data points missing.

Screenshot of MozStumbler map , missing highlighted in red - http://imgur.com/YXqTiVm

MozStumbler map URL - https://location.services.mozilla.com/map#15/46.0923/0.2476

I always run the OSMtracker app concurrently to record a GPX track , this has captured the data that is missing from MozStumbler so its not a problem with the device.

Screenshot from OSMtracker data in GPSPrune - http://imgur.com/K7U4M5h

Both OSMtracker and MozStumbler apps have the same Cyanogenmod Privacy Guard permissions.
Location = Allowed , Keep Awake = On
"
mozilla/MozStumbler,open,Unit test build errors,[],"Two errors are happening today (the second is on my mac):
1)  com/jcandksolutions/gradle/androidunittest/AndroidUnitTestPlugin : Unsupported major.minor version 51.0 (reported by rdandu on his mac)

2) org.mozilla.mozstumbler.service.stumblerthread.ReporterTest > testReporterCellLimits     I/Stumbler_MainApp: Simulation disabled as developer option is not enabled.
    D/ACRA: Connect to https://mozstumbler-crashes.stage.mozaws.net/acra-stumbler/_design/acra-storage/_update/report
    i: Stumbler_StorageManager, Preparing to write to : [/var/folders/qm/lt75scjd1hj_vmb2zgj7qx1r0000gn/T/android-external-cache8464171266481916114robolectric/d5e87fed-34a6-43b2-9460-8ee9c87d74c6/_mock_files_dir/reports/reports-t1430324268911-r1-w0-c50.gz]
    E: Stumbler_StorageManager, Error writing reports to disk: java.io.IOException: No such file or directory
    D/ACRA: Using default Report Fields
    E/ACRA: DumpSysCollector.meminfo could not retrieve data
    java.io.IOException: Cannot run program ""dumpsys"": error=2, No such file or directory
"
mozilla/MozStumbler,open,Speed up uploads by uploading multiple observation files per connection,[],"Why does MozStumbler upload reports only in 200-300 byte chunks?
That causes more traffic than needed because of the additional overhead and it takes very long to establish so many connections (for example if you have 1000 reports or more in a queue)

it would be far more efficient to concat reports up to 500kb or even 1mb and then send these bigger chunks -> way faster and less overhead (because of fewer packets)
"
mozilla/MozStumbler,open,MozStumbler is silently crashing,[],"Before traveling I am always starting MozStumbler + GPSLogger + Towe Collector (all the 3 in background) + Mapillary (in foreground).
But it's already the second time that I see that MozStumbler wasn't running at the end of the travel. It seems that it crashed somewhere and didn't record anything (because there isn't any report to send)
All the others are working fine and capturing data.

What can I do to help in debugging this, please?
"
mozilla/MozStumbler,open,Stumbler_CellInfo: IllegalArgumentException: Unexpected network type: 0,"[Label(name=""bug"")]","When testing on a Nexus 4 without a SIM card, the following exception is logged when I rotate my device:

```
E/Stumbler_CellInfo(16724): java.lang.IllegalArgumentException: Unexpected network type: 0
E/Stumbler_CellInfo(16724):     at org.mozilla.mozstumbler.service.stumblerthread.scanners.cellscanner.CellInfo.getCellRadioTypeName(CellInfo.java:106)
E/Stumbler_CellInfo(16724):     at org.mozilla.mozstumbler.service.stumblerthread.scanners.cellscanner.CellInfo.setCellLocation(CellInfo.java:238)
E/Stumbler_CellInfo(16724):     at org.mozilla.mozstumbler.service.stumblerthread.scanners.cellscanner.SimpleCellScannerImplementation.getCurrentCellInfo(SimpleCellScannerImplementation.java:159)
E/Stumbler_CellInfo(16724):     at org.mozilla.mozstumbler.service.stumblerthread.scanners.cellscanner.SimpleCellScannerImplementation.getCellInfo(SimpleCellScannerImplementation.java:126)
E/Stumbler_CellInfo(16724):     at org.mozilla.mozstumbler.service.stumblerthread.scanners.cellscanner.CellScanner$2.run(CellScanner.java:98)
E/Stumbler_CellInfo(16724):     at java.util.Timer$TimerImpl.run(Timer.java:284)
```
"
mozilla/MozStumbler,closed,Fix for #1628,[],"Fixes a crash in #1628
"
mozilla/MozStumbler,open,NPE Crash in 1.7.12,[],"``` java
    at org.mozilla.mozstumbler.client.subactivities.LogActivity$LogMessageReceiver$1.run(LogActivity.java:98)
```

mMainThreadHandler should be set in the construtructor of LogMessageReceiver.
"
mozilla/MozStumbler,open,Acer Z160 doesn't scan in background.,[],"Bug reported that stumbler won't scan in the background if the lockscreen is engaged.
"
mozilla/MozStumbler,closed,Fixes IllegalArgumentException from #1602,[],
mozilla/MozStumbler,closed,"The context-less access to NetworkInfo singleton is error-prone, and not needed",[],"Motivated by fixes for this NPE crash:
https://bugzilla.mozilla.org/show_bug.cgi?id=1155237
"
mozilla/MozStumbler,closed,bn-IN values add at res,[],
mozilla/MozStumbler,open,Don't send geosubmit requests with an empty body,"[Label(name=""bug"")]","We are logging detailed error messages in our service again. One thing I saw was a MozStumbler play store release build sending us a request with an empty body to the geosubmit API.

Please double check that request without any data items aren't send, thx!
"
mozilla/MozStumbler,closed,The accuracy circle isn't updated by events/intents (map),"[Label(name=""Good first bug""), Label(name=""bug"")]","The accuracy circle around your position on the map isn't updated by changes. It's only updated if the map is refreshed (by moving around the map with your finger)
"
mozilla/MozStumbler,open,Bump robolectric to 3.0,"[Label(name=""enhancement"")]","Robolectric 3.0 is out and has a bunch of features that we probably care about including better v4 fragment testing.

We need to update the gradle build and probably update some tests.

This is a pretty low priority as we have tests that run already. 
"
mozilla/MozStumbler,closed,More cleanups of DatabaseManager,[],"This is yet another patch to cleanup the interface in IDataStorageManager.

This gets rid of `saveCurrentReportsSendBufferToDisk()` and simplifies the interface to `insert()`.

MLSJSONObject is introduced as a subclass of JSONObject.  This reduces the clutter of getting wifi and cell counts and maintaining that state all over the place.
"
mozilla/MozStumbler,closed,Initial cleanup of the DataStorageManager,[],"An initial cleanup and refactor of the DataStorageManager.

~~I have to merge in #1617 and #1618 still to get those tests and fixes in.~~

Most of the remaining work is outlined in IDataStorageManager.
"
mozilla/MozStumbler,closed,Better invalid tile handling,[],"This adds onto #1616 to handle corrupt tiles and missing files.

Any exception from java.nio gets propogated up as a RuntimeException, so those are all captured now and partial files are removed from storage.
"
mozilla/MozStumbler,closed,Features/1609 eofexception,[],"This removes most of the `throws IOException` declarations from DataStorageManager and the Reporter class and make debugging issues like #1609 easier.

Exception handling for bad I/O is now handled as close to the I/O call as possible.  Failure to write to disk will try to remove the partially written file from disk.  

ACRA hooks have been added for IOExceptions when writing sync stats as well as reading reports or writing reports from disk.  This should give us better visibility into where and why crashes are happening.
"
mozilla/MozStumbler,closed,"Got a non-reproducible NPE in a caller of getTileData(), this guards against it",[],"The callers of getTileData() check its length() for validity, so always return a non-null.
"
mozilla/MozStumbler,open,Add a developer option to emit geolocate and geosubmit JSON blobs to SDCARD storage,"[Label(name=""enhancement"")]","Debugging with screenshots is painful.  We should really have a developer option to just save the JSON blobs we send up to ichnaea on the SDCARD.  

Saving the last 5 to 10 reports that we upload should be more than enough to debug this.

Note that we want to save these to the SDCARD - not to the cache directory.  We want non-rooted users to be able to send us their JSON data so that we can debug issues like ""multi-sim devices report no Cell towers"" (#1613).
"
mozilla/MozStumbler,open,Use system date format rather than locale date format,"[Label(name=""Good first bug""), Label(name=""enhancement"")]","Android allows you to specify the date format in the settings, but Mozilla Stumbler seems to just use the locale-specified date format instead.

You can get the system date format this way ([source](http://stackoverflow.com/a/6982154/492203)):

``` java
final String format = Settings.System.getString(getContentResolver(), Settings.System.DATE_FORMAT);

if (TextUtils.isEmpty(format)) {
    dateFormat = android.text.format.DateFormat.getMediumDateFormat(getApplicationContext());
} else {
    dateFormat = new SimpleDateFormat(format);
}
```
"
mozilla/MozStumbler,open,Bug report filed that multi-sim devices do not report cell towers,[],"We have a bug report from Germany where a Lenovo IdeaTab ( http://www.gsmarena.com/lenovo_ideatab_a2107-5247.php ) is not capturing cell towers properly when it has 2 SIM cards installed.

> There is no change if there is no SIM, only one SIM in the right or left slot, both SIM cards inserted or airplane mode with wifi enabled. My SIM cards are from Vodafone and Telekom.
> I am in Germany, tested near Coburg and Fambach. Most of the big streets (B4 and B19) there where already mapped, I drove on them too and also on many of the smaller ones.

I'm not sure if we've ever verified that Android does the right thing with dual SIM devices. @garvankeeley ?
"
mozilla/MozStumbler,closed,Fix wifi only observation point,[],"Fixes #1611 
The problem is that an exception is thrown when the cell count is set, so the wifi count is never set. Regression since 1170ed029e91fe6b45c4c30d41e23ae17a828303
"
mozilla/MozStumbler,closed,wifi-only dots aren't drawn green,[],"This is recent regression, I don't know since when though
I noticed it first in 1.7.11, but it could have been earlier as well:

Wifi-Only reports get green dots instead of purple ones on the map

how I know that this is the case:
the log only shows wifi data but no cell data at all for these reports
"
mozilla/MozStumbler,open,UploadAlarmReceiver deletes all reports if any report is >maxweeks old; only delete the bad reports,[],"This came to light due to #1609.
Be nice to fix this before @markwaters hits the 4 week mark.
"
mozilla/MozStumbler,open,Need test around corrupt reports on disk,"[Label(name=""enhancement"")]","We got a bug filed that a user has ~500 reports on disk that won't upload.

Looking at the AsyncUploader, there are no tests to cover the case that the gzipped report is deleted if it is indeed corrupt.  We should at least add a test case there so that we know that corrupt data does not sit on disk forever.
"
mozilla/MozStumbler,closed,Update spanish translation,[],
mozilla/MozStumbler,closed,Fix Android Studio MapView rendering problem,[],"Extend `isInEditMode` checks to other code parts to fix Android Studio's rendering problems regarding the `MapView`.

![preview](https://cloud.githubusercontent.com/assets/3845150/6940161/45edff9e-d874-11e4-9e28-773b14356557.png)
"
mozilla/MozStumbler,closed,Improve map centering button,[],"The map was always re-centered when the device was rotated, even when the user was panning previously
- make `mFirstLocationFix` and `mUserPanning` static to keep the information when the device is rotated

The centerme button is always shown when the user starts panning, even if there has not been a first location fix; the button initially has the wrong icon
- fix both in `updateCenterButtonIcon`, which replaces `setCenterButtonToNotCenteredIcon`

Rename `sFirstLocationFix` to `sHadFirstLocationFix`. This inverts the meaning, but I think it makes the name more clear to understand.

The follow mode stops when zooming, and when sliding in the sidebar
- change `onTouchEvent` to `onScroll` as this seems more reliable
"
mozilla/MozStumbler,open,Stumbling not working on Huawei Honor Holly ,[],"Device:- Huawei Honor Holly
Mozstumbler version:- 1.7.10

Log Screenshot:- http://imgur.com/z87QL0S

Let me know if there any additional information needed
"
mozilla/MozStumbler,closed,Remove observation point list copy during draw operations,[],"If we require the calling thread to lock the observation point list, then the list can be shared between threads. The simplest way to do this is to make the accessor function name clear that this is required, hence getObservationPoints_callerMustLock().

@crankycoder this is possibly a WIP, lets look at this and see if there is a preferred approach we should be using
"
mozilla/MozStumbler,closed,1599 synchronization mls locs crash,[],"#1599

Synchronize access to the mQueuedForMLS list to avoid concurrentmodificationexception
"
mozilla/MozStumbler,closed,IllegalArgumentException v1.7.10,[],"``` java
    at org.mozilla.mozstumbler.service.stumblerthread.motiondetection.MotionSensor$NetworkLocationChangeDetector.start(MotionSensor.java:175)
```
"
mozilla/MozStumbler,closed,IllegalArgumentException v1.7.10,[],"``` java
java.lang.IllegalArgumentException at org.mozilla.mozstumbler.service.stumblerthread.motiondetection.MotionSensor$NetworkLocationChangeDetector.start(MotionSensor.java:181)
```
"
mozilla/MozStumbler,open,Simulation mode should not be enabled if Android's developer mode hasn't been set,"[Label(name=""bug""), Label(name=""enhancement"")]","Simulation mode can't work if the Android developer option isn't enabled.

When the user toggles the simulation mode switch, we should check the permission and throw up a dialog if ACCESS_MOCK_LOCATION isn't available.

We need this mostly because people are cluttering our crash logs.
"
mozilla/MozStumbler,closed,MLS queries are slow and can cause a concurrent modification exception,"[Label(name=""bug"")]","In v1.7.10, ConcurrentModifcationException is thrown sometimes.

``` java
java.util.ConcurrentModificationException
at java.util.LinkedList$LinkIterator.next(LinkedList.java:124)
at org.mozilla.mozstumbler.client.ObservedLocationsReceiver$1.run(ObservedLocationsReceiver.java:101)
at android.os.Handler.handleCallback(Handler.java:739)
at android.os.Handler.dispatchMessage(Handler.java:95)
at android.os.Looper.loop(Looper.java:135)
at android.app.ActivityThread.main(ActivityThread.java:5312)
at java.lang.reflect.Method.invoke(Native Method)
at java.lang.reflect.Method.invoke(Method.java:372)
at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:901)
at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:696)
```

Reading the code, the ObservedLocationsReceiver has a method `getMapActivity` which iterates over the queuedForMLS observation points and iteratively queries MLS one at a time using AsyncTasks.

There should be a lock put around the use of the list so that calls to `addFirst` and the iterator don't cause this exception.

Ideally, I'd like to see the the mQueuedForMLS list wrapped with a proper class so that we can just push observation points around without worrying about locking semantics. 
"
mozilla/MozStumbler,closed,Update zh-TW strings.xml,[],
mozilla/MozStumbler,closed,MapLocationListener refactor for dedicated classes for the 2 listening states.,[],"This should make the logic clearer for future, and modularizes the location listeners to their purpose.
This is a follow up to #1588 and #1589. 
"
mozilla/MozStumbler,closed,tagging the library with the same version as the containing client,[],"also renamed from com.crankycoder to org.mozilla.mozstumbler for the maven group
"
mozilla/MozStumbler,closed,Use the 2nd network location changed as a trigger for movement,[],"#1579

Based on the latest log in https://github.com/mozilla/MozStumbler/issues/1579#issuecomment-85991105

The first response from the network location changed is false, the location has not changed yet. Lets try the 2nd response.
"
mozilla/MozStumbler,closed,proguard is a piece of garbage,[],"We hit a crasher with v1.7.8 and Proguard related to enums.

The Wordpress folks saw the same bug over here:
https://github.com/wordpress-mobile/WordPress-Android/issues/854

Proguard performs some optimisations which are incorrect. It's difficult to predict when things will break as the documentation is poor and vague.

We've decided to remove proguard entirely as the byte savings is negligible.  A Proguard optimised version of Stumbler v1.7.8 vs an unoptimised release build is 1.3MB vs 2.1MB.  
"
mozilla/MozStumbler,closed,1.7.8 force closes immediately,[],"I can't launch the new release. Log:

http://pastebin.com/MbFJb9AV
"
mozilla/MozStumbler,closed,"Only reschedule alarm when the alarm delay, or isRepeating, are changed",[],
mozilla/MozStumbler,closed,1428 - push library to BinTray,[],"This patch adds some directives so that we can upload into BinTray/JCenter - an alternate Maven repository.

Some notes:
- Upgrade from the old ""android-library"" gradle plugin to the more modern ""com.android.library"" gradle plugin
- The group namespace is using ""com.crankycoder"" as our library has not been formally accepted into JCenter yet.  As such, users of the library need to provide a explicit Maven repo link in their build.  

The groupname will be switched to 'Mozilla' once our package is properly accepted into JCenter's main repository.
"
mozilla/MozStumbler,closed,Use requestLocationUpdates options min time and distance to sense motion,[],"Issue #1579 

I think the bug is that the NetworkLocationChangeDetector sets the
initial location with a GPS location, then compares it to the Network
location.
The last time I tried using these options was a year ago, and I was not
getting onLocationChanged when I expected it to (sporadically missing
sending this event). I have avoided using them as a result, but in this case, 
they may be the solution.
"
mozilla/MozStumbler,closed,Properly configure map location and GPS listeners on start/stop,[],"This fixes the bug that the GPS status listener is removed on stop, and that map location listeners are not re-enabled on start.
"
mozilla/MozStumbler,closed,Add passive location listener to MapLocationListener,[],"Fixes #1371
"
mozilla/MozStumbler,closed,Fix persisted stats metrics,[],"Making `mPersistedStats` -> `static sPersistedStats` fixes #1568 
"
mozilla/MozStumbler,closed,1428 - Upload libstumbler into JCenter,[],"The stumbler library should really be published into JCenter so that anybody with Maven or Gradle can just pull it in easily.

https://www.virag.si/2015/01/publishing-gradle-android-library-to-jcenter/
"
mozilla/MozStumbler,closed,Remove conditional location of stumbler files,[],"I've removed a block of code which put the stumbler reports into a special directory for debug builds.

This was just confusing when diagnosing a problem with the DemoStumbler.  In a nutshell - AppGlobals.isDebug is not final and it had a value which I wasn't expecting, so files were not being written or read from an expected directory.

I don't think there's really any benefit to multiple directories anyway. If we really want to have an alternate directory, I would opt for an explicit path that is set into the DataStorageManager.
"
mozilla/MozStumbler,closed,Minor fixes,[],"first commit: immediately update number display
STR:
- do some scanning, then stop
- rotate device etc -> report count is zero

second commit: properly fix #1436

third commit: for debug builds, use the app debug name in the notification as well
"
mozilla/MozStumbler,closed,GPSScanner has locale dependant code ,[],"GPSScanner checks for fused locations by looking for the substring 'gps' within the provider name.

This should be changed to something that is not locale specific.  https://github.com/mozilla/MozStumbler/blob/a1066db7047b138cc8fbfd6e8fbfeb0de8ae70fc/libraries/stumbler/src/main/java/org/mozilla/mozstumbler/service/stumblerthread/scanners/GPSScanner.java#L168

``` java
String provider = location.getProvider();
if (!provider.toLowerCase().contains(""gps"")) {
  sendToLogActivity(logMsg + ""Discard fused/network location. Provider [""+provider+""]"");
  // only interested in GPS locations
  return;
}
```
"
mozilla/MozStumbler,closed,Localized leaderboards for stumbling parties in india,"[Label(name=""enhancement"")]","We need to cut the world up into tiles and enable short duration (day or two) stumbling events where a leaderboard exists for a particular geographic tile for that duration.

This would help incentivize our student community in India to run stumbling events.

We need to get #1325 landed for this bug as success means lots of stumbling parties - which means a high probability that we get human name collisions.
"
mozilla/MozStumbler,open,Get the library to interoperate with other crowdsourcing intiatives better,[],"This is a tracking bug.

I'd like to see our library code play nicely with other crowdsourcing initiatives to incentivize usage of our library.
- Exporting a GPS trace to OSM #490
"
mozilla/MozStumbler,closed,disbles requirement for accelerometers,[],"This fixes #1309
"
mozilla/MozStumbler,open,Power consumption is up on Nexus 5,"[Label(name=""Power Consumption"")]","User bug reported: ""The last 2 or 3 updates seem to have regressed motion detection on my nexus 5. Even overnight where the phone is completely motionless, seems to continually scan and not pause causing significant battery usage.""
"
mozilla/MozStumbler,open,GPS-free location fixes should be possible using only cell and wifi data,[],"I'd like to be able to support gps-free location fixes where all data is simply on the device.

There are privacy issues here that need to be resolved, but I think this is a very compelling feature.

The particular privacy problem we want to solve is to make it reasonably difficult for someone to find the location of a particular wifi router based on knowing that single router BSSID. 
"
mozilla/MozStumbler,closed,ignore GPS records with a time < the unix buildtime of the app,[],"This fixes #1526 by comparing the time collected from the GPS location record against the bulid time of the application.  The Mozilla build servers should be ok, but I'm uncertain about the F-Droid server. That _should_ be ok, but the only way to know for sure is to just make a release.
"
mozilla/MozStumbler,closed,added null guards when accessing the application pointer,[],"This should fix #1575 
"
mozilla/MozStumbler,closed,NPE in MapFragment on 094927f,[],"``` java
java.lang.NullPointerException
at org.mozilla.mozstumbler.client.mapview.MapFragment.getApplication(MapFragment.java:257)
at org.mozilla.mozstumbler.client.mapview.MapFragment.dimToolbar(MapFragment.java:468)
at org.mozilla.mozstumbler.client.mapview.MapFragment.showPausedDueToNoMotionMessage(MapFragment.java:669)
at org.mozilla.mozstumbler.client.navdrawer.MainDrawerActivity.isPausedDueToNoMotion(MainDrawerActivity.java:372)
at org.mozilla.mozstumbler.client.MainApp.updateMotionDetected(MainApp.java:348)
at org.mozilla.mozstumbler.client.MainApp$2$1.run(MainApp.java:108)
at android.os.Handler.handleCallback(Handler.java:733)
at android.os.Handler.dispatchMessage(Handler.java:95)
at android.os.Looper.loop(Looper.java:136)
at android.app.ActivityThread.main(ActivityThread.java:5146)
at java.lang.reflect.Method.invokeNative(Native Method)
at java.lang.reflect.Method.invoke(Method.java:515)
at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:732)
at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:566)
at de.robv.android.xposed.XposedBridge.main(XposedBridge.java:132)
at dalvik.system.NativeStart.main(Native Method)
```
"
mozilla/MozStumbler,open,about_mapbox string for values-fr is incorrect.,"[Label(name=""Translations"")]","The `about_mapbox` string for FR locale is incorrect. It should be a translation of ""Learn more at http://www.mapbox.com""
"
mozilla/MozStumbler,closed,enable the OnePlus One on the whitelist of valid significant motion sensor phones,[],
mozilla/MozStumbler,closed,backed out afb83f72e7d,[],"This is a manually generated diff which backsout the removal of `bindService`.
"
mozilla/MozStumbler,closed,Gaps in stumbling as of 57279ef99 ,[],"I'm getting significant gaps in stumbling as of 57279ef99 

The first was in pocket while driving.  The second was in pocket while on a bus.  I've gotten very good scans on this device before so this looks like a recent regression.  Probably #1559 or #1563.

![2015-03-14_17_19_57](https://cloud.githubusercontent.com/assets/4829/6670093/2e61d2f4-cbd3-11e4-9d3f-7e7745afa85d.png)

![2015-03-13_18_05_26](https://cloud.githubusercontent.com/assets/4829/6670147/8810f726-cbd3-11e4-82a9-6bef81d34dff.png)

Rolling back to f33e6e4 I get this around the Toronto office so I'm pretty sure it's one of those two PRs.

![f33e6e4](https://cloud.githubusercontent.com/assets/4829/6670288/21c78c04-cbd4-11e4-8c5a-ef9b9fe21b1d.png)

I'll update this bug with more screenshots with #1559 applied and #1563 applied separately.
"
mozilla/MozStumbler,closed,Paused state seems wonky on dev as of 57279ef99,[],"I don't seem to get a pause state with the significant motion sensor on the OnePlus anymore.
"
mozilla/MozStumbler,closed,"Still getting seemingly geoip, both cell-only and cell+wi-fi on 1.7.7",[],"![screenshot_2015-03-15-20-58-27](https://cloud.githubusercontent.com/assets/6490233/6657821/7b21b19e-cb57-11e4-9be0-b9b083ed429d.png)
This is a little village which has cell service gaps.
I apparently am the only one stumbling here.
Wiko BLOOM(dual-sim) with Android KitKat.
Do I need to provide any more info? I think this is a duplicate bug, though I cannot find the 'original'
EDIT: New screenshot. 
![screenshot_2015-03-15-21-17-18](https://cloud.githubusercontent.com/assets/6490233/6657886/d7b4f0fa-cb58-11e4-8e4b-975dc95ed597.png)
"
mozilla/MozStumbler,closed,"Intermittent failure to have a persistent ""Last upload date"".  Occasionally resets to 'never' ","[Label(name=""bug"")]","MozStumbler: 1.7.7
CyanogenMod CM11 

Following an update to MozStumbler 1.7.7, the application is no longer reporting results in the `Already Sent` section.

`Last uploaded` is always listed as `never` despite successful uploads according to the logs. Previously this would show the last uploaded date
`Roports` is left blank, previously this would show the number of records uploaded since install
"
mozilla/MozStumbler,closed,MapFragment metrics updates are 'laggy',[],"When toggling the stumbler from on to off and then back on again, the visible AP and cell numbers do not seem to bounce back to non-zero numbers quickly after #1563 landed.
"
mozilla/MozStumbler,closed,WIP ->Show cells on map,[],"This is a WIP patch. It is largely functional, highly graphics performant, but needs more work and more documentation.

I would like feedback on slower devices, the one I have to test with isn't working.

The rate limiting step is the server, which is slow to respond.
The CellDataRequester currently has to turn map tile ids of the string form ""tilex/tiley"" into lat long bounding boxes for server queries. This is temporary. The server will be changed to handle the ""tilex/tiley"" queries.

Future items:
- when map zoomed in, draw mini towers instead of black dots.
- when drawn as towers (above), make them tappable, and show the tower info
- manage the storage of cells on disk better. 
  --- They are cached, need to expire this cache
  --- Need to limit size on disk
"
mozilla/MozStumbler,closed,1564 - Fix NPE in NotificationUtil,[],"This fixes #1564 
"
mozilla/MozStumbler,closed,NPE in v1.7.5,[],"Not quite sure what's going on here.   Either MainDrawerActivity can't resume or we're getting a NPE at:

``` java
at org.mozilla.mozstumbler.client.util.NotificationUtil.update(NotificationUtil.java:79)
```

Stacktrace:

``` java
java.lang.RuntimeException: Unable to resume activity {org.mozilla.mozstumbler/org.mozilla.mozstumbler.client.navdrawer.MainDrawerActivity}: java.lang.NullPointerException
at android.app.ActivityThread.performResumeActivity(ActivityThread.java:2919)
at android.app.ActivityThread.handleResumeActivity(ActivityThread.java:2948)
at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2354)
at android.app.ActivityThread.access$700(ActivityThread.java:159)
at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1316)
at android.os.Handler.dispatchMessage(Handler.java:99)
at android.os.Looper.loop(Looper.java:176)
at android.app.ActivityThread.main(ActivityThread.java:5419)
at java.lang.reflect.Method.invokeNative(Native Method)
at java.lang.reflect.Method.invoke(Method.java:525)
at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:1046)
at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:862)
at dalvik.system.NativeStart.main(Native Method)
Caused by: java.lang.NullPointerException
at android.os.Parcel.readException(Parcel.java:1437)
at android.os.Parcel.readException(Parcel.java:1385)
at android.app.INotificationManager$Stub$Proxy.enqueueNotificationWithTag(INotificationManager.java:338)
at android.app.NotificationManager.notify(NotificationManager.java:139)
at android.app.NotificationManager.notify(NotificationManager.java:112)
at org.mozilla.mozstumbler.client.util.NotificationUtil.update(NotificationUtil.java:79)
at org.mozilla.mozstumbler.client.util.NotificationUtil.updateLastUploadedLabel(NotificationUtil.java:112)
at org.mozilla.mozstumbler.client.navdrawer.MetricsView.updateLastUploadedLabel(MetricsView.java:263)
at org.mozilla.mozstumbler.client.navdrawer.MetricsView.updateSentStats(MetricsView.java:282)
at org.mozilla.mozstumbler.client.navdrawer.MetricsView.update(MetricsView.java:222)
at org.mozilla.mozstumbler.client.navdrawer.MainDrawerActivity.onPostResume(MainDrawerActivity.java:203)
at android.app.Activity.performResume(Activity.java:5463)
at android.app.ActivityThread.performResumeActivity(ActivityThread.java:2909)
... 12 more
java.lang.NullPointerException
at android.os.Parcel.readException(Parcel.java:1437)
at android.os.Parcel.readException(Parcel.java:1385)
at android.app.INotificationManager$Stub$Proxy.enqueueNotificationWithTag(INotificationManager.java:338)
at android.app.NotificationManager.notify(NotificationManager.java:139)
at android.app.NotificationManager.notify(NotificationManager.java:112)
at org.mozilla.mozstumbler.client.util.NotificationUtil.update(NotificationUtil.java:79)
at org.mozilla.mozstumbler.client.util.NotificationUtil.updateLastUploadedLabel(NotificationUtil.java:112)
at org.mozilla.mozstumbler.client.navdrawer.MetricsView.updateLastUploadedLabel(MetricsView.java:263)
at org.mozilla.mozstumbler.client.navdrawer.MetricsView.updateSentStats(MetricsView.java:282)
at org.mozilla.mozstumbler.client.navdrawer.MetricsView.update(MetricsView.java:222)
at org.mozilla.mozstumbler.client.navdrawer.MainDrawerActivity.onPostResume(MainDrawerActivity.java:203)
at android.app.Activity.performResume(Activity.java:5463)
at android.app.ActivityThread.performResumeActivity(ActivityThread.java:2909)
at android.app.ActivityThread.handleResumeActivity(ActivityThread.java:2948)
at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2354)
at android.app.ActivityThread.access$700(ActivityThread.java:159)
at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1316)
at android.os.Handler.dispatchMessage(Handler.java:99)
at android.os.Looper.loop(Looper.java:176)
at android.app.ActivityThread.main(ActivityThread.java:5419)
at java.lang.reflect.Method.invokeNative(Native Method)
at java.lang.reflect.Method.invoke(Method.java:525)
at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:1046)
at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:862)
at dalvik.system.NativeStart.main(Native Method)
```
"
mozilla/MozStumbler,closed,Unbind the ClientStumblerService,[],"This is a WIP cherry picking from lines and reworking them from : https://github.com/crankycoder/MozStumbler/tree/features/1479-remove-bindservice

This unbinds dependencies to the ClientStumblerService pointer that is exposed with `bindService` from the client and spins the stumbler service off into a completely separate thread.

Please see each commit message for details.
"
mozilla/MozStumbler,open,Add barometric pressure collection,[],"Need to flesh this out a bit with ichnaea, but we might as well add barometric pressure. Take a look at Pressure.NET codebase.
"
mozilla/MozStumbler,closed,Translate zhtw,[],"Translation fixes that were annoying me with noise during the build.
"
mozilla/MozStumbler,closed,Update Turkish translation,[],"Minor updates for Turkish translation.
"
mozilla/MozStumbler,closed,Always use passive scanning in cell and wifi scanners,[],"I think it might be a good idea to always run the cell and wifi scans in passive mode.
As a result, only two scans will be done per location, and only when a new location is reported by the active GPS. After that the report will be flushed.
That also means that scanning is not active if the device is not reporting new locations because it is either not moving (which works independently from motion sensing settings) or has no GPS fix.
And the number of scans is reduced if you are moving slowly. The current min distance for GPS to report a new location is 30 meters. At a regular walking speed of 5-6km/h this takes ~20 seconds. In that time, 20 cell and 5 wifi scans are made. With this patch, it's always only 2 scans each.
With the current settings, wifi scanning will become permanently active at ~13km/h, cell scanning at ~50km/h.
And Stumbler users will be running and actively testing the same code that is run in passive mode used in Android Firefox.
Also fixes #1503, fixes #1301 and basically fixes #1055.
"
mozilla/MozStumbler,closed,Fix for #1557,[],"This adds the radioType field back to the top level of the geolocate API call.   Cell tower-only based location requests were not handled correctly causing geo-ip results to be returned.
"
mozilla/MozStumbler,closed,geolocate is including radioType in the wrong place in the JSON blob,[],"Geolocate includes the radioType in the wrong location.  Ensure that we do _not_ affect the radio field for geosubmit when we make this change.

See: https://github.com/mozilla/ichnaea/issues/416
"
mozilla/MozStumbler,closed,Geolocate JSON request is inconsistent with API specification,[],"StumblerBundle.toMLSGeolocate() generates JSON that is not consistent with geolocate request format specified in https://mozilla-ichnaea.readthedocs.org/en/latest/api/index.html#geolocate (which points to https://developers.google.com/maps/documentation/business/geolocation/#requests)

JSON specified by the geolocate API document looks like this:

```
{
  ""homeMobileCountryCode"": 310,
  ""homeMobileNetworkCode"": 410,
  ""radioType"": ""gsm"",
  ""carrier"": ""Vodafone"",
  ""cellTowers"": [
    ""cellId"": 42,
    ""locationAreaCode"": 415,
    ""mobileCountryCode"": 310,
    ""mobileNetworkCode"": 410,
    ""age"": 0,
    ""signalStrength"": -60,
    ""timingAdvance"": 15
  ],
  ""wifiAccessPoints"": [
    ""macAddress"": ...,
    ""signalStrength"": ...,
    ""age"": 0,
    ""channel"": 11,
    ""signalToNoiseRatio"": 40
  ]
}
```

JSON generated by toMLSGeolocate() looks like this:

```
{
  ""latitude"": ...,
  ""longitude"": ...,
  ""timestamp"": ...,
  ""cellTowers"": [
    ""cellId"": 42,
    ""locationAreaCode"": 415,
    ""mobileCountryCode"": 310,
    ""mobileNetworkCode"": 410,
    ""radioType"": ""gsm"",
    ""signalStrength"": -60,
    ""timingAdvance"": 15,
    ""psc"": ...,
    ""asu"": ...
  ]
  ""wifiAccessPoints"": [
    ""macAddress"": ...,
    ""frequency"": ...,
    ""signalStrength"": ...
  ]
}
```

Either Ichnea API description needs to be updated to reflect the actual request format, or MozStumbler generates incorrect geolocate request to MLS.
"
mozilla/MozStumbler,open,Add a simple robotium test to make sure notifications can be dismissed,[],"I give up.  We need to have some kind of integration tests for some of the UI code.

The notification pulldown regression we had in 1.7.5 (#1554) has no acceptable way of being tested using robolectric.

We need to have someway of doing UI testing with a full build on real Android for some UI behaviors.

Robotium seems like a reasonable choice: https://code.google.com/p/robotium/

This isn't a plan to get rid of robolectric - we need tests to run fast during development, but in my ideal world - we have a CI server which runs robotium tests against the dev branch to make sure that the application behaves reasonably well.

The first step here is to just get a basic test case in.

The test case should include:
1. Start scanning, inspect the notification that is exists. Stop the scanning.  Inspect that notification and verify that it has been dismissed with a timeout of 30 sec to ensure it doesn't ""come back"".
2. Start scanning, inspect notification, stop scanning with the button on the notification.  Verify that the notification has been dismissed with a timeout of 30 sec to ensure it doesn't ""come back"".

I think that would be good enough. 

This doesn't have to run on travis-ci, just have some shell script that we can run on a box with where the Android development toolkit is installed. 
"
mozilla/MozStumbler,closed,Can't be toggled off at all,[],"After today's update (stumbler 1.7.5), I can't disable scanning **at all**. Every time I put the slider to OFF, it jumps back to ON instantly. I tried it like 20 times, it happens every time. I had to kill Stumbler from the list of running applications to make it stop scanning. Can anyone reproduce?

Android 4.4
Motorola Moto G 4G
"
mozilla/MozStumbler,closed,check isScanningOrPause before trying to update notification,[],
mozilla/MozStumbler,closed,switched new ACRA box with SSL,[],
mozilla/MozStumbler,closed,removing whats new dialog,[],"I left the pref in, and the block of code where we would put this again in future, in hopes it get replaced with a whats new list pulled from the web
"
mozilla/MozStumbler,closed,"Fix for 1484, on startup update the last upload in the notification",[],"See #1484
"
mozilla/MozStumbler,closed,"Revert ""fix notification updates""",[],"This reverts commit df68ed93d32472a5072cd4c84ca678a5f9a184b0.

I'm reverting this because we can do this in a more simplified way that doesn't impose a dependency on the service pointer.  
"
mozilla/MozStumbler,closed,Set map gps/cell/wifi info to zero if not scanning actively,[],"Fixes #1436
"
mozilla/MozStumbler,open,Add workaround/don't collect wrong mnc ,[],"Is it possible to solve this problem (https://github.com/mozilla/ichnaea/issues/340) 
with the workaround from mar-v-in?

https://github.com/microg/android_external_UnifiedNlpApi/blob/master/src/org/microg/nlp/api/CellBackendHelper.java#L204
"
mozilla/MozStumbler,closed,Fixes to passive scanning mode,[],"I found some issues in passive scanning mode:
- number of passive scans per location was always one too many because of post increment
- the scanners always needed to be stopped even if a new position was reported instantly
- scanner data was flushed after 10 seconds while wifi scanning continued (3 \* 5 sec = 15 sec). So I decreased `MAX_SCANS_PER_GPS` and `WIFI_MIN_UPDATE_TIME` to fit into one interval, which should also increase data accuracy

I learned that changes to the library code are especially critical, so I'm awaiting comments.
"
mozilla/MozStumbler,closed,Draw newer report dots on top,[],"Fixes #1087 (see latest comments there)
"
mozilla/MozStumbler,closed,Check zoom buttons when setting min/max zoom level,[],"Fixes #1476 
"
mozilla/MozStumbler,closed,Improve description of MLS location queries,[],"Fixes #1427
Further improvements are still welcome of course.
"
mozilla/MozStumbler,closed,NetworkLocationListener PR that is now superseded by 1588 and 1589,[],"Right now the `MapLocationListener` is activating the network location listener when scanning is paused. Does that make any sense? These listeners are only for updating the position marker on the map, not for motion detection, right?
And as far as I know, the network location provider will scan for cells and wifis and use the internet, which also consumes energy.
"
mozilla/MozStumbler,closed,Fix notification updates,[],"Fixes #1484 
Now sets the last upload time in the notification on start.
The metrics are always zero on app start, and (of course) it still takes one minute until they are updated (on devices < Android 5).
"
mozilla/MozStumbler,open,Bug: Upload doesn't show progress in the metrics section,[],"The number of reports that are ready to sent doesn't update during upload which makes you think that your upload isn't working.

You can enforce an update by sliding the metrics section out and in again though.

How to reproduce:
Collect a good chunk of reports (300 at least) by disabling upload over mobile Internet and start uploading -> the number of reports ready to sent isn't decreasing.
"
mozilla/MozStumbler,closed,Update l10n strings for zh-tw,[],
mozilla/MozStumbler,closed,short circuit the metricsview update if the last upload time is 0,[],
mozilla/MozStumbler,closed,KML Reports File always empty,"[Label(name=""bug"")]","Android 4.4.4 Cyanogen OS version 11.0-XNPH05Q
Android 4.4.2 Cyanogen OS version 11-20140321
Mozilla Stumbler version 1.7.2 from F-Droid
Mozilla Stumbler version 1.5.2 from F-Droid
And even versions before that.

I never managed to get anything in KML file, all I get is an empty file named by date an time:
obs-1-date-04-03-2015-20:34.kml
Size of file: 6B
"
mozilla/MozStumbler,open,"""Already Sent"" metrics deleted with each application start",[],"Mozilla Stumbler version 1.7.2 from F-Droid
Android 4.4.4 Cyanogen OS version 11.0-XNPH05Q

Metrics go back to zero on each application start.
Cleared cache, data, and reinstalled the app, and no help.

![2015-03-04 16 05 48](https://cloud.githubusercontent.com/assets/794472/6491451/8a9b82f6-c2ad-11e4-8807-a9059adfd52a.png)
![2015-03-04 16 18 30](https://cloud.githubusercontent.com/assets/794472/6491455/8c392d66-c2ad-11e4-9711-91bb8963418f.png)
"
mozilla/MozStumbler,closed,changing known model list to include A0001 for oneplus,[],
mozilla/MozStumbler,closed,Update what's new screen,[],
mozilla/MozStumbler,closed,Set Significant Motion sensor default to on for known good devices,[],"Most users aren't going to know to switch this setting to on, set the
default for known good devices
"
mozilla/MozStumbler,closed,Mozilla Stumbler requests far more permissions than it requires,[],"No idea why this is happening, but Cyanogenmod seems to think we have access to more permissions than we define in our AndroidManfest.xml.

I'm wondering if the declaration of 

```
<uses-feature
   android:name=""android.hardware.telephony""
   android:required=""false"" />
```

is causing this.

![2015-03-03 10 57 31](https://cloud.githubusercontent.com/assets/4829/6466238/24551490-c194-11e4-9672-d44c3c24cd5b.png)
"
mozilla/MozStumbler,closed,check AlarmManager is available,[],"https://github.com/mozilla/MozStumbler/issues/1495

I am guessing cyanogenmod has control over the availability of this.
"
mozilla/MozStumbler,closed,Fix #1505,[],"This fixes #1505 so that NPEs no longer show scary messages in the Client log.

Details:

I've removed a scary warning message in TileDownloaderDelegate referenced in #1505 removed a duplicate ClientLog.w message.
HTTPResponse now has an additional constructor that accepts a HTTP Status code and a transmit byte length. This makes construction of statuses like 598 easier to build.
HTTPUtil no longer returns NULL in any case.  You will always get a 404, or a 598 on an error.
"
mozilla/MozStumbler,open,We should test permissions on startup (Cyanogenmod),"[Label(name=""Good first bug"")]","We should do a quick check to see that we can actually use all the permissions we need to run properly on startup.

This would alleviate the problems we see on Cyanogenmod and the odd firmware which puts special permission restrictions on us and we could notify the user in a sensible way on application start.
"
mozilla/MozStumbler,closed,(1524) Force sync stats broadcast on startup so the metrics view has initial values,[],"When the ClientStumblerService is initialized, force a single read of the sync stats, and broadcast this for the metrics view to update on startup.
Note that in the app the UI components are initialized before the service.

https://github.com/mozilla/MozStumbler/issues/1524
"
mozilla/MozStumbler,closed,lag spike on scrolling over the map the first time,[],"If I haven't used the app for some time (a few days) and then open up the app and I still see the map tiles and then start scrolling over the map, then I get a (massive) lagspike once and see all map tiles reloading.

Is this intended behaviour and what happens exactly?
are all tiles replaced by newer ones (update over the internet)?

after that first lagspike scrolling over the map works fine.
"
mozilla/MozStumbler,open,"check phone clock to avoid GPS issues (unix time, see mailing list)",[],"We should warn the user if the phone clock is off (for example: Unix time: 1970, or if the phone clock timestamp is in general lower than the build timestamp) to avoid collecting wrong data

this is not only about wrong timestamps but also about the GPS
if the phone clock is off that far, then the GPS position is likely wrong as well, so we shouldn't collect data then and avoid uploading it.

Maybe we could even implement a time check (compare current phone to server time before uploading or something like that)

^this issue is a result of the following discussion on the mailing list:
https://groups.google.com/forum/#!topic/mozilla.dev.geolocation/biwiie__M10
"
mozilla/MozStumbler,closed,check network provider is available before trying to use (ACRA report),[],"This is to fix this ACRA crash:
java.lang.IllegalArgumentException: requested provider network doesn't exisit
at android.os.Parcel.readException(Parcel.java:1429)
at android.os.Parcel.readException(Parcel.java:1379)
at android.location.ILocationManager$Stub$Proxy.requestLocationUpdates(ILocationManager.java:659)
at android.location.LocationManager._requestLocationUpdates(LocationManager.java:664)
at android.location.LocationManager.requestLocationUpdates(LocationManager.java:486)
at org.mozilla.mozstumbler.service.stumblerthread.motiondetection.MotionSensor$NetworkLocationChangeDetector.start(MotionSensor.java:172)
at org.mozilla.mozstumbler.service.stumblerthread.motiondetection.MotionSensor.start(MotionSensor.java:117)
at org.mozilla.mozstumbler.service.stumblerthread.scanners.ScanManager$2.onReceive(ScanManager.java:81)
at android.support.v4.content.LocalBroadcastManager.executePendingBroadcasts(LocalBroadcastManager.java:297)
at android.support.v4.content.LocalBroadcastManager.sendBroadcastSync(LocalBroadcastManager.java:278)
at org.mozilla.mozstumbler.service.stumblerthread.motiondetection.LocationChangeSensor$1.run(LocationChangeSensor.java:46)
"
mozilla/MozStumbler,closed,Metrics not updated on app start,[],"The metrics in the navdrawer are not set when the app starts (i.e. last upload time: never). The stats are updated for the first time when a report is finished. This is a recent regression.
"
mozilla/MozStumbler,closed,Fix string overflow fix Czech l10n,[],
mozilla/MozStumbler,closed,Fix concurrency for #1520,[],
mozilla/MozStumbler,closed,wrong changelog after update,"[Label(name=""bug"")]","Changelog after updating to 1.7.2 shows the 1.6.1 changelog

![2015-02-27 18 40 07](https://cloud.githubusercontent.com/assets/5685512/6419634/108b9dbc-bebf-11e4-8d34-4000ca00b40b.png)
"
mozilla/MozStumbler,closed,ConcurrentModification error in v1.6.1,[],"```
Caused by: java.util.ConcurrentModificationException
at java.util.LinkedList$LinkIterator.next(LinkedList.java)
at org.mozilla.mozstumbler.client.serialize.ObservationPointSerializer.writeOut(ObservationPointSerializer.java:130)
at org.mozilla.mozstumbler.client.serialize.ObservationPointSerializer.doInBackground(ObservationPointSerializer.java:309)
at org.mozilla.mozstumbler.client.serialize.ObservationPointSerializer.doInBackground(ObservationPointSerializer.java:43)
at android.os.AsyncTask$2.call(AsyncTask.java)
```
"
mozilla/MozStumbler,open,KML NPE in v1.7.0,[],"``` java
java.lang.NullPointerException
at org.mozilla.mozstumbler.client.serialize.KMLFragment.getFileList(KMLFragment.java:252)
at org.mozilla.mozstumbler.client.serialize.KMLFragment.setButtonsEnabledState(KMLFragment.java:109)
at org.mozilla.mozstumbler.client.serialize.KMLFragment.showProgress(KMLFragment.java:91)
at org.mozilla.mozstumbler.client.serialize.KMLFragment.onWriteComplete(KMLFragment.java:123)
at org.mozilla.mozstumbler.client.serialize.ObservationPointSerializer.onPostExecute(ObservationPointSerializer.java:315)
at org.mozilla.mozstumbler.client.serialize.ObservationPointSerializer.onPostExecute(ObservationPointSerializer.java:43)
at android.os.AsyncTask.finish(AsyncTask.java:631)
at android.os.AsyncTask.access$600(AsyncTask.java:177)
at android.os.AsyncTask$InternalHandler.handleMessage(AsyncTask.java:644)
at android.os.Handler.dispatchMessage(Handler.java:99)
at android.os.Looper.loop(Looper.java:137)
```
"
mozilla/MozStumbler,closed,KML sharing,[],"Got a bug filed with this description for v1.6.1

After save the kml file, when asked to share it, the only thing shared is ""<kml/>"".
"
mozilla/MozStumbler,closed,Turkish translation: changed format string to stop crash,[],
mozilla/MozStumbler,closed,Fix 1515 motion sensor NPE,[],"For issue #1515 
"
mozilla/MozStumbler,closed,1.7.1 crash in MotionSensor ,"[Label(name=""bug"")]","This is a bit confusing.  I would say that mContext should use an application context, but tracing back the call stack shows that start(Context) uses an application context already.

``` java
        public void start(Context c) {
            mContext = c;
            LocationManager lm = (LocationManager) mContext.getSystemService(Context.LOCATION_SERVICE);

            if (mLastLocation == null) {
                mLastLocation = lm.getLastKnownLocation(LocationManager.GPS_PROVIDER);
                if (mLastLocation == null) {
                    mLastLocation = lm.getLastKnownLocation(LocationManager.NETWORK_PROVIDER);
                }
            }

            lm.requestLocationUpdates(LocationManager.NETWORK_PROVIDER, 0, 0, mNetworkLocationListener);
        }
```

Crash log:

``` java
java.lang.NullPointerException: Attempt to invoke virtual method 'java.lang.Object android.content.Context.getSystemService(java.lang.String)' on a null object reference
at org.mozilla.mozstumbler.service.stumblerthread.motiondetection.MotionSensor$NetworkLocationChangeDetector.stop(MotionSensor.java:176)
at org.mozilla.mozstumbler.service.stumblerthread.motiondetection.MotionSensor.stop(MotionSensor.java:134)
at org.mozilla.mozstumbler.service.stumblerthread.scanners.ScanManager.stopAllScanners(ScanManager.java:239)
at org.mozilla.mozstumbler.service.stumblerthread.scanners.ScanManager.stopScanning(ScanManager.java:226)
at org.mozilla.mozstumbler.client.ClientStumblerService.stopScanning(ClientStumblerService.java:73)
at org.mozilla.mozstumbler.client.MainApp.stopScanning(MainApp.java:289)
at org.mozilla.mozstumbler.client.mapview.MapFragment.toggleScanning(MapFragment.java:481)
at org.mozilla.mozstumbler.client.navdrawer.MainDrawerActivity$1.onCheckedChanged(MainDrawerActivity.java:56)
at android.widget.CompoundButton.setChecked(CompoundButton.java:152)
at android.widget.Switch.setChecked(Switch.java:852)
at android.widget.Switch.toggle(Switch.java:847)
at android.widget.CompoundButton.performClick(CompoundButton.java:124)
at android.view.View$PerformClick.run(View.java:19749)
at android.os.Handler.handleCallback(Handler.java:739)
at android.os.Handler.dispatchMessage(Handler.java:95)
at android.os.Looper.loop(Looper.java:135)
at android.app.ActivityThread.main(ActivityThread.java:5221)
at java.lang.reflect.Method.invoke(Native Method)
at java.lang.reflect.Method.invoke(Method.java:372)
at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:899)
at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:694)
```
"
mozilla/MozStumbler,closed,Turkish translations crash in the MetricsView for 1.7.1,"[Label(name=""Translations"")]","@asteko - I'm getting crashes in the MetricsView from turkish users.

I'm backing out the turkish translation until we can have that resolved.

``` java
Stack Trace     
java.lang.RuntimeException: Unable to resume activity {org.mozilla.mozstumbler/org.mozilla.mozstumbler.client.navdrawer.MainDrawerActivity}: java.util.UnknownFormatConversionException: Conversion: p
at android.app.ActivityThread.performResumeActivity(ActivityThread.java:2621)
at android.app.ActivityThread.handleResumeActivity(ActivityThread.java:2649)
at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2122)
at android.app.ActivityThread.access$700(ActivityThread.java:134)
at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1218)
at android.os.Handler.dispatchMessage(Handler.java:99)
at android.os.Looper.loop(Looper.java:137)
at android.app.ActivityThread.main(ActivityThread.java:4867)
at java.lang.reflect.Method.invokeNative(Native Method)
at java.lang.reflect.Method.invoke(Method.java:511)
at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:1007)
at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:774)
at dalvik.system.NativeStart.main(Native Method)
Caused by: java.util.UnknownFormatConversionException: Conversion: p
at java.util.Formatter$FormatToken.unknownFormatConversionException(Formatter.java:1397)
at java.util.Formatter$FormatToken.checkFlags(Formatter.java:1334)
at java.util.Formatter.transform(Formatter.java:1440)
at java.util.Formatter.doFormat(Formatter.java:1079)
at java.util.Formatter.format(Formatter.java:1040)
at java.util.Formatter.format(Formatter.java:1009)
at java.lang.String.format(String.java:1998)
at java.lang.String.format(String.java:1972)
at org.mozilla.mozstumbler.client.navdrawer.MetricsView.updatePowerSavingsLabels(MetricsView.java:161)
at org.mozilla.mozstumbler.client.navdrawer.MetricsView.update(MetricsView.java:219)
at org.mozilla.mozstumbler.client.navdrawer.MainDrawerActivity.onPostResume(MainDrawerActivity.java:203)
at android.app.Activity.performResume(Activity.java:5134)
at android.app.ActivityThread.performResumeActivity(ActivityThread.java:2611)
```
"
mozilla/MozStumbler,open,Allow Offline Maps,[],"A feature request.  It would be good to have the ability for users to download their own offline maps, at the moment I must use Mozstumbler with maps disabled as my data plan is too small for able to have maps downloaded as I stumble.

A solution like c:geo which allows user to download maps and manually install like from http://download.mapsforge.org/ or OSMAnd which allows you to install offline maps from with in the app would be good options
"
mozilla/MozStumbler,open,CellInfo refactoring,"[Label(name=""Good first bug"")]","CellInfo went through a refactoring where the top level radioType which came from `TelephonyManager.getPhoneType()` was removed.

This means the constructor now takes no arguments, but you must invoke one of:
- setGsmCellInfo
- setWcdmaCellInfo
- setLteCellInfo
- setCdmaCellInfo

to get a valid object.  There is also a constructor to create CellInfo records for a neighboring CellInfo.

All 5 cases should really be pushed out into subclasses so that we can't have partially initialized CellInfo objects and to just clean up the mess of if statements and switches through the SimpleCellScannerImplementation.
"
mozilla/MozStumbler,open,CellInfo uses UNKNOWN_CID for fields that are not Cell ID,[],"This is confusing when reading code.

UNKNOWN_CID is a constant with a value of -1.

The CellInfo class uses that constant for other fields including:
- Timing Advance
- PSC
- MCC
- MNC
- LAC

Go over the CellInfo class and clean this up.   In general, make sure that we have constants defined for field of the CellInfo where it makes sense.
"
mozilla/MozStumbler,open,CellID and LAC should be optional fields in CellInfo,[],"Ichanea has a bug that is in production, but not in the current master branch where CellID and LAC are required fields.

Uncomment the guards in `CellInfo::toJSONObject()` once ichnaea is updated.
"
mozilla/MozStumbler,closed,detect network location change as part of motion sensing,[],"Addresses https://github.com/mozilla/MozStumbler/issues/1496
"
mozilla/MozStumbler,closed,make the upload service not sticky (not auto-restarted if killed).,[],"For one, this is unnecessary, as the app does rescheduling of this as needed.
Also, it prevents the os trying to restart this after killing the stumbler, when resources might still be low.
"
mozilla/MozStumbler,open,Drop LocationActivity,"[Label(name=""Good first bug"")]","This class and the associated test class were added when the simulation code was added.  It's effectively just dead code.
"
mozilla/MozStumbler,closed,unlimited map zoom bug (tiles not visible),"[Label(name=""Good first bug""), Label(name=""bug"")]","we don't get MLS tiles above the limited zoom level (pls fix this) (I just see the map without the coverage tiles

-on the low resolution mode you don't see any map at all at a certain zoom level (just the circles on the map)
"
mozilla/MozStumbler,closed,NPE HTTP response client (log),[],"I dunno if this is a bug but I saw this in the log:
![2015-02-23 16 01 28](https://cloud.githubusercontent.com/assets/5685512/6367921/f6b5a6a0-bcd7-11e4-9810-c6757da429c6.png)

it says that this shouldn't have happened (NPE)

the reason that it happened was a bad connection to a cell tower, so maybe you can somehow fix something there (the npe is already being catched, I guess -> else the log entries wouldn't be there)
"
mozilla/MozStumbler,open,file path disappears to fast (export as kml),[],"saving a kml file is so fast that you cannot see the file path in one go
the dialog immediatly disappears again

-> solution print out the file path on the sd card with a toast (enough time to read)
"
mozilla/MozStumbler,closed,Unique number of available cells keeps increasing without a gps fix (on map),"[Label(name=""Good first bug""), Label(name=""bug"")]","I think this bug is only optical because afterwards (acoording to the log) only 3 cells were flushed to the disk (report).

If a device doesn't find a GPS fix it keeps on scanning (without the motion sensor), the number of wifi aps stays normal but the number of cells (on top of the map) is steadily increasing (cells that aren't available anymore aren't removed until the device gets a gps fix and reports are flushed to disk

I managed to get the number up to 95 even (and it is probably possible to get it to 1000 if you wait long enough)

how to reproduce this:
sit in train activate your gps and start scanning
if your device hasn't been connected to GPS before you went into the train it is likely that your device has trouble getting a gps fix in the train -> you will keep on scanning for a longer time but don't get any fix

![2015-02-23 15 32 50](https://cloud.githubusercontent.com/assets/5685512/6367841/57c09410-bcd7-11e4-88fa-0008d18f894d.png)
![2015-02-23 16 01 28](https://cloud.githubusercontent.com/assets/5685512/6367843/5aee853e-bcd7-11e4-97d9-da38cd47a6a3.png)

^ in the first screenshot you can see it went up to 15, the second screenshot shows the log, when I went out of the train and the first report was flushed to disk (2 cells) -> the number of visible cells immediatly went down to 2/3 cells on the map (this issue only seems to be optical)

I can provide a kml file if needed
"
mozilla/MozStumbler,closed,Legacy sensor: use a rolling average to detect motion,[],"Use the rolling average at t1  as a baseline, and when the average exceeds
a theshold relative to the baseline average at t1, then notify movement has
occurred, and update the baseline.
Sounds fancy but it isn't :).
"
mozilla/MozStumbler,closed,Synchronization fix for DynamicProxies,[],"Fixed some incorrect synchronization in the DynamicProxy which caused `ServiceLocator::getService()` to sometimes always return NULL.

I saw lots of ISystemClock and ILogger services which were always null before this patch.

I don't think I can wrap this in a test case as it only breaks under multithreaded conditions.
"
mozilla/MozStumbler,closed,1499 - Convert MLS to use geolocate and geosubmit,[],"This closes off #1499 to switch to the `geolocate` and `geosubmit` APIs from `submit` and `search`.

@hannosch you've got the JSON blobs for this PR already, let me know if there's anything terrible about the JSON.

I've also got a commit in here to add an explicit UnittestLogger and DebugLogger as there was no good way to get adb logs at the debug level in a debug build on an actual device.
"
mozilla/MozStumbler,closed,Geosubmit and Geolocate APIs must be used in the library,[],"To finish #1428 we need to port to use the geosubmit and geolocate API in ichnaea.
"
mozilla/MozStumbler,closed,Performance-safe stats reporting,[],"The synchronous stats reporting is removed. There were 2 performance problems in the code. 

1) Problem: to show the metrics of how much data is in the queue, requires zipping the in-memory contents to get the correct size, which is very slow.
Solution: Remove the calc of the zipped size of in-memory stumbles from DataStorageManager, and put it in a new class QueuedCountsTracker, that has a rate-limited (every 2sec) max freq of updating. Alternatively, I could have had this update when new reports come in (i.e. new report arrives, recalculate the in-memory zip size) and broadcast the size to listeners. I wanted this decoupled from the report frequency, which is something that might change. Also, this would update far more frequently than necessary, as the metrics only needs to update when it is visible. (Note also, that this part of the code is client-side only, it is very specific to the Mozilla Stumbler use case, and I don't want the service to ""know"" about this use case).

2) Problem: the stats for previous uploaded data is stored as a small text file, and reading this from disk is slow. Solution: Change the reporting of uploaded stats from an on-demand query, to a broadcast listener, so this info is sent out only when it changes. (This code _is_ part of the service, and makes sense to have it broadcast, because saving to disk is part of the regular data storage flow, unlike case 1 which is an optional query). 
"
mozilla/MozStumbler,open,Add speed to StumblerBundle,"[Label(name=""Good first bug"")]","While working on porting MozStumbler to use geolocate and geosubmit, I've noticed that we can add speed to the stumbler bundle.

Grab it from the Location object and check the hasSpeed() method first.

https://github.com/crankycoder/MozStumbler/blob/8ae4bbecaec883f06897e76d0a89de9b73457609/libraries/stumbler/src/main/java/org/mozilla/mozstumbler/service/stumblerthread/datahandling/StumblerBundle.java#L117
"
mozilla/MozStumbler,closed,Significant motion sensor doesn't wake up when current location dot indicates movement,[],"The significant motion sensor doesn't seem to always be hooked into the GPS location.

I think we need to do some work here to capture a delta between the last 2 known GPS locations and force a wakeup.  Here - I'm on a train that is accelerating slowly.  The phone clearly knows that I""m moving - the map centering appears to be correct, but you can see the overlay that indicates that the stumbling has been put into a pause state.

![2015-02-20 07 10 40](https://cloud.githubusercontent.com/assets/4829/6308667/2b60f73c-b914-11e4-8655-350633353a17.png)
![2015-02-20 07 13 23](https://cloud.githubusercontent.com/assets/4829/6308671/3a28d8b6-b914-11e4-9bda-8b298b333118.png)

My accelerometer indicated that I was accelerating @ 1.7m/s^2 on the train - not sure off hand if that's just below the threshold of waking up or not.

This was observed on my OnePlus One phone.   Screen was on (obviously).
"
mozilla/MozStumbler,closed,NPE when acquiring the AlarmService in v1.6.1,[],"```
at org.mozilla.mozstumbler.service.uploadthread.UploadAlarmReceiver$UploadAlarmService.onHandleIntent(UploadAlarmReceiver.java:49)
```

``` java
 43     public static void cancelAlarm(Context c, boolean isRepeating) {
 44         Log.d(LOG_TAG, ""cancelAlarm"");
 45         // this is to stop scheduleAlarm from constantly rescheduling, not to guard cancellation.
 46         sIsAlreadyScheduled = false;
 47         AlarmManager alarmManager = (AlarmManager) c.getSystemService(Context.ALARM_SERVICE);
 48         PendingIntent pi = createIntent(c, isRepeating);
 49         alarmManager.cancel(pi);
 50     }
```

The alarm manager seems to be coming back as null. 
"
mozilla/MozStumbler,closed,Turkish localisation of Mozilla Stumbler,[],"First Turkish localisation of the extension, excluding ""What's New?"" part.
"
mozilla/MozStumbler,open,Strategy for saving stumble logs might lead to future issues,[],"While it is nice to save stumble logs, those are saved in the same directory.

This strategy of saving all these logs in the same directory might have an impact in the filesystem underneath.

Today I noticed that my Nexus 5 had >16.000 of these small files (less than 2Kb each), which took a Nexus 5 between 30 to 60 seconds to show a simple listing.

My guess is that MozStumbler create/access a file directly, and therefore, it will never have an issue.  From the user point of view, it is easy to forget that and apply `ls` (or the equivalent using an UI), which is a pain when a directory has thousands of files (and a little more than a regular pain for a couple of hundred thousands files on it).

One way to deal with them is store them in a structure of directory (maybe 2 levels depth), for example: `Year/Month/report-timestamp.log`
"
mozilla/MozStumbler,closed,1365 - Simulation as a service,[],"This refactors the SimulationContext into a service in the ServiceLocator.

This simplifies the lifecycle of objects in the `ScanManager` as wrapping and unwrapping of the application context with the `SimulationContext` is no longer necessary.  This prevents the GPS, Wifi and Cell scanners from ever being cleared to a null pointer which caused crashes in #1485.
"
mozilla/MozStumbler,closed,Move the unlimited zoom option to dev screen until #1476 is fixed,[],"See #1481 (#1476 is another one)

In the first commit I just commented out the setting from the Prefs Screen, as I plan to move it back there after this release
"
mozilla/MozStumbler,closed,Accelerometer Motion sensor gaps in scanning,"[Label(name=""Motion Sensor"")]","Been testing the latest accelerometer-based power savings on the S5, and results are very good overall. 
I ran into one case where the scanning stayed paused, not sure why just yet. The blue arrow is where the scanning stopped at a streetlight and did not restart. One possibility is a GPS problem.
![screenshot 2015-02-15 12 18 22](https://cloud.githubusercontent.com/assets/5495083/6230679/80aa4d88-b68f-11e4-8b70-ba16adbeed4e.png)
"
mozilla/MozStumbler,open,What's new: switch to a link to play store What's new,"[Label(name=""UI/UX"")]","Too difficult to keep this in sync with the translations with the current method: if we release version x.y and a translation for the what's new is added, we need to release version x.(y+1) to get the updated translation.
"
mozilla/MozStumbler,closed,experimental unit test support in gradle,[],"I'm getting notified, right now, everytime I start Android Studio that there is an experimental support for unit tests in the current gradle version now

just wanted to inform you so you could maybe consider it (running tests locally) -> if that wouldn't cause any additional effort of course (if you would need to rewrite the stuff then it doesn't make sense of course

if this isn't any new information, then sorry
->they presented it as a brand new feature (that just gets publicly tested)
"
mozilla/MozStumbler,closed,Updated Polish translation,[],
mozilla/MozStumbler,closed,Features/1428 libstumbler patches,[],"This does a couple cleanups of the codebase.

`ILocationService` is now registered on application startup. So no more `new MLS()` invocations all over the place.

Logger instances are setup in more classes now.

The old mess of multiple DebugLogger source files has been fixed with reflection.

Some extra logging has been added to AsyncUploader as it was difficult to verify that uploads were happening in debug builds. 
"
mozilla/MozStumbler,open,XPosed causes intermittent problems,[],"I've installed xposed to see if I could reproduce some of the issues that we've been reported.

With just the xposed framework and PlayPermissionsExposed installed, I _should_ have no conflicts with the Stumbler, but I appear to.  This crash came about while testing the DemoStumbler which is a example application harness for stumbler library.

The crash happened the instant Strava finished installing from the Google Play Store.

I have not been able to reproduce it with uinstall/reinstall of Strava with the DemoStumbler either running or in a force-stop state.

Trying to see if we can get a response over on XDA: http://forum.xda-developers.com/xposed/modules/programmatically-detecting-xposed-t3030121 

```
E/AndroidRuntime(31483): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.crankycoder.demostumbler/com.crankycoder.demostumbler.MainActivity}: java.lang.RuntimeException: Error loading [org.mozilla.mozstumbler.svclocator.services.log.DebugLogger] class
E/AndroidRuntime(31483): >--at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2212)
E/AndroidRuntime(31483): >--at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2271)
E/AndroidRuntime(31483): >--at android.app.ActivityThread.access$800(ActivityThread.java:144)
E/AndroidRuntime(31483): >--at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1205)
E/AndroidRuntime(31483): >--at android.os.Handler.dispatchMessage(Handler.java:102)
E/AndroidRuntime(31483): >--at android.os.Looper.loop(Looper.java:136)
E/AndroidRuntime(31483): >--at android.app.ActivityThread.main(ActivityThread.java:5146)
E/AndroidRuntime(31483): >--at java.lang.reflect.Method.invokeNative(Native Method)
E/AndroidRuntime(31483): >--at java.lang.reflect.Method.invoke(Method.java:515)
E/AndroidRuntime(31483): >--at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:732)
E/AndroidRuntime(31483): >--at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:566)
E/AndroidRuntime(31483): >--at de.robv.android.xposed.XposedBridge.main(XposedBridge.java:132)
E/AndroidRuntime(31483): >--at dalvik.system.NativeStart.main(Native Method)
E/AndroidRuntime(31483): Caused by: java.lang.RuntimeException: Error loading [org.mozilla.mozstumbler.svclocator.services.log.DebugLogger] class
E/AndroidRuntime(31483): >--at org.mozilla.mozstumbler.svclocator.ServiceConfig.load(ServiceConfig.java:19)
E/AndroidRuntime(31483): >--at com.crankycoder.demostumbler.MainActivity.onCreate(MainActivity.java:30)
E/AndroidRuntime(31483): >--at android.app.Activity.performCreate(Activity.java:5231)
E/AndroidRuntime(31483): >--at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1087)
E/AndroidRuntime(31483): >--at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2169)
E/AndroidRuntime(31483): >--... 12 more
```
"
mozilla/MozStumbler,closed,status bar is only updated on intervals -> wrong numbers on start,"[Label(name=""Good first bug""), Label(name=""bug"")]","if there hasn't happened an upload the last time the app was open then the numbers in the status bar are wrong for some time
In this screenshot there aren't too many, but the status bar should use the actual numbers on app start and then start updating them periodically, I think (faster wasn't possible I think due to interface limitations)

![2015-01-30 17 26 52](https://cloud.githubusercontent.com/assets/5685512/6194557/c49ab428-b3c5-11e4-94f0-11532f396d5a.png)
"
mozilla/MozStumbler,closed,Update German translation,[],"Update German translation
"
mozilla/MozStumbler,closed,Check if offline before querying MLS,[],"Querying MLS does not check if any network is available. This can result in lots of `UnknownHostException` being displayed in the log.

STR:
- enable querying MLS
- disable wifi only
- be offline
- stumble and check GUI log
"
mozilla/MozStumbler,closed,Limited zoom feature problems,"[Label(name=""bug"")]","@garvankeeley there are some more problems with #1463 / #1474 
- zooming out on low-res map becomes blank
- both res types do not show the MLS coverage anymore when zooming out too far
- I think the description text is not quite accurate. I suggest something like: zooming out can increase data usage (instead of conveying that the feature generally reduces data usage)
"
mozilla/MozStumbler,closed,Fix the reset logic on the FalsePositiveFilter.,[]," The last GPS location should stay unchanged until the user moves beyond the threshold distance or scanning is stopped+started (as opposed to when paused+started).

The FalsePositiveFilter gets initialized with a GPS location when the user is motionless, and this location should not get updated until the filter threshold is exceeded, or scanning is manually stopped+started.
"
mozilla/MozStumbler,closed,"Service startup consolidation: the app uses binding, passive mode uses startService",[],"Also, the passive mode startService starts the StumblerService on its own thread. 
The Mozilla Stumbler app service binding, runs the StumblerService in the main thread.
"
mozilla/MozStumbler,closed,Improvements for accelerometer motion sensing (filter false pos. and min sleep time),[],
mozilla/MozStumbler,closed,Failure attempting to run make,[],"I've tried to run 'make' on the repo on two separate machines, a macbook running OSX Yosemite and an EC2 running Ubuntu 14.04 and I get the following on both:

SDK extracted at '/home/ubuntu/.android-sdk'. Writing to local.properties.
No /home/ubuntu/MozStumbler/android/properties/private-github.properties for Mozilla API Key configuration.
No /home/ubuntu/MozStumbler/android/properties/private-github.properties for TileServer configuration.
No /home/ubuntu/MozStumbler/android/properties/private-playstore.properties for Mozilla API Key configuration.
No /home/ubuntu/MozStumbler/android/properties/private-playstore.properties for TileServer configuration.
Writing custom MozAPIKey: [""c94d7d63-cb0c-4ad5-9f94-f39b1d277822""]
No /home/ubuntu/MozStumbler/android/properties/private-fdroid.properties for TileServer configuration.
Build tools 19.1.0 missing. Downloading...
Platform tools missing. Downloading...
Compilation API android-19 missing. Downloading...

FAILURE: Build failed with an exception.
- Where:
  Build file '/home/ubuntu/MozStumbler/android/build.gradle' line: 197
- What went wrong:
  A problem occurred evaluating project ':android'.
  
  > Failed to apply plugin [id 'android-unit-test']
  > failed to find target android-19 : /home/ubuntu/.android-sdk
- Try:
  Run with --stacktrace option to get the stack trace. Run with --info or --debug option to get more log output.

BUILD FAILED

Total time: 58.492 secs
make: **\* [libtest] Error 1
"
mozilla/MozStumbler,closed,"Limited zoom setting: when disabled, zoom buttons on map don't update immediately","[Label(name=""bug"")]","The zoom buttons on the map view don't change to reflect that more zooming out is available until the user zooms in (or pinch zooms in or out).

Related to #1474
"
mozilla/MozStumbler,open,Wrap the ApplicationContext with a class.,"[Label(name=""Good first bug""), Label(name=""enhancement"")]","We need to have a consistent way to hold a context as a member variable.

The only reasonable thing to do is hold onto the ApplicationContext as it's tied to the lifecycle of the process. 

https://github.com/crankycoder/MozStumbler/commit/2f91b3fd750f596e051ab45d3cc09ceaebcee9ce#commitcomment-9696914
"
mozilla/MozStumbler,closed,move unlimited zoom to settings screen from developer screen,[],"I think this is a feature that regular users would like to have.
"
mozilla/MozStumbler,closed,More code for #1428 - Stumbler Service as a library,[],"This adds tests around the 3 intents inititated by Android at boot, GPS enabled change and GPS locate change as well as the start and stop intent.

Static methods have been added to PassiveServiceReceiver to make creation of the start/stop intents more explicit.
"
mozilla/MozStumbler,closed,Motion detection cleanup + remote unreliable linear. accel,[],"Some minor cleanup items and remove the TYPE_LINEAR_ACCELEROMETER and use TYPE_ACCELEROMETER only. The linear. accel doesn't work reliably.
"
mozilla/MozStumbler,closed,Add a button on the power options screen to test the significant motion sensor,[],"This PR is based on PR in issue #1470, so ignore the first commit
"
mozilla/MozStumbler,closed,Power Saving Options: have radio for using Accel. or Sig. Motion Sensor,[],"This PR has the UI changes and the required Prefs changes for these options.
"
mozilla/MozStumbler,closed,WIP (don't land): Motion detector s5,[],"@crankycoder  this is a WIP, not for landing just yet.
Basically to show what I am working on, if you want to try it out, and start giving feedback.

This PR would all get cleaned up for easier code review when it actually lands.
"
mozilla/MozStumbler,closed,1461- NPE in FirstRunFragment,[],"This adds a new shadow to exercise the FirstRunFragment to add an extra null check .

Some minor cleanups were made to make tests runs quieter in the TileDownloaderDelegateTest
"
mozilla/MozStumbler,open,SecurityException crash when there is no ACCESS_COARSE_LOCATION permission,"[Label(name=""bug"")]","We should try to gracefully inform the user that location permission is required to run properly.

```
java.lang.SecurityException: Neither user 10083 nor current process has android.permission.ACCESS_COARSE_LOCATION.
at android.os.Parcel.readException(Parcel.java:1327)
at android.os.Parcel.readException(Parcel.java:1281)
at com.android.internal.telephony.ITelephony$Stub$Proxy.getCellLocation(ITelephony.java:1400)
at android.telephony.TelephonyManager.getCellLocation(TelephonyManager.java:254)
at org.mozilla.mozstumbler.service.stumblerthread.scanners.cellscanner.SimpleCellScannerImplementation.getCurrentCellInfo(SimpleCellScannerImplementation.java:163)
at org.mozilla.mozstumbler.service.stumblerthread.scanners.cellscanner.SimpleCellScannerImplementation.getCellInfo(SimpleCellScannerImplementation.java:138)
at org.mozilla.mozstumbler.service.stumblerthread.scanners.cellscanner.CellScanner$2.run(CellScanner.java:100)
at java.util.Timer$TimerImpl.run(Timer.java:284)
at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:2430)
at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:2172)
at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:2430)
at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:2172)
at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:2430)
at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:2172)
at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:2430)
at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:2172)
at android.view.ViewRootImpl$InputStage.deliver(ViewRootImpl.java:3449)
at android.view.ViewRootImpl$InputStage.onDeliverToNext(ViewRootImpl.java:3502)
at android.view.ViewRootImpl$InputStage.forward(ViewRootImpl.java:3468)
at android.view.ViewRootImpl$InputStage.apply(ViewRootImpl.java:3476)
at android.view.ViewRootImpl$InputStage.deliver(ViewRootImpl.java:3449)
```
"
mozilla/MozStumbler,closed,Autostart option,[],"I am letting MozStumbler run pretty much all the time. Autostart/dont-close option would be nice.
"
mozilla/MozStumbler,closed,Use on-device OsmAnd maps instead of downloading them ?,[],"Hi there,

For people who use both OsmAnd and MozStumbler, would it be possible that MozStumbler uses OsmAnd maps for display, instead of downloading them again (hence duplicating) ? I'm not thinking of displaying cells IN OsmAnd, just using OsmAnd map data in MozStumbler.

Advantages I see :
- No additionnal use of data, be it wifi or phone network
- High-detail maps all the time
- Some device space saved thanks to deduplication

However, I don't know if an app can use data from another app. And, of course, for people who don't use OsmAnd (or not the same regions), that point is moot.
"
mozilla/MozStumbler,closed,Add more Updater tests,[],"Add tests to check if the Updater is handling offline and wifi-only cases correctly.

@crankycoder I had to copy `MyShadowConnectivityManager`, can/should that be improved? (Or did I miss the correct solution?)

Also removed some leftovers of the SSID blocklist removal.
"
mozilla/MozStumbler,closed,developer setting for unlimited map zooming,[],
mozilla/MozStumbler,closed,Testcase for bugzilla ticket 1130052 and extra guard in AsyncUploader,[],"This patch updates the UploadAlarmReceiver::onHandleIntent to match the patch in bugzilla ticket 1130052.

Test cases to pass in null intents through the onHandleIntent have been added as well as some extra test to exercise the service startup code.

One extra guard has been added into the AsyncUploader code, but this change does not affect the Fennec stumbler as it's a wrapper around a notification mechanism that only exists in the standalone Android stumbler.
"
mozilla/MozStumbler,closed,NPE Crash in 1.6.1 - FirstRunFragment,"[Label(name=""bug"")]","```
at org.mozilla.mozstumbler.client.subactivities.FirstRunFragment$1.onClick(FirstRunFragment.java:49)
```
"
mozilla/MozStumbler,closed,Describe motion sensors,[],"What exactly is a ""legacy motion sensor"" and a non-legacy?
"
mozilla/MozStumbler,closed,`make test` now runs tests on the libraries/stumbler package,[],"Short term fix to get all test code to run until we pull out the services package as it's own repo.

This addresses #1457
"
mozilla/MozStumbler,closed,Cleaning up ScanManager stop/started/paused state,[],"I find this code confusing (because the paused state was grafted on
without changing the ScanManager isScanning logic.
Now ScanManager has an enum for state (stop/started/started but paused).
I find this code more readable.

I would suggest starting by looking at the changes in ScanManager.java. Everything else was a product of this change:
https://github.com/mozilla/MozStumbler/commit/33574021b483324e17b7755e692c070a849d1e7e#diff-a0bf0529c9d81614f9223e2715512cb9R57
"
mozilla/MozStumbler,open,Update ./test.sh to run tests in libraries,[],"There's no easy way to target individual tests in the libraries/stumbler code.

test.sh doesn't work and the ctrl-shift-t shortcut in Android Studio also don't work.

The only way to run tests in the libraries right now is to manually run:

`./gradlew test` from within libraries/stumbler.

This is dumb and will scare off contributors.

**Update:** This is actually worse than I thought.  `make test` doesn't recursively run tests on library code.  Blargh.
"
mozilla/MozStumbler,closed,Features/GitHub throttling,[],"This supercedes #1432.  The first commit recreates @cascheberg 's code on the new tree layout.

The 3 subsequent patches apply the comments in the review and add tests around the new logic added to `NetworkInfo` and the `Updater` class.

The testcases for NetworkInfo instrument a custom shadow of ConnectionManager to simulate different connection states.
"
mozilla/MozStumbler,closed,Features/test motion sensor take2,[],"Recreated the SignificantMotionSensor test for the new library-ified codebase.
"
mozilla/MozStumbler,open,Feature request: Cell and AP details,[],"This app is a lot of fun, but I think it would be quite interesting to see cell and access point details. Things like signal strength, which towers you were connected to when, what AP's are around and information like SSID and security. Granted some of these sound like war-driving features but it'd actually be interesting to see which towers are the most used, where you'd get better reception, where the most public AP's are etc.
"
mozilla/MozStumbler,closed,Features/1428 service in library,[],"This just pushes all the org.mozilla.service.\* code into the library.

The motion detection code has undergone a minor cleanup.  I've refactored the legacy motion sensor and the significant motion sensor code to operate behind a common IMotionSensor interface. 

The listener for the ACTION_USER_MOVED has also been pulled out of the MotionSensor and up into the ScanManager as it's never actually used in the MotionSensor except to register an IntentFilter.

I'd like to get this change in as we're about to start having experiments done on the LegacyMotionSensor code and I'm going to start ripping apart the services code so that it's easier to use.
"
mozilla/MozStumbler,closed,Cannot build anymore (win),[],"I get a german error if I try to build MozStumbler at the moment.

the following line in the build.gradle file seems to be the issue:
def gitHash = ""git rev-parse --short HEAD"".execute().text.trim()

It complains about not being able to find the file (I guess it's about git)

I ""registered"" git in Android Studio though.

Before it was the portable version that came with the Github for Windows client.
Now it's the standalone git command line tool.
But that didn't change anything at all.

Do I need to add git to my environment variables now or what is the reason?
Is this related to changes that have been made to the build file lately? I guess it is only windows related.

The exakt error line:
`Error:(40, 0) CreateProcess error=2, Das System kann die angegebene Datei nicht finden`

Pls help me.
"
mozilla/MozStumbler,closed,Update zh-tw l10n; typo fix,[],
mozilla/MozStumbler,closed,Initial pass at a basic test of the significant motion sensor code.,[],"This adds a basic test around the MotionSensor code - specifically triggering a significant motion and verifying that the proper intent was broadcast.
"
mozilla/MozStumbler,closed,Motion Sensing V2 Planning,[],"Next week we need to get the motion sensor working better, lets describe on a high level how we will do this. My proposal:
- Always have fallback legacy sensor running, so that if the sig. motion sensor is failing (like on the Samsung S5) we aren't stuck in paused state
- Come up with a stricter threshold for the linear accelerometer, so that it behaves a bit more like the significant motion sensor. Model it after the Nexus 5 sig. motion sensor, which reliably triggers after walking ~5 meters.
- Not on first run, but on the Power Saving Options screen have a button to 'test your sensor'. This then asks the person to stand still (the app will try confirm that), then ask the person to move (the app will try confirm that). If it succeeds, we say YAY, please turn on the motion sensing option. If it fails, we say, sorry don't use this option, please start and stop the app manually to save battery.

@crankycoder feedback?
"
mozilla/MozStumbler,open,Startup of stumbler should have a one time onboarding,"[Label(name=""Power Consumption""), Label(name=""UI/UX""), Label(name=""enhancement"")]","We need to have an 'onboarding' experience when the stumbler first starts up.

Some devices (notably the Samsung Galaxy S5) have significant motion sensors that are completely non-functional.

We need this onboarding experience so that the user runs through a couple tests so that we can verify that the significant motion and legacy accelerometers work. 

1) For significant motion sensors, we need to verify that significant motion events are actually triggered if the screen is off.  

2) For legacy accelerometer sensors, we need to verify that events are triggered if the screen is off.
"
mozilla/MozStumbler,closed,Scanning for cells stops working with the screen off,"[Label(name=""Good first bug"")]","It could be a Rom dependent bug. But for some reason my phone seems to report 0 cells back after some time with the screen off. At least mozstumbler shows an only wifi report on the map then.
This is very unlikely because I only sat in a train, which drove through a bigger city and my carrier/provider is the German Telekom though (biggest provider around here) 
I guess cell scanning isn't triggered correctly.

Are others experiencing this as well?
The issue doesn't happen when the screen is on.

Motion detection is off and uploading is only allowed over wifi. (maybe uploading over mobile network would have woken up the baseband again, I'm going to test that)
"
mozilla/MozStumbler,closed,Leaderboard is not updating,[],"I am having issue with mozstumbler, on leaderboard my point is not updating. It is also happening with other two mozillian..is it known issue? 
"
mozilla/MozStumbler,closed,hotfix for #1441,[],"New PR to capture NullPointerExceptions and be extra paranoid with more NULL checks.
"
mozilla/MozStumbler,closed,Czech l10n of most used strings (e.g. bug form ommited),[],
mozilla/MozStumbler,closed,1441 - NPE in Significant Motion Sensor Code,[],"This is a hot fix that may cause the signfiicant motion sensor to never register properly.

@garvankeeley - I'm writing a test case in a separate PR to make sure we can catch problems like this.
"
mozilla/MozStumbler,open,"Library: when not in Mozilla Stumbler, ensure only one stumbler lib is running at a time",[],"Could do this with a system-wide intent broadcast at start, and if another stumbler lib responds to the intent, then have the stumbler lib not run.
"
mozilla/MozStumbler,closed,NPE 1.6.0,"[Label(name=""bug"")]","org.mozilla.mozstumbler.service.stumblerthread.motiondetection.MotionSensor$1.onTrigger(MotionSensor.java:87)
"
mozilla/MozStumbler,open,Check for known privacy enhancements that cause problems,"[Label(name=""Power Consumption""), Label(name=""bug""), Label(name=""enhancement"")]","XPrivacy for XPosed can block sensors like the accelerometers and significant activity sensor which will screw up the sleep functionality and possibly all stumbling.

Cyanogenmod also has enhanced privacy controls on a per application, per permission basis.

We should see if we can do early detection of these and give prescriptive warnings to users.

http://stackoverflow.com/questions/4212992/how-can-i-check-if-an-app-running-in-android

has some examples of checking for other running processes which we might use for xposed detection.
"
mozilla/MozStumbler,closed,NPE Crash in 1.6.1,"[Label(name=""bug"")]","org.mozilla.mozstumbler.client.subactivities.FirstRunFragment$1.onClick(FirstRunFragment.java:49)
"
mozilla/MozStumbler,closed,Fix and update strings,[],"- Update German strings
- Remove unused strings
- I noticed that Greek and Czech values were using the country code instead of the language code, which is not working
"
mozilla/MozStumbler,closed,Minor bugfixes,[],"I hope these fixes are simple enough to put them into just one PR.

In `MainDrawerActivity`: set `hasBootedOnce` on first run, so that scanning does not restart unexpectedly

In `LogActivity`: fixes #1429 

In `ScanManager`: remove unused code, all those variables are always reassigned a few lines below
"
mozilla/MozStumbler,closed,paused mode should set gps/wifi/cell values to zero,"[Label(name=""Good first bug""), Label(name=""UI/UX""), Label(name=""bug"")]","this is an issue that was brought up in #1322

since the device isn't scanning anything in paused mode those values probably should be set to zero to avoid confusion
"
mozilla/MozStumbler,open,get movement updates through GPS (when other apps use the GPS) or Google Service,"[Label(name=""Motion Sensor"")]","we should pull information from the gps chip (event listener) so that we know whether it is active at the moment or not even when mozstumbler tries to save power.

->in case another app uses the GPS it won't make a difference if mozstumbler takes available location data anyways (this is related to #356)
it won't activate the gps sensor because it is active already
we would just gather more data and switch faster to moving mode again

this is helpful in combination with navigation apps
->if you have such an app enabled anyways it doesn't make sense for mozstumbler to go into paused mode

it would only make sense to stop scanning for wifis and cells until the device is moving again
->certain gps speed

we could use the passive provider for these location updates

another way how we could get the information that the device is moving again could be the google location service -> if it is turned on OSM gets your current position through it anyways and marks the estimated position on the map
why don't we set a certain value (like 250-500m) and if the new position is further away from the old one than that then we can go out of paused mode again (this would be the case if the motion sensor isn't working)?
->there should be a note about that in the log then, so that we can see that the motion sensor isn't working when we are trying to debug further issues
"
mozilla/MozStumbler,closed,Reorganize the codebase into a reusable library.,[],"This is a first pass at extracting a reusable library from the Stumbler.

This only includes patches to push the service locator code into a library, moves some test cases into the library and pushes the logging services down into the library.

No android services have been pushed into the library yet, this patch is getting too large as it is.

The most significant change is that the ServiceLocator will now return a proxy instead of the real underlying service implementation.  This is to allow binding services in as static members of a class such as loggers.

In the event that a method is invoked on a proxy before the ServiceLocator has been configured, the proxy will execute a no-op and return either NULL, 0 or '\u0000' for methods that require return values.
"
mozilla/MozStumbler,closed,Provide Czech translation for MozStumbler,"[Label(name=""Translations"")]","Hi.

In Mozilla.cz we are interested in translating Mozilla Stumbler to Czech. What's the proper process for adding new language to Mozilla Stumbler and which files should be translated, please?
"
mozilla/MozStumbler,closed,Rate limit update checks (github builds),[],"This fixes #324 by only checking for updates once every 6 hours, and on app start, but still makes sure that updates are checked if there was no useable network connection previously. This only affects github builds.
"
mozilla/MozStumbler,closed,CSV export,[],"Add option to export scans to a .csv file for personal use.
"
mozilla/MozStumbler,closed,Document export logs to SD card option,[],"As of 1.6.1 I cannot figure out how to export logs, only view them. 
"
mozilla/MozStumbler,closed,log lines are duplicated after putting the device to sleep and waking up it,[],"If I have Log open, suspend the device and resume it, all the lines get reprinted. For example, there are 5 lines in here that got reprinted two times (because I suspended and resumed the device twice while looking at the log):

![log-duplicated](https://cloud.githubusercontent.com/assets/755451/5866271/ffa6a64a-a28f-11e4-9667-b66f25221fc5.png)

You can easily see the duplication by the timestamps. If there are just a few lines, it's still readable, but once there's a lot of lines, it's really hard to navigate in the log with this bug occurring.

After I close the Log and open it again, it is clean again and there's no duplication:
![log-clean](https://cloud.githubusercontent.com/assets/755451/5866284/1335c484-a290-11e4-8737-754b57c3ddba.png)

stumbler 1.6.1
"
mozilla/MozStumbler,open,Extract an embeddable library,[],"Since this is actually one of the 2015Q1 goals, we should probably have a proper bug filed.

Reorganize the stumbler so that we have a proper embeddable android library that can be used by other android applications.
"
mozilla/MozStumbler,closed,"improve description of ""enable MLS location queries""","[Label(name=""UI/UX"")]","In settings, I can enable ""Enable MLS location queries"". But the dialog that pops up doesn't really explain what an MLS location is. I can then display it on the map (I see no red dot if I enable it), and I'm still clueless about what it is.

Can you please improve the description and describe what it is exactly?
Thanks!

stumbler 1.6.1
"
mozilla/MozStumbler,closed,Metrics View buttons turn blue (upload and settings buttons),[],"On lollipop, buttons' background Drawable is shared, so changing one will affect others. Clone it before changing the 'Change' button background to blue.
"
mozilla/MozStumbler,closed,Need a new buildbox,[],"We need to provision a new buildbox that has more RAM.  We can't have a persistent build daemon on the current machine, and we've had to clobber the Android dx script because we're running low on memory. 
"
mozilla/MozStumbler,closed,hotfix to patch NPE on motionsensor code,[],"Hotfix to patch a crash with the new motionsensor code in 1.6.0.  

Tests to follow, but this adds a null check before registering an intent listener for ACTION_USER_MOTION_DETECTED. 

I've also extracted the acquisition of the significant motion sensor into a static method that takes a single context argument so that you don't need to instantiate the MotionSensor just to ask if there is a system service that provides the proper sensor.
"
mozilla/MozStumbler,closed,Translate new string to spanish,[],
mozilla/MozStumbler,closed,Improve localizability,[],"- reuse `enable_crash_reporting` string in `file_bug_report_info`
- fix RTL `map_tile_resolution_options_label` in preferences screen
"
mozilla/MozStumbler,closed,Update translations,[],"Updated translations for #1419 

@garvankeeley It's not nice to make major string changes minutes before a major release ;)
"
mozilla/MozStumbler,closed,bump version to 1.6.0,[],
mozilla/MozStumbler,closed,Added power saving settings screen.,[],"Added power saving section to drawer view.
Default power saving depends on presence of sig. motion sensor
"
mozilla/MozStumbler,closed,1417 - drop wifi blocklist,[],"Fixes #1417 and removes all references to the wifi blocklist.  We still keep the opt-out '_nomap' postfix check.
"
mozilla/MozStumbler,closed,Drop wifi blocklists,[],"Now that Firefox Android embeds the stumbler in a passive stumbling mode, the wifi blocklist does more harm than good for the server side.

We are pulling out the wifi blocklist from the stumbler so that filtering can occur on the server side.
"
mozilla/MozStumbler,closed,Update German translation,[],"Do you want to have a hint added that bug reports are preferred / should be filed in English?
"
mozilla/MozStumbler,closed,Accelerometer not working with screen off,[],"Here is a list of devices with this problem
http://www.saltwebsites.com/2012/android-accelerometers-screen-off 

We will need to work around this for battery saving mode.
"
mozilla/MozStumbler,closed,496 - adds changelog on startup,[],"I've added a changelog on startup.

The changelog is not localized as we currently do not have a process to do localization prior to a new release.
"
mozilla/MozStumbler,closed,Features/backout homescreen widget,[],"This completely backs out the homescreen widget due to performance regressions as noted in #1409. 
"
mozilla/MozStumbler,closed,[Feature] advanced settings,"[Label(name=""Closed: won't fix"")]","Specific settings for rooted devices and advanced user:
- Enable GPS automatically when Scanning is started and disable it when it is stopped (as two different options)
- Change API Url and key to allow people using their own servers (based on Ichnaea)
- allow several servers for uploading data

Possible stuff (probably not possible atm.):
- get further data from the baseband
- use certain features of the xposed framework to get more data
- edit wpa_supplicants.conf to improve WiFi-scanning (maybe hardware based instead of software based scanning)
"
mozilla/MozStumbler,closed,Change keep_screen_on pref default to false,[],"Oops, see #1070 
"
mozilla/MozStumbler,closed,Updated Polish translation,[],
mozilla/MozStumbler,closed,[Regression] MozStumbler's UI gets unresponsive after scanning a while (low end devices),[],"Since 1.5.4 (I think), my Nexus One takes several minutes to respond the UI after scanning for a while. Say for example:
- Start Mozstumbler and press Start Scanning.
- Walk for around 15 minutes
- See MozStumbler again, and try to interact with it ('stop' button, load the menu, get actual location), and it takes several minutes (possibly 5 or more) to show something.

In the meantime, Android display a dialog  to either ""Force stop"" or ""Wait"" the application.  I have to press ""Wait"" over and over, in spite that MosStumbler seems freeze.  But it is just slow, once it stops scanning, the UI becomes responsive again.

At the beginning I thought it could be too many points to display.  But later it happened with a clear screen, and only some dots (enough to see in a screen without panning).  I tried rebooting, nothing changed.  I tried only low resolution tiles, nothing changed.  Previously I had enabled saving data to a file"", but when I disabled it, nothing changed.

No other applications are running in parallel. I use the phone only to Stumble with a different carrier.

It became responsive again once I downgraded it to 1.5.3.
"
mozilla/MozStumbler,open,Add option to download map only on WiFi,"[Label(name=""enhancement"")]","Use case:
- high-res map tiles are nicer to use than low-res map tiles, so cache them at home
- during stumbling mobile internet should stay enabled for email/messenger

Problem:
- accidentally scrolling / zooming into uncached map areas will quickly increase mobile data usage

Solution:
- add a separate preference to download map only on WiFi
"
mozilla/MozStumbler,closed,Reduce data: cellular map (mLowResMapOverlays) uses same cache as wi-fi (mHighResMapSource),[],"Low-res and high-res map tiles are using the same URL, but not the same name for caching.
If the name is the same, then map tiles already downloaded in high-res mode can be used in low-res mode as well (and vice versa).
This is already the case if `!isMLSTileStore`. In that case, both are using the name ""MapquestOSM"".
"
mozilla/MozStumbler,closed,Do not switch map resolution when there is no internet connection,[],"This fixes #1402 

The first ""cleanup"" commit moves everything related to `mTextViewIsLowResMap` to a separate function (which could be used in tests also) and removes some unnecessary if/else blocks.

The second commit is the actual patch.
"
mozilla/MozStumbler,open,Tiles caching doesn't seem to be working when switching from wifi to 3G,[],"In 1.5.5 release notes, I saw:

> Tiles will now persist and show up when there is no internet connection

So I started stumbler at my home while being on wifi, and scrolled through my entire city in different zoom levels, so that I have high quality tiles cached of the whole city.

But when I stepped out and my wifi got replaced by a 3G connection, as soon as I looked at stumbler, the high-quality tiles got thrown away and it started to download and display low-quality tiles of my surroundings. (My configuration is to use low quality tiles when not on wifi).

So, the caching doesn't seem to work properly. Maybe when not on wifi, it insists on using low-quality tiles instead of reusing the already cached high-quality ones? Or there's some other problem with caching?

stumbler 1.5.5
"
mozilla/MozStumbler,open,Visually distinguish paused mode in the notification area,"[Label(name=""Good first bug""), Label(name=""UI/UX""), Label(name=""enhancement"")]","If scanning gets paused because of insufficient movement, the description of the notification changes from `Mozilla Stumbler is scanning` to `Mozilla Stumbler is paused`. That is great. It would be very helpful if you actually distinguished that also using the icon in the notification area, so that people don't need to unlock their phones and pull down the notification menu to check whether stumbler is scanning or paused.

What about using a different color for paused mode, or maybe removing those ""signal"" arcs above the pin head (to indicate signal=scanning is off).
"
mozilla/MozStumbler,closed,Show MLS coverage overlay when offline,[],"This fixes #1401 

Initially no internet access available:
- `CoverageOverlay` will have URL = `null`, but yet it is able to display cached tiles

Internet access becomes available:
- `sCoverageUrl` will be updated
- coverage tiles are removed
- coverage tiles are then added back with the right URL

Intended changes:
- removed check for `mCoverageTilesOverlayLowZoom != null` is still done in `initOnMainThread()`
- just move `scanner` code so that `initOnMainThread()` is always called
- always remove coverage layers when `sCoverageUrl` is set, they are then added back in `initOnMainThread()`
"
mozilla/MozStumbler,closed,Full Offline Map Support (2) - found a bug,[],"This bug concerns everyone that doesn't have a flatrate/only uses Wi-Fi/starts the app in other countries (->roaming)

No Mapdata is visible even though it got cached before.
What actually happens:
MozStumbler/OSMDroid tries to show the low zoom level map which hasn't been cached unlike the high resolution zoom levels that you just watched/preloaded using your home wifi
->you don't see anything on mobile networks without an internet connection

Reason: the option for the map resolution that depends on the current network configuration
How to fix it: treat mobile networks like wifis if there is no network connection available (also happens on roaming)
Another solution: rework OSM Code to show low level zoom in the background of the high resolution map so that you see both maps on top of each other but are able to use all cached tiles

Workaround:
Switch to high resolution map only
"
mozilla/MozStumbler,closed,Full offline map support,[],"Use case:
1. use the app, some map tiles will be cached, close the app
2. disable all internet connections
3. open the app again

Result:
- The OSM tiles are visible, but the MLS overlay is not
- If you enable internet access briefly, then all previously cached overlay tiles become visible
"
mozilla/MozStumbler,closed,Conditional get rework,[],"This is an addendum to #1398. 

This removes the isTileCurrent check and just moves it together with the actual tile download.

The significant change over @cascheberg's original patch is that the TileIOFacade will now return a SerializableTile after saving the tile.  This can then be immediately used to load an instance of Drawable.

An HTTP 304 will also check that the tile can be properly loaded from disk in the case that the tile was somehow corrupted on disk.  If this is the case, the tile's etag is completely invalidated and the returned tile is set to NULL.
"
mozilla/MozStumbler,closed,"Motion detection options: off, on, or extra power savings",[],"Issue #1394

Motion detection can be:
- off
- on
- on, with extra savings (a.k.a. aggressive mode), this requires that after detecting motion, there is a 20 sec window in which the GPS must show a change in location beyond the threshold (default is 50m).

The previous default (before this code lands) was ""On, with extra savings"". The new default state is to have motion detection ""On"", but not to call LocationChangeSensor.quickCheckForFalsePositiveAfterMotionSensorMovement() which I suspect is causing the problem we are seeing.

This is the end of the fix. If this commit fixes the problem, then we should try to get the above function working better in all cases. 
"
mozilla/MozStumbler,closed,Improve etag usage when downloading map tiles,[],"This removes the extra request that is done to only check the map tile etag status. Instead, the etag is checked when an actual tile download happens. This way, the response can be used in case of a non-matching etag as well. See https://github.com/mozilla/MozStumbler/issues/1323#issuecomment-69102515
"
mozilla/MozStumbler,closed,Features/1.5.5 hotfixes,[],"This adds an AppWidgetManagerProxy service to the list of injected services. This is required for testing as the AppWidgetManager is normally a global singeton and there is no easy way of mocking that service.

A RuntimeException check has been added around the AppWidgetManager::updateAppWidget call to prevent application death.  A bug tracking a proper fix for this has been filed in #1396
"
mozilla/MozStumbler,open,Widget update needs to be pulled into a Service,"[Label(name=""bug"")]","There's a bug with the Homescreen widget in the dev branch.

Updates to the widget must happen from within a service.

See: https://groups.google.com/forum/#!topic/android-developers/sKPaSjwbfvk

The currently implemented code in v1.5.5 won't crash the whole application as the RuntimeException is caught, but the widget will not update propery in those cases. 
"
mozilla/MozStumbler,closed,ON/OFF button is not reliable,[],"It happens to me very often that when I switch scanning from ON to OFF, the button:
a) either jumps back to ON again immediately (I need to switch it off a second time)
b) or it stays at OFF position, but the stumbler icon in notification area still shows that scanning is enabled (I need to press the home button, open stumbler again via the notification menu, and switch it off again).

This does not happen always - it seems it happens only if I have some new reports to upload, and even then it's still random. If I want to reproduce it willfully, I don't have too much luck. But in real world usage, I see this in like 20-50% of cases I want to turn it off.

Maybe this bug happens when Stumbler is in the process of automatically uploading results?

Mozilla Stumbler 1.5.4
Android 4.4
Motorola Moto G
"
mozilla/MozStumbler,closed,"Scanning pauses when I stand still, but doesn't resume when I start moving","[Label(name=""Power Consumption""), Label(name=""bug"")]","Some time ago there was a Stumbler update which was supposed to pause scanning when you stopped moving, in order to save battery. That seems to work, however, since that time, I experience a large unscanned gaps in my travel routes. If I stand still for a while (e.g. waiting for a tram, or filling gas in a car), Stumbler turns off scanning. But when I start moving, it does _not_ resume scanning. It resumes only when I manually wake the phone. Which can be hours later.

Yesterday, I experienced a 30 minutes scanning gap, just because I waited a few minutes for a tram.

I'm not sure whether this lack of reliable resuming is on purpose or not, but it makes the app much less usable for me. I turn Stumbler on just ocassionally when I go into ""uncharted territories"". **I don't care about battery, I care about mapping that area.** If I realize after a few hours of moving in that area that most of my effort was in vain, because I stood still for a few minutes somewhere and Stumbler turned off hours ago, that makes me... unhappy.

The worst of all, that motion detection can't be turned off. I have found an option in Developer section where I can increase sensitivity and timeout, but still, standing a few minutes on a tram stop will turn it off even with maximum settings.

Please, either make motion detection resume properly, or allow us to turn it off completely.

Thank you.

Mozilla Stumbler 1.5.4
Android 4.4
Motorola Moto G
"
mozilla/MozStumbler,closed,Blocklist additions for in-flight WiFi,[],"For sources see commit messages.
"
mozilla/MozStumbler,closed,Pushes HttpUtil into the ServiceLocator,[],"This fixes a long standing oddity that IHttpUtil was passed in as a reference sometimes, and instantiated raw other times.

Now we just grab it from the ServiceLocator.

The UpdaterTest has been simplified to overload the mock networking
using the ServiceLocator.

Minor changes to ServiceConfig are included so that only strings are
needed to instantiate classes, so that the ServiceConfig class does
not need build time dependencies on any other class.
"
mozilla/MozStumbler,closed,Test Infrastructure: Groovy plugin for running tests through IDE,[],"This adds docs for the new testing infrastructure.
New Android Studio plugin to enable running tests from within the IDE.
"
mozilla/MozStumbler,closed,Telemetry: Added time between locations received (sync code from fennec),[],
mozilla/MozStumbler,closed,widget problem,[],"@lomash The widget from #1353 is nice, but I think I see a bug:
1. stop scanning
2. kill the app
3. click the stumbler icon in the widget
4. Result: the app will show up, but the main screen is black and nothing is happening

Is it intended at all that the app is launched from the widget?

Because this is working, I guess:
1. start scanning
2. kill the app (scanning process is still active)
3. click the stumbler icon in the widget (multiple times)
4. Result: it will always toggle the scanning status, but the app does not show up (or is instantly minimized)

Another use case:
1. launch and hide the app
2. clicking the stumbler icon will always toggle the scanning status and bring the app to the foreground

And in that case, it would be nice to be able to bring the app to the foreground without stopping the scan.
"
mozilla/MozStumbler,closed,Increase cache time of map tiles,[],"This PR increases the cache time of map tiles to 7 days, while leaving the cache time of the coverage overlay unchanged at 12 hours.
From what I read from the code, the cache is only cleared when it is exceeding `OSMConstants.TILE_MAX_CACHE_SIZE_BYTES` (which is at a pretty high value of 600MB).
So this should only influence how long cached map tiles are assumed to be current and thus reduce data usage.
"
mozilla/MozStumbler,closed,Minor tweaks for the homescreen widget,[],"This fixes 2 layout issues with the homscreen widget:
- The counter numbers were not vertically centered.  This has been changed with gravity=""center_vertical"" now.
- The order of the counters in the widget did not match up to the ones in the MapView.  Cell tower and Wifi positions are transposed in this patch.
"
mozilla/MozStumbler,closed,add explicit high-power mode,"[Label(name=""enhancement"")]","There are a lot of [efforts to limit power consumption](https://github.com/mozilla/MozStumbler/labels/Power%20Consumption) to ""reasonable"" values.
However, there are situations where I just don't care and I'd rather find more networks than saving power: Driving fast with a 5s scan interval means that you miss most WiFi networks.

My wish for an option:
-  [x] smart tradeoff: power vs. thoroughness
-  [ ] high-power mode if charging
-  [ ] high-power mode

We are currently locked in the first option. It would probably make sense to default to the second option or at least offer it.

High-power mode could dispense with motion detection and increase the scanning frequency. I find both mostly annoying, because motion detection only works to detect the _end_ of motion; I then have to start scanning manually. The low scanning frequency does only make sense if you are walking. Even cycling is too fast: 5s · 20 km/h = 28m
"
mozilla/MozStumbler,closed,Individual contributor app for iPhone?,[],"They have android app for individual contributors here:
https://location.services.mozilla.com/apps

What about for iPhone and if we want to contribute?
"
mozilla/MozStumbler,closed,Hardcoded strings replaced with references to strings.xml,[],"Small fix to #1369. There were two instances where I hard coded string messages for the user. Those are now being pulled from the strings.xml file. 
"
mozilla/MozStumbler,closed,Minor fixes,[],"Minor fixes
"
mozilla/MozStumbler,closed,MLS locations not improving for mobile only locations,"[Label(name=""Closed: won't fix"")]","I'm not sure if this is a problem but I would expect all MLS locations to get more accurate with time.

I regularly walk the same route and where there is wifi the MLS locations are indeed now fairly accurate. However for those points that are blue (mobile only) the points are still a long way out and many seem to map to the same point well away from the actual location. There are usually more than 1 tower in view.
"
mozilla/MozStumbler,closed,Minor update to test infrastructure,[],"I've upgraded us to use a new gradle test plugin so that we can run individual tests.  It's marginally useful right now as you can only drive those smaller test runs from the command line, but this should at least make it possible to have Android Studio integration to run tests from the IDE.

test.sh is included as the basic test runner to run tests based on test class name.
"
mozilla/MozStumbler,closed,Adds mockito support for testing,[],"I've added mockito support to the testing infrastructure.

This should allow patches like #1370 to be tested going forward.

The only feature I've added to the application itself is the git-version to the About Activity.  Dirty trees will also append -dirty to the git hash.
"
mozilla/MozStumbler,closed,Update zh-TW strings: Clearify some messages,[],
mozilla/MozStumbler,closed,Added telemetry for Fennec.,[],"Required using reflection to grab the telemetry class in Fennec due to the partitioning of the build system; stumbler has no access to gecko.
"
mozilla/MozStumbler,closed,Finnish translation updates,[],
mozilla/MozStumbler,closed,Do not log opt-out SSIDs,[],"Fixes #149 
"
mozilla/MozStumbler,closed,Cleanup item: Moving the persisted stats out of DataStorageManager.,[],"to minimize the amount of responsibilities in that class.
"
mozilla/MozStumbler,closed,Update zh-TW strings to dev branch,[],
mozilla/MozStumbler,closed,"ref #1066, update zh-TW messages",[],"Hope I didn't miss anything :P
"
mozilla/MozStumbler,closed,Fix cdma mcc handling / fallback to SIM mcc,"[Label(name=""Core Scanning""), Label(name=""bug"")]","@kociepa from OpenCellID pointed me towards a problem with CDMA networks and MCC values.

We have two different code paths for getting data about the active cell connection and neighboring cells. I think we rely on [TelephonyManager.getNetworkOperator](http://developer.android.com/reference/android/telephony/TelephonyManager.html#getNetworkOperator%28%29) to get the MCC/MNC combination for the active CDMA cell connection, which has a note about being unreliable for CDMA. We have some fallback logic in [SimpleCellScannerImplementation.getNetworkOperator](https://github.com/mozilla/MozStumbler/blob/dev/android/src/main/java/org/mozilla/mozstumbler/service/stumblerthread/scanners/cellscanner/SimpleCellScannerImplementation.java#L153) to use [TelephonyManager.getSimOperator](http://developer.android.com/reference/android/telephony/TelephonyManager.html#getSimOperator%28%29) if we don't get at least a 4 character string there.

The code path seems to be SimpleCellScannerImplementation.getCurrentCellInfo or getNeighboringCells call out and get CellLocation objects, for CDMA [android.telephony.cdma.CdmaCellLocation](http://developer.android.com/reference/android/telephony/cdma/CdmaCellLocation.html). They use those to create [CellInfo](https://github.com/mozilla/MozStumbler/blob/dev/android/src/main/java/org/mozilla/mozstumbler/service/stumblerthread/scanners/cellscanner/CellInfo.java#L169) objects and pass in the result of [SimpleCellScannerImplementation.getNetworkOperator](https://github.com/mozilla/MozStumbler/blob/dev/android/src/main/java/org/mozilla/mozstumbler/service/stumblerthread/scanners/cellscanner/SimpleCellScannerImplementation.java#L153) as the second string argument. The CellInfo code uses [CellInfo.setNetworkOperator](https://github.com/mozilla/MozStumbler/blob/dev/android/src/main/java/org/mozilla/mozstumbler/service/stumblerthread/scanners/cellscanner/CellInfo.java#L263) to parse the string into a MCC+MNC combination from the usual 6 character up to 8 character representation (usually this is three chars of MCC + 3 chars of MNC, but for CDMA it could be up to five chars for the MNC).

In newer Android versions (API 18+) we have a second code path for neighboring cells, via the [TelephonyManager.getAllCellInfo](http://developer.android.com/reference/android/telephony/TelephonyManager.html#getAllCellInfo%28%29) API. The interesting bit is in [SimpleCellScannerImplementation.addCellToList](https://github.com/mozilla/MozStumbler/blob/dev/android/src/main/java/org/mozilla/mozstumbler/service/stumblerthread/scanners/cellscanner/SimpleCellScannerImplementation.java#L232) which iterates over all cells and for CellInfoCdma instances gets out the [CellIdentityCdma](http://developer.android.com/reference/android/telephony/CellIdentityCdma.html) calling [CellInfo.setCdmaCellInfo](https://github.com/mozilla/MozStumbler/blob/dev/android/src/main/java/org/mozilla/mozstumbler/service/stumblerthread/scanners/cellscanner/CellInfo.java#L255) without any reference to the mcc or network operator.

To summarize:
- Via the older API we might get no MCC or the MCC for the SIM operator, possibly being incorrect when roaming. If the value is incomplete exceptions will be thrown and the record omitted.
- Via the newer API we never get any MCC for CDMA networks, falling back on -1 as the CellInfo default value, incomplete records will get submitted to the server.
- Classic CMDA devices don't have SIM cards at all, so the SIM card fallback code isn't helpful. Newer ""global CDMA phones"" and some CDMA/LTE hybrids do contain a SIM card, but it's unclear if the SIM card would report a correct value for the CDMA connection.

Things to do:
- Get the two code paths to behave in the same way, I'd say if no mcc can be found for CDMA, let it be set to -1 all the way through.
- In the [CellInfo.toJSONObject](https://github.com/mozilla/MozStumbler/blob/dev/android/src/main/java/org/mozilla/mozstumbler/service/stumblerthread/scanners/cellscanner/CellInfo.java#L85) code, omit the MCC field if the value is -1 (UNKNOWN_CID), same way we do for lac/cid.
- Remove the automatic getSimOperator fallback code from getNetworkOperator. We only want the actual MCC of the current cell connection in this field. Otherwise we'd get confused with roaming devices or those that get a different MCC while being in their home country (for example the US or India have multiple different MCC values, so your SIM MCC might not be the same as the current cell connection MCC even if you are not roaming).
- Add a new way to always report the SIM card mcc/mnc combination to the server. The Google geolocate API has extra fields to report an optional homeMobileCountryCode and homeMobileNetworkCode. We should implement the same on our service side API's, so we can use this data to guess missing values for per-cell MCC/MNC values. On the service end we can be a bit smarter and try to guess the MCC based on the system id for CDMA (those are globally unique numbers) or compare the SIM card MCC with the lat/lon and use it if it is inside the country borders, or look at other existing database entries to see if the combination already exists and is valid. The client code could already be changed to report those, as the service should just ignore extra fields right now.
"
mozilla/MozStumbler,closed,MapLocationListener is too slow,"[Label(name=""bug"")]","If you are traveling fast, the location updates of the `MapLocationListener` are slower than those of the `GPSScanner`. As a result, new reports are drawn on the map without the blue user position dot being updated. So it is lagging behind which looks odd.
I think an easy fix would be to make the `MapLocationListener` listen to `GPSScanner.ACTION_GPS_UPDATED` intents.

![stumbler](https://cloud.githubusercontent.com/assets/3845150/5578099/8d21f11e-9020-11e4-92ed-f0abbe02ff1d.png)
"
mozilla/MozStumbler,closed,Set map tile source even when there is no internet connection,[],"Steps to reproduce the bug:
1. open app, load low resolution map (or set to always show high resolution map)
2. disable network connections
3. change phone orientation or restart app

Result:
- map is not shown anymore

Expected:
- cached map should still be visible
"
mozilla/MozStumbler,closed,"Added ""File a Bug"" button",[],"Attempting to address #1182 by adding a ""File a Bug"" button under the settings/preferences activity.

This spawns a new activity that prompts the user to fill in a title for the bug, the type of bug it is (from a preset list), description of the bug, and how to reproduce the bug. An optional name and email field are there just in case.

These reports appear as ACRA reports, though the stack trace will always read ""Report requested by developer"" and contain the user provided information in the CUSTOM field under the stack trace. Aside from that, all the other information in an ACRA report is available as normal. I hope that is a good enough distinction between manual bug reports and crashes.

Some screen shots of the bug report form: 

![device-2014-12-23-211915](https://cloud.githubusercontent.com/assets/5815344/5545241/ca7c5e88-8af2-11e4-92ce-8f00480e41be.png)

![device-2014-12-23-211928](https://cloud.githubusercontent.com/assets/5815344/5545246/d44d0278-8af2-11e4-80e4-5c54d05f917d.png)
"
mozilla/MozStumbler,closed,updated fdroid's Mozilla Location Service API key to fix #1349,[],
mozilla/MozStumbler,closed,"Revert change for 1362, which was no API check before grabbing Sig. Motion Sensor",[],"This change was experimental, and did not yield fruit.
Issue #1362
Revert ""(Build.VERSION.SDK_INT >= 18) -> this doesn't seem to be working in Indian ROMs""

This reverts commit a345d4170031de14673e195a75f4d0d9594f46bd.
"
mozilla/MozStumbler,open,UI is unclear when a GPS fix hasn't been acquired yet,"[Label(name=""UI/UX""), Label(name=""enhancement"")]","There are cases where GPS satellites are visible and counts are showing up, but a fix has not occured yet.   It's unclear to users why stumbles are not occuring when this is happening.  We should have some kind of visual indicator that a fix has not been acquired yet.

See: https://github.com/mozilla/MozStumbler/issues/1343#issuecomment-67489780
"
mozilla/MozStumbler,closed,Simulation Mode should be refactored into an injected dependency,"[Label(name=""enhancement"")]","The current implementation of #1191 uses a ContextWrapper around the application context as a control point for all simulation events.  This is problematic as we need to manage how the contexts are passed around throughout the application.  It's very likely that we'll break the simulation mode as we make further modifications to the stumbler codebase.

We should instead have a service provided by an interface ISimulation which provides all the generators for GPS, Cell and Wifi data.  Toggling the simulation mode can then just create or destroy the simulation service and all dependant classes can just check for NULL when they request the simulation service.
"
mozilla/MozStumbler,closed,Updated Polish translation,[],
mozilla/MozStumbler,closed,India testing: ignore Build.VERSION.SDK_INT for Sig. Motion Sensor,[],"My current guess is that Build.VERSION.SDK_INT doesn't seem to be working in Indian ROMs.
This code is for a test build, and likely will be reverted after 1.5.5 build

related to https://github.com/mozilla/MozStumbler/issues/1362
"
mozilla/MozStumbler,closed,Public help needed: Nexus 4 + 4.4 in India is missing Significant Motion sensor?,[],"We have confirmed that Nexus 4 + 4.4 users in N.America have this sensor (which is actually a software sensor that depends a a number of hardware sensors).

In India, the report we have is that this device is reporting legacy motion sensor only. Obviously this is very weird. Can anyone with a Nexus 4 please check the first line in the Log screen in the app and let us know if it says 'Significant Motion sensor detected' or 'Legacy motion sensor'.
"
mozilla/MozStumbler,open,Localize the app_name strings for debug builds,"[Label(name=""Good first bug""), Label(name=""Translations"")]","We have the app_name string set to ""Debug Stumbler"" for debug builds.  Unfortunately, this only works if the system language is set to english: https://github.com/mozilla/MozStumbler/pull/1340#issuecomment-67246750

More gradle fun.

cc/ @cascheberg 
"
mozilla/MozStumbler,closed,Update strings,[],
mozilla/MozStumbler,open,"Motion sensor not working for cpeterso, app pauses and doesn't wake up","[Label(name=""bug"")]","@cpeterso I am determined to get this working for you.

Your device: (I forget)
Your OS: Cyanogenmod 4.3.3 I think
Confirmed that the log says 'Device has significant motion sensor'? (I think we confirmed this)

Last bug report: 
- having problems with the github stumbler. even when driving in a car, it will often think I'm not moving, but toggling the stumblers on/off button will make it wake up.

Can you do a screenshot of the log when this happens?

What I think is happening
- when it pauses: for the app to pause when driving a car, that means you either sat unmoving for 2 mins, or the GPS signal was lost for 2 mins. Those are the only 2 conditions that would put the app in a paused state.
- when it refuses to wake up: 
- A) you may not be getting GPS fixes, in which case the app will not wake (although you said toggling the start/stop gets the app working, so this can't be it), 
- B) the motion sensing is busted. This is set up for lots of false positives, and _should_ be triggering the app to wake up on movement.
"
mozilla/MozStumbler,closed,Fix: notifications are never removed,[],"Sometimes notifications are never removed.

I think the problematic call stack is this:
- stopForeground and remove notifications
- stopScanning
- flush bundle
- update metrics and notification (scanner appears to be active still)
- scan manager only then sets scanning state to stopped
"
mozilla/MozStumbler,closed,Use public notifications feature on Android 5,[],"Follow up to #1341
@garvankeeley is this working for you?
"
mozilla/MozStumbler,closed,Added MLS Location (Red dot) to Metrics Legend,[],"Fixes #1313 
"
mozilla/MozStumbler,closed, Homescreen widget support cont. #1316,[],"In reference to #1316, this is for the addition of home screen widgets to the application.
"
mozilla/MozStumbler,closed,ACRA crash: Legacy Motion Sensor registerListener NPE,"[Label(name=""bug"")]","Crash report from 1.5.2

java.lang.NullPointerException
at android.hardware.SensorManager.registerListener(SensorManager.java:1149)
at android.hardware.SensorManager.registerListener(SensorManager.java:1040)
at org.mozilla.mozstumbler.service.stumblerthread.motiondetection.LegacyMotionSensor.start(LegacyMotionSensor.java:116)
at org.mozilla.mozstumbler.service.stumblerthread.motiondetection.MotionSensor.start(MotionSensor.java:71)
at org.mozilla.mozstumbler.service.stumblerthread.scanners.ScanManager$3.onReceive(ScanManager.java:214)
at android.support.v4.content.LocalBroadcastManager.executePendingBroadcasts(LocalBroadcastManager.java:297)
at android.support.v4.content.LocalBroadcastManager.sendBroadcastSync(LocalBroadcastManager.java:278)
at org.mozilla.mozstumbler.service.stumblerthread.motiondetection.DetectUnchangingLocation$1.run(DetectUnchangingLocation.java:45)
"
mozilla/MozStumbler,closed,1191 Simulation Mode,[],"This adds a simulation mode to satisfy #1191.

This needs a testcase to verify that the application context being passed from the ScanManager down to GPSScanner, WifiScanner and CellScanner gets properly wrapped with the SimulationContext, but this branch should merge cleanly to dev.

Let's just merge it in and add more tests along the way.
"
mozilla/MozStumbler,closed,Added more tests for location change detection,[],
mozilla/MozStumbler,closed,F-droid API key not registering uploads,"[Label(name=""bug"")]","For reasons unknown, we are seeing zero uploads with the f-droid API key.
"
mozilla/MozStumbler,closed,removed unused string (according to lint),[],
mozilla/MozStumbler,closed,build num 1.5.4,[],
mozilla/MozStumbler,closed,Changed prefs to getInstance(Context) and the less-safe getInstanceWithoutContext(),[],"Where possible getInstance(Context) should be used. The internal utility classes can use Prefs.getInstanceWithoutContext(), but must check the instance is not null. As part of the app instantiation, the Prefs instance is created, so there is no known reason that Prefs.getInstanceWithoutContext() would return null. 
"
mozilla/MozStumbler,closed,Copies stumble logs into the sdcard instead of deleting them,[],"This is an incomplete patch for #1255, but I just wanted some code that merges cleanly.

This _mostly_ works, except that there is a set of logs that are stored only in memory.  Whenever the save logs to disk flag is enabled, we must flush those memory buffers to disk, then do the regular upload thing.
"
mozilla/MozStumbler,closed,Follow up patch to #1338 PR,[],"Removes special testing variable in LocationChangeSensor, and adds an
additional test for when the location has not changed enough.

See #1338
"
mozilla/MozStumbler,closed,Installed the app but doesn't sync,[],"I've installed the app, it can scan and recolects data but it is not reflected at left menu, so there's nothing to upload, when i go to the log it show this:

![error](https://cloud.githubusercontent.com/assets/177008/5386008/a07b3568-8099-11e4-86c8-19fb71a57c1d.jpg)

I'm using a Nexus 4 with Android 5.0 and Cyanogen 11, tried both wifi and mobile data, currently there are no data at my city.
"
mozilla/MozStumbler,open,Ability to export stored data,"[Label(name=""Stumbling Project""), Label(name=""enhancement"")]","https://github.com/mozilla/MozStumbler/issues/1280

Regarding the above project, I am asked by the city municipal corporation for the daily commute data of their garbage collection trucks. In this scenario it would be difficult for us to export data if the app is killed inadvertently by any reason.

As I know Mozilla Stumbler doesn't store data if the application quits. @garvankeeley told me that all collected data is stored in a private folder until its uploaded. It would be nice if we can export the data (before upload) and destroy it after upload.
"
mozilla/MozStumbler,closed,@cascheberg's PR 1287 for metrics on notification plus my changes for compactness,[],"Landing #1287 with some changes.

The german translation is not changed in this commit -sorry @cascheberg!,
I know you made some changes to this translation, but my changes will
require re-doing this.
"
mozilla/MozStumbler,closed,#1201 use different application ID for debug builds,[],"This is a minor update to #1339.

This patch will change the applicationId for debug builds as well as using ""Debug Stumbler"" as the app_name so that it's easy to identify release vs debug builds of the stumbler on your launcher.

I've removed the change to the versionName as I don't see any benefit to messing with versions when the applicationId is completely different anyway.
"
mozilla/MozStumbler,closed,Use different application ID for debug builds,[],"@crankycoder This fixes #1201 (or at least this is what I had in mind when I filed that issue).
It allows to install clean debug app versions (including version downgrades) while keeping the release version and all its data separately.
"
mozilla/MozStumbler,closed,Features/1294 rebased sensor tests,[],"This closes off #1294 to add basic tests around the sensor code.

This adds basic roboelectric test coverage to the CellScanner and WifiScanner classes.

The primary goal of this is to get some concrete examples of using roboelectric and custom shadow classes to exercise the stumbler code.

Some preliminary documentation has been added into docs/testing.md, but it's still best to look at the example code to see how to write tests. 

We still need to get robotium tests for things where roboelectric's mocking system isn't sufficient and we need a real Android VM to test on.
"
mozilla/MozStumbler,closed,Update Gradle to version 1.0.0,[],"@crankycoder This fixes #1327 
The `versionCode` and `versionName` are set automatically from the `build.gradle` file, so I removed the custom code.
Regarding the `PackageUtils` change: for testing I modified the version and `applicationId` and checked if the app version was still displayed correctly. Everything seems fine.
Do you see any problems with this?
"
mozilla/MozStumbler,closed,bump to 1.5.3,[],
mozilla/MozStumbler,closed,Motion Detect: had an extra wait period for first GPS fix. This logic is of no value.,[],"Removed this extra time window, and just use the existing time window,
called mPrefMotionChangeTimeWindowMs, in this code. The code is
cleaner with one time window (as it now has) instead of 2.

The reason the old code was not good, is that the extra time window to
wait for GPS fix is not any different than the existing motion change
time window, except that it was hard coded to 5 mins.

What would happen is that when scanning was started, and there is no GPS fix,
it would wait 5 mins before the motion detection logic would kick in.
This is confusing to anyone trying to understand the workings
of this code. It should be easy to grok based on the developer setting
(the setting for wait XXX seconds before pausing).

Not that we shouldn't have some logic to account for the fact the phone has not received a GPS fix: the case where the app pauses due to no location change (and stop the GPS), then the phone won't get a fix, and it could get stuck in a paused state. 
With the default 120s timeout, the only circumstance where the GPS won't get a fix when satellites are visible/fixable, is when it has no AGPS and no access to AGPS (for example, no functional SIM). This is case is exceedingly rare, and not handled. The user would be best to use Google Maps or similar to get a GPS lock, then switch to using the stumbler.
"
mozilla/MozStumbler,closed,squashed commits for #1255 to change delete() to a move operation,[],"I squashed the commits from #1269 and rebased them onto the current dev branch.
"
mozilla/MozStumbler,closed,Motion Detect: more logging,[],"- log activity shows isTimeWindowForMovementExceeded logic
- removed some log spam from the tile code
"
mozilla/MozStumbler,closed,"Motion detect: The delay to wait for the gps was wrong,",[],"t < initial-gps-delay, should be
t > initial-gps-delay then isTimeWindowForMovementExceeded() return true

(This delay is the time to wait for an initial gps fix after scanning has started, during this window, don't pause scanning)
"
mozilla/MozStumbler,closed,"Motion detect: Comparing GPS time and system time is a bad idea, and likely source of bugs",[],"Use one type of time only.
"
mozilla/MozStumbler,closed,Motion detection: Use one time system instead of GPS and System time,[],"The location changing code checks to see if the user has moved within a timeframe, this was mixing time sources, which is a bad idea, and a likely bug source. 
"
mozilla/MozStumbler,closed,Motion detection: Fix delay to wait for gps,[],"Also added some more logging to the log activity, so we can see where the logic is failing.
"
mozilla/MozStumbler,closed,Android SDK automatic installation support added,[],"Fix for #1162 - Android SDK is automatically installed if you haven't configured Android SDK already.
"
mozilla/MozStumbler,closed,Update Gradle version,[],"The recently released Android Studio 1.0 RC requires a new Gradle version.

> Error:The project is using an unsupported version of the Android Gradle plug-in (0.12.2). The recommended version is 1.0.0.

The `build.gradle` file needs some adjustments and should use:

> classpath 'com.android.tools.build:gradle:1.0.0'
> classpath 'org.robolectric:robolectric-gradle-plugin:0.14.+'

And in `gradle-wrapper.properties`:

> distributionUrl=https\://services.gradle.org/distributions/gradle-2.2.1-all.zip
"
mozilla/MozStumbler,open,[Engagement] Ask users to sign up with a nick after a certain contribution level,"[Label(name=""UI/UX""), Label(name=""enhancement"")]","... to encourage active stumblers to add a nick, which make it easier to track contribution numbers.
"
mozilla/MozStumbler,closed,Get FxA accounts integrated,"[Label(name=""UI/UX""), Label(name=""enhancement"")]","We need to get FxA integrated with the stumbler.  Support for nicknames can be added to the FxA Profile server.   We'll need to talk to rfkelly to co-ordinate nickname support.
"
mozilla/MozStumbler,open,AGPS data may be expired. We should try to accelerate fixes by forcing a refresh.,"[Label(name=""enhancement"")]","We can help the GPS get a faster time to fix by injecting AGPS assistance data. 

This is dependent on the GPS driver on a per device basis, but this may help in some cases.

The code from https://f-droid.org/repository/browse/?fdfilter=agps&fdid=com.vonglasow.michael.satstat has examples of:
- detecting if AGPS data is expired
- requesting new AGPS data to be injected
"
mozilla/MozStumbler,closed,Coverage map tiles are still not expiring correctly.,"[Label(name=""osmdroid"")]","Coverage tiles are still not expiring correctly.

I've reproduced this problem by stumbling over a new area with one device, then viewing the coverage maps on the same device, along with a separate device.

After 24 hours, the second device correctly shows the stumble path while the first device - the one used to stumble which had a copy of the old coverage tiles continued to display the old coverage tiles.  The effect is that one device shows blue dots, the other shows the area as 'unstumbled'. 

Strategy to fixing this problem is :
- Wrap the osmdroid tile downloader code with unit tests first around the conditional GET caching.
- Force tiles to expire on a hard deadline of 6 hours.
"
mozilla/MozStumbler,closed,"Critical: Galaxy S5 motion detection not working, scanning never starts","[Label(name=""bug"")]","Report on play store that this isn't working, after pausing scanning, the app fails to detect motion to start scanning again.

Not sure if it is a custom ROM or not. Would be good to have the log activity checked on startup to see if device has significant motion sensor or not. Also, what steps were taken to try wake the scanning?
(Chris hopefully you see this and can fill in the questions). 
"
mozilla/MozStumbler,closed,Minor improvement regarding enabling GPS in MapLocationListener,[],"To be improved: you can see the GPS icon blinking once when scanning is paused and the app comes to the foreground (`MapFragment.onResume`).

In `MapLocationListener` there is this code:

```
enableLocationListener(true, mNetworkLocationListener);
enableLocationListener(true, mGpsLocationListener);

if (mapFragment.getApplication().isIsScanningPausedDueToNoMotion()) {
    pauseGpsUpdates(true);
}
```

If scanning is paused, the result of what this does is this:

```
enableLocationListener(true, mNetworkLocationListener);
enableLocationListener(true, mGpsLocationListener);
// then in pauseGpsUpdates:
enableLocationListener(false, mGpsLocationListener);
enableLocationListener(true, mNetworkLocationListener);
```

The updated code in this PR only runs one of the two paths.
"
mozilla/MozStumbler,closed,ACRA crash: MainApp.getCacheDir(MainApp.java:100),[],"ArrayIndexOutOfBoundsException: length=0; index=0 : at org.mozilla.mozstumbler.client.MainApp.getCacheDir(MainApp.java:100)

We could catch this, and show a toast or something. But there isn't much more we plan to do, with no cachedir access, the app won't run.
"
mozilla/MozStumbler,closed,Fix MapLocationListener pausing GPS,[],"@garvankeeley This might fix #1317

How to reproduce the bug:
- start using the app
- at any point: do not move so that the scanning is paused
- **make sure that the app is not visible when you start moving and scanning is resumed**
  - e.g. enabled lockscreen (I suppose this happens a lot), use another app, press home button
- after scanning was resumed: stop scanning, press home button

Result:
- GPS is still active

I think what happens here is this:
- hiding app: `MapFragment.onPause` calls `mMapLocationListener.removeListener`
- moving after pause: `MapFragment.showPausedDueToNoMotionMessage(false)` re-enables GPS
- app becomes visible: `MapFragment.onResume` creates a new `MapLocationListener`, the reference to the old `MapLocationListener` with the active GPS is lost

This PR makes sure that `pauseGpsUpdates` does not have any effect after `removeListener` was called.
"
mozilla/MozStumbler,closed,Blocklist additions,[],
mozilla/MozStumbler,closed,1.5.2 drains the battery by leaving the GPS active after stop stumbling,[],"After upgrading MozStumbler into 1.5.2 in my Nexus One, and after the following steps:
1. Stumble a while.
2. Got home, submit report, press the stop button
3. Leave the application

I was using an external battery, so when I stop stumbling the phone was fully charged.  Next day morning, the battery was ~25% being just inactive.  The power consumption used to be ~11% overnight, not ~%75%.

Then I noticed the GPS was still active, by looking the icon in the notification bar.  After that, I rebooted my phone, I tried running MozStumbler again, stopped it and wait if the GPS became inactive, nothing happened.

In previous versions, every time I pressed the stop button, the GPS icon became inactive after a couple of seconds.

Now, the only way to get the GPS inactive after pressing the stop button is by force closing the application (via ""_Manage apps_"").

I also see this behavior on my Nexus 5, but because this has better battery, it did not become apparent earlier.

According to the Changelog, from 1.5.0 it should use less battery consumption if one does not move, then MozStumble stop stumbling.  But it turns out that it consume more battery if I don't kill the app explicitly after stop using it (after the screen, the GPS consumes more battery, then the wifi).

It seems to me that a fair compromise would be:
1. If the user does not press the stop button, then try to minimize the stumbling by checking any movement.
2. If the user explicitly press the stop button, then stop using the GPS.
"
mozilla/MozStumbler,closed,Homescreen widget support,[],"This addresses #983 and to some extent #476. 

This commit would allow the addition of a simple widget to the user's home screen that currently displays the number of WiFi access points and cell towers it sees. These text views can be easily modified to display the user's rank on the leader board or the number of reports pending. 

Clicking on the icon toggles the service on and off.

![When the service is on](https://cloud.githubusercontent.com/assets/5414885/5239842/19759596-78a5-11e4-830e-398fbd777bd2.png)

![When the service is off](https://cloud.githubusercontent.com/assets/5414885/5239843/1975f720-78a5-11e4-8ea9-1936ea42b697.png)

Has been tested on Android 5.0 and Android 2.3.6
"
mozilla/MozStumbler,closed,Updated Polish translation,[],
mozilla/MozStumbler,closed,Translate new string to spanish,[],
mozilla/MozStumbler,closed,MLS Dots legend: add red dot next to label on Metrics drawer ,"[Label(name=""Good first bug""), Label(name=""UI/UX"")]",
mozilla/MozStumbler,closed,MapLocationListener: wrap requestLocUpdates to catch and ignore exceptions,[],"Arguably, one can check if particular location providers are available (instead of catching the exception as I did here). 
This is only useful if the code then takes further useful actions based on this info. We have no interest in handling this case beyond not crashing and putting an error in the log. Why is the network provider unavailable anyway? What is the mojo on the device required to reproduce this? I tried airplane mode, restricting geolocation to GPS only.  Neither triggered this.
Issue #1311
"
mozilla/MozStumbler,closed,ACRA crash: MapLocationListener.java:124 Network provider not available,"[Label(name=""bug"")]","Acra report:
Java.lang.IllegalArgumentException: provider doesn't exist: network at org.mozilla.mozstumbler.client.mapview.MapLocationListener.enableLocationListener(MapLocationListener.java:124)
"
mozilla/MozStumbler,closed,force close 1.50,[],"I just updated to version 1.50 and it being force closed .
My device is XPERIA mini with CM11.0
"
mozilla/MozStumbler,closed,Set required flag on accelerometer to false,"[Label(name=""enhancement"")]","Android devices should have accelerometers, but don't have to.

http://static.googleusercontent.com/media/source.android.com/en//compatibility/android-cdd.pdf
"
mozilla/MozStumbler,closed,Update translations,[],"Make strings localizable
Update German translations
"
mozilla/MozStumbler,closed,Add dialog for testing motion detection.,[],"This is accessible through long press on the developer screen title.
"
mozilla/MozStumbler,closed,Update the ACRA login,[],"Updates the ACRA login to close #1249 so that we can shut down the errors from the old 0.40.4 release.
"
mozilla/MozStumbler,open,Treat low battery as a paused mode (similar to motion),"[Label(name=""enhancement"")]","Low battery should be another ""paused state"".
- like the no motion state, should update notifications, and have messages to the user to see this state.
- when battery is >min, start scanning again if paused due to low battery
"
mozilla/MozStumbler,closed,Translate new string to spanish,[],
mozilla/MozStumbler,closed,Fix 1271: NPE getting location service for map,[],"Added NPE check and a toast. The app is unusable for anyone in this case, and we don't do strict checking for running the app on devices with missing services that are critical to to the app. So at least they will see a toast before it crashes somewhere else in the code.
#1271
"
mozilla/MozStumbler,closed,"Update metrics on Reporter.ACTION_NEW_BUNDLE, not when cell/wifi counts change",[],"I noticed that UI updates always update all metrics. The UI is updated whenever a `ACTION_WIFIS_SCANNED` or `ACTION_CELLS_SCANNED` intent occurs, which is about once per second.
The current call stack looks like this:
- update the stats displayed in the map in `MainDrawerActivity.updateNumberDisplay()`
- always call `MetricsView.update()` _(this was improved)_
- call `MetricsView.updateQueuedStats()`
- call `DataStorageManager.getQueuedCounts()`

The last method for example calls `Zipper.zipData()` and has this comment:

> Some data is calculated on-demand, don't abuse this function

This PR changes the code to only update metrics stats if a bundle was flushed.
The UI updates could be differentiated a bit more even.
"
mozilla/MozStumbler,closed,only scan for GPS before first GPS fix,[],"this is probably interesting if there will be some automation in the future (NFC, Tasker, boot, etc.):
MozStumbler should only search for GPS to save battery (on application start)
it doesn't make sense to fire wifi/cell timers if the data doesn't get saved into reports
"
mozilla/MozStumbler,closed,battery saving technique is only effective once the device had a GPS signal and doesn't move,[],
mozilla/MozStumbler,closed,Error on opening empty username/email in settings activity (adb log),[],"11-25 00:19:41.796  22380-22380/org.mozilla.mozstumbler E/SpannableStringBuilder﹕ SPAN_EXCLUSIVE_EXCLUSIVE spans cannot have a zero length
"
mozilla/MozStumbler,closed,Features/1297 filter gravity,[],"This fixes #1297 by adding a filter to extract gravity from the regular accelerometer readings.

This patch also includes a test that checks for convergence using raw values that I extracted from my device on startup.

The patch includes a testcase using robolectric.  The most important detail in the test is that robolectric isn't magic.  You still can't construct a SensorEvent because of private constructors and final instance attributes (thanks Android!), so I ended up passing a flattened SensorEvent back from the event listener to the LegacyMotionSensor instance.
"
mozilla/MozStumbler,closed,TYPE_ACCELEROMETER readings include gravity,[],"We have to filter out gravity from the LegacyMotionSensor readings when we use Sensor.TYPE_ACCELEROMETER.

The TYPE_LINEAR_ACCELEROMETER already does this automatically. 

One thing to note is that filtering gravity out will require convergence on the calculation, so we'll need to skip the first couple dozen iterations of the value before we get something that is usable.
"
mozilla/MozStumbler,closed,Fix misspellings,[],
mozilla/MozStumbler,open,Port significant motion sensor code from open-sensor project,"[Label(name=""Power Consumption"")]","There's some code at the open sensor projects licensed under the Apache license that should allow us to implement proper signficant motion detection using the standard accelerometers for devices that do not support the significant motion detector.

https://github.com/sensorplatforms/open-sensor-platform/tree/master/embedded/common/alg
"
mozilla/MozStumbler,closed,Add tests around Motion Sensor code,"[Label(name=""Test Needed"")]","We need to add some tests around the motion sensor code.

Initially, I'd like to see code that exercises the significant motion sensor, and verifies the state of all the scanners.

We should have a test that checks the notification drawer to check that it has been updated during pause or motion states.

Start/Stop of scanning behaviour should be verified for the pause and movement states.

We should really have a some documentation or diagram that describes the expected state changes for the system.
"
mozilla/MozStumbler,closed,ACRA: NPE BatteryCheck.batteryLevel,[],"java.lang.SecurityException: Unable to find app for caller android.app.ApplicationThreadProxy@436130e8 (pid=12014) when registering receiver null
at android.os.Parcel.readException(Parcel.java:1465)
at android.os.Parcel.readException(Parcel.java:1419)
at android.app.ActivityManagerProxy.registerReceiver(ActivityManagerNative.java:2330)
at android.app.ContextImpl.registerReceiverInternal(ContextImpl.java:1450)
at android.app.ContextImpl.registerReceiver(ContextImpl.java:1418)
at android.app.ContextImpl.registerReceiver(ContextImpl.java:1412)
at android.content.ContextWrapper.registerReceiver(ContextWrapper.java:467)
at org.mozilla.mozstumbler.service.utils.BatteryCheck.batteryLevel(BatteryCheck.java:16)
at org.mozilla.mozstumbler.service.utils.BatteryCheck.isBatteryLessThan(BatteryCheck.java:32)
at org.mozilla.mozstumbler.client.ClientStumblerService$1.run(ClientStumblerService.java:96)
"
mozilla/MozStumbler,closed,On first start use last known location,[],"The last know location is set by `MapLocationListener` when calling `MapFragment.onResume()`.
"
mozilla/MozStumbler,open,Notify user when low battery threshold was reached,"[Label(name=""Good first bug"")]","The user should be notified when scanning is stopped because of the battery level reaching the configured min battery level (#1261).

Example notification:

**Mozilla Stumbler**
Scanning was stopped, because battery level reached 30%.
**[ >** Continue stumbling anyway **]**

And I suggest to use vibration to actually draw attention to the new notification.
"
mozilla/MozStumbler,closed,"No motion paused: MapLocationListener switched to network location, just turn this off completely","[Label(name=""Power Consumption"")]","By design, MapLocationListener switches to network location when in no motion paused state.
This looks like it is still using up more battery than I would like, we should just shut off all location listeners while in this paused state. If there is no significant motion, why bother listen to the network location at all.
"
mozilla/MozStumbler,closed,Manually stopping while paused restarts on move / Deactivate location listener on map properly,[],"@garvankeeley There are some major bugs regarding #1270:
- restarting scan when paused does not update notification
- metrics not updated on pause
- manually stopping scan while paused restarts scan on movement
- minimizing app and stopping scan from notification never deactivates location listener
- opening developer settings starts scanning
"
mozilla/MozStumbler,open,Material design based notification icon in devices running Android 5.0 or higher,"[Label(name=""Good first bug""), Label(name=""UI/UX"")]","Notifications have undergone a major change in Android 5.0 . With this, the icon displayed in the notification area for several of Google's own apps have followed the ""material design"" approach to switch over to more elegant icons.
I suggest that the icon currently being used in the notification area ic_status_scanning be replaced with an icon more apt for the Android 5.0 UX.
"
mozilla/MozStumbler,closed,Add metrics to notification,"[Label(name=""UI/UX"")]","This adresses #476. `Notification.BigTextStyle` was only added in API level 16. I think the notification text can only be one line though, which is a bit too short.

@garvankeeley 

> Keep in mind this code recreates the notification every time the message changes, which has the effect in the UI of the row deleting (with animation) and creating a new row, so the update should be rate limited.

There is no animation during an update on Android 5. I did not investiage yet how other devices (>= API 16) do this though.

Pulled down notification on Android 5 lock screen:
![notification](https://cloud.githubusercontent.com/assets/3845150/5151651/b1323116-71e1-11e4-9531-26a3ef50d0a9.png)
"
mozilla/MozStumbler,closed,Fix for MotoG (XT1032) accelerometer usage,[],"The Moto G is a 2013 device and runs KitKat, but will only respond to API 3 of the accelerometer sensor API.
"
mozilla/MozStumbler,closed,Features/fdroid buildhost,[],"This reverts the buildhost addition to the versioning scheme.  It completely breaks the fdroid build and I can't figure out how to resolve it without breaking the version names for all other productFlavors.  I hate gradle.

@garvankeeley  I'm planning on cutting a 1.4.1 release for fdroid that will be 1.4.0 plus this patch.
"
mozilla/MozStumbler,open,Research GPS scan frequency impact on battery,[],"After #1270, the next step is to look at a variable GPS scan frequency. But this should be evidence based, and we don't have the data as to how the freq affects battery life. On new devices, Google reports a fully-active GPS as 7% an hour.
"
mozilla/MozStumbler,open,log scan bug,"[Label(name=""UI/UX"")]","@cascheberg thx for the ability to freeze scanning but I found a bug
it only scrolls down to the first line of the latest log entry but not the end of the log which is always a few lines deeper (especially at the beginning when the entries aren't truncated)
"
mozilla/MozStumbler,open,Android Wear interface,"[Label(name=""UI/UX""), Label(name=""enhancement"")]","What do you think about building something for Android Wear that shows the statistics of the app while it is running?

Maybe even a small map preview in the background
nothing too complicated

this is just an idea for later on, after more tickets have been closed
"
mozilla/MozStumbler,closed,fix version naming (broken as of 1.4.0),"[Label(name=""bug"")]","is it correct that an ip is attached to version 1.4.0?
![2014-11-21 18 28 52](https://cloud.githubusercontent.com/assets/5685512/5149223/ec19d588-71c6-11e4-9a7a-2d6e77477de1.png)
"
mozilla/MozStumbler,open,@vinitraje: Islampur stumbling pilot planning,[],"@vinitraje has reached out regarding @cpeterso idea regarding stumbling with garbage trucks.
Vinit is planning to approach the city about this, and Mozilla will support this effort.
This is the city:
Islampur Maharashra (pop 100K).
https://location.services.mozilla.com/map#12/17.0318/74.2847
- Mozilla to ensure device budgets are in place (Android device and in-vehicle charging cables). Aside: Vinit to check that the trucks have outlets (I would think they do) for plugging in a charger. 
- SIM cards for the devices. Likely they need to be pre-paid and activated for scanning to take place.

Student Group Stumbling
- Vinit discussed that his engineering college would make for an enthusiastic stumbling group. I'll add that item to this bug to track what Mozilla can do to support him for this initiative.
- @ppapadeas  is our MozRep who comes to mind for planning assistance
"
mozilla/MozStumbler,closed,Features/1268 json crash,"[Label(name=""Fennec"")]","This should fix #1268 and fix our OOM errors.

I believe this was caused by some bad error checking on out of storage.  This patch will ensure that we don't grow without bound, but it doesn't do anything to clean up storage if we run out of diskspace.

This puts a hard limit on the number of StumblerBundle instances that can be inside of a single ReportBatchBuilder instance.

Tests added checking the underlying StumblerBundle and string lengths are in ReporterTest, while checks against the total number of StumblerBundle instances are contained in DataStorageManagerTest.
"
mozilla/MozStumbler,closed,Updated Italian translation,[],
mozilla/MozStumbler,closed,Getting the hostname on OSX seems to have broken recently,[],"@garvankeeley  hit this bug, then I hit it after simulating the problem using : 

```
sudo scutil --set HostName gkeeley1311
```

on my OSX 10.10.1 laptop:

```
make debug now fails for me:

    Where:
    Build file '/Users/gkeeley/c/github/mz-passive-stumbler/MozStumbler/android/build.gradle' line: 5

    What went wrong:
    A problem occurred evaluating project ':android'.

        gkeeley13311: gkeeley13311: nodename nor servname provided, or not known
```

This appears to be a bug in OSX where you can specify hostnames where OSX cannot properly resolve localhost properly.  

This is **not** a bug in Java as per http://bugs.java.com/bugdatabase/view_bug.do?bug_id=7180557

This bug resolved on my machine once I had HostName, ComputerName and LocalHostName all lined up properly using scutil and the computer name that shows up in the Sharing preference pane.  

I also stopped and restarted all the services that are already running in the Sharing Preference pane. 

One give away that the hostnames were screwed up is that the Sharing Pref pane displayed my computer name as ""Victors-MBPr"", but continued to use gkeeley1311 as the vnc hostname.  pinging ""Victors-MBPr"" from command line also failed to resolve a host.

Filing this bug as I'd like to revert the hotfix in #1276 once we reproduce this fix on one other person's machine.
"
mozilla/MozStumbler,closed,hotfix for fixing hostnames that don't seem to resolve on DNS and break the build,[],
mozilla/MozStumbler,closed,Filter duplicate log entries,[],"I am getting tons of duplicates filling the log activity. If the current entry matches the previous, discard it.
"
mozilla/MozStumbler,closed,"Large Text is on: show only GPS fixes label, hide visible","[Label(name=""UI/UX"")]","@garvankeeley There is a layout problem regarding the display of available GPS satellites if `Accessibility > Large text` is enabled.
This PR fully fixes the problem for #used satellites <= 9. When more satellites are in use, the number of available satellites is now cut off. I could not find another fix without breaking what was discussed in #1051.
Do you think this is an improvement? Any other ideas?
"
mozilla/MozStumbler,closed,Added OSM copyright string #1264,[],"Moved strings from code to the English and German strings.xml files.
Added a comment to the layout file of the map about where to find the
code that sets the strings.

Was quite a hassle to find that string...
Should have used the windows search from the beginning instead of looking through each .xml file ^^
(ended up being hidden in the mapfragment)

Pls the check the code, since I never wrote apps myself for Android it is likely that I made a mistake.
(I'm not sure whether I can set the @string stuff in the mapfragment and whether it is good style and I'm not sure whether I can use a ""-"" in the string's name (for F-Droid))
"
mozilla/MozStumbler,closed,initial stab at getting automated tests around the LogActivityView,[],"This is an extension to #1265 to add a basic unittest on scrolling the ConsoleView using robolectric.
"
mozilla/MozStumbler,closed,"Crash: provider gps doesn't exist, (GPSListener.java:28)","[Label(name=""bug"")]","java.lang.RuntimeException: Unable to resume activity {org.mozilla.mozstumbler/org.mozilla.mozstumbler.client.navdrawer.MainDrawerActivity}: java.lang.IllegalArgumentException: requested provider gps doesn't exisit : at org.mozilla.mozstumbler.client.mapview.GPSListener.<init>(GPSListener.java:28)
"
mozilla/MozStumbler,closed,Battery-saving mode (by pausing GPS and scanners) on unchanging location.,[],"Uses motion detection to wake the scanning up after being paused. Note, on Android 4.3 and higher, the significant motion detector is used, which does a great job of detection user movement. On lower Androids, the acceleration sensor is used (with a low threshold), which will wake on small movements of the device.

Uses 2-part detection:
1) DetectUnchangingLocation is used to determine if the user has not
moved in 2 minutes, then the ScanManager pauses (this is a low power
state)
2) When the MotionSensor detects movement (which uses very low power
sensors to do so), start scanning again.

Also worth noting, the notification text changes when paused, and the
map view shows a paused message also.

@crankycoder this branched was based of my previous battery change PR, so I'll clean that one up, land it first, and merge this one. However changes I make there won't affect this in any major way, so if you feel like starting on a review, go nuts.
"
mozilla/MozStumbler,closed,delete() calls to a report file will move it into sdcard storage,[],"This is a patch to get #1255 in so that delete() calls to a report file will actually move it into sdcard storage.

Most of the code here is actually robolectric related test code.  Important bits to note are:
- There is a test that exercises the checkbox in the DeveloperActivityFragment and setting the pref
- There is a test that makes sure that the SDCARD is mounted
  - the sdcard may be in an unmounted state, but robolectric will let you write to it anyway.  There doesn't seem to be a good way to test or mock this out.
- There is a test to verify the toast string
- There is a test to make sure files are moved from the report directory to the sdcard archive path.
"
mozilla/MozStumbler,closed,Report JSON is triggering OOM Crash,"[Label(name=""Fennec""), Label(name=""bug"")]","We have seen this a few times now. And tried to double check our Wi-Fi and Cell limits. Of all the allocations in the app that _could_ trigger OOM, this is the only one we are seeing, which is _highly_ indicative of a bug in building the report JSON.
The JSON object bounded at 200 wifis and 50 cells, and we expect these strings to be of a certain maximal length. As @crankycoder suggested, we are not verifying that the length of these strings is actually bounded as we expect, and seems like the likely culprit. 
And additional OOM handler on finalize reports would be good (and just dispose the result).

java.lang.OutOfMemoryError
at java.lang.AbstractStringBuilder.enlargeBuffer(AbstractStringBuilder.java:94)
at java.lang.AbstractStringBuilder.append0(AbstractStringBuilder.java:145)
at java.lang.StringBuilder.append(StringBuilder.java:216)
at org.mozilla.mozstumbler.service.stumblerthread.datahandling.DataStorageManager.finalizeReports(DataStorageManager.java:416)
at org.mozilla.mozstumbler.service.stumblerthread.datahandling.DataStorageManager.getQueuedCounts(DataStorageManager.java:105)
at org.mozilla.mozstumbler.client.navdrawer.MetricsView.updateQueuedStats(MetricsView.java:247)
at org.mozilla.mozstumbler.client.navdrawer.MetricsView.update(MetricsView.java:162)
at org.mozilla.mozstumbler.client.navdrawer.MainDrawerActivity.updateNumberDisplay(MainDrawerActivity.java:272)
at org.mozilla.mozstumbler.client.navdrawer.MainDrawerActivity.access$500(MainDrawerActivity.java:39)
at org.mozilla.mozstumbler.client.navdrawer.MainDrawerActivity$4.run(MainDrawerActivity.java:254)
at android.app.Activity.runOnUiThread(Activity.java:4713)
at org.mozilla.mozstumbler.client.navdrawer.MainDrawerActivity.updateUiOnMainThread(MainDrawerActivity.java:246)
at org.mozilla.mozstumbler.client.MainApp$ServiceBroadcastReceiver.onReceive(MainApp.java:317)
at android.support.v4.content.LocalBroadcastManager.executePendingBroadcasts(LocalBroadcastManager.java:297)
at android.support.v4.content.LocalBroadcastManager.sendBroadcastSync(LocalBroadcastManager.java:278)
at org.mozilla.mozstumbler.service.stumblerthread.scanners.cellscanner.CellScanner$1.handleMessage(CellScanner.java:73)
at android.os.Handler.dispatchMessage(Handler.java:102)
at android.os.Looper.loop(Looper.java:136)
at android.app.ActivityThread.main(ActivityThread.java:5146)
at java.lang.reflect.Method.invokeNative(Native Method)
at java.lang.reflect.Method.invoke(Method.java:515)
at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:732)
at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:566)
at dalvik.system.NativeStart.main(Native Method)
"
mozilla/MozStumbler,closed,Updated Polish translation,[],
mozilla/MozStumbler,closed,Update zh-TW l10n,[],
mozilla/MozStumbler,closed,Only auto-scroll log if at bottom,[],"Only auto-scroll log if it is already scrolled to the bottom. This fixes #1263
"
mozilla/MozStumbler,closed,"The osm contributors string needs a translation, too",[],"This is about the osm string in the bottom-right corner of the map
"
mozilla/MozStumbler,closed,Freeze log,[],"I would like to have a button in the log screen that allows me to freeze the log
->New entries like a GPS fix normally ""refresh"" the log, so that the view gets reset to the bottom of the screen, which is bugging me for some time already
"
mozilla/MozStumbler,closed,"If no movement, stop GPS scanning","[Label(name=""Power Consumption"")]","Although we can't use non-GPS locations for data collection, we _can_ use them for basic movement detection. We should used fused+network location types to determine if the user is not moving (ex. position change <30m for 5 mins). If not moving stop the GPS. Essentially this means switching between coarse and fine location. 

Caveats: 
- if the coarse location accuracy is too low, we can't use this method (it only works in urban areas).
"
mozilla/MozStumbler,closed,Low battery mode: make client-side configurable,[],"Moved the low battery check in active scanning to the client side, and added a developer setting to set the min battery level.
"
mozilla/MozStumbler,closed,Sync strings,[],"I updated the spanish strings including #1259 
I synchronized a string in English according to the new context (low detail / high detail)
"
mozilla/MozStumbler,closed,Update translations,[],"This fixes #1257 and updates German translations
"
mozilla/MozStumbler,closed,"The passive service lives longer than the stumbler service, so upload should not be cancelled.",[],"I committed a few days ago, and this approach is wrong.
"
mozilla/MozStumbler,closed,Minor settings UI items: Crash Reports title and change to MLS detailed info,"[Label(name=""UI/UX"")]","- Title for crash reports section:
  *\* just ""Crash reports"", or something in the direction of ""Feedback"" / ""Support"". Firefox has ""Data Choices"".
- detailed info for MLS location:
  ""At the cost of a bit more energy, memory and network usage, the MLS location is shown for each report. This is shown on the map as a red dot for the MLS location, with a line to its report. However, it will not query locations over mobile data connections if \""%1$s\"" is enabled.""
"
mozilla/MozStumbler,closed,Enable stumble simulation,[],"This adds preliminary hooks to enable simulated stumbles.

Overview:

There's a new developer option checkbox to enable simulation mode.

When this is enabled, toggling the stumbler to 'on' will generate a context wrapper (SimulationContext) around the application context that is used by the GPSScanner, WifiScanner and CellScanner.

The SimulationContext provides hooks to emit CellInfo and ScanResult to spoof cell scans and wifi scans.  The GPS scans are spoofed using a MOCK_LOCATION permission and we inject new locations into the LocationManager.

Currently, the spoofed locations will start from your last known 'real' GPS location and will simply increment north west by roughly 5 m every second.  Cell tower and wifi spoofing is hardcoded to simply use a single tower and 2 wifi BSSIDs.

The next step to getting this into something more useful will be to land #1255 and then have the ability to read back the JSON logs and replay a full stumble.

I've renamed a few of the Context instances so that it's clear that we're actually passing the main application context. This is important as that context is wrapped by SimulationContext in the case of a simulation.

The AsyncUploader also checks the simulation preference to see if uploads should be real or just be mocked out with a spoofed HTTP 200 success.

Along the way, I've upgraded robolectric to use revision 2.4.
"
mozilla/MozStumbler,open,Add option to move stumble files into a user defined directory.,"[Label(name=""enhancement"")]","While the stumbler is active, we currently save our stumble records as gzipped JSON data into persistent storage.

After we upload, we delete those files.
#3 is a request for a local database so that users can export their data.
#979 is a bug that's real intent is to improve debugging of the stumbler in real world situations.

I propose that instead of deleting the stumble logs, we just provide a user defined directory where stumble files can be **moved** to instead of deleted.  That way we can replay the StumbleBundles through the simulation mode of #1191 satisfying the requirement of #979.

Exporting data becomes much simpler as we then only have to implement transform functions on the JSON data.
"
mozilla/MozStumbler,closed,Update Hindi & Marathi translations,[],"Updated string ""Previous Sessions"" to ""Already Sent""
"
mozilla/MozStumbler,closed,Update translations,[],"This fixes #1240 
"
mozilla/MozStumbler,closed,1176 Write stumbles to disk on low memory notification,[],"#1176

Handle OS low memory notifications and call DataStorageManager saveCurrentReportsToDisk()
"
mozilla/MozStumbler,closed,Move prefs for crash reporting and tile detail to main settings screen,[],
mozilla/MozStumbler,closed,Implement custom low battery check,[],"This implements a custom low battery check which hopefully can be used to implement #1109.
I added vibration to notify the user. It would also be nice to add a notification.
"
mozilla/MozStumbler,closed,Rev the ACRA login,[],"We're getting crash reports from 0.40.4 that were fixed a long ago.  Update the ACRA login to bounce the 0.40.4 crash logs.
"
mozilla/MozStumbler,closed,Center button has no dot when not following GPS,[],"This is an extension of #1231.
The button is hollow when not following, and then gets a filled dot when following GPS.
"
mozilla/MozStumbler,closed,Add green dot in map leyend,[],"Fix #1166
"
mozilla/MozStumbler,closed,Fix untruncated log feature,[],"@garvankeeley The feature added in #1117 is not working because it is comparing a String to a char.
"
mozilla/MozStumbler,closed,sync zh-CN translations with en-US strings,[],
mozilla/MozStumbler,closed,"NPE from ACRA, need to check hasNext() before calling next()",[],"Here is the report:
![screenshot 2014-11-11 10 24 22](https://cloud.githubusercontent.com/assets/5495083/4995391/923a3a20-698e-11e4-8d05-77c4167b70d4.png)
"
mozilla/MozStumbler,closed,Sync Fennec code with stumbler github,[],"- In Fennec, we found that >23 char log tags are enforced for Log.isLoggable(). 
- Also, noticed the upload alarm wasn't canceled on destroy, more obvious in Fennec because it keeps starting and stopping the service in bursts.
- Still need to port all the logging changes from Fennec to here. Fennec logs no location info, no wifi scan details, no cell scan details.
"
mozilla/MozStumbler,closed,Acra npe mapfragment scanner hasnext,[],"Here is the report:
![screenshot 2014-11-11 10 24 22](https://cloud.githubusercontent.com/assets/5495083/4995172/f0f7af90-698c-11e4-8b75-6675527b2d58.png)
"
mozilla/MozStumbler,closed,Hide map zoom buttons when opening metrics sidebar,[],"This fixes #976. The zoom buttons will fade out as soon the sidebar slides in.
There might be another better approach, because the zoom buttons still appear, but at least it's an improvement.
"
mozilla/MozStumbler,closed,"Change wording of title ""Previous sessions"" in metrics",[],"The title ""Previous sessions"" is not quite accurate, since in fact it shows the number of reports uploaded, and you can already upload reports multiple times within the current session.
Changing the title to e.g. ""Already sent"" (or ""Sent (total)"") would give a clear distinction between current session data and uploads (sent/ready to send).
I can create a PR if the change is ok.
![metrics](https://cloud.githubusercontent.com/assets/3845150/4992627/90971926-69a3-11e4-997f-e22698274ec0.png)
The metrics were updated in #1221 
"
mozilla/MozStumbler,closed,Fix NPE startup crash,[],"@garvankeeley #1237 introduced a startup NPE, this PR restores the initialization of `mTelephonyManager`.
"
mozilla/MozStumbler,closed,Updating build.gradle as per  #1202,[],"Making the change as per #1202 Capture buildhost in versionName
Please review it accordingly. From my understanding, the Updater which uses the versions seems to work fine. Kindly suggest if anything else might be under the scope of this change .
"
mozilla/MozStumbler,closed,Additional cleanup: Create isSupported() check on the cell scanner implementation,[],"isSupported() checks the implementation to see if it usable. The wraps up some repeated checks the code was doing.
"
mozilla/MozStumbler,closed,Add green dot in map leyend,[],"Fix #1166
"
mozilla/MozStumbler,closed,Update Hindi & Marathi translations,[],"Added missing strings and refined old ones..
"
mozilla/MozStumbler,closed,Update Hindi & Marathi translations,[],"Refined old strings and added missing strings
"
mozilla/MozStumbler,closed,Update Hindi & Marathi translations,[],"Added new strings and refined old ones.. :)
"
mozilla/MozStumbler,closed,Update Marathi translation,[],"Added new strings and refined old ones :)
"
mozilla/MozStumbler,closed,"Only display the ""Center Me"" button when the view is not centered",[],"There's no need to have the button there obscuring the map when it would have
no effect to press it.
"
mozilla/MozStumbler,closed,Adding Nepali Strings.,[],"Adding Nepali (ne) translation strings.
"
mozilla/MozStumbler,closed,Build System: parallel install of different app versions,[],"# Overview

By adding "".debug"" as applicationIdSuffix to the build type debug, what we do is to change the app package name for the debug build so we can have installed the debug and production version at same time.

This is a quick fix until the beta program is defined.
"
mozilla/MozStumbler,closed,Move responsibility for null checking into CellScanner class.,[],"While porting commits to Fennec I came across this code item, didn't look quite right to to me, so I changed the responsibility.
"
mozilla/MozStumbler,open,"Fennec logging: isDebug used for non PII debug log, port back to Github","[Label(name=""Fennec"")]","Port these changes back to github:
https://bugzilla.mozilla.org/show_bug.cgi?id=1036514

Look at having 2 levels of logging. We still need developer-level logging with PII (location, detailed scans, etc.).
"
mozilla/MozStumbler,closed,Listen for GPSScanner.SUBJECT_LOCATION_LOST,[],"There is no listener for `GPSScanner.SUBJECT_LOCATION_LOST`. Is this ok?
"
mozilla/MozStumbler,closed,Always clear cells after flush,[],"If there are no cells in the current scan and there was a bundle flush, clear cells before returning early.
Otherwise number of cells will never be zero.
"
mozilla/MozStumbler,closed,Sync spanish translation,[],"Update the spanish translation
"
mozilla/MozStumbler,closed,Upload/Settings row on drawer: needs visual separation #1212,[],"# Overview

Added two different background colors for the scrollbar that contains the metrics and the bottom layout of the drawer that contains the upload and settings button.

Also, between the bottom container and the metrics was added a view of 1dp height and light gray background to make the separation even more notorious.

This change was made to close the #1212 issue based on #893 UI suggestion.
# Screenshots

![screenshot_2014-11-06-23-23-44](https://cloud.githubusercontent.com/assets/4610807/4947587/71623156-6626-11e4-9acf-e20707eb3637.png)
![screenshot_2014-11-06-23-23-34](https://cloud.githubusercontent.com/assets/4610807/4947588/7164a0ee-6626-11e4-8363-7764eb32bab4.png)
"
mozilla/MozStumbler,closed,Can this run on a Firefox OS phone? ,"[Label(name=""question"")]","I've got two phones - an Android phone and a Firefox OS Flame. Can this run on the Firefox phone?
"
mozilla/MozStumbler,closed,Show unique number of networks in metrics,[],"This PR is a bit larger, I am looking forward to get your feedback.
I read a German article about the Mozilla Stumbler release, and the author wrote that he had stumbled over 900 wifis in a really small area, so I remembered #1019.

It's best to check each commit separately:
- first commit does some cleanup and renames some variables, no functional change.
- second commit makes the `Reporter` count the observations, instead of the `MainApp`
- third commit counts the unique networks in the `Reporter`, I guess it fixes #132
- fourth commits displays the unique network stats in the metrics (see first screenshot)
- last commit removes the other network counts (see final screenshot)

This was one of my tests to see that the code works. I did five scans on the same position (6 cells, 7 wifis visible), only two of the scans had wifi enabled:
![screenshot_2014-11-07-00-15-45](https://cloud.githubusercontent.com/assets/3845150/4946052/1b78a6d8-660f-11e4-8dd3-e8d9bdbab090.png)

This is the final version:
![screenshot_2014-11-07-00-25-24](https://cloud.githubusercontent.com/assets/3845150/4946069/4f5858ae-660f-11e4-8d27-7e380c78b8fb.png)
"
mozilla/MozStumbler,closed,Fix SDK version check,[],"[`Switch`](http://developer.android.com/reference/android/widget/Switch.html) was added in API level 14
"
mozilla/MozStumbler,closed,Not possible to install 1.3.0 in 2.3.7,[],"I tried to upgrade from 0.102.0.0 to 1.3.0, it downloaded the package, but it cannot be installed (the message from the package manager is ""Application not installed"".

I have not been able to try with Play Store because it does not offer any update.

If the newer version does not work with old Androids, it might worth to release a new version that does not bring a pop-up window saying there is a new version (that can't be installed).

On Android 4.3 it works as expected.
"
mozilla/MozStumbler,closed,Fix major WifiScanner bugs,[],"@Djfe good catch!
This fixes #1216, the feature was removed in #853
"
mozilla/MozStumbler,closed,MLS only geolocation mode.,"[Label(name=""enhancement"")]",
mozilla/MozStumbler,closed,bug wifi always on,"[Label(name=""bug"")]","Wi-Fi always on doesn't seem to work anymore...
As far as I know Mozilla Stumbler should try to scan and scanning should work with that option on but wifi on.

It shows 0 wifis if wifi is deactivated on app start
if I switch it on for a short term only then it shows a number of wifis, but that number only goes down after that (as if the system or the app caches the wifis)
"
mozilla/MozStumbler,open,further screenshots,"[Label(name=""enhancement"")]","Maybe we should upload a few more screenshots to the play store
of tablets, phones without software navigation buttons, maybe the settings page, even if it isn't too beautiful.

btw. is there a way to upload translated ones? (show different screenshots depending on the country)

are the screenshots getting updated if updates change the look of the GUI? (/who takes care of this?)
"
mozilla/MozStumbler,closed,"play store issue: it says: ""optimized for phones""","[Label(name=""UI/UX""), Label(name=""enhancement"")]","the play store says: optimized for phones:
why shouldn't it be optimized for tablets, too?

since the map got integrated into the main activity the whole space is filled
the only thing I could think of are the settings and leaderboard pages, which maybe could be optimized further, but that is minor IMO.
"
mozilla/MozStumbler,open,play store: translating changelogs,"[Label(name=""Translations"")]","are we going to translate the changelogs for the play store, too?
"
mozilla/MozStumbler,closed,Upload/Settings row on drawer: needs visual separation,"[Label(name=""UI/UX"")]","some stuff that is missing still IMO:
![drawer](https://cloud.githubusercontent.com/assets/4610807/4893592/2bd0adde-63c4-11e4-9e92-9e22e7b82f1c.png)
the fixed part at the bottom (settings and upload buttons) has no visual separation to the metrics
there should be a line and maybe a drop-shadow or something
or it shouldn't be fixed anymore
<br/>

if we move the leaderboard button into that bar, too then we wouldn't need the three dots menu button in the app title bar anymore
"
mozilla/MozStumbler,closed,updater dialog gets drawn before first run,[],"I don't know if this is an issue but the updater dialog gets drawn above the first run dialog.

I noticed this because I needed to uninstall Mozilla Stumbler yesterday because of the sign key change.
After installing 1.3.0 the first run dialog popped up
and then directly after that the update dialog because of the bug in the build system (version 1.2.0 instead of 1.3.0).
"
mozilla/MozStumbler,open,modifying how long the OSM cache lasts,"[Label(name=""enhancement""), Label(name=""osmdroid"")]","@crankycoder could you pls modify your tiledownloader code so that map tiles get saved for at least a month, if they are used in that time (one time/2 days at least).
and only deleted if they get switched out by the current version (updated map tile gets downloaded and if that is successful it replaces the ""old"" map tile)

for the MLS tiles you should keep the caching as it is.
This is only about the OSM tiles since they don't change too much.
(I often scan offline, but the tiles are deleted far too early, so that I often only see the trace route(where I walked/drove))

Thx in advance
"
mozilla/MozStumbler,closed,Another messed up version code,[],"I downloaded 1.3.0 from the github repo, but the version android reads out of the .apk file is 1.2.0.
And at the first start Mozilla Stumbler asks for an update again already -> loop.
"
mozilla/MozStumbler,closed,release_check needs 2 updates,[],"Monsieur Cranky, deux fix for you: 
- is looking for ACRA in the props file
  and
- maybe fix this (github and playstore have the same properties file)
  traceback (most recent call last):
  File ""./release_check.py"", line 6, in <module>
    for line in open('android/properties/private-%s.properties' % sys.argv[-1]):
  IOError: [Errno 2] No such file or directory: 'android/properties/private-github.properties'
"
mozilla/MozStumbler,closed,1205 - updated build documentation,[],"I've also removed ACRA configuration in private.properties as we've baked that configuration into android/build.gradle
"
mozilla/MozStumbler,closed,1170 ACRA report: provider doesn't exist: gps,[],"#1170

Check if the provider is available, if not, log  message to the GUI log.

Replacing pr #1193 with this one
"
mozilla/MozStumbler,closed,Build documentation is way out of date.,[],"Everything has changed since the last time the docs were updated.

All the properties files have changed.

Android Studio configuration has been changed.

Release process has changed.

Makefile default targets have changed as well.
"
mozilla/MozStumbler,closed,Update build instructions for Android Studio,[],"we now use ./gradlew assembleGithubDebug
"
mozilla/MozStumbler,closed,1190 NPE FirstRunFragment:50,[],"#1190

This line number is where getDialog() is assumed to return a non-null, fixed.
"
mozilla/MozStumbler,open,Capture buildhost in versionName,"[Label(name=""Good first bug""), Label(name=""enhancement"")]","We may be receiving crash reports from custom builds of MozStumbler. We should include the build host name in the versionName or somewhere else that we can inspect within an ACRA crash log.  

We should be able to do something like:

``` java
InetAddress.getLocalHost().getHostName();
```

and stuff it into the versionName.
"
mozilla/MozStumbler,closed,Build System: parallel install of different app versions,"[Label(name=""enhancement"")]","I'd like to keep the Play Store version installed in any case, so it would be great if Github and local builds could be installed in parallel.
Whenever I built the app locally, I have to remove the Play Store version and all its data before I can run it on my device. Is there a way around that? Am I doing it wrong?
And it's nice to have one permanent stable version and one dev/debug/reference version installed.
![problem](https://cloud.githubusercontent.com/assets/3845150/4900772/8574edd4-642b-11e4-876e-f670fa7d4288.png)
"
mozilla/MozStumbler,closed,Cleanup UI for wifi-only devices,[],"Things that can be optimized if cell scanning is not available:
- hide wifi only upload preference
- hide map legend
- do not display cell metrics
- indicate in map view that cell scanning is not available
- adjust notification text
"
mozilla/MozStumbler,closed,Remove ocpsoft PrettyTime dependency,[],"Implement custom `PrettyTime` replacement, see #1066 
@garvankeeley What do you think about this?
"
mozilla/MozStumbler,closed,Update translations,[],"This is a minor update regarding German translations (mostly).
I also added a new `keep_screen_on_summary` string, so that you do not necessarily need to find a perfect and short `keep_screen_on_title`, is that ok?
"
mozilla/MozStumbler,closed, #893 Drawer: uploads+settings as non-scrolling footer row,[],"# Description

The upload reports button was added to the bottom of the Drawer together with the preferences button.

This feature is working on portrait and landscape mode as well (in this case, the the report is scrollable). This bottom buttons on the drawer remain always visible. Below you can find screenshots of both modes.
# Implementation
### Layout design explanation

On the xml file (fragment_metrics_drawer.xml), the ScrollView was moved inside a LinearLayout with vertical orientation.

The only thing that changed on the ScrollView is that now it has a weight of 10.

Below of the ScrollView there is a RelativeLayout (aka ""buttons container"") which has the upload button and the preferences button. This RelativeLayout has a weight of 1 and its buttons are established one on the left side and the other on the right one according to the bug #893.

Also, following the AC of #893, the preferences menu item was removed.
### Java code explanation

Regarding to the code, the references to the preferences menu item were removed.

Also, the preferences button was added to the MetricsView with its click listener. Besides that, the click listener was removed of the drawer buttons container because when the drawer was open, if you touched the container, the event went directly to the map view which leaded on a wrong behavior.
# Screenshots

![screenshot_2014-11-03-22-40-43](https://cloud.githubusercontent.com/assets/4610807/4893591/2bc907be-63c4-11e4-891e-a9c7e224c325.png)
![screenshot_2014-11-03-22-40-51](https://cloud.githubusercontent.com/assets/4610807/4893592/2bd0adde-63c4-11e4-9e92-9e22e7b82f1c.png)
"
mozilla/MozStumbler,closed,1190 NPE FirstRunFragment:50,[],"#1190

This line number is where getDialog() is assumed to return a non-null, fixed.
"
mozilla/MozStumbler,closed,1187 - NPE - Appears to be from no app context,[],"The line nums in the report don't match exactly with the code (form what I can see), but it appears to be a null app context is causing this.
#1187
"
mozilla/MozStumbler,closed,1185 NPE Reporter.startup (no telephony manager),[],"#1185

If TelephonyManager is null, just return.
"
mozilla/MozStumbler,closed,1170 ACRA report: provider doesn't exist: gps,[],"#1170

Wrap the startScanning in a catch for IllegalArgumentException (which is thrown when no GPS is available).
"
mozilla/MozStumbler,closed,1169: ACRA Report: NPE WifiScanner.java:98,[],"#1169

Added null pointer checks to getting wifi manager and scan result. In theory neither of these should have ever been null.
"
mozilla/MozStumbler,closed,Add a simulation mode,"[Label(name=""enhancement"")]","We need to have a simulation mode where the stumbler will receive a fake walking path, fake GPS, fake Wifi and fake Cell data.

We should be able to instrument this using a file as input so that we can later use the actual report logs or KML files to supply simulation data to the stumbler.
"
mozilla/MozStumbler,closed,ACRA: NPE FirstRunFragment$1.onClick(FirstRunFragment.java:50),"[Label(name=""bug"")]","Samsung GT-S5570 running 2.3.6.  Stumbler v1.0.0

```
java.lang.NullPointerException
at org.mozilla.mozstumbler.client.subactivities.FirstRunFragment$1.onClick(FirstRunFragment.java:50)
at android.view.View.performClick(View.java:2485)
at android.view.View$PerformClick.run(View.java:9080)
at android.os.Handler.handleCallback(Handler.java:587)
at android.os.Handler.dispatchMessage(Handler.java:92)
at android.os.Looper.loop(Looper.java:130)
at android.app.ActivityThread.main(ActivityThread.java:3687)
at java.lang.reflect.Method.invokeNative(Native Method)
at java.lang.reflect.Method.invoke(Method.java:507)
at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:867)
at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:625)
at dalvik.system.NativeStart.main(Native Method)
at android.app.ActivityThread.access$1300(ActivityThread.java:141)
at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1316)
at android.os.Handler.dispatchMessage(Handler.java:99)
at android.os.Looper.loop(Looper.java:137)
at android.app.ActivityThread.main(ActivityThread.java:5116)
at java.lang.reflect.Method.invokeNative(Native Method)
at java.lang.reflect.Method.invoke(Method.java:525)
at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:787)
at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:600)
at dalvik.system.NativeStart.main(Native Method)
at android.os.Parcel.readException(Parcel.java:1431)
at android.os.Parcel.readException(Parcel.java:1385)
at android.app.ActivityManagerProxy.registerReceiver(ActivityManagerNative.java:2181)
at android.app.ContextImpl.registerReceiverInternal(ContextImpl.java:1361)
at android.app.ContextImpl.registerReceiver(ContextImpl.java:1329)
at android.app.ContextImpl.registerReceiver(ContextImpl.java:1323)
at android.content.ContextWrapper.registerReceiver(ContextWrapper.java:446)
at org.mozilla.mozstumbler.client.MainApp$ServiceBroadcastReceiver.register(MainApp.java:298)
at org.mozilla.mozstumbler.client.MainApp.onCreate(MainApp.java:148)
at android.app.Instrumentation.callApplicationOnCreate(Instrumentation.java:1007)
at android.app.ActivityThread.handleBindApplication(ActivityThread.java:4451)
```
"
mozilla/MozStumbler,closed,ACRA: Crash on Blackberry Z10 MainApp: SecurityException: Unable to find app for callerApplicationThreadProxy,"[Label(name=""Closed: won't fix""), Label(name=""bug"")]","I'm tempted to say ""won't fix"".

ACRA isn't even reporting the application version code or version name properly. 

This is on a Blackberry Z10 running Stumbler 1.0.0.

```
java.lang.RuntimeException: Unable to create application org.mozilla.mozstumbler.client.MainApp: java.lang.SecurityException: Unable to find app for caller android.app.ApplicationThreadProxy@29c8f8d8 (pid=124686382) when registering receiver android.content.IIntentReceiver$Stub$Proxy@29cc9b60
at android.app.ActivityThread.handleBindApplication(ActivityThread.java:4454)
at android.app.ActivityThread.access$1300(ActivityThread.java:141)
at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1316)
at android.os.Handler.dispatchMessage(Handler.java:99)
at android.os.Looper.loop(Looper.java:137)
at android.app.ActivityThread.main(ActivityThread.java:5116)
at java.lang.reflect.Method.invokeNative(Native Method)
at java.lang.reflect.Method.invoke(Method.java:525)
at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:787)
at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:600)
at dalvik.system.NativeStart.main(Native Method)
Caused by: java.lang.SecurityException: Unable to find app for caller android.app.ApplicationThreadProxy@29c8f8d8 (pid=124686382) when registering receiver android.content.IIntentReceiver$Stub$Proxy@29cc9b60
at android.os.Parcel.readException(Parcel.java:1431)
at android.os.Parcel.readException(Parcel.java:1385)
at android.app.ActivityManagerProxy.registerReceiver(ActivityManagerNative.java:2181)
at android.app.ContextImpl.registerReceiverInternal(ContextImpl.java:1361)
at android.app.ContextImpl.registerReceiver(ContextImpl.java:1329)
at android.app.ContextImpl.registerReceiver(ContextImpl.java:1323)
at android.content.ContextWrapper.registerReceiver(ContextWrapper.java:446)
at org.mozilla.mozstumbler.client.MainApp$ServiceBroadcastReceiver.register(MainApp.java:298)
at org.mozilla.mozstumbler.client.MainApp.onCreate(MainApp.java:148)
at android.app.Instrumentation.callApplicationOnCreate(Instrumentation.java:1007)
at android.app.ActivityThread.handleBindApplication(ActivityThread.java:4451)
... 10 more
java.lang.SecurityException: Unable to find app for caller android.app.ApplicationThreadProxy@29c8f8d8 (pid=124686382) when registering receiver android.content.IIntentReceiver$Stub$Proxy@29cc9b60
at android.os.Parcel.readException(Parcel.java:1431)
at android.os.Parcel.readException(Parcel.java:1385)
at android.app.ActivityManagerProxy.registerReceiver(ActivityManagerNative.java:2181)
at android.app.ContextImpl.registerReceiverInternal(ContextImpl.java:1361)
at android.app.ContextImpl.registerReceiver(ContextImpl.java:1329)
at android.app.ContextImpl.registerReceiver(ContextImpl.java:1323)
at android.content.ContextWrapper.registerReceiver(ContextWrapper.java:446)
at org.mozilla.mozstumbler.client.MainApp$ServiceBroadcastReceiver.register(MainApp.java:298)
at org.mozilla.mozstumbler.client.MainApp.onCreate(MainApp.java:148)
at android.app.Instrumentation.callApplicationOnCreate(Instrumentation.java:1007)
at android.app.ActivityThread.handleBindApplication(ActivityThread.java:4451)
at android.app.ActivityThread.access$1300(ActivityThread.java:141)
at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1316)
at android.os.Handler.dispatchMessage(Handler.java:99)
at android.os.Looper.loop(Looper.java:137)
at android.app.ActivityThread.main(ActivityThread.java:5116)
at java.lang.reflect.Method.invokeNative(Native Method)
at java.lang.reflect.Method.invoke(Method.java:525)
at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:787)
at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:600)
at dalvik.system.NativeStart.main(Native Method)
```
"
mozilla/MozStumbler,closed,ACRA Report: NPE StumblerService.<init>(StumblerService.java:37),"[Label(name=""bug"")]","java.lang.NullPointerException
at org.mozilla.mozstumbler.service.stumblerthread.scanners.ScanManager.<init>(ScanManager.java:35)
at org.mozilla.mozstumbler.service.stumblerthread.StumblerService.<init>(StumblerService.java:37)
at org.mozilla.mozstumbler.service.stumblerthread.StumblerService.<init>(StumblerService.java:51)
at org.mozilla.mozstumbler.client.ClientStumblerService.<init>(ClientStumblerService.java:21)
"
mozilla/MozStumbler,closed,ACRA Report: NPE WifiScanner.java:44 (and 46 in 1020000),"[Label(name=""Fennec"")]","Caused by: java.lang.NullPointerException
at android.content.ContextWrapper.getApplicationContext(ContextWrapper.java:109)
at org.mozilla.mozstumbler.service.stumblerthread.scanners.WifiScanner.<init>(WifiScanner.java:44)
at org.mozilla.mozstumbler.service.stumblerthread.Reporter.<init>(Reporter.java:52)
at org.mozilla.mozstumbler.service.stumblerthread.StumblerService.<init>(StumblerService.java:56)
at org.mozilla.mozstumbler.service.stumblerthread.StumblerService.<init>(StumblerService.java:51)
at org.mozilla.mozstumbler.client.ClientStumblerService.<init>(ClientStumblerService.java:21)
"
mozilla/MozStumbler,closed,"ACRA crash inflating layout: Invalid int: ""5.0dip"" (likely won't fix, not in our code)","[Label(name=""bug"")]","Reported on a Samsung GT-P5100 running 4.1.2

```
java.lang.RuntimeException: Unable to start activity ComponentInfo{org.mozilla.mozstumbler/org.mozilla.mozstumbler.client.navdrawer.MainDrawerActivity}: android.view.InflateException: Binary XML file line #279: Error inflating class <unknown>
at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2097)
at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2122)
at android.app.ActivityThread.access$600(ActivityThread.java:140)
at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1228)
at android.os.Handler.dispatchMessage(Handler.java:99)
at android.os.Looper.loop(Looper.java:137)
at android.app.ActivityThread.main(ActivityThread.java:4895)
at java.lang.reflect.Method.invokeNative(Native Method)
at java.lang.reflect.Method.invoke(Method.java:511)
at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:994)
at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:761)
at dalvik.system.NativeStart.main(Native Method)
Caused by: android.view.InflateException: Binary XML file line #279: Error inflating class <unknown>
at android.view.LayoutInflater.createView(LayoutInflater.java:613)
at com.android.internal.policy.impl.PhoneLayoutInflater.onCreateView(PhoneLayoutInflater.java:56)
at android.view.LayoutInflater.onCreateView(LayoutInflater.java:660)
at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:685)
at android.view.LayoutInflater.rInflate(LayoutInflater.java:746)
at android.view.LayoutInflater.rInflate(LayoutInflater.java:749)
at android.view.LayoutInflater.rInflate(LayoutInflater.java:749)
at android.view.LayoutInflater.parseInclude(LayoutInflater.java:830)
at android.view.LayoutInflater.rInflate(LayoutInflater.java:736)
at android.view.LayoutInflater.rInflate(LayoutInflater.java:749)
at android.view.LayoutInflater.inflate(LayoutInflater.java:489)
at android.view.LayoutInflater.inflate(LayoutInflater.java:396)
at android.view.LayoutInflater.inflate(LayoutInflater.java:352)
at com.android.internal.policy.impl.PhoneWindow.setContentView(PhoneWindow.java:306)
at android.app.Activity.setContentView(Activity.java:1912)
at android.support.v7.app.ActionBarActivity.superSetContentView(ActionBarActivity.java:216)
at android.support.v7.app.ActionBarActivityDelegateICS.setContentView(ActionBarActivityDelegateICS.java:110)
at android.support.v7.app.ActionBarActivity.setContentView(ActionBarActivity.java:76)
at org.mozilla.mozstumbler.client.navdrawer.MainDrawerActivity.onCreate(MainDrawerActivity.java:60)
at android.app.Activity.performCreate(Activity.java:5163)
at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1094)
at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2061)
... 11 more
Caused by: java.lang.reflect.InvocationTargetException
at java.lang.reflect.Constructor.constructNative(Native Method)
at java.lang.reflect.Constructor.newInstance(Constructor.java:417)
at android.view.LayoutInflater.createView(LayoutInflater.java:587)
... 32 more
Caused by: java.lang.NumberFormatException: Invalid int: ""5.0dip""
at java.lang.Integer.invalidInt(Integer.java:138)
at java.lang.Integer.parse(Integer.java:375)
at java.lang.Integer.parseInt(Integer.java:366)
at com.android.internal.util.XmlUtils.convertValueToInt(XmlUtils.java:123)
at android.content.res.TypedArray.getInt(TypedArray.java:254)
at android.widget.TextView.<init>(TextView.java:997)
at android.widget.TextView.<init>(TextView.java:562)
... 35 more
android.view.InflateException: Binary XML file line #279: Error inflating class <unknown>
at android.view.LayoutInflater.createView(LayoutInflater.java:613)
at com.android.internal.policy.impl.PhoneLayoutInflater.onCreateView(PhoneLayoutInflater.java:56)
at android.view.LayoutInflater.onCreateView(LayoutInflater.java:660)
at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:685)
at android.view.LayoutInflater.rInflate(LayoutInflater.java:746)
at android.view.LayoutInflater.rInflate(LayoutInflater.java:749)
at android.view.LayoutInflater.rInflate(LayoutInflater.java:749)
at android.view.LayoutInflater.parseInclude(LayoutInflater.java:830)
at android.view.LayoutInflater.rInflate(LayoutInflater.java:736)
at android.view.LayoutInflater.rInflate(LayoutInflater.java:749)
at android.view.LayoutInflater.inflate(LayoutInflater.java:489)
at android.view.LayoutInflater.inflate(LayoutInflater.java:396)
at android.view.LayoutInflater.inflate(LayoutInflater.java:352)
at com.android.internal.policy.impl.PhoneWindow.setContentView(PhoneWindow.java:306)
at android.app.Activity.setContentView(Activity.java:1912)
at android.support.v7.app.ActionBarActivity.superSetContentView(ActionBarActivity.java:216)
at android.support.v7.app.ActionBarActivityDelegateICS.setContentView(ActionBarActivityDelegateICS.java:110)
at android.support.v7.app.ActionBarActivity.setContentView(ActionBarActivity.java:76)
at org.mozilla.mozstumbler.client.navdrawer.MainDrawerActivity.onCreate(MainDrawerActivity.java:60)
at android.app.Activity.performCreate(Activity.java:5163)
at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1094)
at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2061)
at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2122)
at android.app.ActivityThread.access$600(ActivityThread.java:140)
at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1228)
at android.os.Handler.dispatchMessage(Handler.java:99)
at android.os.Looper.loop(Looper.java:137)
at android.app.ActivityThread.main(ActivityThread.java:4895)
at java.lang.reflect.Method.invokeNative(Native Method)
at java.lang.reflect.Method.invoke(Method.java:511)
at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:994)
at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:761)
at dalvik.system.NativeStart.main(Native Method)
Caused by: java.lang.reflect.InvocationTargetException
at java.lang.reflect.Constructor.constructNative(Native Method)
at java.lang.reflect.Constructor.newInstance(Constructor.java:417)
at android.view.LayoutInflater.createView(LayoutInflater.java:587)
... 32 more
Caused by: java.lang.NumberFormatException: Invalid int: ""5.0dip""
at java.lang.Integer.invalidInt(Integer.java:138)
at java.lang.Integer.parse(Integer.java:375)
at java.lang.Integer.parseInt(Integer.java:366)
at com.android.internal.util.XmlUtils.convertValueToInt(XmlUtils.java:123)
at android.content.res.TypedArray.getInt(TypedArray.java:254)
at android.widget.TextView.<init>(TextView.java:997)
at android.widget.TextView.<init>(TextView.java:562)
... 35 more
java.lang.reflect.InvocationTargetException
at java.lang.reflect.Constructor.constructNative(Native Method)
at java.lang.reflect.Constructor.newInstance(Constructor.java:417)
at android.view.LayoutInflater.createView(LayoutInflater.java:587)
at com.android.internal.policy.impl.PhoneLayoutInflater.onCreateView(PhoneLayoutInflater.java:56)
at android.view.LayoutInflater.onCreateView(LayoutInflater.java:660)
at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:685)
at android.view.LayoutInflater.rInflate(LayoutInflater.java:746)
at android.view.LayoutInflater.rInflate(LayoutInflater.java:749)
at android.view.LayoutInflater.rInflate(LayoutInflater.java:749)
at android.view.LayoutInflater.parseInclude(LayoutInflater.java:830)
at android.view.LayoutInflater.rInflate(LayoutInflater.java:736)
at android.view.LayoutInflater.rInflate(LayoutInflater.java:749)
at android.view.LayoutInflater.inflate(LayoutInflater.java:489)
at android.view.LayoutInflater.inflate(LayoutInflater.java:396)
at android.view.LayoutInflater.inflate(LayoutInflater.java:352)
at com.android.internal.policy.impl.PhoneWindow.setContentView(PhoneWindow.java:306)
at android.app.Activity.setContentView(Activity.java:1912)
at android.support.v7.app.ActionBarActivity.superSetContentView(ActionBarActivity.java:216)
at android.support.v7.app.ActionBarActivityDelegateICS.setContentView(ActionBarActivityDelegateICS.java:110)
at android.support.v7.app.ActionBarActivity.setContentView(ActionBarActivity.java:76)
at org.mozilla.mozstumbler.client.navdrawer.MainDrawerActivity.onCreate(MainDrawerActivity.java:60)
at android.app.Activity.performCreate(Activity.java:5163)
at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1094)
at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2061)
at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2122)
at android.app.ActivityThread.access$600(ActivityThread.java:140)
at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1228)
at android.os.Handler.dispatchMessage(Handler.java:99)
at android.os.Looper.loop(Looper.java:137)
at android.app.ActivityThread.main(ActivityThread.java:4895)
at java.lang.reflect.Method.invokeNative(Native Method)
at java.lang.reflect.Method.invoke(Method.java:511)
at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:994)
at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:761)
at dalvik.system.NativeStart.main(Native Method)
Caused by: java.lang.NumberFormatException: Invalid int: ""5.0dip""
at java.lang.Integer.invalidInt(Integer.java:138)
at java.lang.Integer.parse(Integer.java:375)
at java.lang.Integer.parseInt(Integer.java:366)
at com.android.internal.util.XmlUtils.convertValueToInt(XmlUtils.java:123)
at android.content.res.TypedArray.getInt(TypedArray.java:254)
at android.widget.TextView.<init>(TextView.java:997)
at android.widget.TextView.<init>(TextView.java:562)
... 35 more
java.lang.NumberFormatException: Invalid int: ""5.0dip""
at java.lang.Integer.invalidInt(Integer.java:138)
at java.lang.Integer.parse(Integer.java:375)
at java.lang.Integer.parseInt(Integer.java:366)
at com.android.internal.util.XmlUtils.convertValueToInt(XmlUtils.java:123)
at android.content.res.TypedArray.getInt(TypedArray.java:254)
at android.widget.TextView.<init>(TextView.java:997)
at android.widget.TextView.<init>(TextView.java:562)
at java.lang.reflect.Constructor.constructNative(Native Method)
at java.lang.reflect.Constructor.newInstance(Constructor.java:417)
at android.view.LayoutInflater.createView(LayoutInflater.java:587)
at com.android.internal.policy.impl.PhoneLayoutInflater.onCreateView(PhoneLayoutInflater.java:56)
at android.view.LayoutInflater.onCreateView(LayoutInflater.java:660)
at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:685)
at android.view.LayoutInflater.rInflate(LayoutInflater.java:746)
at android.view.LayoutInflater.rInflate(LayoutInflater.java:749)
at android.view.LayoutInflater.rInflate(LayoutInflater.java:749)
at android.view.LayoutInflater.parseInclude(LayoutInflater.java:830)
at android.view.LayoutInflater.rInflate(LayoutInflater.java:736)
at android.view.LayoutInflater.rInflate(LayoutInflater.java:749)
at android.view.LayoutInflater.inflate(LayoutInflater.java:489)
at android.view.LayoutInflater.inflate(LayoutInflater.java:396)
at android.view.LayoutInflater.inflate(LayoutInflater.java:352)
at com.android.internal.policy.impl.PhoneWindow.setContentView(PhoneWindow.java:306)
at android.app.Activity.setContentView(Activity.java:1912)
at android.support.v7.app.ActionBarActivity.superSetContentView(ActionBarActivity.java:216)
at android.support.v7.app.ActionBarActivityDelegateICS.setContentView(ActionBarActivityDelegateICS.java:110)
at android.support.v7.app.ActionBarActivity.setContentView(ActionBarActivity.java:76)
at org.mozilla.mozstumbler.client.navdrawer.MainDrawerActivity.onCreate(MainDrawerActivity.java:60)
at android.app.Activity.performCreate(Activity.java:5163)
at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1094)
at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2061)
at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2122)
at android.app.ActivityThread.access$600(ActivityThread.java:140)
at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1228)
at android.os.Handler.dispatchMessage(Handler.java:99)
at android.os.Looper.loop(Looper.java:137)
at android.app.ActivityThread.main(ActivityThread.java:4895)
at java.lang.reflect.Method.invokeNative(Native Method)
at java.lang.reflect.Method.invoke(Method.java:511)
at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:994)
at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:761)
at dalvik.system.NativeStart.main(Native Method)
```
"
mozilla/MozStumbler,closed,ACRA report: NPE Reporter.startup:64,"[Label(name=""Fennec"")]","line is:
TelephonyManager tm = (TelephonyManager) mContext.getSystemService(Context.TELEPHONY_SERVICE);
"
mozilla/MozStumbler,closed,ACRA crash while deflating,"[Label(name=""bug"")]","I think this is probably a device problem, and not a bug in MozStumbler.

Reported on a Sony C1605_1271-7596

```
java.lang.RuntimeException: Unable to start activity ComponentInfo{org.mozilla.mozstumbler/org.mozilla.mozstumbler.client.navdrawer.MainDrawerActivity}: android.view.InflateException: Binary XML file line #7: Error inflating class <unknown>
at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2062)
at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2087)
at android.app.ActivityThread.handleRelaunchActivity(ActivityThread.java:3515)
at android.app.ActivityThread.access$700(ActivityThread.java:133)
at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1204)
at android.os.Handler.dispatchMessage(Handler.java:99)
at android.os.Looper.loop(Looper.java:137)
at android.app.ActivityThread.main(ActivityThread.java:4793)
at java.lang.reflect.Method.invokeNative(Native Method)
at java.lang.reflect.Method.invoke(Method.java:511)
at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:808)
at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:575)
at dalvik.system.NativeStart.main(Native Method)
Caused by: android.view.InflateException: Binary XML file line #7: Error inflating class <unknown>
at android.view.LayoutInflater.createView(LayoutInflater.java:613)
at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:687)
at android.view.LayoutInflater.rInflate(LayoutInflater.java:746)
at android.view.LayoutInflater.inflate(LayoutInflater.java:489)
at android.view.LayoutInflater.inflate(LayoutInflater.java:396)
at org.mozilla.mozstumbler.client.mapview.MapFragment.onCreateView(MapFragment.java:116)
at android.support.v4.app.Fragment.performCreateView(Fragment.java:1500)
at android.support.v4.app.FragmentManagerImpl.moveToState(FragmentManager.java:938)
at android.support.v4.app.FragmentManagerImpl.moveToState(FragmentManager.java:1115)
at android.support.v4.app.FragmentManagerImpl.moveToState(FragmentManager.java:1097)
at android.support.v4.app.FragmentManagerImpl.dispatchActivityCreated(FragmentManager.java:1895)
at android.support.v4.app.FragmentActivity.onStart(FragmentActivity.java:566)
at android.app.Instrumentation.callActivityOnStart(Instrumentation.java:1163)
at android.app.Activity.performStart(Activity.java:5018)
at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2035)
... 12 more
Caused by: java.lang.reflect.InvocationTargetException
at java.lang.reflect.Constructor.constructNative(Native Method)
at java.lang.reflect.Constructor.newInstance(Constructor.java:417)
at android.view.LayoutInflater.createView(LayoutInflater.java:587)
... 26 more
Caused by: java.lang.SecurityException: Unable to find app for caller android.app.ApplicationThreadProxy@42e74110 (pid=2015) when registering receiver android.content.IIntentReceiver$Stub$Proxy@42e74ef0
at android.os.Parcel.readException(Parcel.java:1425)
at android.os.Parcel.readException(Parcel.java:1379)
at android.app.ActivityManagerProxy.registerReceiver(ActivityManagerNative.java:1953)
at android.app.ContextImpl.registerReceiverInternal(ContextImpl.java:1138)
at android.app.ContextImpl.registerReceiver(ContextImpl.java:1113)
at android.app.ContextImpl.registerReceiver(ContextImpl.java:1107)
at android.content.ContextWrapper.registerReceiver(ContextWrapper.java:365)
at org.mozilla.osmdroid.tileprovider.util.SimpleRegisterReceiver.registerReceiver(SimpleRegisterReceiver.java:21)
at org.mozilla.osmdroid.tileprovider.modules.SmartFSProvider.<init>(SmartFSProvider.java:98)
at org.mozilla.osmdroid.tileprovider.modules.SmartFSProvider.<init>(SmartFSProvider.java:70)
at org.mozilla.osmdroid.tileprovider.BetterTileProvider.<init>(BetterTileProvider.java:44)
at org.mozilla.osmdroid.tileprovider.BetterTileProvider.<init>(BetterTileProvider.java:34)
at org.mozilla.osmdroid.views.MapView.<init>(MapView.java:158)
at org.mozilla.osmdroid.views.MapView.<init>(MapView.java:187)
... 29 more
android.view.InflateException: Binary XML file line #7: Error inflating class <unknown>
at android.view.LayoutInflater.createView(LayoutInflater.java:613)
at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:687)
at android.view.LayoutInflater.rInflate(LayoutInflater.java:746)
at android.view.LayoutInflater.inflate(LayoutInflater.java:489)
at android.view.LayoutInflater.inflate(LayoutInflater.java:396)
at org.mozilla.mozstumbler.client.mapview.MapFragment.onCreateView(MapFragment.java:116)
at android.support.v4.app.Fragment.performCreateView(Fragment.java:1500)
at android.support.v4.app.FragmentManagerImpl.moveToState(FragmentManager.java:938)
at android.support.v4.app.FragmentManagerImpl.moveToState(FragmentManager.java:1115)
at android.support.v4.app.FragmentManagerImpl.moveToState(FragmentManager.java:1097)
at android.support.v4.app.FragmentManagerImpl.dispatchActivityCreated(FragmentManager.java:1895)
at android.support.v4.app.FragmentActivity.onStart(FragmentActivity.java:566)
at android.app.Instrumentation.callActivityOnStart(Instrumentation.java:1163)
at android.app.Activity.performStart(Activity.java:5018)
at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2035)
at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2087)
at android.app.ActivityThread.handleRelaunchActivity(ActivityThread.java:3515)
at android.app.ActivityThread.access$700(ActivityThread.java:133)
at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1204)
at android.os.Handler.dispatchMessage(Handler.java:99)
at android.os.Looper.loop(Looper.java:137)
at android.app.ActivityThread.main(ActivityThread.java:4793)
at java.lang.reflect.Method.invokeNative(Native Method)
at java.lang.reflect.Method.invoke(Method.java:511)
at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:808)
at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:575)
at dalvik.system.NativeStart.main(Native Method)
Caused by: java.lang.reflect.InvocationTargetException
at java.lang.reflect.Constructor.constructNative(Native Method)
at java.lang.reflect.Constructor.newInstance(Constructor.java:417)
at android.view.LayoutInflater.createView(LayoutInflater.java:587)
... 26 more
Caused by: java.lang.SecurityException: Unable to find app for caller android.app.ApplicationThreadProxy@42e74110 (pid=2015) when registering receiver android.content.IIntentReceiver$Stub$Proxy@42e74ef0
at android.os.Parcel.readException(Parcel.java:1425)
at android.os.Parcel.readException(Parcel.java:1379)
at android.app.ActivityManagerProxy.registerReceiver(ActivityManagerNative.java:1953)
at android.app.ContextImpl.registerReceiverInternal(ContextImpl.java:1138)
at android.app.ContextImpl.registerReceiver(ContextImpl.java:1113)
at android.app.ContextImpl.registerReceiver(ContextImpl.java:1107)
at android.content.ContextWrapper.registerReceiver(ContextWrapper.java:365)
at org.mozilla.osmdroid.tileprovider.util.SimpleRegisterReceiver.registerReceiver(SimpleRegisterReceiver.java:21)
at org.mozilla.osmdroid.tileprovider.modules.SmartFSProvider.<init>(SmartFSProvider.java:98)
at org.mozilla.osmdroid.tileprovider.modules.SmartFSProvider.<init>(SmartFSProvider.java:70)
at org.mozilla.osmdroid.tileprovider.BetterTileProvider.<init>(BetterTileProvider.java:44)
at org.mozilla.osmdroid.tileprovider.BetterTileProvider.<init>(BetterTileProvider.java:34)
at org.mozilla.osmdroid.views.MapView.<init>(MapView.java:158)
at org.mozilla.osmdroid.views.MapView.<init>(MapView.java:187)
... 29 more
java.lang.reflect.InvocationTargetException
at java.lang.reflect.Constructor.constructNative(Native Method)
at java.lang.reflect.Constructor.newInstance(Constructor.java:417)
at android.view.LayoutInflater.createView(LayoutInflater.java:587)
at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:687)
at android.view.LayoutInflater.rInflate(LayoutInflater.java:746)
at android.view.LayoutInflater.inflate(LayoutInflater.java:489)
at android.view.LayoutInflater.inflate(LayoutInflater.java:396)
at org.mozilla.mozstumbler.client.mapview.MapFragment.onCreateView(MapFragment.java:116)
at android.support.v4.app.Fragment.performCreateView(Fragment.java:1500)
at android.support.v4.app.FragmentManagerImpl.moveToState(FragmentManager.java:938)
at android.support.v4.app.FragmentManagerImpl.moveToState(FragmentManager.java:1115)
at android.support.v4.app.FragmentManagerImpl.moveToState(FragmentManager.java:1097)
at android.support.v4.app.FragmentManagerImpl.dispatchActivityCreated(FragmentManager.java:1895)
at android.support.v4.app.FragmentActivity.onStart(FragmentActivity.java:566)
at android.app.Instrumentation.callActivityOnStart(Instrumentation.java:1163)
at android.app.Activity.performStart(Activity.java:5018)
at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2035)
at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2087)
at android.app.ActivityThread.handleRelaunchActivity(ActivityThread.java:3515)
at android.app.ActivityThread.access$700(ActivityThread.java:133)
at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1204)
at android.os.Handler.dispatchMessage(Handler.java:99)
at android.os.Looper.loop(Looper.java:137)
at android.app.ActivityThread.main(ActivityThread.java:4793)
at java.lang.reflect.Method.invokeNative(Native Method)
at java.lang.reflect.Method.invoke(Method.java:511)
at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:808)
at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:575)
at dalvik.system.NativeStart.main(Native Method)
Caused by: java.lang.SecurityException: Unable to find app for caller android.app.ApplicationThreadProxy@42e74110 (pid=2015) when registering receiver android.content.IIntentReceiver$Stub$Proxy@42e74ef0
at android.os.Parcel.readException(Parcel.java:1425)
at android.os.Parcel.readException(Parcel.java:1379)
at android.app.ActivityManagerProxy.registerReceiver(ActivityManagerNative.java:1953)
at android.app.ContextImpl.registerReceiverInternal(ContextImpl.java:1138)
at android.app.ContextImpl.registerReceiver(ContextImpl.java:1113)
at android.app.ContextImpl.registerReceiver(ContextImpl.java:1107)
at android.content.ContextWrapper.registerReceiver(ContextWrapper.java:365)
at org.mozilla.osmdroid.tileprovider.util.SimpleRegisterReceiver.registerReceiver(SimpleRegisterReceiver.java:21)
at org.mozilla.osmdroid.tileprovider.modules.SmartFSProvider.<init>(SmartFSProvider.java:98)
at org.mozilla.osmdroid.tileprovider.modules.SmartFSProvider.<init>(SmartFSProvider.java:70)
at org.mozilla.osmdroid.tileprovider.BetterTileProvider.<init>(BetterTileProvider.java:44)
at org.mozilla.osmdroid.tileprovider.BetterTileProvider.<init>(BetterTileProvider.java:34)
at org.mozilla.osmdroid.views.MapView.<init>(MapView.java:158)
at org.mozilla.osmdroid.views.MapView.<init>(MapView.java:187)
... 29 more
java.lang.SecurityException: Unable to find app for caller android.app.ApplicationThreadProxy@42e74110 (pid=2015) when registering receiver android.content.IIntentReceiver$Stub$Proxy@42e74ef0
at android.os.Parcel.readException(Parcel.java:1425)
at android.os.Parcel.readException(Parcel.java:1379)
at android.app.ActivityManagerProxy.registerReceiver(ActivityManagerNative.java:1953)
at android.app.ContextImpl.registerReceiverInternal(ContextImpl.java:1138)
at android.app.ContextImpl.registerReceiver(ContextImpl.java:1113)
at android.app.ContextImpl.registerReceiver(ContextImpl.java:1107)
at android.content.ContextWrapper.registerReceiver(ContextWrapper.java:365)
at org.mozilla.osmdroid.tileprovider.util.SimpleRegisterReceiver.registerReceiver(SimpleRegisterReceiver.java:21)
at org.mozilla.osmdroid.tileprovider.modules.SmartFSProvider.<init>(SmartFSProvider.java:98)
at org.mozilla.osmdroid.tileprovider.modules.SmartFSProvider.<init>(SmartFSProvider.java:70)
at org.mozilla.osmdroid.tileprovider.BetterTileProvider.<init>(BetterTileProvider.java:44)
at org.mozilla.osmdroid.tileprovider.BetterTileProvider.<init>(BetterTileProvider.java:34)
at org.mozilla.osmdroid.views.MapView.<init>(MapView.java:158)
at org.mozilla.osmdroid.views.MapView.<init>(MapView.java:187)
at java.lang.reflect.Constructor.constructNative(Native Method)
at java.lang.reflect.Constructor.newInstance(Constructor.java:417)
at android.view.LayoutInflater.createView(LayoutInflater.java:587)
at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:687)
at android.view.LayoutInflater.rInflate(LayoutInflater.java:746)
at android.view.LayoutInflater.inflate(LayoutInflater.java:489)
at android.view.LayoutInflater.inflate(LayoutInflater.java:396)
at org.mozilla.mozstumbler.client.mapview.MapFragment.onCreateView(MapFragment.java:116)
at android.support.v4.app.Fragment.performCreateView(Fragment.java:1500)
at android.support.v4.app.FragmentManagerImpl.moveToState(FragmentManager.java:938)
at android.support.v4.app.FragmentManagerImpl.moveToState(FragmentManager.java:1115)
at android.support.v4.app.FragmentManagerImpl.moveToState(FragmentManager.java:1097)
at android.support.v4.app.FragmentManagerImpl.dispatchActivityCreated(FragmentManager.java:1895)
at android.support.v4.app.FragmentActivity.onStart(FragmentActivity.java:566)
at android.app.Instrumentation.callActivityOnStart(Instrumentation.java:1163)
at android.app.Activity.performStart(Activity.java:5018)
at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2035)
at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2087)
at android.app.ActivityThread.handleRelaunchActivity(ActivityThread.java:3515)
at android.app.ActivityThread.access$700(ActivityThread.java:133)
at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1204)
at android.os.Handler.dispatchMessage(Handler.java:99)
at android.os.Looper.loop(Looper.java:137)
at android.app.ActivityThread.main(ActivityThread.java:4793)
at java.lang.reflect.Method.invokeNative(Native Method)
at java.lang.reflect.Method.invoke(Method.java:511)
at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:808)
at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:575)
at dalvik.system.NativeStart.main(Native Method)
at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2087)
at android.app.ActivityThread.handleRelaunchActivity(ActivityThread.java:3515)
at android.app.ActivityThread.access$700(ActivityThread.java:133)
at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1204)
at android.os.Handler.dispatchMessage(Handler.java:99)
at android.os.Looper.loop(Looper.java:137)
at android.app.ActivityThread.main(ActivityThread.java:4793)
at java.lang.reflect.Method.invokeNative(Native Method)
at java.lang.reflect.Method.invoke(Method.java:511)
at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:808)
at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:575)
at dalvik.system.NativeStart.main(Native Method)
at android.view.LayoutInflater.createView(LayoutInflater.java:613)
at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:687)
at android.view.LayoutInflater.rInflate(LayoutInflater.java:746)
at android.view.LayoutInflater.inflate(LayoutInflater.java:489)
at android.view.LayoutInflater.inflate(LayoutInflater.java:396)
at org.mozilla.mozstumbler.client.mapview.MapFragment.onCreateView(MapFragment.java:116)
at android.support.v4.app.Fragment.performCreateView(Fragment.java:1500)
at android.support.v4.app.FragmentManagerImpl.moveToState(FragmentManager.java:938)
at android.support.v4.app.FragmentManagerImpl.moveToState(FragmentManager.java:1115)
at android.support.v4.app.FragmentManagerImpl.moveToState(FragmentManager.java:1097)
at android.support.v4.app.FragmentManagerImpl.dispatchActivityCreated(FragmentManager.java:1895)
at android.support.v4.app.FragmentActivity.onStart(FragmentActivity.java:566)
at android.app.Instrumentation.callActivityOnStart(Instrumentation.java:1163)
at android.app.Activity.performStart(Activity.java:5018)
at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2035)
Caused by: java.lang.reflect.InvocationTargetException
at java.lang.reflect.Constructor.constructNative(Native Method)
at java.lang.reflect.Constructor.newInstance(Constructor.java:417)
at android.view.LayoutInflater.createView(LayoutInflater.java:587)
... 26 more
Caused by: java.lang.SecurityException: Unable to find app for caller android.app.ApplicationThreadProxy@42e74110 (pid=2015) when registering receiver android.content.IIntentReceiver$Stub$Proxy@42e74ef0
at android.os.Parcel.readException(Parcel.java:1425)
at android.os.Parcel.readException(Parcel.java:1379)
at android.app.ActivityManagerProxy.registerReceiver(ActivityManagerNative.java:1953)
at android.app.ContextImpl.registerReceiverInternal(ContextImpl.java:1138)
at android.app.ContextImpl.registerReceiver(ContextImpl.java:1113)
at android.app.ContextImpl.registerReceiver(ContextImpl.java:1107)
at android.content.ContextWrapper.registerReceiver(ContextWrapper.java:365)
at org.mozilla.osmdroid.tileprovider.util.SimpleRegisterReceiver.registerReceiver(SimpleRegisterReceiver.java:21)
at org.mozilla.osmdroid.tileprovider.modules.SmartFSProvider.<init>(SmartFSProvider.java:98)
at org.mozilla.osmdroid.tileprovider.modules.SmartFSProvider.<init>(SmartFSProvider.java:70)
at org.mozilla.osmdroid.tileprovider.BetterTileProvider.<init>(BetterTileProvider.java:44)
at org.mozilla.osmdroid.tileprovider.BetterTileProvider.<init>(BetterTileProvider.java:34)
at org.mozilla.osmdroid.views.MapView.<init>(MapView.java:158)
at org.mozilla.osmdroid.views.MapView.<init>(MapView.java:187)
... 29 more
at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:687)
at android.view.LayoutInflater.rInflate(LayoutInflater.java:746)
at android.view.LayoutInflater.inflate(LayoutInflater.java:489)
at android.view.LayoutInflater.inflate(LayoutInflater.java:396)
at org.mozilla.mozstumbler.client.mapview.MapFragment.onCreateView(MapFragment.java:116)
at android.support.v4.app.Fragment.performCreateView(Fragment.java:1500)
at android.support.v4.app.FragmentManagerImpl.moveToState(FragmentManager.java:938)
at android.support.v4.app.FragmentManagerImpl.moveToState(FragmentManager.java:1115)
at android.support.v4.app.FragmentManagerImpl.moveToState(FragmentManager.java:1097)
at android.support.v4.app.FragmentManagerImpl.dispatchActivityCreated(FragmentManager.java:1895)
at android.support.v4.app.FragmentActivity.onStart(FragmentActivity.java:566)
at android.app.Instrumentation.callActivityOnStart(Instrumentation.java:1163)
at android.app.Activity.performStart(Activity.java:5018)
at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2035)
at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2087)
at android.app.ActivityThread.handleRelaunchActivity(ActivityThread.java:3515)
at android.app.ActivityThread.access$700(ActivityThread.java:133)
at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1204)
at android.os.Handler.dispatchMessage(Handler.java:99)
at android.os.Looper.loop(Looper.java:137)
at android.app.ActivityThread.main(ActivityThread.java:4793)
at java.lang.reflect.Method.invokeNative(Native Method)
at java.lang.reflect.Method.invoke(Method.java:511)
at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:808)
at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:575)
at dalvik.system.NativeStart.main(Native Method)
at java.lang.reflect.Constructor.constructNative(Native Method)
at java.lang.reflect.Constructor.newInstance(Constructor.java:417)
at android.view.LayoutInflater.createView(LayoutInflater.java:587)
Caused by: java.lang.SecurityException: Unable to find app for caller android.app.ApplicationThreadProxy@42e74110 (pid=2015) when registering receiver android.content.IIntentReceiver$Stub$Proxy@42e74ef0
at android.os.Parcel.readException(Parcel.java:1425)
at android.os.Parcel.readException(Parcel.java:1379)
at android.app.ActivityManagerProxy.registerReceiver(ActivityManagerNative.java:1953)
at android.app.ContextImpl.registerReceiverInternal(ContextImpl.java:1138)
at android.app.ContextImpl.registerReceiver(ContextImpl.java:1113)
at android.app.ContextImpl.registerReceiver(ContextImpl.java:1107)
at android.content.ContextWrapper.registerReceiver(ContextWrapper.java:365)
at org.mozilla.osmdroid.tileprovider.util.SimpleRegisterReceiver.registerReceiver(SimpleRegisterReceiver.java:21)
at org.mozilla.osmdroid.tileprovider.modules.SmartFSProvider.<init>(SmartFSProvider.java:98)
at org.mozilla.osmdroid.tileprovider.modules.SmartFSProvider.<init>(SmartFSProvider.java:70)
at org.mozilla.osmdroid.tileprovider.BetterTileProvider.<init>(BetterTileProvider.java:44)
at org.mozilla.osmdroid.tileprovider.BetterTileProvider.<init>(BetterTileProvider.java:34)
at org.mozilla.osmdroid.views.MapView.<init>(MapView.java:158)
at org.mozilla.osmdroid.views.MapView.<init>(MapView.java:187)
... 29 more
at java.lang.reflect.Constructor.constructNative(Native Method)
at java.lang.reflect.Constructor.newInstance(Constructor.java:417)
at android.view.LayoutInflater.createView(LayoutInflater.java:587)
at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:687)
at android.view.LayoutInflater.rInflate(LayoutInflater.java:746)
at android.view.LayoutInflater.inflate(LayoutInflater.java:489)
at android.view.LayoutInflater.inflate(LayoutInflater.java:396)
at org.mozilla.mozstumbler.client.mapview.MapFragment.onCreateView(MapFragment.java:116)
at android.support.v4.app.Fragment.performCreateView(Fragment.java:1500)
at android.support.v4.app.FragmentManagerImpl.moveToState(FragmentManager.java:938)
at android.support.v4.app.FragmentManagerImpl.moveToState(FragmentManager.java:1115)
at android.support.v4.app.FragmentManagerImpl.moveToState(FragmentManager.java:1097)
at android.support.v4.app.FragmentManagerImpl.dispatchActivityCreated(FragmentManager.java:1895)
at android.support.v4.app.FragmentActivity.onStart(FragmentActivity.java:566)
at android.app.Instrumentation.callActivityOnStart(Instrumentation.java:1163)
at android.app.Activity.performStart(Activity.java:5018)
at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2035)
at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2087)
at android.app.ActivityThread.handleRelaunchActivity(ActivityThread.java:3515)
at android.app.ActivityThread.access$700(ActivityThread.java:133)
at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1204)
at android.os.Handler.dispatchMessage(Handler.java:99)
at android.os.Looper.loop(Looper.java:137)
at android.app.ActivityThread.main(ActivityThread.java:4793)
at java.lang.reflect.Method.invokeNative(Native Method)
at java.lang.reflect.Method.invoke(Method.java:511)
at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:808)
at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:575)
at dalvik.system.NativeStart.main(Native Method)
at android.os.Parcel.readException(Parcel.java:1425)
at android.os.Parcel.readException(Parcel.java:1379)
at android.app.ActivityManagerProxy.registerReceiver(ActivityManagerNative.java:1953)
at android.app.ContextImpl.registerReceiverInternal(ContextImpl.java:1138)
at android.app.ContextImpl.registerReceiver(ContextImpl.java:1113)
at android.app.ContextImpl.registerReceiver(ContextImpl.java:1107)
at android.content.ContextWrapper.registerReceiver(ContextWrapper.java:365)
at org.mozilla.osmdroid.tileprovider.util.SimpleRegisterReceiver.registerReceiver(SimpleRegisterReceiver.java:21)
at org.mozilla.osmdroid.tileprovider.modules.SmartFSProvider.<init>(SmartFSProvider.java:98)
at org.mozilla.osmdroid.tileprovider.modules.SmartFSProvider.<init>(SmartFSProvider.java:70)
at org.mozilla.osmdroid.tileprovider.BetterTileProvider.<init>(BetterTileProvider.java:44)
at org.mozilla.osmdroid.tileprovider.BetterTileProvider.<init>(BetterTileProvider.java:34)
at org.mozilla.osmdroid.views.MapView.<init>(MapView.java:158)
at org.mozilla.osmdroid.views.MapView.<init>(MapView.java:187)
at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2087)
at android.app.ActivityThread.handleRelaunchActivity(ActivityThread.java:3515)
at android.app.ActivityThread.access$700(ActivityThread.java:133)
at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1204)
at android.os.Handler.dispatchMessage(Handler.java:99)
at android.os.Looper.loop(Looper.java:137)
at android.app.ActivityThread.main(ActivityThread.java:4793)
at java.lang.reflect.Method.invokeNative(Native Method)
at java.lang.reflect.Method.invoke(Method.java:511)
at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:808)
at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:575)
at dalvik.system.NativeStart.main(Native Method)
at android.view.LayoutInflater.createView(LayoutInflater.java:613)
at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:687)
at android.view.LayoutInflater.rInflate(LayoutInflater.java:746)
at android.view.LayoutInflater.inflate(LayoutInflater.java:489)
at android.view.LayoutInflater.inflate(LayoutInflater.java:396)
at org.mozilla.mozstumbler.client.mapview.MapFragment.onCreateView(MapFragment.java:116)
at android.support.v4.app.Fragment.performCreateView(Fragment.java:1500)
at android.support.v4.app.FragmentManagerImpl.moveToState(FragmentManager.java:938)
at android.support.v4.app.FragmentManagerImpl.moveToState(FragmentManager.java:1115)
at android.support.v4.app.FragmentManagerImpl.moveToState(FragmentManager.java:1097)
at android.support.v4.app.FragmentManagerImpl.dispatchActivityCreated(FragmentManager.java:1895)
at android.support.v4.app.FragmentActivity.onStart(FragmentActivity.java:566)
at android.app.Instrumentation.callActivityOnStart(Instrumentation.java:1163)
at android.app.Activity.performStart(Activity.java:5018)
at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2035)
Caused by: java.lang.reflect.InvocationTargetException
at java.lang.reflect.Constructor.constructNative(Native Method)
at java.lang.reflect.Constructor.newInstance(Constructor.java:417)
at android.view.LayoutInflater.createView(LayoutInflater.java:587)
... 26 more
Caused by: java.lang.SecurityException: Unable to find app for caller android.app.ApplicationThreadProxy@42e74110 (pid=2015) when registering receiver android.content.IIntentReceiver$Stub$Proxy@42e74ef0
at android.os.Parcel.readException(Parcel.java:1425)
at android.os.Parcel.readException(Parcel.java:1379)
at android.app.ActivityManagerProxy.registerReceiver(ActivityManagerNative.java:1953)
at android.app.ContextImpl.registerReceiverInternal(ContextImpl.java:1138)
at android.app.ContextImpl.registerReceiver(ContextImpl.java:1113)
at android.app.ContextImpl.registerReceiver(ContextImpl.java:1107)
at android.content.ContextWrapper.registerReceiver(ContextWrapper.java:365)
at org.mozilla.osmdroid.tileprovider.util.SimpleRegisterReceiver.registerReceiver(SimpleRegisterReceiver.java:21)
at org.mozilla.osmdroid.tileprovider.modules.SmartFSProvider.<init>(SmartFSProvider.java:98)
at org.mozilla.osmdroid.tileprovider.modules.SmartFSProvider.<init>(SmartFSProvider.java:70)
at org.mozilla.osmdroid.tileprovider.BetterTileProvider.<init>(BetterTileProvider.java:44)
at org.mozilla.osmdroid.tileprovider.BetterTileProvider.<init>(BetterTileProvider.java:34)
at org.mozilla.osmdroid.views.MapView.<init>(MapView.java:158)
at org.mozilla.osmdroid.views.MapView.<init>(MapView.java:187)
... 29 more
at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:687)
at android.view.LayoutInflater.rInflate(LayoutInflater.java:746)
at android.view.LayoutInflater.inflate(LayoutInflater.java:489)
at android.view.LayoutInflater.inflate(LayoutInflater.java:396)
at org.mozilla.mozstumbler.client.mapview.MapFragment.onCreateView(MapFragment.java:116)
at android.support.v4.app.Fragment.performCreateView(Fragment.java:1500)
at android.support.v4.app.FragmentManagerImpl.moveToState(FragmentManager.java:938)
at android.support.v4.app.FragmentManagerImpl.moveToState(FragmentManager.java:1115)
at android.support.v4.app.FragmentManagerImpl.moveToState(FragmentManager.java:1097)
at android.support.v4.app.FragmentManagerImpl.dispatchActivityCreated(FragmentManager.java:1895)
at android.support.v4.app.FragmentActivity.onStart(FragmentActivity.java:566)
at android.app.Instrumentation.callActivityOnStart(Instrumentation.java:1163)
at android.app.Activity.performStart(Activity.java:5018)
at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2035)
at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2087)
at android.app.ActivityThread.handleRelaunchActivity(ActivityThread.java:3515)
at android.app.ActivityThread.access$700(ActivityThread.java:133)
at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1204)
at android.os.Handler.dispatchMessage(Handler.java:99)
at android.os.Looper.loop(Looper.java:137)
at android.app.ActivityThread.main(ActivityThread.java:4793)
at java.lang.reflect.Method.invokeNative(Native Method)
at java.lang.reflect.Method.invoke(Method.java:511)
at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:808)
at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:575)
at dalvik.system.NativeStart.main(Native Method)
at java.lang.reflect.Constructor.constructNative(Native Method)
at java.lang.reflect.Constructor.newInstance(Constructor.java:417)
at android.view.LayoutInflater.createView(LayoutInflater.java:587)
Caused by: java.lang.SecurityException: Unable to find app for caller android.app.ApplicationThreadProxy@42e74110 (pid=2015) when registering receiver android.content.IIntentReceiver$Stub$Proxy@42e74ef0
at android.os.Parcel.readException(Parcel.java:1425)
at android.os.Parcel.readException(Parcel.java:1379)
at android.app.ActivityManagerProxy.registerReceiver(ActivityManagerNative.java:1953)
at android.app.ContextImpl.registerReceiverInternal(ContextImpl.java:1138)
at android.app.ContextImpl.registerReceiver(ContextImpl.java:1113)
at android.app.ContextImpl.registerReceiver(ContextImpl.java:1107)
at android.content.ContextWrapper.registerReceiver(ContextWrapper.java:365)
at org.mozilla.osmdroid.tileprovider.util.SimpleRegisterReceiver.registerReceiver(SimpleRegisterReceiver.java:21)
at org.mozilla.osmdroid.tileprovider.modules.SmartFSProvider.<init>(SmartFSProvider.java:98)
at org.mozilla.osmdroid.tileprovider.modules.SmartFSProvider.<init>(SmartFSProvider.java:70)
at org.mozilla.osmdroid.tileprovider.BetterTileProvider.<init>(BetterTileProvider.java:44)
at org.mozilla.osmdroid.tileprovider.BetterTileProvider.<init>(BetterTileProvider.java:34)
at org.mozilla.osmdroid.views.MapView.<init>(MapView.java:158)
at org.mozilla.osmdroid.views.MapView.<init>(MapView.java:187)
... 29 more
at java.lang.reflect.Constructor.constructNative(Native Method)
at java.lang.reflect.Constructor.newInstance(Constructor.java:417)
at android.view.LayoutInflater.createView(LayoutInflater.java:587)
at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:687)
at android.view.LayoutInflater.rInflate(LayoutInflater.java:746)
at android.view.LayoutInflater.inflate(LayoutInflater.java:489)
at android.view.LayoutInflater.inflate(LayoutInflater.java:396)
at org.mozilla.mozstumbler.client.mapview.MapFragment.onCreateView(MapFragment.java:116)
at android.support.v4.app.Fragment.performCreateView(Fragment.java:1500)
at android.support.v4.app.FragmentManagerImpl.moveToState(FragmentManager.java:938)
at android.support.v4.app.FragmentManagerImpl.moveToState(FragmentManager.java:1115)
at android.support.v4.app.FragmentManagerImpl.moveToState(FragmentManager.java:1097)
at android.support.v4.app.FragmentManagerImpl.dispatchActivityCreated(FragmentManager.java:1895)
at android.support.v4.app.FragmentActivity.onStart(FragmentActivity.java:566)
at android.app.Instrumentation.callActivityOnStart(Instrumentation.java:1163)
at android.app.Activity.performStart(Activity.java:5018)
at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2035)
at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2087)
at android.app.ActivityThread.handleRelaunchActivity(ActivityThread.java:3515)
at android.app.ActivityThread.access$700(ActivityThread.java:133)
at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1204)
at android.os.Handler.dispatchMessage(Handler.java:99)
at android.os.Looper.loop(Looper.java:137)
at android.app.ActivityThread.main(ActivityThread.java:4793)
at java.lang.reflect.Method.invokeNative(Native Method)
at java.lang.reflect.Method.invoke(Method.java:511)
at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:808)
at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:575)
at dalvik.system.NativeStart.main(Native Method)
at android.os.Parcel.readException(Parcel.java:1425)
at android.os.Parcel.readException(Parcel.java:1379)
at android.app.ActivityManagerProxy.registerReceiver(ActivityManagerNative.java:1953)
at android.app.ContextImpl.registerReceiverInternal(ContextImpl.java:1138)
at android.app.ContextImpl.registerReceiver(ContextImpl.java:1113)
at android.app.ContextImpl.registerReceiver(ContextImpl.java:1107)
at android.content.ContextWrapper.registerReceiver(ContextWrapper.java:365)
at org.mozilla.osmdroid.tileprovider.util.SimpleRegisterReceiver.registerReceiver(SimpleRegisterReceiver.java:21)
at org.mozilla.osmdroid.tileprovider.modules.SmartFSProvider.<init>(SmartFSProvider.java:98)
at org.mozilla.osmdroid.tileprovider.modules.SmartFSProvider.<init>(SmartFSProvider.java:70)
at org.mozilla.osmdroid.tileprovider.BetterTileProvider.<init>(BetterTileProvider.java:44)
at org.mozilla.osmdroid.tileprovider.BetterTileProvider.<init>(BetterTileProvider.java:34)
at org.mozilla.osmdroid.views.MapView.<init>(MapView.java:158)
at org.mozilla.osmdroid.views.MapView.<init>(MapView.java:187)
```
"
mozilla/MozStumbler,open,Detect if no SD card is available,"[Label(name=""bug""), Label(name=""question"")]","Some devices only have android internal storage available.  In this case,  we can't write tiles to storage or write stumble logs. 

We need to display a message to the user that the stumbler requires some kind of external storage. 

The current user experience in this case is that the stumbler inexplicably doesn't work. 

We can only test this by trying to write to storage and getting an error.  If no storage is available,  getStorageDir()  and getCacheDir()  may still return valid paths.

We can test this  in simulator or with the Galaxy Fit in the Toronto office. 
"
mozilla/MozStumbler,closed,"Add a ""file a bug"" button","[Label(name=""enhancement"")]","We frequently get bug reports where we inevitably ask for device and rom info.

We should really be able to file bugs from the device which captured this information for us.

Maybe implement this as a hook into ACRA? 
"
mozilla/MozStumbler,open,Localize the Play Store description to Bengali ,"[Label(name=""Translations"")]","I was get a mail from the mailing list of Mozilla Geo location service mailing list. In there i found this link
https://github.com/mozilla/MozStumbler/issues/1175, which i have to translate. But i don't know to translate it in github. So, i need help to translate in Bengali. Actually in need know that how to translate it in github.  
"
mozilla/MozStumbler,open,Restore stumbled path on map after process death,"[Label(name=""UI/UX""), Label(name=""enhancement"")]","After a long walk I tried to manually upload data when connected to wifi. It failed and when I got home I also noted my log is filling with html idols post errors for all hanshake. I can't seem to cut and past text from the log or insert a screen shot.

Can I do anything to post the data, preferably before the log fills the device.
"
mozilla/MozStumbler,closed,Always update metrics last upload time,[],"The last upload time shown in metrics is not an absolute value anymore, so it needs to be updated continuously.
"
mozilla/MozStumbler,closed,I see a different map at times,[],"Sometimes I see a different map, from usual (rarely and only for a few seconds).
![2014-10-30 09 10 24](https://cloud.githubusercontent.com/assets/5685512/4867006/3d481f7e-6131-11e4-817f-f16399326777.png)
I'm using the GitHub version, and normally I get this map:
![2014-10-30 09 10 50](https://cloud.githubusercontent.com/assets/5685512/4867014/48b2783c-6131-11e4-91ad-fb6cf62a6961.png)
"
mozilla/MozStumbler,closed,Features/1025 fdroid,[],"Fixes #1025 to get FDroid support 
Cleans up versionName and versionCode inlining for #1016
"
mozilla/MozStumbler,closed,Write to disk on low memory notification from OS,[],"We aren't handling Application::onLowMemory() onTrimMemory(), and we should.
"
mozilla/MozStumbler,closed,Bangladesh translation of playstore listing,[],"Copied text from @crankycoder for Bangladesh (Modern Standard Bengali?) translation
We need to get title, short description and full description translated to Bangladesh.

I'm happy to just have people fill in the text in this ticket as a comment and we can directly patch the description in the playstore listing.

Title:

```
Mozilla Stumbler
```

Short description:

```
Help Mozilla create an open Wi-Fi and Cell geolocation service
```

Full Description:

```
Mozilla is a nonprofit project and global community building a better internet. <b>Mozilla Stumbler</b> is an open-source wireless network scanner that collects GPS data for our location service. As you move around, the app ""stumbles"" upon new Wi-Fi networks and cell towers. The <b>Mozilla Location Service</b> uses these wireless network locations to provide geolocation services for Firefox OS devices and other open source projects. For more information, visit our project page:
&bull; https://location.services.mozilla.com 

<b>How to use Mozilla Stumbler</b>

&bull; Go to un-stumbled areas (not covered in blue) to fill in the coverage map: https://location.services.mozilla.com/map
&bull; Improve the accuracy of the service by stumbling in the blue areas.
&bull; Try walking, biking, or driving new routes with Mozilla Stumbler every day!
&bull; Start with major streets and intersections, then wander through smaller streets.
&bull; Your contribution will take a day to show up on the map.
&bull; The app stops automatically on low battery notification.

Feedback 
&bull; Please report bugs on GitHub: https://github.com/mozilla/MozStumbler/issues
&bull; or the #geo IRC channel on https://wiki.mozilla.org/IRC.

License
&bull; Mozilla Stumbler is open-source software. The code is available on GitHub: https://github.com/mozilla/MozStumbler
```
"
mozilla/MozStumbler,closed,Lost reports after a crash,[],"I was walking about so no wifi connection and thus also no auto upload (as settings at default of off) when I got the dreaded 'Sumbler had problems and is closing' error. I had just launched GMail and my phone is low on resources s oI expect that killed Stumbler.

However when I restarted stumbler all my reports since starting Stumbler had disappeared from the map and the stats were all at 0. It seems reasonable to assume they were lost.

Is it possible to persist them in less volatile memory? Or were they reset on startup? Whatever, I could imagine the annoyance if it crashes after a long time and many records are lost. Some people are serious about these league tables :)
"
mozilla/MozStumbler,closed,fix Play Store feature filtering,[],"This should fix #1150.
@garvankeeley Just saw that you found the same cause.
"
mozilla/MozStumbler,closed,Added Sierra Wireless OUI to blocklist,[],"It was available in my transport today, looked up the BSSID and found out that it belonged to Sierra Wireless http://www.adminsubnet.net/mac-address-finder/84db2f searches on Google seems to confirm that it's for portable routers.
"
mozilla/MozStumbler,open,Split out integration tests,"[Label(name=""enhancement"")]","We need to have some tests run outside of the normal unit test suite.

@garvankeeley has a test that checks that github redirects are working as expected (https://github.com/garvankeeley/MozStumbler/tree/updater-test) which seems like a reasonable thing to check for.

But we don't want to have live HTTP calls in the unittest suite.

Let's fix that.
"
mozilla/MozStumbler,closed,ACRA report: provider doesn't exist: gps,"[Label(name=""Core Scanning""), Label(name=""Fennec"")]","We could catch this I think

java.lang.IllegalArgumentException: provider doesn't exist: gps
at android.os.Parcel.readException(Parcel.java:1469)
at android.os.Parcel.readException(Parcel.java:1419)
at android.location.ILocationManager$Stub$Proxy.requestLocationUpdates(ILocationManager.java:540)
at android.location.LocationManager.requestLocationUpdates(LocationManager.java:860)

Sony Xperia S
{CODENAME:REL, RELEASE:4.4.4, INCREMENTAL:37, SDK_INT:19, RESOURCES_SDK_INT:19, SDK:19} 
"
mozilla/MozStumbler,closed,ACRA Report: NPE WifiScanner.java:98,"[Label(name=""Core Scanning""), Label(name=""Fennec"")]","The code is:
  ArrayList<ScanResult> scanResults = new ArrayList<ScanResult>();
  for (ScanResult scanResult : getScanResults()) {

We can add if scanResults == null return; 
Note this code is in response to a WifiManager.SCAN_RESULTS_AVAILABLE_ACTION, so by definition the scan results shouldn't be null.

java.lang.NullPointerException at org.mozilla.mozstumbler.service.stumblerthread.scanners.WifiScanner.onReceive(WifiScanner.java:98)
at android.app.LoadedApk$ReceiverDispatcher$Args.run(LoadedApk.java:709)
at android.os.Handler.handleCallback(Handler.java:587)
at android.os.Handler.dispatchMessage(Handler.java:92)
at android.os.Looper.loop(Looper.java:130)
at android.app.ActivityThread.main(ActivityThread.java:3844)
"
mozilla/MozStumbler,closed,How long should I wait for new blue to appear?,[],"I have used for several days now and my newly stumbled routes have not appeared in blue yet.
"
mozilla/MozStumbler,closed,Map tiles keep reloading,[],"The caching of map tiles could do with some improvement. I find they keep reloading - ie reset to course quality and have to wait for details to load again. 
"
mozilla/MozStumbler,closed,Key is missing green dots,"[Label(name=""UI/UX"")]","On my maps I see bright green dots that are not shown on the key. My guess is that they are cell + Wi-fi as I have not seen any wi-fi only (magenta) dots
"
mozilla/MozStumbler,closed,"Wifi scanning not reported, cell scan ok","[Label(name=""Core Scanning""), Label(name=""question"")]","This seems to be odd behavior, I'm not entirely sure what's going on.

My brother is running a Galaxy S5 in NYC and doesn't seem to be getting wifi dots in his stumble, but you can clearly see the wifi count @ 20 here.

He said the wifi count doesn't seem to change at all, and it looks like there is no actual wifi data in the collection data if you look at the bottom screen shot.

![pasted_image_2014-10-29__8_47_pm](https://cloud.githubusercontent.com/assets/4829/4837015/6bb88f92-5fce-11e4-8f71-69be3c7f28cf.png)

![pasted_image_2014-10-29__9_02_pm](https://cloud.githubusercontent.com/assets/4829/4837132/7ce29536-5fd0-11e4-9470-421218fedabc.png)
"
mozilla/MozStumbler,closed,minor gradle patch when the private.properties file has no signing,[],"metadata. this is needed for fdroid builds.
"
mozilla/MozStumbler,closed,Updated android/build.gradle,[],"- the playstore release was stamped as 1.0, but it should have been
  1.02 to match the github release
"
mozilla/MozStumbler,closed,Automate installation of the android SDK to get a buildserver setup,"[Label(name=""enhancement"")]","Setting up the Android enviroment is a pain.  Let's wrap that up in a script that also checks that all the paths and enviroment variables are correct.
"
mozilla/MozStumbler,closed,Use scripts to get the versionCode and versionName from the git tag,[],"The version-code.sh script could be made more straightforward if a dependency on ""sed"" or ""cut"" is allowed, but a straight /bin/sh version works fine.
"
mozilla/MozStumbler,open,Polish translation of playstore listing,"[Label(name=""Translations"")]","We need to get title, short description and full description translated to polish.

I'm happy to just have people fill in the text in this ticket as a comment and we can directly patch the description in the playstore listing.

Title: 

```
Mozilla Stumbler
```

Short description: 

```
Help Mozilla create an open Wi-Fi and Cell geolocation service
```

Full Description:

```
Mozilla is a nonprofit project and global community building a better internet. <b>Mozilla Stumbler</b> is an open-source wireless network scanner that collects GPS data for our location service. As you move around, the app ""stumbles"" upon new Wi-Fi networks and cell towers. The <b>Mozilla Location Service</b> uses these wireless network locations to provide geolocation services for Firefox OS devices and other open source projects. For more information, visit our project page:
&bull; https://location.services.mozilla.com 

<b>How to use Mozilla Stumbler</b>

&bull; Go to un-stumbled areas (not covered in blue) to fill in the coverage map: https://location.services.mozilla.com/map
&bull; Improve the accuracy of the service by stumbling in the blue areas.
&bull; Try walking, biking, or driving new routes with Mozilla Stumbler every day!
&bull; Start with major streets and intersections, then wander through smaller streets.
&bull; Your contribution will take a day to show up on the map.
&bull; The app stops automatically on low battery notification.

Feedback 
&bull; Please report bugs on GitHub: https://github.com/mozilla/MozStumbler/issues
&bull; or the #geo IRC channel on https://wiki.mozilla.org/IRC.

License
&bull; Mozilla Stumbler is open-source software. The code is available on GitHub: https://github.com/mozilla/MozStumbler
```
"
mozilla/MozStumbler,open,Russian translation of playstore listing,"[Label(name=""Translations"")]","We need to get title, short description and full description translated to russian.

I'm happy to just have people fill in the text in this ticket as a comment and we can directly patch the description in the playstore listing.

Title: 

```
Mozilla Stumbler
```

Short description: 

```
Help Mozilla create an open Wi-Fi and Cell geolocation service
```

Full Description:

```
Mozilla is a nonprofit project and global community building a better internet. <b>Mozilla Stumbler</b> is an open-source wireless network scanner that collects GPS data for our location service. As you move around, the app ""stumbles"" upon new Wi-Fi networks and cell towers. The <b>Mozilla Location Service</b> uses these wireless network locations to provide geolocation services for Firefox OS devices and other open source projects. For more information, visit our project page:
&bull; https://location.services.mozilla.com 

<b>How to use Mozilla Stumbler</b>

&bull; Go to un-stumbled areas (not covered in blue) to fill in the coverage map: https://location.services.mozilla.com/map
&bull; Improve the accuracy of the service by stumbling in the blue areas.
&bull; Try walking, biking, or driving new routes with Mozilla Stumbler every day!
&bull; Start with major streets and intersections, then wander through smaller streets.
&bull; Your contribution will take a day to show up on the map.
&bull; The app stops automatically on low battery notification.

Feedback 
&bull; Please report bugs on GitHub: https://github.com/mozilla/MozStumbler/issues
&bull; or the #geo IRC channel on https://wiki.mozilla.org/IRC.

License
&bull; Mozilla Stumbler is open-source software. The code is available on GitHub: https://github.com/mozilla/MozStumbler
```
"
mozilla/MozStumbler,open,Brazilian Portugese translation of playstore listing (desc. updated on store),"[Label(name=""Translations"")]","We need to get title, short description and full description translated.

I'm happy to just have people fill in the text in this ticket as a comment and we can directly patch the description in the playstore listing.

Title: 

```
Mozilla Stumbler
```

Short description: 

```
Help Mozilla create an open Wi-Fi and Cell geolocation service
```

Full Description:

```
Mozilla is a nonprofit project and global community building a better internet. <b>Mozilla Stumbler</b> is an open-source wireless network scanner that collects GPS data for our location service. As you move around, the app ""stumbles"" upon new Wi-Fi networks and cell towers. The <b>Mozilla Location Service</b> uses these wireless network locations to provide geolocation services for Firefox OS devices and other open source projects. For more information, visit our project page:
&bull; https://location.services.mozilla.com 

<b>How to use Mozilla Stumbler</b>

&bull; Go to un-stumbled areas (not covered in blue) to fill in the coverage map: https://location.services.mozilla.com/map
&bull; Improve the accuracy of the service by stumbling in the blue areas.
&bull; Try walking, biking, or driving new routes with Mozilla Stumbler every day!
&bull; Start with major streets and intersections, then wander through smaller streets.
&bull; Your contribution will take a day to show up on the map.
&bull; The app stops automatically on low battery notification.

Feedback 
&bull; Please report bugs on GitHub: https://github.com/mozilla/MozStumbler/issues
&bull; or the #geo IRC channel on https://wiki.mozilla.org/IRC.

License
&bull; Mozilla Stumbler is open-source software. The code is available on GitHub: https://github.com/mozilla/MozStumbler
```
"
mozilla/MozStumbler,open,Spanish translation of playstore listing (desc. updated on store),"[Label(name=""Translations"")]","We need to get title, short description and full description translated to spanish.

I'm happy to just have people fill in the text in this ticket as a comment and we can directly patch the description in the playstore listing.

Title: 

```
Mozilla Stumbler
```

Short description: 

```
Help Mozilla create an open Wi-Fi and Cell geolocation service
```

Full Description:

```
Mozilla is a nonprofit project and global community building a better internet. <b>Mozilla Stumbler</b> is an open-source wireless network scanner that collects GPS data for our location service. As you move around, the app ""stumbles"" upon new Wi-Fi networks and cell towers. The <b>Mozilla Location Service</b> uses these wireless network locations to provide geolocation services for Firefox OS devices and other open source projects. For more information, visit our project page:
&bull; https://location.services.mozilla.com 

<b>How to use Mozilla Stumbler</b>

&bull; Go to un-stumbled areas (not covered in blue) to fill in the coverage map: https://location.services.mozilla.com/map
&bull; Improve the accuracy of the service by stumbling in the blue areas.
&bull; Try walking, biking, or driving new routes with Mozilla Stumbler every day!
&bull; Start with major streets and intersections, then wander through smaller streets.
&bull; Your contribution will take a day to show up on the map.
&bull; The app stops automatically on low battery notification.

Feedback 
&bull; Please report bugs on GitHub: https://github.com/mozilla/MozStumbler/issues
&bull; or the #geo IRC channel on https://wiki.mozilla.org/IRC.

License
&bull; Mozilla Stumbler is open-source software. The code is available on GitHub: https://github.com/mozilla/MozStumbler
```
"
mozilla/MozStumbler,open,German translation of playstore listing,"[Label(name=""Translations"")]","We need to get title, short description and full description translated to german.

I'm happy to just have people fill in the text in this ticket as a comment and we can directly patch the description in the playstore listing.

Title: 

```
Mozilla Stumbler
```

Short description: 

```
Help Mozilla create an open Wi-Fi and Cell geolocation service
```

Full Description:

```
Mozilla is a nonprofit project and global community building a better internet. <b>Mozilla Stumbler</b> is an open-source wireless network scanner that collects GPS data for our location service. As you move around, the app ""stumbles"" upon new Wi-Fi networks and cell towers. The <b>Mozilla Location Service</b> uses these wireless network locations to provide geolocation services for Firefox OS devices and other open source projects. For more information, visit our project page:
&bull; https://location.services.mozilla.com 

<b>How to use Mozilla Stumbler</b>

&bull; Go to un-stumbled areas (not covered in blue) to fill in the coverage map: https://location.services.mozilla.com/map
&bull; Improve the accuracy of the service by stumbling in the blue areas.
&bull; Try walking, biking, or driving new routes with Mozilla Stumbler every day!
&bull; Start with major streets and intersections, then wander through smaller streets.
&bull; Your contribution will take a day to show up on the map.
&bull; The app stops automatically on low battery notification.

Feedback 
&bull; Please report bugs on GitHub: https://github.com/mozilla/MozStumbler/issues
&bull; or the #geo IRC channel on https://wiki.mozilla.org/IRC.

License
&bull; Mozilla Stumbler is open-source software. The code is available on GitHub: https://github.com/mozilla/MozStumbler
```
"
mozilla/MozStumbler,open,Italian translation of playstore listing,"[Label(name=""Translations"")]","We need to get title, short description and full description translated to italian.

I'm happy to just have people fill in the text in this ticket as a comment and we can directly patch the description in the playstore listing.

Title: 

```
Mozilla Stumbler
```

Short description: 

```
Help Mozilla create an open Wi-Fi and Cell geolocation service
```

Full Description:

```
Mozilla is a nonprofit project and global community building a better internet. <b>Mozilla Stumbler</b> is an open-source wireless network scanner that collects GPS data for our location service. As you move around, the app ""stumbles"" upon new Wi-Fi networks and cell towers. The <b>Mozilla Location Service</b> uses these wireless network locations to provide geolocation services for Firefox OS devices and other open source projects. For more information, visit our project page:
&bull; https://location.services.mozilla.com 

<b>How to use Mozilla Stumbler</b>

&bull; Go to un-stumbled areas (not covered in blue) to fill in the coverage map: https://location.services.mozilla.com/map
&bull; Improve the accuracy of the service by stumbling in the blue areas.
&bull; Try walking, biking, or driving new routes with Mozilla Stumbler every day!
&bull; Start with major streets and intersections, then wander through smaller streets.
&bull; Your contribution will take a day to show up on the map.
&bull; The app stops automatically on low battery notification.

Feedback 
&bull; Please report bugs on GitHub: https://github.com/mozilla/MozStumbler/issues
&bull; or the #geo IRC channel on https://wiki.mozilla.org/IRC.

License
&bull; Mozilla Stumbler is open-source software. The code is available on GitHub: https://github.com/mozilla/MozStumbler
```
"
mozilla/MozStumbler,open,French Playstore translation (desc. updated in store),"[Label(name=""Translations"")]","We need to get title, short description and full description translated to french.

I'm happy to just have people fill in the text in this ticket as a comment and we can directly patch the description in the playstore listing.

Title: 

```
Mozilla Stumbler
```

Short description: 

```
Help Mozilla create an open Wi-Fi and Cell geolocation service
```

Full Description:

```
Mozilla is a nonprofit project and global community building a better internet. <b>Mozilla Stumbler</b> is an open-source wireless network scanner that collects GPS data for our location service. As you move around, the app ""stumbles"" upon new Wi-Fi networks and cell towers. The <b>Mozilla Location Service</b> uses these wireless network locations to provide geolocation services for Firefox OS devices and other open source projects. For more information, visit our project page:
&bull; https://location.services.mozilla.com 

<b>How to use Mozilla Stumbler</b>

&bull; Go to un-stumbled areas (not covered in blue) to fill in the coverage map: https://location.services.mozilla.com/map
&bull; Improve the accuracy of the service by stumbling in the blue areas.
&bull; Try walking, biking, or driving new routes with Mozilla Stumbler every day!
&bull; Start with major streets and intersections, then wander through smaller streets.
&bull; Your contribution will take a day to show up on the map.
&bull; The app stops automatically on low battery notification.

Feedback 
&bull; Please report bugs on GitHub: https://github.com/mozilla/MozStumbler/issues
&bull; or the #geo IRC channel on https://wiki.mozilla.org/IRC.

License
&bull; Mozilla Stumbler is open-source software. The code is available on GitHub: https://github.com/mozilla/MozStumbler
```
"
mozilla/MozStumbler,open,Add code to deprecate stumbler code when it's too far out of date,"[Label(name=""enhancement"")]","I'm getting crash logs still for 0.40 in ACRA, that's now 6 releases out of date and 200+ commits.  

We should have a way to ping our server on non-playstore releases to see if we should really update.
"
mozilla/MozStumbler,open,Add a preference to not autostart stumble.  Default to yes. ,"[Label(name=""enhancement"")]","Can we have feature so that MozStumbler do not start recording when app get opened but instead only when user decided
"
mozilla/MozStumbler,closed,notify when gps is disabled,"[Label(name=""Closed: won't fix"")]","Can we can a feature added so that MozStumbler notifies you if your GPS is disabled.

Doing a stumble, I opened MozStumbler and it auto started and I assume all was well or it would be once it got satellite lock not knowing that it was disabled.

I think this used to be a feature in older version but when I try on 0.4x and up no notificat
"
mozilla/MozStumbler,closed,"nexus 7 2013 lte: can't install play store, make android.hardware.telephony required=false",[],"I have a nexus 7 2013 lte.  The Updated Stumbler app will not install.  Build issue?  or is there another reason?
"
mozilla/MozStumbler,open,Clear up licensing,[],"After we pulled in the osmdroid code into the stumbler, I added the Apache license file into the source tree, but we should tidy that up to make it clear that the Apache license should apply to anything in the osmdroid subtree.
"
mozilla/MozStumbler,closed,Suggest spanish translate for description in Google Play,"[Label(name=""Translations"")]","Today we could see Mozilla Stumbler on Google Play (https://play.google.com/store/apps/details?id=org.mozilla.mozstumbler) and have decided to create a Spanish translation of the description, Thanks to @LeZelt for review, I share it here:

Mozilla es un proyecto sin ánimos de lucro y una comunidad global que construye un mejor internet. **Mozilla Stumbler** es un escáner de redes inalámbricas open-source que recolecta datos del GPS para nuestro servicio de localización. Como tú te mueves, la aplicación, ""tropieza"" con nuevas redes Wi-Fi y torres celulares. El **Servicio de Ubicación de Mozilla** usa la ubicación de estas redes inalámbricas para proveer servicios de geolocalización para dispositivos Firefox OS y otros proyectos open source. Para más información, visita la página de nuestro proyecto:
• https://location.services.mozilla.com

**¿Cómo usar Mozilla Stumbler?**

• Ve a las áreas sin ser ""tropezadas"" (no cubiertas por color azul) para llenar el mapa de cobertura: https://location.services.mozilla.com/map
• Mejora la precisión del servicio ""tropezando"" en las áreas de color azul.
• Intenta caminar, andar en bici o conducir por nuevas rutas con Mozilla Stumbler cada día.
• Inicia con calles principales e intersecciones, luego pasea por las calles más pequeñas.
• Tu contribución tardará un día en mostrarse en el mapa.
• La app se detendrá automáticamente cuando tu teléfono notifique que tienes poca batería.

Retroalimentación
• Por favor reporta los errores en GitHub: https://github.com/mozilla/MozStumbler/issues
• o en el canal #geo del IRC en https://wiki.mozilla.org/IRC

Licencia
• Mozilla Stumbler es un software open-source. El código está disponible en GitHub: https://github.com/mozilla/MozStumbler
"
mozilla/MozStumbler,closed,Update spanish translate,[],
mozilla/MozStumbler,closed,update to 0.102,[],
mozilla/MozStumbler,closed,"Add safety checks to updater. Maybe overkill, best to be safe.",[],
mozilla/MozStumbler,closed,"1129 / 1087: in follow mode, dots not drawn",[],"The pixel grid hashing was not accounting for the panning. Now when the
pixel hash is created, track the current pan state.
#1129 / #1087
"
mozilla/MozStumbler,closed,1142 - fix partial zoom,[],"Fix for #1142 so that the viewport redraws on all zoom changes.
"
mozilla/MozStumbler,closed,Slowly pinch zooming out causes the viewport to not redraw properly,[],"![r3iq4j_jvtsvwrsxa_ertagd7rhtb9goutekmza11pc](https://cloud.githubusercontent.com/assets/4829/4813960/00eb9a9e-5ecd-11e4-929c-963bbe9a55d4.png)
"
mozilla/MozStumbler,closed,Updated German translation,[],
mozilla/MozStumbler,closed,Errors while saving tiles running on Galaxy Nexus,[],"![2014-10-27](https://cloud.githubusercontent.com/assets/4829/4812629/1a6a1294-5ec2-11e4-9809-fe55c3bfe6e8.jpg)
"
mozilla/MozStumbler,closed,Consider reverting new collection rates.,[],"(Image removed)

In this example, the stumbling area is a densely populated urban location with multiple apartment blocks each having anywhere from 5 to 50 apartments, Every segment of the main road (Αγίων Πάντων) between intersections can potentially have up to 60 access points evenly distributed. The lower sampler rates may potentially cause the stumbler miss many of them (also taking in account that wireless signals do not penetrate the brick and concrete structures well, reducing the window a device can capture the APs).
"
mozilla/MozStumbler,closed,1137 - fix crash on tablets,[],"Fix for #1137 
- Default the signal strength and CDMA dbm to be UNKNOWN_SIGNAL
- if no telephony hardware is detected, the CellScannerImplementation::start() short circuits and doesn't enable any listeners
- stop() on the CellScannerImplementation will only unhook the listener if it's non-null and the telephony type is GSM or CDMA.
"
mozilla/MozStumbler,closed,Crash when no telephony type is available. ,"[Label(name=""Fennec"")]","```
java.lang.UnsupportedOperationException: Unexpected Phone Type: 0
at org.mozilla.mozstumbler.service.stumblerthread.scanners.cellscanner.CellScannerImplementation.start(CellScannerImplementation.java:92)
at org.mozilla.mozstumbler.service.stumblerthread.scanners.cellscanner.CellScanner.start(CellScanner.java:77)
at org.mozilla.mozstumbler.service.stumblerthread.scanners.ScanManager.startScanning(ScanManager.java:114)
at org.mozilla.mozstumbler.service.stumblerthread.StumblerService.startScanning(StumblerService.java:63)
at org.mozilla.mozstumbler.client.MainApp.startScanning(MainApp.java:234)
at org.mozilla.mozstumbler.client.navdrawer.MainDrawerActivity$3.run(MainDrawerActivity.java:207)
at android.os.Handler.handleCallback(Handler.java:733)
at android.os.Handler.dispatchMessage(Handler.java:95)
at android.os.Looper.loop(Looper.java:136)
at android.app.ActivityThread.main(ActivityThread.java:5001)
at java.lang.reflect.Method.invokeNative(Native Method)
at java.lang.reflect.Method.invoke(Method.java:515)
at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:785)
at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:601)
at dalvik.system.NativeStart.main(Native Method)
```
"
mozilla/MozStumbler,open,feature request: latitude ,"[Label(name=""question"")]","can mozstumbler incorporate features of the retired _google latitude_?

https://support.google.com/gmm/answer/3001634?hl=en
http://en.wikipedia.org/wiki/Google_Latitude

however that may mean that mozilla may need to run an additional service on top of exlsting Mozilla
Location Service. 

for a start it may be based on GPS as cells & wifi are growing and not yet ready for prime time.
however, this would make mozstumbler apps _useful_ and more people would use it to contribute anonymous tower locations
"
mozilla/MozStumbler,closed,1129 - add map.postInvalidate() on resume to force a redraw of the points,[],"I can't repro, but this would make sense to fix #1120
"
mozilla/MozStumbler,closed,deleted dead code ,[],"and bumped local caching up to 12 hours from 300 seconds
"
mozilla/MozStumbler,closed,1132 - Changed the Updater to stop looking in master branch. ,[],"Just grab the latest release tag and use that to build the download URL.

This will also simplify our release process as there's one less branch we need to keep track of.

Fixes #1132
"
mozilla/MozStumbler,closed,Updater should really stop looking at the master branch,[],
mozilla/MozStumbler,closed,Default the ACRA reporting to on for github builds,[],"Play Store default is off.
"
mozilla/MozStumbler,closed,"Keystore has changed, so auto-update won't work",[],"Added message to let user know to uninstall the app to upgrade
"
mozilla/MozStumbler,closed,Map not updating with scanned locations,[],"Using v0.42.0.0 on a Galaxy S5

I have seen times when the map displays scan locations spottily. Locking the phone and unlocking the phone displays the scan locations correctly.
![screenshot_2014-10-25-16-19-39](https://cloud.githubusercontent.com/assets/250273/4799280/3c7931e6-5e1b-11e4-9790-22fe4f1a31e7.png)
![screenshot_2014-10-25-16-19-46](https://cloud.githubusercontent.com/assets/250273/4799281/3c796c06-5e1b-11e4-8ef5-4b3116b45f93.png)
![screenshot_2014-10-27-09-22-47](https://cloud.githubusercontent.com/assets/250273/4799282/3c7aeae0-5e1b-11e4-984e-5fb9a68cdb17.png)
![screenshot_2014-10-27-09-22-56](https://cloud.githubusercontent.com/assets/250273/4799279/3c78fe9c-5e1b-11e4-845b-f82a17b2a700.png)
"
mozilla/MozStumbler,closed,Features/933 github only updater,[],"Fix #933

I've removed the android/libs/\* classpath from the build and added BuildConfig booleans for GITHUB and PLAYSTORE releases.

The Updater code is only enabled for GITHUB==true from now on.
"
mozilla/MozStumbler,closed,972 - default crash reporting pref to off,[],"Perhaps we can change this to ""if github build, then default to on""
#1127
"
mozilla/MozStumbler,closed,Supercedes #1118,[],"updated #1118 against dev
"
mozilla/MozStumbler,closed,Features/1077 merge header files,[],"This closes off #1077 to merge .etag, .cache_control and .tile files into a single file.

I've also added a fix for #1120 to fix an OOM problem when TileOverlays are swapped.
#1079 is also fixed by this when a successful HTTP 304 is received.
"
mozilla/MozStumbler,closed,Screen Off Scanning: Reports doesn't increase when the screen turned off. ,[],"Have this report on the geolocation list. If anyone else is experiencing the problem please let us know what device, perhaps a dev can get their hands on a particular device and figure out a workaround.

nevzorovn@gmail.com wrote:

I can't say since  ver, i think 0.40.0.0 no scanning when screen is off, and turned on screen decrease battery life in 3 times. I saw it on two phones: Lenovo A789 and THL W100S. The number of scanned points dosn't increase when the screen turned off. 
"
mozilla/MozStumbler,closed,"Bump android tools gradle plugin to 0.12.+, and use the robolectric-gradle-plugin 0.12.+",[],"There was an issue with packaging MozStumbler in fdroid due to build.gradle using 0.12.2
and android/build.gradle using 0.10.

After applying this change (and doing a ""git clean -dfx""), the unittest target and the build targets work correctly.
"
mozilla/MozStumbler,closed,1121 - NPE due to calling newMLSPoint with a null point,[],"#1121

This happens due to 400 errors in requesting MLS point. Which leads to the next question as to _why_ we are getting 400 errors here. These should be logged already, so we should investigate.
"
mozilla/MozStumbler,closed,Acra report: NPE ObservationPointsOverlay.java:85,"[Label(name=""bug"")]","java.lang.NullPointerException
at org.mozilla.osmdroid.views.Projection.toPixels(Projection.java:102)
at org.mozilla.mozstumbler.client.mapview.ObservationPointsOverlay.update(ObservationPointsOverlay.java:85)
at org.mozilla.mozstumbler.client.mapview.MapFragment.newMLSPoint(MapFragment.java:683)
at org.mozilla.mozstumbler.client.ObservedLocationsReceiver$1.run(ObservedLocationsReceiver.java:89)
"
mozilla/MozStumbler,closed,OutOfMemory errors on 0.42,[],"I'm still getting OutOfMemory errors with v0.42.0.0

I don't think #1075 caused the OOM errors, this seems like a deep bug in osmdroid.

On investigation, the LRUMapTileCache is not a proper LRU, it doesn't implement ensureCapacity correctly and object eviction is incorrectly implemented.

I've got a patch in queue here https://github.com/crankycoder/MozStumbler/commit/db29ac57baab47e84e99ea90eb9687743da0ee72 which seems to keep my memory usage extremely low at ~37MB (compared to ~60-80MB).  I have not seen the memory usage _ever_ go above 40MB with this patch in place.

The OOM shows up mostly when tiles are switched over from low res to high res mode when going from cell to wifi data, but can also show up after pathologically viewing lots of high res map tiles.  Try scrolling across Canada for a test. 

@garvankeeley, this patch will need to also force garbage collection at the point in time when the tile layers are swapped between low and high resolution mode.
"
mozilla/MozStumbler,closed,Log Activity truncation: only count longer lines towards the 30 lines before truncation.,[],"As per suggestion:
https://github.com/mozilla/MozStumbler/issues/1090#issuecomment-60462810
"
mozilla/MozStumbler,closed,Reducing log spam,[]," need to review with @crankcoder to see if any of these need keeping.
"
mozilla/MozStumbler,closed,"1103: On 400 error, print the stumble to the log without truncating it",[],"We want to figure out these 400 errors which are caused by problems in the stumble JSON. This _should_ help catch the problem.
#1103
"
mozilla/MozStumbler,closed,"1089: For screens less than 500px wide, allow higher zooming on the map. ",[],"On the 320px screen I tested, full zoom out was 20x20km, previously it was 5x5km. 
Screens over 500px wide are unchanged.
#1089
"
mozilla/MozStumbler,closed,Remove separate class for WCDMA scanning (was prev. required for Fennec),[],"The cell scanning code was split to remove wcdma scanning on Fennec due to an older API level on Fennec. This is no longer the case.

Also added some 'synchronized' keywords on any function called from TimerTask
"
mozilla/MozStumbler,closed,"Reduce log size to 200, on old devices a full log can take 5 seconds for screen to load",[],"Found this when using an older 2.3.6 device.
"
mozilla/MozStumbler,closed,"In debug, log bundle to ADB",[],
mozilla/MozStumbler,closed,Log Activity: spamming network unavailable messages,[],"My log gets filled with this
![screenshot_2014-10-23-22-10-25](https://cloud.githubusercontent.com/assets/5495083/4774219/0a13e4fc-5bab-11e4-8430-7a9335b55fee.png)
"
mozilla/MozStumbler,closed,Added test for ACRA crash reporting in Developer screen,[],"- long press on the Developer title, and a dialog pops up to ask to test ACRA ok/cancel, on ok forces a crash
"
mozilla/MozStumbler,closed,Minor cleanup items for developer screen,[],
mozilla/MozStumbler,closed,Battery Saving: minimum battery level setting (currently hard-coded to 15%),"[Label(name=""Good first bug""), Label(name=""Power Consumption"")]","Have an option to set the minimum level to any value, for me, it would be 50%. 
I charge my phone daily, and don't mind committing the first 50% of consumption to the app, but after that, I want the rest of the charge for other purposes.
"
mozilla/MozStumbler,open,Battery Saving: mode to scan only when outside of coverage area,"[Label(name=""Power Consumption"")]","- start/stop scan automatically based on whether the current location is within a previously covered area
- basically, auto-geofence, so that scanning only takes place in uncovered regions. 
- we would need to look at the higher zoom level coverage tiles on disk, and determine if the GPS location is within the transparent region of the tile or not.
"
mozilla/MozStumbler,closed,Hook accelerometer to enable/disable wifi/cell scanning,"[Label(name=""Power Consumption""), Label(name=""enhancement"")]","We should really try to minimize battery consumption.

If we hook the accelerometer to enable the wifi and cell scanning for a small fixed window of time, we can reduce the power consumption of the stumbler when the application is running but the device is not actually moving.
"
mozilla/MozStumbler,closed,"Auto-detect mobile hotspots using a bounding box, and filter them out","[Label(name=""Closed: won't fix""), Label(name=""Good first bug"")]","We currently use a naive approach to detecting mobile hotspots.

In most cases, these are going to be tethered cell phones, and in some cases you'll see things like in-car hotspots, trains or buses.

On the device, we already capture the BSSID and lat/long during a stumble.  We can compute a bounding box for the min lat/long and the max lat/long for each BSSID.

Outdoors, the typical range for a wifi signal is going to be about 100m.  So let's say that if we detect that the bounding box has a distance of 1km or more - that's going to be a mobile hotspot.

This should be safe to use even with long range wifi because:
- long range wifi is pretty rare
- long range wifi is directional
- the ichnaea server only gives location fixes when you have > 2 (possibly 3?) BSSIDs submitted

We can run the computation for mobile hotspots at the time we do an upload since we're going to be reading back the report logs anyway.
"
mozilla/MozStumbler,closed,Upload only on charge,"[Label(name=""Good first bug""), Label(name=""Power Consumption"")]","Let's provide an option to upload to MLS only while charging.  

I think this should probably be the default.
"
mozilla/MozStumbler,closed,Cleanup some more resources,[],"mainly based on Android Studio code inspection
"
mozilla/MozStumbler,closed,V 0.41.0.0. crashes and deletes reports,[],"Since I've updated to 0.41.0.0, MozStumbler seems to crash often as the service is not running anymore after my usual 15 minutes of cycling. I didn't encounter this problem for the previous pre-releases.

I tried to see what's going on in the log, but the _only_ thing I have is ""HTTP non-success code: 400, 400 Error, deleting bad report"". Is it possible to see what is the actual report so as to check if it's really wrong or if it's just a network problem (captive login portal of something like that) ?

(I've checked the ""Enable crash reporting"" feature in the settings, I hope it helps)
"
mozilla/MozStumbler,open,Screen blanks on zoom rather than keeping the scaled tiles and filling in new ones,"[Label(name=""osmdroid"")]","This is due to the osmdroid changes for tile expiry.
https://drive.google.com/file/d/0B1sYPwjczMsQaHNVNFdmMzByR1E/view?usp=sharing
"
mozilla/MozStumbler,closed,TileWriter:Failed to read ETAG file,[],"This is due to upgrading to the new system

![screenshot_2014-10-23-19-17-36](https://cloud.githubusercontent.com/assets/5495083/4763786/dc89ac0e-5b16-11e4-86c4-98a234360e6d.png)
"
mozilla/MozStumbler,closed,"1027- Metrics: changed to ""Current session"" + ""Previous sessions""",[],"#1027
"
mozilla/MozStumbler,closed,Saw lots of errors in log due to max wifi check,[],"See screenshot. Not able to repro, but I did find some suspect parts of Reporter.java
- The max wifi check never triggers a bundle flush, fixed comparator
- flush() should be nulling the bundle immediately, fixed.

![screenshot_2014-10-23-18-40-38](https://cloud.githubusercontent.com/assets/5495083/4763580/e73d659e-5b13-11e4-968f-a63329f7e986.png)
"
mozilla/MozStumbler,closed,Remove unused resources,[],"This fixes #1064
"
mozilla/MozStumbler,closed,added apache license file for the osmdroid code,[],
mozilla/MozStumbler,closed,1094 - shorter log messages for exceptions,[],"Fix for #1094 

Full stacktraces should only show up in stdout in unittest builds.
Anything else should use e.toString() or """" if the exception is null.
"
mozilla/MozStumbler,closed,1084 - Upper bounds on log lines,[],"#1084

The log is now 500 lines max, with longest lines bounded at 1000 chars
(the first 30), and the remaining lines bounded at 200.
- Add ellipse in the middle instead of the end, se we get line numbers
  of exception
- Make the timestamp shorter
"
mozilla/MozStumbler,closed,Full stacktraces shouldn't show up in the logs,[],"As per https://github.com/mozilla/MozStumbler/pull/1075#discussion-diff-19298920

Full stacktraces shouldn't show up in the logs, we only need the .toString() rendering to get the line number.
"
mozilla/MozStumbler,closed,1092 reduce heap usage to prevent OOM,[],"This is a fix for #1092 

This lowers the LRUCache size for the drawable pool down to it's original size as well as subsampling the images before they are loaded into heap.

On my MotoG before the changes I could easily get heap usage to exceed 85MB causing OOM errors.

Lowering the LRU size reduces the heap consumption to around 60MB on my device.  Subsampling cuts the heap down to ~45MB usage.

Subsampling makes road labels a bit hard to read, so we should increase the font size on the road mapstyling on our mapbox account.
"
mozilla/MozStumbler,closed,OOM errors after applying #1075,[],"OOM problem with bitmaps

```
  90 E/Stumbler:BitmapTileSourceBase( 3632): OutOfMemoryError loading bitmap: /storage/emulated/0/Android/data/org.mozilla.mozstumbler/cache/osmdroid/tiles/MozStumbler Tile Store/18/73229/95670.png32     .tile
  91 E/Stumbler:BitmapTileSourceBase( 3632): java.lang.OutOfMemoryError
  92 E/Stumbler:BitmapTileSourceBase( 3632): >---at android.graphics.BitmapFactory.nativeDecodeStream(Native Method)
  93 E/Stumbler:BitmapTileSourceBase( 3632): >---at android.graphics.BitmapFactory.decodeStreamInternal(BitmapFactory.java:620)
  94 E/Stumbler:BitmapTileSourceBase( 3632): >---at android.graphics.BitmapFactory.decodeStream(BitmapFactory.java:596)
  95 E/Stumbler:BitmapTileSourceBase( 3632): >---at android.graphics.BitmapFactory.decodeFile(BitmapFactory.java:376)
  96 E/Stumbler:BitmapTileSourceBase( 3632): >---at org.mozilla.osmdroid.tileprovider.tilesource.BitmapTileSourceBase.getDrawable(BitmapTileSourceBase.java:110)
  97 E/Stumbler:BitmapTileSourceBase( 3632): >---at org.mozilla.osmdroid.tileprovider.modules.SmartFSProvider$TileLoader.loadTile(SmartFSProvider.java:192)
  98 E/Stumbler:BitmapTileSourceBase( 3632): >---at org.mozilla.osmdroid.tileprovider.modules.MapTileModuleProviderBase$TileLoader.run(MapTileModuleProviderBase.java:289)
  99 E/Stumbler:BitmapTileSourceBase( 3632): >---at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1112)
 100 E/Stumbler:BitmapTileSourceBase( 3632): >---at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:587)
 101 E/Stumbler:BitmapTileSourceBase( 3632): >---at java.lang.Thread.run(Thread.java:841)

```
"
mozilla/MozStumbler,closed,"Use table layout in metrics drawer, improves l12y",[],"This improves localizability, because the table columns automatically align at the widest title string. This fixes the problem mentioned in #1059
"
mozilla/MozStumbler,closed,log errors cut off by dots,"[Label(name=""enhancement"")]","similar to #695 
I think log errors should an independent counter
->it could be helpful to be able to read the full error log entry

they are not as long as normal entries that contain reports and they are not occuring as often

I think they should get an independent counter that reaches up to 50
1st error to 50th error gets displayed fully the following ones get cut off by dots

another approach that could work out better:
only cut off duplicated errors:
if a similar log entry exists in the last 10 log entries -> then cut it off by dots
-> you can see the full error but if you have 10 http errors with the same code in a row 9 of them will get cut off by dots and only the first one will be displayed fully ;)
"
mozilla/MozStumbler,closed,Max zoom out level should be dependant on screen size,"[Label(name=""bug"")]","why did the lowest zoom level get reduced so much? I cannot scroll through countries efficiently anymore now (takes too long)
"
mozilla/MozStumbler,closed,disable MLS location layer for cell-only reports,"[Label(name=""question"")]","it would be nice to be able to disable red dots for cell-only reports because they are so inaccurate that they draw lines all over the screen which doesn't look to good (-> maybe another checkbox setting)
![2014-10-23 14 36 14](https://cloud.githubusercontent.com/assets/5685512/4756961/8cb9a412-5ad1-11e4-888b-7f0e809cb768.png)
"
mozilla/MozStumbler,closed,the big blue gps dot doesn't get redrawn completely,"[Label(name=""osmdroid"")]","![2014-10-23 14 19 42](https://cloud.githubusercontent.com/assets/5685512/4756873/f9ae53c0-5ad0-11e4-9924-3b86a4a5e73d.png)
![2014-10-23 14 19 46](https://cloud.githubusercontent.com/assets/5685512/4756874/face2488-5ad0-11e4-9a8f-454eaca84076.png)

as you can see the big blue gps dot doesn't get redrawn correctly

the issue vanishes if I move around in the map because that enforces a complete redraw
"
mozilla/MozStumbler,closed,1076: drop cell radio type of zero,[],"#1076
"
mozilla/MozStumbler,closed,"1067: Better fix: Listen for Reporter to flush bundle, then clear the cell count on next scan.",[],"#1067
#1071
"
mozilla/MozStumbler,closed,Log Activity OOM crash,[],"Acra report:
java.lang.OutOfMemoryError : at org.mozilla.mozstumbler.client.subactivities.LogActivity$ConsoleView.print(LogActivity.java:174)
"
mozilla/MozStumbler,closed,Update screenshots for new app title,[],
mozilla/MozStumbler,closed,Fix NullPointerException in errorMLSResponse (fixes #1080),[],"Fixes the NullPointerException in ObservationPoint.java (issue #1080)
"
mozilla/MozStumbler,closed,0.40.4.0 upload errors,[],"This is a follow on for #989 which I did not spot was closed when I comment

I can confirm that some data is not being uploaded fully from anecdotal evidence. Following a recording session only some of my data was recorded, despite witnessing mozstumbler recording data in areas which are unmarked in the map.

https://location.services.mozilla.com/map#14/53.3295/-6.2122

In this map, I did Sandymount strand and the main roads of the area marked Irishtown Nature Park. Prior to the mapping neither areas had been recorded. This was done as one continuous mapping

On an aside, I have driven the road marked ""Sandymount Strand"" several times now and this is the first time that the road was added to the map.

I am running similar specs to grrrrr: Samsung Galaxy S4 with Cyanogen Mod 11 M11 and Mozstumbler 0.40.4.0
"
mozilla/MozStumbler,closed,NPE in ObservationPoint errorMLSResponse,[],"Mozilla Stumbler crashes nearly every time I click on the switch to stop scanning.
The crash occurs in ObservationPoint.java:94

``` java
public void errorMLSResponse(boolean stopRequesting) {
if (stopRequesting) {
mMLSQuery = null;
Log.i(ObservationPoint.class.getSimpleName(), ""Error:"" + mMLSQuery.toString());
}
mIsMLSLocationQueryRunning = false;
}
```

I guess that setting mMLSQuery to null after logging should fix this.
"
mozilla/MozStumbler,closed,Cache control file is not updated on conditional get,[],"The cache control file is currently only updated on a complete download of a tile.

In the case of a conditional GET which yields a 304 not updated status - we should rewrite the cache control file to indicate a new timestamp.
"
mozilla/MozStumbler,open,Add proper maximum cache size management.,"[Label(name=""osmdroid"")]","This is a port of : https://github.com/mozilla/osmdroid/issues/4

The osmdroid TileWriter writes all files to disk, we should pull in the LruDiskCache to store all files as well as probably encoding them as gzip to save space.  

The original osmdroid code uses a maximum disk usage policy, but it relies on the last modified timestamp - this is unreliable on android.  See: https://code.google.com/p/android/issues/detail?id=18624

Right now the disk usage for the osmdroid tiles grows without bounds.
"
mozilla/MozStumbler,closed,Merge the .etag and .cache_control files,[],"The osmdroid code we have writes out a tile, an etag file and a cache control header.  Each file will take up one block on the filesystem effectively tripling the disk usage as each file is quite small.

Merge the 3 files together into a single file so that we don't consume too much space.
"
mozilla/MozStumbler,closed,Getting HTTP 400 errors in log,"[Label(name=""bug"")]","![screenshot_2014-10-22-23-29-20](https://cloud.githubusercontent.com/assets/5495083/4747944/64488f32-5a65-11e4-871e-2949dbb2907b.png)
"
mozilla/MozStumbler,closed,"957 - etags, 404 filtering, cache control, networking updates and zoom fixes.",[],"This is a large patch, but I've rebased it into something that is hopefully digestable.

In order the patches are:
- d7c1924 is a straight copy of the osmdroid codebase that we've been using until now.  There are no code modifications.
- 9ae2bf0 which moves org.osmdroid into org.mozilla.osmdroid.  Code has been reformatted to force brace brackets as well as organizing imports.  No other code change is involved.
- 8721509 is where I squashed all changes to osmdroid.  

The key bits that you will care about are:
1) I've removed MapTileProvider and MapTileFilesystemProvider as we no longer use them
2) Those have been replaced with SmartFSProvider which is a facade around tile loading from disk or network.  The SmartFSProvider caches tiles on disk for 300 seconds, does a conditional GET of the tile and save the tile to disk with an etag and a cache control file (which is used to enforce the 300 second cache rule)
3) MapTileDownloader has been replaced with a TileDownloaderDelegate.  This uses HttpUrlConnection instead of the Apache DefaultHttpClient.  I've added socket timeouts and connection timeouts as well as using connection recycling if the Android API level is appropriate.
4) ZoomInLooper and ZoomOutLooper have had the handleTile method changed to a no-op.  This prevents tiles from rescaling when a zoom operation occurs.  osmdroid's zoom bug (https://github.com/osmdroid/osmdroid/issues/52) is caused (basically) because of a poor design which marks tiles as 'dirty'.  There's no easy way to fix this so I simply don't scale tiles anymore.  

There an LRUCache in play which marks tiles as 'dirty' and in need of a download, the cache somtimes evicts tiles before they can be pulled from cache and redownloaded, so I've also forced the OVERSHOOT_TILE_CACHE_SIZE to be 100 tiles (from 0) to increase the chances that the LRU doesn't evict tiles too quickly.  The LRUCache should really be removed entirely and this part of the code needs a redesign.

There are low hanging fruit CPU optimizations we can make to remove the calls to handleTile() so that we aren't looping over all tiles in a zoom just to do nothing.

5) There's also a cache that keeps HTTP404_CACHE I've embedded into the TileDownloaderDelegate which makes sure that we don't keep requesting non-existant coverage tiles from Ichnaea. 

25131a8 adds :
1) adds GET support to HttpUtil as well as providing a means to access the raw bytes of the downloaded content.
2) All Log.e() calls now require a Throwable type as the last argument.  You cannot just pass strings to a Log.e() call.  If you do, you should probably be using Log.w() for warnings.

The last two commits ccc2c65 and db98db7 are small adjustments to the build system and to reduce the logging level of some verbose and info messages down to debug as they are not important to normal runtime execution.

If you checkout this code into a separate branch, you can diff the mozstumbler changes using:

```
git diff -w dev android/src/main/java/org/mozilla/mozstumbler
```
"
mozilla/MozStumbler,closed,1069 - Keeping screen on pref only takes effect when scanning.,[],"#1069
"
mozilla/MozStumbler,closed,1068 - Change the name of the app to Mozilla Stumbler,[],"#1068
"
mozilla/MozStumbler,closed,"1066: Only use pretty format in english, use regular numeric date+time in other cases",[],"After 1.0 we should try get this working on all languages.
#1066
"
mozilla/MozStumbler,closed,"1067:Switching to show all cells scanned, ",[],"the count we are using isn't showing all the cells that are seen at the current time
#1067
"
mozilla/MozStumbler,closed,Change keep_screen_on pref default to false,[],"This pref was introduced when the map was not the default screen.
Now this pref is basically always in effect when the app is in the foreground. This is not a good default because users will be unaware of it (at first), so if they do not turn off the screen manually, they might only notice it when the battery is almost empty. On the other hand, users that want to have this feature will look for it in the menu.
"
mozilla/MozStumbler,closed,"Disable ""keep screen on while in map"" when in low power situations","[Label(name=""bug"")]","When keep screen on while in map is selected and the device is under 15% battery the display never turns off and since it is the foreground application the current location is still requested. Allowing the screen to sleep when in low power mode seems to disable the location requests.
"
mozilla/MozStumbler,closed,Investigate name change to Mozilla Stumbler,[],"Branding is against shortening Mozilla to Moz on actual products. Let's see if this is do-able.
"
mozilla/MozStumbler,closed,"Cell count on map view shows 1, when many have been scanned",[],"My cell count always shows 1, but I can see in the log, the current scan actually had many. I am not sure the cell count has ever shown anything other than 1 on the map view.
"
mozilla/MozStumbler,closed,Last Upload Time displaying a time in zh-CN script in zh-TW locale (l12y?),[],"Hi, 
I just found the time in ""Last Upload Time:"" are not localizable so it displays values as ""never"", ""片刻之前"", ""19 小时 前"" (19 hours ago in Simplified Chinese) rather than strings fully localized in Traditional Chinese. Probably a library issue?

Screenshot: http://imgur.com/dUA1sHq

Tested in 0.41.0.0 on Asus Zenfone 5 LTE (Android 4.4.2 KOT49H) and Nexus 7 2013 (Android 5.0 LPX13D)
"
mozilla/MozStumbler,closed,"Round KB to nearest whole number instead of showing fractional metrics like ""123.4 KB""",[],"I think the fractional KB metrics clutter the UI. We don't need that much precision. :)
"
mozilla/MozStumbler,closed,unused translations,[],"values-bn-rBD/strings.xml:6: Error: ""action_upload_observations"" is translated here but not found in default locale [ExtraTranslation]
values-bn-rBD/strings.xml:10: Error: ""view_map"" is translated here but not found in default locale [ExtraTranslation]
values-bn-rBD/strings.xml:13: Error: ""wifi_disabled"" is translated here but not found in default locale [ExtraTranslation]
values-es/strings.xml:16: Error: ""wifi_info"" is translated here but not found in default locale [ExtraTranslation]
values-es/strings.xml:19: Error: ""cells_info"" is translated here but not found in default locale [ExtraTranslation]
values-bn-rBD/strings.xml:19: Error: ""coordinate"" is translated here but not found in default locale [ExtraTranslation]
values-es/strings.xml:21: Error: ""num_used"" is translated here but not found in default locale [ExtraTranslation]
values-es/strings.xml:22: Error: ""num_visible"" is translated here but not found in default locale [ExtraTranslation]
values-es/strings.xml:44: Error: ""about_legal_icons8"" is translated here but not found in default locale [ExtraTranslation]
values-bn-rBD/strings.xml:49: Error: ""upload_observations_button"" is translated here but not found in default locale [ExtraTranslation]
values-bn-rBD/strings.xml:50: Error: ""upload_observations_dialog_title"" is translated here but not found in default locale [ExtraTranslation]
values-bn-rBD/strings.xml:56: Error: ""upload_observations_data_size"" is translated here but not found in default locale [ExtraTranslation]
values-es/strings.xml:59: Error: ""drawer_map_option_show_observation_type"" is translated here but not found in default locale [ExtraTranslation]
"
mozilla/MozStumbler,closed,stop scanning only if kml buttons pushed,[],"Previously it stopped scanning if the developer dialog was shown.
"
mozilla/MozStumbler,closed,Fixed up threading/race condition probs in initializing the coverage overlay url,[],
mozilla/MozStumbler,closed,Opening developer dialog stops scanning,[],"Opening the developer dialog stops the scanning process. @garvankeeley you already added a TODO about moving this. Now that the dialog contains the map tile options, it would be nice to have that fixed. (Is it easy to fix?)
"
mozilla/MozStumbler,open,Text-only signal status,"[Label(name=""UI/UX"")]","Until we get a beautiful set of icons, text-only (Droid Sans I assume) is proposed for now.

![text-only](https://cloud.githubusercontent.com/assets/68213/4723862/7a5f5f6e-594b-11e4-81c2-4913aec7f350.png)

When signal is not available, colour can be grey; when down, red, etc.
"
mozilla/MozStumbler,closed,"updated de translation, fixed en strings",[],"Updated German translation and fixed some small bits in the English strings.
"
mozilla/MozStumbler,closed,Updated Polish translation,[],
mozilla/MozStumbler,closed,Use a boolean flag for 'is mls query running' ,[],"rather than checking if the asynctask is non-null
"
mozilla/MozStumbler,closed,Delete stumbles on 400 (bad request) errors only,[],"In theory other errors, particularly 404 can be temporary (and incorrectly) be returned by proxies.
Due to complaints about data disappearing I am trying to minimize the possibilities of stumbles being disposed. 
"
mozilla/MozStumbler,closed,Investigate network scanner scanning frequency,"[Label(name=""Core Scanning""), Label(name=""Power Consumption"")]","Currently the frequencies of GPS position updates, cell scanning, and wifi scanning are configured independently from each other. The `WiFiScanner` has `WIFI_MIN_UPDATE_TIME` = 5000ms and the `CellScanner` has `CELL_MIN_UPDATE_TIME` = 1000ms, while the `GPSScanner` requests location updates after 10m movement occured and at least 1s passed (#1039 -> 30m, 2s).

I would assume that based on the range of different network types, wifis need to be scanned much more frequently than cells, because a wifi might not be visible anymore after moving >10m, while cells can potentially span several kilometers. This makes sense even when only having observation points every 30m.

If you want to scan for wifis every ~15m at 50km/h, you would need to scan every 1 second.
I wonder if it would be best to hook up the network scanners to the GPS too, to start each scan based on passed time and movement as well.
"
mozilla/MozStumbler,open,The Map updates new tiles faster while touching/swiping on it,"[Label(name=""osmdroid"")]","Might have to do with the way OSMDroid works,
but the map updates faster for me if keep on moving through the new unloaded tiles
if I stop touching the screen it can take a second or more

(50mbit VDSL over wifi connection)
"
mozilla/MozStumbler,closed,"updated de translation, fixed en strings",[],"Updated German translation and fixed some small bits in the English strings.

Will probably do another commit tomorrow/extend this one to sort the English strings as well if my changes to the English strings are okay.
"
mozilla/MozStumbler,open,MozStumb... Apptitle is cut off on some devices,"[Label(name=""UI/UX"")]","the app title is cut off on some devices which looks ugly IMO

workarounds:
we could move the leaderboard and settings buttons to the bottom of the drawer, make it scrollable and open on pressing the legacy menu key of the device

or we could move the on/off switch to the top-right off the drawer or make it narrower

the issue:
![2014-10-20 22 59 24](https://cloud.githubusercontent.com/assets/5685512/4710669/58221142-58ad-11e4-9619-3e66419f7597.png)
"
mozilla/MozStumbler,closed,Display visible GPS satellites,[],"This is a suggestion for a partly fix of #973. I put the ""/"" to the strings.xml for RTL compatibility.
![gps](https://cloud.githubusercontent.com/assets/3845150/4710017/c9f7c3e2-58a4-11e4-93d0-e31f8c27b999.png)
"
mozilla/MozStumbler,closed,1045 - not handling http response code when searching for mls,[],"#1045
"
mozilla/MozStumbler,closed,About activity cleanup,[],"This is the followup to #1046 
"
mozilla/MozStumbler,closed,Crash on low battery,[],"I got the message ""MozStumbler has stopped"" right when the battery level gets low (<15%) on two occasions in the last few days. The app was in the background and not actively scanning. This error seems to be intermittent and I can't reproduce it consistently. I'm sorry I can't provide more detailed logs.
Version 0.40.4.0 on Android 4.4.4
"
mozilla/MozStumbler,closed,Display of drifting location fix ,[],"Mozstumbler (0.40.4.0) shows track of locations while stationary, as what looks like GPS fix rifts. Confusing feedback to user. Should just move a single location dot  as fix shifts. Attachment shows me sitting on my butt but a trail of movement: 

![screenshot_2014-10-20-12-38-11](https://cloud.githubusercontent.com/assets/798731/4707941/a4f6c83e-5892-11e4-9c4b-187c4baf4968.png)
"
mozilla/MozStumbler,closed,Fix hardcoded strings and remove some unused resources,[],"This fixes #1018 
"
mozilla/MozStumbler,closed,Error deserializing status from JSON: org.json.JSONException: No value for status,[],"I saw JSON errors like these logged every ~10 seconds. The MozStumbler app was running in the foreground, but I was not actively stumbling.

```
10-20 11:54:09.927: E/Stumbler:MLSLocationGetter(23764): Error deserializing status from JSON
10-20 11:54:09.927: E/Stumbler:MLSLocationGetter(23764): org.json.JSONException: No value for status
10-20 11:54:09.927: E/Stumbler:MLSLocationGetter(23764): at org.json.JSONObject.get(JSONObject.java:354)
10-20 11:54:09.927: E/Stumbler:MLSLocationGetter(23764): at org.json.JSONObject.getString(JSONObject.java:514)
10-20 11:54:09.927: E/Stumbler:MLSLocationGetter(23764): at org.mozilla.mozstumbler.client.mapview.MLSLocationGetter.doInBackground$44e62fb4(MLSLocationGetter.java:71)
10-20 11:54:09.927: E/Stumbler:MLSLocationGetter(23764): at org.mozilla.mozstumbler.client.mapview.MLSLocationGetter.doInBackground(MLSLocationGetter.java:26)
10-20 11:54:09.927: E/Stumbler:MLSLocationGetter(23764): at android.os.AsyncTask$2.call(AsyncTask.java:287)
10-20 11:54:09.927: E/Stumbler:MLSLocationGetter(23764): at java.util.concurrent.FutureTask.run(FutureTask.java:234)
10-20 11:54:09.927: E/Stumbler:MLSLocationGetter(23764): at android.os.AsyncTask$SerialExecutor$1.run(AsyncTask.java:230)
10-20 11:54:09.927: E/Stumbler:MLSLocationGetter(23764): at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1080)
10-20 11:54:09.927: E/Stumbler:MLSLocationGetter(23764): at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:573)
10-20 11:54:09.927: E/Stumbler:MLSLocationGetter(23764): at java.lang.Thread.run(Thread.java:841)
10-20 11:54:09.927: I/ObservationPoint(23764): Error:{""timestamp"":1413755514000,""wifi_count"":0,""wifi"":[],""lon"":-122.123518,""cell_count"":1,""altitude"":67,""cell"":[{""asu"":14,""radio"":""0"",""mnc"":260,""psc"":0,""mcc"":310}],""radio"":""gsm"",""accuracy"":11,""lat"":37.956794}

10-20 11:54:11.188: D/Stumbler:HTTPResponse(23764): HTTP Status: 400, Bytes Sent: 165, Bytes received: 106
10-20 11:54:11.198: E/Stumbler:MLSLocationGetter(23764): Error deserializing status from JSON
10-20 11:54:11.198: E/Stumbler:MLSLocationGetter(23764): org.json.JSONException: No value for status
10-20 11:54:11.198: E/Stumbler:MLSLocationGetter(23764): at org.json.JSONObject.get(JSONObject.java:354)
10-20 11:54:11.198: E/Stumbler:MLSLocationGetter(23764): at org.json.JSONObject.getString(JSONObject.java:514)
10-20 11:54:11.198: E/Stumbler:MLSLocationGetter(23764): at org.mozilla.mozstumbler.client.mapview.MLSLocationGetter.doInBackground$44e62fb4(MLSLocationGetter.java:71)
10-20 11:54:11.198: E/Stumbler:MLSLocationGetter(23764): at org.mozilla.mozstumbler.client.mapview.MLSLocationGetter.doInBackground(MLSLocationGetter.java:26)
10-20 11:54:11.198: E/Stumbler:MLSLocationGetter(23764): at android.os.AsyncTask$2.call(AsyncTask.java:287)
10-20 11:54:11.198: E/Stumbler:MLSLocationGetter(23764): at java.util.concurrent.FutureTask.run(FutureTask.java:234)
10-20 11:54:11.198: E/Stumbler:MLSLocationGetter(23764): at android.os.AsyncTask$SerialExecutor$1.run(AsyncTask.java:230)
10-20 11:54:11.198: E/Stumbler:MLSLocationGetter(23764): at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1080)
10-20 11:54:11.198: E/Stumbler:MLSLocationGetter(23764): at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:573)
10-20 11:54:11.198: E/Stumbler:MLSLocationGetter(23764): at java.lang.Thread.run(Thread.java:841)
10-20 11:54:11.198: I/ObservationPoint(23764): Error:{""timestamp"":1413755486000,""wifi_count"":0,""wifi"":[],""lon"":-122.123379,""cell_count"":1,""altitude"":60,""cell"":[{""asu"":14,""radio"":""0"",""mnc"":260,""psc"":0,""mcc"":310}],""radio"":""gsm"",""accuracy"":14,""lat"":37.957195}

10-20 11:54:12.420: D/Stumbler:HTTPResponse(23764): HTTP Status: 400, Bytes Sent: 167, Bytes received: 106
10-20 11:54:12.420: E/Stumbler:MLSLocationGetter(23764): Error deserializing status from JSON
10-20 11:54:12.420: E/Stumbler:MLSLocationGetter(23764): org.json.JSONException: No value for status
10-20 11:54:12.420: E/Stumbler:MLSLocationGetter(23764): at org.json.JSONObject.get(JSONObject.java:354)
10-20 11:54:12.420: E/Stumbler:MLSLocationGetter(23764): at org.json.JSONObject.getString(JSONObject.java:514)
10-20 11:54:12.420: E/Stumbler:MLSLocationGetter(23764): at org.mozilla.mozstumbler.client.mapview.MLSLocationGetter.doInBackground$44e62fb4(MLSLocationGetter.java:71)
10-20 11:54:12.420: E/Stumbler:MLSLocationGetter(23764): at org.mozilla.mozstumbler.client.mapview.MLSLocationGetter.doInBackground(MLSLocationGetter.java:26)
10-20 11:54:12.420: E/Stumbler:MLSLocationGetter(23764): at android.os.AsyncTask$2.call(AsyncTask.java:287)
10-20 11:54:12.420: E/Stumbler:MLSLocationGetter(23764): at java.util.concurrent.FutureTask.run(FutureTask.java:234)
10-20 11:54:12.420: E/Stumbler:MLSLocationGetter(23764): at android.os.AsyncTask$SerialExecutor$1.run(AsyncTask.java:230)
10-20 11:54:12.420: E/Stumbler:MLSLocationGetter(23764): at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1080)
10-20 11:54:12.420: E/Stumbler:MLSLocationGetter(23764): at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:573)
10-20 11:54:12.420: E/Stumbler:MLSLocationGetter(23764): at java.lang.Thread.run(Thread.java:841)
10-20 11:54:12.430: I/ObservationPoint(23764): Error:{""timestamp"":1413755514000,""wifi_count"":0,""wifi"":[],""lon"":-122.123518,""cell_count"":1,""altitude"":67,""cell"":[{""asu"":14,""radio"":""0"",""mnc"":260,""psc"":0,""mcc"":310}],""radio"":""gsm"",""accuracy"":11,""lat"":37.956794}
```
"
mozilla/MozStumbler,closed,Remove LeaderboardActivity WebView setJavaScriptEnabled,[],"Remove LeaderboardActivity WebView setJavaScriptEnabled
"
mozilla/MozStumbler,closed,883 add privacy policy to about screen,[],"#883
"
mozilla/MozStumbler,closed,"1039 reduce collection rate, changed 10m->30m 1s->2s",[],"#1039
"
mozilla/MozStumbler,closed,Fix observations display,[],"This fixes a bug where the number of observed locations displayed in the map was reset to 0 after device rotation and only updated when a new location was observed.
"
mozilla/MozStumbler,closed,1002: Point draw performance. Use hash of x and y to reduce number of points drawn,[],"For #1002 

This uses a hash to simulate a 2D grid, by hashing on the x and y values combined.
It reduces the number of points drawn at a given zoom level. 
Recalculate each time the zoom level changes. The hash value is based on the x and y pixel, but scaled down to reduce the detail level (and increase collisions and reduce the data). If a particular hash slot is occupied already, then don't draw the point. 
_Note_, I added a bit of logic here, so that if the observation point is ""better"" [i.e. cell+wifi is better than cell], then it takes the hash slot.

Tested on Nexus 5 4.4.4 and Samsung Duos 2.3.6.

Testing is performed with: 
4800 point kml file
https://drive.google.com/file/d/0B1sYPwjczMsQM1VDdXdacGpDdEE/view?usp=sharing

Put it in: sdcard/Android/data/org.mozilla.mozstumbler/files

The go to load KML in the app.
"
mozilla/MozStumbler,closed,Reduce collection frequency on stumbler,[],"We need to reduce the collection frequency on the stumbler down to ~30m.  We don't want ichnaea to keel over on initial google playstore release.

cc/ @hannosch 
"
mozilla/MozStumbler,closed,EOF error in log,[],"Maybe another issue you want to fix before the 1.0 release/milestone:
![log](https://cloud.githubusercontent.com/assets/5685512/4699652/d60d1378-5843-11e4-9a17-07352e033936.png)

cannot provide any information on how to reproduce this, yet, because this was my first run since a month or so ago that really worked (using 0.40.4.0).
Happended at the end of the run during upload

maybe I'm able to recognize some behaviour/make a cat log the next time it happens

btw. I have a question: is this uploaded together with crash logs, or are crash logs, crash logs only?
and are those crash-logs being uploaded during/after uploading reports?
"
mozilla/MozStumbler,closed,Fix map resolution info text,[],"This fixes a bug where the info text never changed back from ""Map display off"" to ""Low resolution map"", and it adds a reminder when the config is set to other than default.
"
mozilla/MozStumbler,closed,Fix toolbar not undimming on start,[],
mozilla/MozStumbler,closed,Philippines mapping,[],"apologies for this as I know it is not an issue per say but more a question and not sure of a mozstumbler mailing list to ask on.

Can anyone explain the star like mapping that occurs coming out from Manila and into the sea?

https://location.services.mozilla.com/map#7/14.881/120.795
"
mozilla/MozStumbler,closed,No geofencing?,[],"#1012 was committed, which seems to ""solve"" #93, but due to #791, my usecase of launching the app early (via tasker) then toggling it ""on"" manually after leaving the geofenced area is broken.
"
mozilla/MozStumbler,closed,Minor changes and update translate,[],"Update spanish translate including #1030 changes
More accessibility in email field
"
mozilla/MozStumbler,closed,Spanish update,[],"Update spanish translate including #1030 changes
"
mozilla/MozStumbler,closed,Update Reporter to send flushed bundles to ObservedLocationsReceiver,[],"This fixes the case that green dots are drawn on the map when there are no cell/wifi observations, see #996.
I think it also cleans up the data flow and fixes another glitch.
This way `ObservedLocationsReceiver` will get the location that is currently being observed from the GPS, but only adds observations to the map when they are validated and flushed by the `Reporter`.
"
mozilla/MozStumbler,closed,1027: string changes: Sent (all time) -> All Sessions,[],"Also, change another instance of the word observation to report

Issue #1027
"
mozilla/MozStumbler,open,Disable upload button in metrics when all numbers are zero,"[Label(name=""UI/UX"")]","Render the upload button in a disabled state when there is nothing to send (or optionally, hide the entire section).
"
mozilla/MozStumbler,closed,Ensure that string length in metrics will survive L10n,[],"The layout of the metrics table is a little tight. What will happen when longer strings are introduced?
"
mozilla/MozStumbler,closed,Rename “Sent (all time)” to “All sessions”,[],"In the metrics panel, rename “Sent (all time)” to “All sessions” to make more consistent with previous “This session” heading.
"
mozilla/MozStumbler,closed,1023 - Failing to check for null service onStart and onStop,[],"When the app starts with <15% battery, it immediately gets notified and
then calls onStop before the service is created, and crashed on a null
pointer.

Issue #1023
"
mozilla/MozStumbler,closed,Get F-Droid build updated to 0.40.x,[],"F-Droid currently only has 0.30, we should get this updated to get some testing from F-Droid users prior to the play store release
"
mozilla/MozStumbler,closed,Get robolectric tests to verify that Service pointers for NULL are properly checked,[],"We can instantiate activities and services with robolectric test cases. 

The testcase should emit intents against MainApp and verify that NPE are not triggered.
"
mozilla/MozStumbler,closed,"MainApp::onStop crashes (if battery <15%, app crash on startup)","[Label(name=""bug"")]","Reference to the StumblerService in MainApp::onStop doesn't check for null properly.

```
java.lang.RuntimeException: Error receiving broadcast Intent { act=org.mozilla.mozstumbler.turnMeOff flg=0x10 } in org.mozilla.mozstumbler.client.MainApp$ServiceBroadcastReceiver@41818b20
at android.app.LoadedApk$ReceiverDispatcher$Args.run(LoadedApk.java:798)
at android.os.Handler.handleCallback(Handler.java:800)
at android.os.Handler.dispatchMessage(Handler.java:100)
at android.os.Looper.loop(Looper.java:194)
at android.app.ActivityThread.main(ActivityThread.java:5392)
at java.lang.reflect.Method.invokeNative(Native Method)
at java.lang.reflect.Method.invoke(Method.java:525)
at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:833)
at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:600)
at dalvik.system.NativeStart.main(Native Method)
Caused by: java.lang.NullPointerException
at org.mozilla.mozstumbler.client.MainApp.stopScanning(MainApp.java:240)
at org.mozilla.mozstumbler.client.MainApp$ServiceBroadcastReceiver.onReceive(MainApp.java:309)
at android.app.LoadedApk$ReceiverDispatcher$Args.run(LoadedApk.java:788)
... 9 more
java.lang.NullPointerException
at org.mozilla.mozstumbler.client.MainApp.stopScanning(MainApp.java:240)
at org.mozilla.mozstumbler.client.MainApp$ServiceBroadcastReceiver.onReceive(MainApp.java:309)
at android.app.LoadedApk$ReceiverDispatcher$Args.run(LoadedApk.java:788)
at android.os.Handler.handleCallback(Handler.java:800)
at android.os.Handler.dispatchMessage(Handler.java:100)
at android.os.Looper.loop(Looper.java:194)
at android.app.ActivityThread.main(ActivityThread.java:5392)
at java.lang.reflect.Method.invokeNative(Native Method)
at java.lang.reflect.Method.invoke(Method.java:525)
at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:833)
at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:600)
at dalvik.system.NativeStart.main(Native Method)
```
"
mozilla/MozStumbler,closed,LENOVO Lenovo Lenovo A316i doesn't work,[],"We're seeing crashes from this device running Android 4.4.4.

This error is happening deep inside of Android and looks like a firmware bug from Lenovo.

```
java.lang.NoClassDefFoundError: android.app.ANRManagerProxy
at android.app.ANRManagerNative.asInterface(ANRManagerNative.java:30)
at android.app.ANRManagerNative$1.create(ANRManagerNative.java:94)
at android.app.ANRManagerNative$1.create(ANRManagerNative.java:88)
at android.util.Singleton.get(Singleton.java:34)
at android.app.ANRManagerNative.getDefault(ANRManagerNative.java:37)
at android.os.MessageLogger.dump(MessageLogger.java:253)
at android.app.ANRAppManager.dumpMessageHistory(SourceFile:38)
at android.app.ActivityThread$ApplicationThread.dumpMessageHistory(ActivityThread.java:1176)
at android.app.ApplicationThreadNative.onTransact(ApplicationThreadNative.java:609)
at android.os.Binder.execTransact(Binder.java:351)
at dalvik.system.NativeStart.run(Native Method)
```

**Updated**: I pasted in the wrong stacktrace
"
mozilla/MozStumbler,closed,Period Wake to Scan,"[Label(name=""Power Consumption"")]","As a feature it would be nice of we could set Mozstumbler to wake once every 5, 10, 15, 30, 60, 120, 360 minutes and auto scan for a short interval of time.

It would also be nice if we could have periodic wake triggered by GPS calls from other apps or when charging.

Apps like Sensorly and OoenSignal do this as does Rootmetrics.
"
mozilla/MozStumbler,closed,Massive update zh-TW localization,[],
mozilla/MozStumbler,closed,Show number of unique cells/wifis scanned during session in metrics,[],"Those numbers were previously displayed on the main screen and are not available anymore
"
mozilla/MozStumbler,closed,Strings in layout file,"[Label(name=""bug"")]","Why is there a string missplaced in a layout file?
It is supposed to be in the strings.xml that is translatable.

https://github.com/mozilla/MozStumbler/blob/dev/android/src/main/res/layout/fragment_kml.xml
"
mozilla/MozStumbler,closed,fix some hints found by Android Studio code inspection,[],
mozilla/MozStumbler,closed,Modify the build so that AndroidManifest.xml is updated as an intermediate,"[Label(name=""Good first bug""), Label(name=""enhancement"")]","We should change the build to rewrite versionName and versionCode in an intermediate diretory so that we aren't constantly committing/ignoring the AndroidManifest.xml file.

There's some sample code from here that we can re-use:

https://github.com/mozilla/MozStumbler/blob/09ba72c6de23b4fcba9bae3f89252e334e1d4b98/android/build.gradle
"
mozilla/MozStumbler,closed,Another merge problem revealed an uninitialized weak reference. ,[],"Code was moved to post create that needs to happen earlier. Made sure reference is initialized properly.
Sorry for the hassles @crankycoder, this required yanking the build.
 I'll see if your handle lives up to your name.
"
mozilla/MozStumbler,closed,"Bad merge, not supposed to have onstop and onpause, just the latter",[],
mozilla/MozStumbler,closed,Low res dev switch,[],"This is just a updated merge of dev into #1003
"
mozilla/MozStumbler,closed,Start scanning after first booting the app,[],"Also cleaned up some of the start/stop button logic

Addresses issue #948. With the addition that after ANY cold boot, it will toggle on. After that if the user turns the switch off, then hides and shows the app, the switch will stay off.
"
mozilla/MozStumbler,closed,958 - UX renaming to match terminology on Ichnaea,[],"issue #958
"
mozilla/MozStumbler,closed,958 UX rename to match terminology on Ichnaea,[],"https://github.com/mozilla/MozStumbler/issues/958
"
mozilla/MozStumbler,closed,975 - fixed jumping to anchor for a nick,[],"but if no nick stem we need this ichnaea bug fixed:
https://github.com/mozilla/ichnaea/issues/327
to jump to the start of the leaderboard.

For issue #975
"
mozilla/MozStumbler,closed,"Issue 943, battery low bug, fix intent sending",[],"issue #943
"
mozilla/MozStumbler,closed,1006 Added extra guards against NPE,[],"This is for issue #1006
@crankycoder r?
"
mozilla/MozStumbler,closed,NPE in PreferencesScreen,"[Label(name=""bug"")]","This is pretty odd, it looks like it's throwing a NPE when trying to grab a pointer to the application.

Crash:

```
org.mozilla.mozstumbler.client.subactivities.PreferencesScreen$4.onPreferenceClick(PreferencesScreen.java:99)
```

https://github.com/mozilla/MozStumbler/blob/v0.40.1.0/android/src/main/java/org/mozilla/mozstumbler/client/subactivities/PreferencesScreen.java#L99

```
java.lang.NullPointerException
at org.mozilla.mozstumbler.client.subactivities.PreferencesScreen$4.onPreferenceClick(PreferencesScreen.java:99)
at android.preference.Preference.performClick(Preference.java:941)
at android.preference.PreferenceScreen.onItemClick(PreferenceScreen.java:202)
at android.widget.AdapterView.performItemClick(AdapterView.java:292)
at android.widget.AbsListView.performItemClick(AbsListView.java:1070)
at android.widget.AbsListView$PerformClick.run(AbsListView.java:2527)
at android.widget.AbsListView$1.run(AbsListView.java:3188)
at android.os.Handler.handleCallback(Handler.java:605)
at android.os.Handler.dispatchMessage(Handler.java:92)
at android.os.Looper.loop(Looper.java:137)
at android.app.ActivityThread.main(ActivityThread.java:4424)
at java.lang.reflect.Method.invokeNative(Native Method)
at java.lang.reflect.Method.invoke(Method.java:511)
at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:817)
at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:584)
at de.robv.android.xposed.XposedBridge.main(XposedBridge.java:110)
at dalvik.system.NativeStart.main(Native Method)
```
"
mozilla/MozStumbler,closed,Changed the dependency for SimpleKML to use ivy,[],"We have an ivy repository for mozilla-services thanks to @st3fan now.

woot!
"
mozilla/MozStumbler,closed,993 - add proper guards around the Reporter to limit wifi and cellular data per location,[],"This should fix #993 

It's possible that a stumble bundle is created with an initial GPS fix, and subsequent wifi and cell data is attached to that bundle - but no subsequent GPS events occur.

In this case, the Reporter did not properly guard against limiting the total number of wifi or cell records in the bundle allowing the bundle to grow without bound.

This patch adds tests and code to verify that those guards are properly honored.
"
mozilla/MozStumbler,closed,"Developer options: added map tile option (low res, high res, no tiles)",[],"- d8e1faa can be ignored (that commit is from https://github.com/mozilla/MozStumbler/pull/998), that is part of a merge, as I based the later changes off the changes in that commit.
- Also, cleaned up this code, moved crash reporting out of kml options
- No more toast, on low/high resolution switch, show a message on the map instead
"
mozilla/MozStumbler,closed,Map behaves poorly when there are lots of scan points marked on the map,"[Label(name=""bug"")]",
mozilla/MozStumbler,closed,"Fix NPE, make sure ClientPrefs exists at all times",[],"https://github.com/mozilla/MozStumbler/issues/997
"
mozilla/MozStumbler,closed,Fix statistics in map in RTL,[],"Statistics displayed above the map are not visible in RTL languages.
"
mozilla/MozStumbler,closed,save empty email,[],"This fixes #694 
"
mozilla/MozStumbler,closed,Reduce bandwidth at low zoom level: 'trick' the map into showing lower zoom levels.,[],"For example, if the map is at zoom level x, show the tiles for x - 4. I don't do this exactly.

This code has a low/high zoom level switch, at
the high zoom level, behave as before this commit; at the low zoom
level, trick the map into showing very low resolution tiles, so only a
few tiles need loading to cover the map area.
"
mozilla/MozStumbler,closed,NPE while starting the PreferencesScreen,[],"Crash on line: 

```
org.mozilla.mozstumbler.client.subactivities.PreferencesScreen.onCreate(PreferencesScreen.java:55)
```

https://github.com/mozilla/MozStumbler/blob/v0.40.1.0/android/src/main/java/org/mozilla/mozstumbler/client/subactivities/PreferencesScreen.java#L55

```
java.lang.RuntimeException: Unable to start activity ComponentInfo{org.mozilla.mozstumbler/org.mozilla.mozstumbler.client.subactivities.PreferencesScreen}: java.lang.NullPointerException
at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2394)
at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2446)
at android.app.ActivityThread.access$600(ActivityThread.java:165)
at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1373)
at android.os.Handler.dispatchMessage(Handler.java:107)
at android.os.Looper.loop(Looper.java:194)
at android.app.ActivityThread.main(ActivityThread.java:5434)
at java.lang.reflect.Method.invokeNative(Native Method)
at java.lang.reflect.Method.invoke(Method.java:525)
at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:834)
at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:601)
at dalvik.system.NativeStart.main(Native Method)
Caused by: java.lang.NullPointerException
at org.mozilla.mozstumbler.client.subactivities.PreferencesScreen.onCreate(PreferencesScreen.java:55)
at android.app.Activity.performCreate(Activity.java:5121)
at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1146)
at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2358)
... 11 more
java.lang.NullPointerException
at org.mozilla.mozstumbler.client.subactivities.PreferencesScreen.onCreate(PreferencesScreen.java:55)
at android.app.Activity.performCreate(Activity.java:5121)
at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1146)
at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2358)
at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2446)
at android.app.ActivityThread.access$600(ActivityThread.java:165)
at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1373)
at android.os.Handler.dispatchMessage(Handler.java:107)
at android.os.Looper.loop(Looper.java:194)
at android.app.ActivityThread.main(ActivityThread.java:5434)
at java.lang.reflect.Method.invokeNative(Native Method)
at java.lang.reflect.Method.invoke(Method.java:525)
at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:834)
at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:601)
at dalvik.system.NativeStart.main(Native Method)
```
"
mozilla/MozStumbler,closed,Use different color for points with no data,[],"Currently, points that have WiFi and cell data are drawn in green, just as well as points that have no observed network data. This changes it so that points with no observed network data are drawn in gray.
This needs #991 to work well.
"
mozilla/MozStumbler,closed,Fix for #982 - null pointer on setting start/stop menu item,[],"This should fix #982
"
mozilla/MozStumbler,closed,Fix for #981 when the android framework returns NULL for getActivity(),[],"This fixes #981 
"
mozilla/MozStumbler,closed,OutOfMemoryError finalizing reports,"[Label(name=""bug"")]","Crash while generating JSON:

```
org.mozilla.mozstumbler.service.stumblerthread.datahandling.DataStorageManager.finalizeReports(DataStorageManager.java:417)
```

https://github.com/mozilla/MozStumbler/blob/v0.40.1.0/android/src/main/java/org/mozilla/mozstumbler/service/stumblerthread/datahandling/DataStorageManager.java#L417

```
java.lang.OutOfMemoryError
at java.lang.String.<init>(String.java:422)
at java.lang.AbstractStringBuilder.toString(AbstractStringBuilder.java:642)
at java.lang.StringBuilder.toString(StringBuilder.java:663)
at org.mozilla.mozstumbler.service.stumblerthread.datahandling.DataStorageManager.finalizeReports(DataStorageManager.java:417)
at org.mozilla.mozstumbler.service.stumblerthread.datahandling.DataStorageManager.saveCurrentReportsToDisk(DataStorageManager.java:429)
at org.mozilla.mozstumbler.service.stumblerthread.datahandling.DataStorageManager.insert(DataStorageManager.java:448)
at org.mozilla.mozstumbler.service.stumblerthread.Reporter.flush(Reporter.java:259)
at org.mozilla.mozstumbler.service.stumblerthread.Reporter.onReceive(Reporter.java:188)
at android.support.v4.content.LocalBroadcastManager.executePendingBroadcasts(LocalBroadcastManager.java:297)
at android.support.v4.content.LocalBroadcastManager.sendBroadcastSync(LocalBroadcastManager.java:278)
at org.mozilla.mozstumbler.service.stumblerthread.scanners.GPSScanner$1.onNmeaReceived(GPSScanner.java:94)
at android.location.LocationManager$GpsStatusListenerTransport$1.handleMessage(LocationManager.java:1432)
at android.os.Handler.dispatchMessage(Handler.java:99)
at android.os.Looper.loop(Looper.java:152)
at android.app.ActivityThread.main(ActivityThread.java:5136)
at java.lang.reflect.Method.invokeNative(Native Method)
at java.lang.reflect.Method.invoke(Method.java:525)
at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:744)
at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
at dalvik.system.NativeStart.main(Native Method)
```
"
mozilla/MozStumbler,closed,fix NullPointer,[],"@crankycoder is this all it needs to fix #985 ?
"
mozilla/MozStumbler,closed, Cell/WiFi count is only set when the MLS layer is enabled,[],"Currently the cell/WiFi count is only set when the MLS layer is enabled. As a result the points overlay always draws the green dot icon, never any cell/WiFi only icon.
"
mozilla/MozStumbler,closed,Metrics drawer cleanup,[],"improve alignment of items, also in RTL

before:
![1_dev_](https://cloud.githubusercontent.com/assets/3845150/4606103/ecca667e-520d-11e4-97a8-d4f4321e8e9d.png)

after:
![2_cleanup_](https://cloud.githubusercontent.com/assets/3845150/4606104/f4719050-520d-11e4-8638-f556d0c8ae1b.png)
"
mozilla/MozStumbler,closed,0.40.1.0 upload errors,[],"it is possible I am interpreting the logs but I see constant upload errors on all versions (0.2x, 0.3x, 0.4x).

Most recently I have upgraded to 0.40.1.0 and after a 20 minute mapping session (and 60Mb of data used :( #970 ) I got home and tried to upload the capture.  I pressed the upload and the queue is cleared instantly.

in the logs I see the following

```
<timestamp>: MLS Submit: [HTTP Status:204], [Bytes Sent:241]
<timestamp>: HTTP non-success code: 400, Error, deleting bad report
```

The 2nd line gets repeated 14 times 
"
mozilla/MozStumbler,closed,check if WiFi is mobile hotspot,[],"WiFi can be declared as mobile hotspot, you might want to check that case. I am not sure how `ConnectivityManager.isActiveNetworkMetered()` works for mobile data connections, so I leave the type comparison.
"
mozilla/MozStumbler,closed,Add new translation strings and corrections,[],
mozilla/MozStumbler,closed,980 - fix the listener for the on/off switch,[],"This fixes #980.

Changes the toggle switch to use onCheckedChanged() which corrects tap vs swipe gestures on the on/off switch.
"
mozilla/MozStumbler,closed,NullPointer exception on receiving intent,"[Label(name=""bug"")]","Related to, but not the same as #981 

Crash occurs during network connectivity change:

```
org.mozilla.mozstumbler.client.mapview.MapActivity.mapNetworkConnectionChanged(MapActivity.java:343)
```

https://github.com/mozilla/MozStumbler/blob/v0.40.1.0/android/src/main/java/org/mozilla/mozstumbler/client/mapview/MapActivity.java#L343

```
java.lang.RuntimeException: Error receiving broadcast Intent { act=android.net.conn.CONNECTIVITY_CHANGE flg=0x10000010 (has extras) } in org.mozilla.mozstumbler.client.mapview.MapActivity$5@40dfaa98
at android.app.LoadedApk$ReceiverDispatcher$Args.run(LoadedApk.java:794)
at android.os.Handler.handleCallback(Handler.java:608)
at android.os.Handler.dispatchMessage(Handler.java:92)
at android.os.Looper.loop(Looper.java:156)
at android.app.ActivityThread.main(ActivityThread.java:4987)
at java.lang.reflect.Method.invokeNative(Native Method)
at java.lang.reflect.Method.invoke(Method.java:511)
at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
at dalvik.system.NativeStart.main(Native Method)
Caused by: java.lang.NullPointerException
at org.mozilla.mozstumbler.client.mapview.MapActivity.mapNetworkConnectionChanged(MapActivity.java:343)
at org.mozilla.mozstumbler.client.mapview.MapActivity.access$900(MapActivity.java:62)
at org.mozilla.mozstumbler.client.mapview.MapActivity$5.onReceive(MapActivity.java:357)
at android.app.LoadedApk$ReceiverDispatcher$Args.run(LoadedApk.java:781)
... 9 more
java.lang.NullPointerException
at org.mozilla.mozstumbler.client.mapview.MapActivity.mapNetworkConnectionChanged(MapActivity.java:343)
at org.mozilla.mozstumbler.client.mapview.MapActivity.access$900(MapActivity.java:62)
at org.mozilla.mozstumbler.client.mapview.MapActivity$5.onReceive(MapActivity.java:357)
at android.app.LoadedApk$ReceiverDispatcher$Args.run(LoadedApk.java:781)
at android.os.Handler.handleCallback(Handler.java:608)
at android.os.Handler.dispatchMessage(Handler.java:92)
at android.os.Looper.loop(Looper.java:156)
at android.app.ActivityThread.main(ActivityThread.java:4987)
at java.lang.reflect.Method.invokeNative(Native Method)
at java.lang.reflect.Method.invoke(Method.java:511)
at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
at dalvik.system.NativeStart.main(Native Method)
```
"
mozilla/MozStumbler,closed,#932 - Removes the XYTileSource and enables the MapBoxTileSource,[],"This fixes #932.

The MapBoxTileSource randomly pulls from one of four different tile servers which should be more responsive.

The gradle build has been modified in a strange way, but it's been commented.
"
mozilla/MozStumbler,open,widget support,"[Label(name=""enhancement"")]","widgets should implemented, I think
there are probably lots of people that use them still.

we could show stats

this is similar to #476 but would work on older android versions as well ;)
"
mozilla/MozStumbler,closed,NullPointer while starting a component,"[Label(name=""bug"")]","Crash occurs at:

```
org.mozilla.mozstumbler.client.navdrawer.MainDrawerActivity.setStartStopMenuItemState(MainDrawerActivity.java:140)
```

https://github.com/mozilla/MozStumbler/blob/v0.40.1.0/android/src/main/java/org/mozilla/mozstumbler/client/navdrawer/MainDrawerActivity.java#L140

```
java.lang.RuntimeException: Unable to start activity ComponentInfo{org.mozilla.mozstumbler/org.mozilla.mozstumbler.client.navdrawer.MainDrawerActivity}: java.lang.NullPointerException
at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2114)
at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2139)
at android.app.ActivityThread.access$700(ActivityThread.java:143)
at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1241)
at android.os.Handler.dispatchMessage(Handler.java:99)
at android.os.Looper.loop(Looper.java:137)
at android.app.ActivityThread.main(ActivityThread.java:4960)
at java.lang.reflect.Method.invokeNative(Native Method)
at java.lang.reflect.Method.invoke(Method.java:511)
at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:1038)
at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:805)
at dalvik.system.NativeStart.main(Native Method)
Caused by: java.lang.NullPointerException
at org.mozilla.mozstumbler.client.navdrawer.MainDrawerActivity.setStartStopMenuItemState(MainDrawerActivity.java:140)
at org.mozilla.mozstumbler.client.navdrawer.MainDrawerActivity.onCreateOptionsMenu(MainDrawerActivity.java:132)
at android.app.Activity.onCreatePanelMenu(Activity.java:2554)
at android.support.v4.app.FragmentActivity.onCreatePanelMenu(FragmentActivity.java:224)
at android.support.v7.app.ActionBarActivity.superOnCreatePanelMenu(ActionBarActivity.java:232)
at android.support.v7.app.ActionBarActivityDelegateICS.onCreatePanelMenu(ActionBarActivityDelegateICS.java:146)
at android.support.v7.app.ActionBarActivity.onCreatePanelMenu(ActionBarActivity.java:199)
at android.support.v7.app.ActionBarActivityDelegateICS$WindowCallbackWrapper.onCreatePanelMenu(ActionBarActivityDelegateICS.java:293)
at com.android.internal.policy.impl.PhoneWindow.preparePanel(PhoneWindow.java:455)
at com.android.internal.policy.impl.PhoneWindow.invalidatePanelMenu(PhoneWindow.java:835)
at com.android.internal.policy.impl.PhoneWindow.restorePanelState(PhoneWindow.java:1910)
at com.android.internal.policy.impl.PhoneWindow.restoreHierarchyState(PhoneWindow.java:1860)
at android.app.Activity.onRestoreInstanceState(Activity.java:973)
at android.app.Activity.performRestoreInstanceState(Activity.java:945)
at android.app.Instrumentation.callActivityOnRestoreInstanceState(Instrumentation.java:1145)
at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2092)
... 11 more
java.lang.NullPointerException
at org.mozilla.mozstumbler.client.navdrawer.MainDrawerActivity.setStartStopMenuItemState(MainDrawerActivity.java:140)
at org.mozilla.mozstumbler.client.navdrawer.MainDrawerActivity.onCreateOptionsMenu(MainDrawerActivity.java:132)
at android.app.Activity.onCreatePanelMenu(Activity.java:2554)
at android.support.v4.app.FragmentActivity.onCreatePanelMenu(FragmentActivity.java:224)
at android.support.v7.app.ActionBarActivity.superOnCreatePanelMenu(ActionBarActivity.java:232)
at android.support.v7.app.ActionBarActivityDelegateICS.onCreatePanelMenu(ActionBarActivityDelegateICS.java:146)
at android.support.v7.app.ActionBarActivity.onCreatePanelMenu(ActionBarActivity.java:199)
at android.support.v7.app.ActionBarActivityDelegateICS$WindowCallbackWrapper.onCreatePanelMenu(ActionBarActivityDelegateICS.java:293)
at com.android.internal.policy.impl.PhoneWindow.preparePanel(PhoneWindow.java:455)
at com.android.internal.policy.impl.PhoneWindow.invalidatePanelMenu(PhoneWindow.java:835)
at com.android.internal.policy.impl.PhoneWindow.restorePanelState(PhoneWindow.java:1910)
at com.android.internal.policy.impl.PhoneWindow.restoreHierarchyState(PhoneWindow.java:1860)
at android.app.Activity.onRestoreInstanceState(Activity.java:973)
at android.app.Activity.performRestoreInstanceState(Activity.java:945)
at android.app.Instrumentation.callActivityOnRestoreInstanceState(Instrumentation.java:1145)
at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2092)
at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2139)
at android.app.ActivityThread.access$700(ActivityThread.java:143)
at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1241)
at android.os.Handler.dispatchMessage(Handler.java:99)
at android.os.Looper.loop(Looper.java:137)
at android.app.ActivityThread.main(ActivityThread.java:4960)
at java.lang.reflect.Method.invokeNative(Native Method)
at java.lang.reflect.Method.invoke(Method.java:511)
at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:1038)
at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:805)
at dalvik.system.NativeStart.main(Native Method)
```
"
mozilla/MozStumbler,closed,NullPointer exception on receiving intent,"[Label(name=""bug"")]","Crash occurs

```
org.mozilla.mozstumbler.client.mapview.MapActivity.mapNetworkConnectionChanged(MapActivity.java:332)
```

https://github.com/mozilla/MozStumbler/blob/v0.40.1.0/android/src/main/java/org/mozilla/mozstumbler/client/mapview/MapActivity.java#L332

```
java.lang.RuntimeException: Error receiving broadcast Intent { act=android.net.conn.CONNECTIVITY_CHANGE flg=0x10000000 (has extras) } in org.mozilla.mozstumbler.client.mapview.MapActivity$5@4089a2e8
at android.app.LoadedApk$ReceiverDispatcher$Args.run(LoadedApk.java:722)
at android.os.Handler.handleCallback(Handler.java:587)
at android.os.Handler.dispatchMessage(Handler.java:92)
at android.os.Looper.loop(Looper.java:130)
at android.app.ActivityThread.main(ActivityThread.java:3687)
at java.lang.reflect.Method.invokeNative(Native Method)
at java.lang.reflect.Method.invoke(Method.java:507)
at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:867)
at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:625)
at dalvik.system.NativeStart.main(Native Method)
Caused by: java.lang.NullPointerException
at org.mozilla.mozstumbler.client.mapview.MapActivity.mapNetworkConnectionChanged(MapActivity.java:332)
at org.mozilla.mozstumbler.client.mapview.MapActivity.access$900(MapActivity.java:62)
at org.mozilla.mozstumbler.client.mapview.MapActivity$5.onReceive(MapActivity.java:357)
at android.app.LoadedApk$ReceiverDispatcher$Args.run(LoadedApk.java:709)
... 9 more
java.lang.NullPointerException
at org.mozilla.mozstumbler.client.mapview.MapActivity.mapNetworkConnectionChanged(MapActivity.java:332)
at org.mozilla.mozstumbler.client.mapview.MapActivity.access$900(MapActivity.java:62)
at org.mozilla.mozstumbler.client.mapview.MapActivity$5.onReceive(MapActivity.java:357)
at android.app.LoadedApk$ReceiverDispatcher$Args.run(LoadedApk.java:709)
at android.os.Handler.handleCallback(Handler.java:587)
at android.os.Handler.dispatchMessage(Handler.java:92)
at android.os.Looper.loop(Looper.java:130)
at android.app.ActivityThread.main(ActivityThread.java:3687)
at java.lang.reflect.Method.invokeNative(Native Method)
at java.lang.reflect.Method.invoke(Method.java:507)
at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:867)
at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:625)
at dalvik.system.NativeStart.main(Native Method)
```
"
mozilla/MozStumbler,closed,On/Off switch behaves weird,"[Label(name=""bug"")]","I was convinced that MozStumbler 0.40+ is completely nonfunctional because of the way the on/off switch (mis)behaves:
When I _move_ the switch off-> on, nothing happens, except the switch is turned on. I just realized I have to _tap_ it, then MozStumbler is actually activated.
It's a Sumsum Galaxy S4 mini (i9195) with CM11 nightly from 10th October.
"
mozilla/MozStumbler,closed,Add a paranoid logging mode,[],"It's sometimes difficult to reproduce errors because of a number of problems:
- Android is inconsistent.  We've seen devices that collect NMEA data, others that don't.
- ichnaea itself is also a limiting factor.  The server does a JSON schema validation, and will return a 20x success response to the client.  The user of MozStumbler has a reasonable expectation that the data is 'valid'.  However, ichnaea does other kinds of data level validation in an asynchronous worker pool which may invalidate those collections.

I propose that we add a paranoid logging mode where we simply keep all the stumble records on the filesystem so that we can analyze the raw data.  I don't see any other way of debugging problems that are happening in the ichnaea worker pool.

This preference should be defaulted to OFF as it's going to eat storage space, but we also need to have a reasonable maximum storage cap.  As it stands, we gzip all data already - so I think setting something like a 5MB collection size is reasonable.  Any larger than that and I doubt we'd be able to do any kind of analysis anyway.
"
mozilla/MozStumbler,closed,should we switch the map library? (after 1.0),"[Label(name=""question"")]","I think after the 1.0 release we should debate about whether we keep osmdroid or switch to a different library, since it seemed to me like it produced lots of issues in the past and doesn't bring the needed performance
I heard of issues with map layers
#976, too, but it's a small issue

libraries I've found so far:
- libosmscout http://wiki.openstreetmap.org/wiki/Libosmscout
- opentouchmap http://www.opentouchmap.org/ (webview, I think)
- nutiteq www.nutiteq.com/

Nutiteq looks the most interesting to me.
It's native and supports a lot of stuff (including vector graphics).
It supports older Android versions as well as newer ones.
"
mozilla/MozStumbler,open,show map stats,"[Label(name=""enhancement"")]","the map should show stats like the scale and/or the zoom level IMO

the website shows the scale as well
"
mozilla/MozStumbler,closed,zoom buttons appear on opening sidebar,"[Label(name=""Good first bug""), Label(name=""bug"")]","the gingerbread style zoom buttons of osmdroid appear every time I want to access the sidebar by using the swype gesture

is there a way to prevent this or is it an issue of OSMdroid?
"
mozilla/MozStumbler,closed,the leaderboard doesn't jump to your nickname anymore,[],"the leaderboard doesn't jump to your nickname anymore since it got integrated into the app using the webview component
either you are not forwarding the anchor or the webview component doesn't render it correctly
"
mozilla/MozStumbler,open,show whether stumbler is able to scan wifi and/or cells,"[Label(name=""enhancement"")]","there should be an evidence if the stumbler isn't able to scan for wifi/cell whether it be because of:
- wifi is turned off and the always scan setting isn't enabled
- airplane mode is on
- a wifi hotspot is running on the antenna

maybe we could grey out the icons or make them red like the GPS is at the beginning

EDIT:
there should be listeners so that the stumbler realizes after the start/during scanning that the wifi antenna (or something else) is available again
"
mozilla/MozStumbler,closed,no fixed/visible satellites counter anymore and no evidence of an established GPS connection,[],"since 0.40.0 it is not possible anymore to see the number of fixed as well as visible satellites anymore

and it is impossible to see whether the device lost the GPS connection without moving and taking a look at the map/log at the same time
"
mozilla/MozStumbler,closed,Need to clear the pref for crash reporting and default it to false for release,[],
mozilla/MozStumbler,closed,User agent now has device and build info,[],"New PR based on discussion:
https://github.com/mozilla/MozStumbler/pull/969
"
mozilla/MozStumbler,closed,"""no-map"" mode",[],"Isn't it possible to have the old interface where no map is visible when we only want to record locations?

It would be good if MozStumbler could also avoid downloading anything (the maps) when I want only to scan locations.
"
mozilla/MozStumbler,closed,add build and os info to user agent,[],"Looks like this:
google/hammerhead/hammerhead:4.4.4/KTU84P/1227136:user/release-keys__MozStumbler/0.40.0.0
"
mozilla/MozStumbler,closed,User agent: add android device info,"[Label(name=""enhancement"")]",
mozilla/MozStumbler,closed,Features/934 acralyzer,[],"This should close off #934

Adds ACRA crash reporting and build changes required to pull in ACRA_URI, ACRA, USER and ACRA_PASS from private.properties.
"
mozilla/MozStumbler,closed,Store osmdroid tiles in cache dir,[],"Fixes #955 
"
mozilla/MozStumbler,closed,"""Using high/low resolution map"" notification is displayed even when MozStumbler is running in the background",[],"Do we really need to notify the user when we're switching between high and low resolution tiles? Why does the user care? They should be accustomed to map apps swapping in different resolution tiles. :)
"
mozilla/MozStumbler,closed,"Fix lifespan with ""Don't keep activities"" on",[],"- This option simulates low memory states where non-visible activities are destroyed rather than backgrounded. Well-behaved apps should pass this test without issues.
- Required changing fragment creation, and properly handling onDestroy to
  avoid tons of warning messages in the logs
- _May_ be a serious issue on old devices, which actually do destroy activities more aggressively.
- Previously, because we didn't have proper lifecycle management, the main activity was set in the manifest to not re-create on orientation changed. Removed this requirement.
"
mozilla/MozStumbler,closed,"When switching OSMDroid tile providers, we get receiver leakage",[],"E/ActivityThread(  802): Activity org.mozilla.mozstumbler.client.navdrawer.MainDrawerActivity has leaked IntentReceiver org.osmdroid.tileprovider.modules.MapTileFileStorageProviderBase$MyBroadcastReceiver@407439d8 that was originally registered here. Are you missing a call to unregisterReceiver()?
E/ActivityThread(  802): android.app.IntentReceiverLeaked: Activity org.mozilla.mozstumbler.client.navdrawer.MainDrawerActivity has leaked IntentReceiver org.osmdroid.tileprovider.modules.MapTileFileStorageProviderBase$MyBroadcastReceiver@407439d8 that was originally registered here. Are you missing a call to unregisterReceiver()?
E/ActivityThread(  802):    at org.mozilla.mozstumbler.client.mapview.tiles.AbstractMapOverlay.<init>(AbstractMapOverlay.java:39)
E/ActivityThread(  802):    at org.mozilla.mozstumbler.client.mapview.tiles.CoverageOverlay.<init>(CoverageOverlay.java:20)
E/ActivityThread(  802):    at org.mozilla.mozstumbler.client.mapview.MapActivity.mapNetworkConnectionChanged(MapActivity.java:335)
E/ActivityThread(  802):    at org.mozilla.mozstumbler.client.mapview.MapActivity.access$900(MapActivity.java:62)
E/ActivityThread(  802):    at org.mozilla.mozstumbler.client.mapview.MapActivity$5.onReceive(MapActivity.java:341)
"
mozilla/MozStumbler,closed,ANR with v0.40.0,[],"Cmd line: org.mozilla.mozstumbler

JNI: CheckJNI is off; workarounds are off; pins=0; globals=489

DALVIK THREADS:
(mutexes: tll=0 tsl=0 tscl=0 ghl=0)

""main"" prio=5 tid=1 SUSPENDED
  | group=""main"" sCount=1 dsCount=0 obj=0x415efca8 self=0x41529408
  | sysTid=29611 nice=0 sched=0/0 cgrp=apps handle=1074540884
  | state=S schedstat=( 205367914473 139158490621 722600 ) utm=18315 stm=2221 core=2
  at java.lang.AbstractStringBuilder.append0(AbstractStringBuilder.java:~138)
  at java.lang.StringBuilder.append(StringBuilder.java:216)
  at org.json.JSONStringer.string(JSONStringer.java:303)
  at org.json.JSONStringer.key(JSONStringer.java:375)
  at org.json.JSONObject.writeTo(JSONObject.java:672)
  at org.json.JSONStringer.value(JSONStringer.java:237)
  at org.json.JSONArray.writeTo(JSONArray.java:602)
  at org.json.JSONStringer.value(JSONStringer.java:233)
  at org.json.JSONObject.writeTo(JSONObject.java:672)
  at org.json.JSONObject.toString(JSONObject.java:641)
  at org.mozilla.mozstumbler.service.stumblerthread.Reporter.flush(Reporter.java:256)
  at org.mozilla.mozstumbler.service.stumblerthread.Reporter.onReceive(Reporter.java:188)
  at android.support.v4.content.LocalBroadcastManager.executePendingBroadcasts(LocalBroadcastManager.java:297)
  at android.support.v4.content.LocalBroadcastManager.sendBroadcastSync(LocalBroadcastManager.java:278)
  at org.mozilla.mozstumbler.service.stumblerthread.scanners.GPSScanner$1.onNmeaReceived(GPSScanner.java:94)
  at android.location.LocationManager$GpsStatusListenerTransport$1.handleMessage(LocationManager.java:1461)
  at android.os.Handler.dispatchMessage(Handler.java:102)
  at android.os.Looper.loop(Looper.java:136)
  at android.app.ActivityThread.main(ActivityThread.java:5001)
  at java.lang.reflect.Method.invokeNative(Native Method)
  at java.lang.reflect.Method.invoke(Method.java:515)
  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:785)
  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:601)
  at dalvik.system.NativeStart.main(Native Method)

full log at https://gist.github.com/kbrosnan/64691de6a2106e4d05a1
"
mozilla/MozStumbler,closed,Making main app the global upload progress listener.,[],"- AsyncUploader now has a static upload listener, this is set once at
  MainApp startup to the MainApp
- also more AsyncUploadListener as sub interface of AsyncUploader, this
  is just one function.
"
mozilla/MozStumbler,closed,UI Reporting is slightly off for 'This Session' KB,"[Label(name=""bug"")]","From left to right here is a sequence that shows the bug.

I started the app fresh (zero for all stats). The second screen shows the observations sent as 1.8 KB, but 'this session' is 1.4 KB. Screen 3 looks ok, and then screen 4 shows the Sent higher than this session again

![screenshot 2014-10-08 14 10 49](https://cloud.githubusercontent.com/assets/5495083/4564340/a974a622-4f16-11e4-98ae-003f4c489e2b.jpg)
"
mozilla/MozStumbler,open,"Better ""observations"" icon","[Label(name=""UI/UX"")]","The new 0.40 build uses looking glasses, which probably should be referring to ""observe"" (and the number next to it is the number of ""observations"". On this screenshot blatantly snatched from another bug report, it is the icon next to the number 70:

![Example screenshot](https://cloud.githubusercontent.com/assets/877181/4551476/e931d618-4e71-11e4-8e3d-537237f083a4.png)

I'd propose changing that term to ""locations"", which is less confusing than ""observations""; the subject we're actually observe are wireless networks. At the same time, replacing the icon by the marker generally used for a location on a map (and which is also the orange part of the stumbler logo) would make it easier to realize what the number represents.

![Marker example in stumbler logo](https://location.services.mozilla.com/static/images/mls-logo.png)
"
mozilla/MozStumbler,closed,Consider changing some key terms in the UI,"[Label(name=""UI/UX"")]","The MozStumbler UI refers to ""Cell towers"", ""WiFi access points"" and ""observations"".

I'd like to suggest to use ""Cell networks"", ""WiFi networks"" and ""reports"" instead to better match the terms used on the service side.

For the first two: We don't actually ever count physical objects like towers, but merely logical networks. In most cases one physical station supports multiple logical networks. But there are also cases like CDMA networks where one logical network is shared across multiple different cell towers.

For ""observations"" we have a semantic conflict with the service side. There are two different things we deal with. One is a lat/lon pair with many attached cell and wifi networks. The other is a single cell/wifi network with attached lat/lon pair.

MozStumbler calls the first thing an observation, while ichnaea calls this a report. MozStumbler doesn't have a term for the ""one cell/wifi at a lat/lon"" construct, but this is what ichnaea calls an observation.

Related to this you get one point on the leaderboard per ""ichnaea report"".
"
mozilla/MozStumbler,closed,Extend osmdroid to support etags when fetching tiles,[],"We need to be able to fetch new tiles if they exist.  This patch mostly affects github.com/mozilla/osmdroid as we need to check the filesystem against the network's etags.

This should remove the need for #955.
"
mozilla/MozStumbler,closed,"Fix count looks good, but no pure-GPS arriving",[],"v0.40.0

Have 13 to 20 satellites visible 0 observations.
"
mozilla/MozStumbler,closed,Store tiles in getExternalCacheDir() (with a fallback to getCacheDir()),"[Label(name=""enhancement"")]","It is not possible to clear the MozStumbler (v0.40.0.0) map cache without clearing all app settings, since map cache is listed as ""Data"".

![mozstumbler](https://cloud.githubusercontent.com/assets/3845150/4557826/bfca611c-4ed7-11e4-8349-51ae16704502.png)
"
mozilla/MozStumbler,open,Should not switch to low-resolution map if high-resolution map is already cached,"[Label(name=""enhancement"")]","MozStumbler (v0.40.0.0) should not switch to low-resolution map if high-resolution map is already cached.
I viewed the map at my current position and the surrounding area using Wifi. Then, as soon as I left my Wifi area, MozStumbler automatically switched to low-resolution map. As a result, it became harder to navigate using the map. Assuming that using the cached high-resolution map does not consume extra mobile data, this is not optimal. I am not sure if it even had to download the low-resolution map over mobile connection then.
Still, it's nice to have it switch to low-resolution maps for uncached map areas automatically.
"
mozilla/MozStumbler,closed,"Toggling ""Keep screen on while in map"" needs restart to take effect","[Label(name=""bug"")]","Toggling ""Keep screen on while in map"" only takes effect after restarting the app (v0.40.0.0)
"
mozilla/MozStumbler,closed,Create an intent (or tasker plugin) to start and stop scanning automatically,"[Label(name=""enhancement"")]","It would be great if MozStumbler could receive an intent that would automatically start or stop the scanning. This way automation apps, like Tasker, could interact with MozStumbler and start and stop it when adequate. It's also possible to create a Tasker plugin, but an Intent would allow any application to interact with MozStumbler.

For example, I could automatically turn MozStumbler on everytime I get into the car and stop once I get out. This way without even having to make an effort I would be helping the project. Im sure other people could find other interesting uses and coding such an intent should be relatively easy.
"
mozilla/MozStumbler,closed,Crash when trying to automatically upload data,"[Label(name=""bug"")]","Im running Android 4.3 offical rom on a Sony Xperia SP. MozStumbler crashes randomly when connected to a wifi, but not when using mobile data. Also it happens everytime I have been away for a while and I connect a wifi network. Since I have the option of upload only on wifi activated, I suspect it happens when MozStumbler tries to upload data automatically.
"
mozilla/MozStumbler,closed,Side pannel data is blank with don't keep activites,"[Label(name=""enhancement"")]","![screenshot_2014-10-07-15-09-51](https://cloud.githubusercontent.com/assets/250273/4551252/e24a0d78-4e6e-11e4-9c73-18631e8b2ee5.png)
- Enable the Android developer options
- Select the ""Do not keep activities"" option
- Launch MozStumbler
- open the sidebar note the values
- Switch apps or open the Settings or Leaderboard
- open the sidebar, no data is shown
"
mozilla/MozStumbler,open,"UI: Satellite, cell tower and wifi icons on map should be semi-transparent when zero ","[Label(name=""UI/UX"")]",
mozilla/MozStumbler,closed,"During first run, when I click Start starting, it should turn on","[Label(name=""UI/UX"")]",
mozilla/MozStumbler,closed,Developer setting to override the low/high res tile switching,[],"For debugging, this is very helpful. 
And, it may be the case that users want to use high-res tiles on their cell data plan, and this would give them a way to do that until we have a better solution.
"
mozilla/MozStumbler,open,Show the size of the low res tiles folder to show user how much cell data this uses,"[Label(name=""enhancement"")]","This could be in the developer view, or in the metrics if we want to make it more exposed. 

Granted, the cell data usage is available through android -but we want users to keep an eye on the tile folder size specifically so we can determine if we are successful or not in keeping this size to a minimum.
"
mozilla/MozStumbler,closed,Features/938 missing api key,[],"This should close out #938 and set the mozilla api key as a pref on MainApp creation.

I've also cleaned up some of the logging so that HTTPResponse doesn't spam the GUI log.
"
mozilla/MozStumbler,closed,Metrics View UI changes: map legend,[],"- removed this session cell and wifi count
- removed toggle for showing observation type
- added Map Legend section

https://www.dropbox.com/s/mirh0kjgbeln1oh/Screenshot%202014-10-07%2013.35.03.png?dl=0
"
mozilla/MozStumbler,closed,stumbler did not turn off on 15% battery,"[Label(name=""bug"")]","Using stumbler 0.40.0 prerelease that was handed to QA. Started device at over 15% then checked on the device later and the battery was at 10% and was continuing to request GPS location.
"
mozilla/MozStumbler,closed,Update README.md,[],"wording change to reflect what mapbox ui actually says
"
mozilla/MozStumbler,closed,MLS location layer requires additional memory and network.,[],"Make this layer toggle an option that defaults to false.

Issue #921
"
mozilla/MozStumbler,closed,Cleanup Metrics upload monitoring: Change main app to be the upload listener.,[],"As part of the quickie hookup for metrics upload, the metrics was the
upload listener, and because of the transient state of the metrics, it
also had a timer to check if uploading. This is ugly. Make it listener-based only (no Timer), and set the MainApp to be the listener of the uploads (which will pass on the info to metrics view if it is alive).
"
mozilla/MozStumbler,closed,Created a developer settings screen. ,[],"Previously the KML Activity was being used for this. Currently it only has the KML fragment.
"
mozilla/MozStumbler,closed,mozilla api key not being set,[],"Prefs.getInstance().setMozApiKey() is never called
"
mozilla/MozStumbler,closed,Empty content body not handled after successful post.,[],"This would be my guess as to what is causing this also: https://github.com/mozilla/MozStumbler/issues/930
"
mozilla/MozStumbler,closed,"With no wifi, switch to low-resolution tiles.",[],"- Swap in an empty base tile layer when no wi-fi (and show a Toast), and show a low-resolution coverage map instead. 
- Instead of getting many levels of tiles for each zoom (typically I see 10 levels on disk), just get 2 levels. 
- Reduced the lowest zoom level of the map (to 30 km x 30 km approx on Nexus 5 screen) to prevent pulling in unnecessary data for areas the user isn't stumbling. 

ASIDE: Increased the max zoom to level 20, which is handy for separating the stumbling dots when walking.

TODO
- track the delta for the tile dir when not on wi-fi
- add a switch on the developer screen for tile source: default/lowres-only/high-res only
"
mozilla/MozStumbler,closed,"Null pointer in logging http error, fixed.",[],
mozilla/MozStumbler,closed,Crash reporting tool,"[Label(name=""enhancement"")]","https://github.com/ACRA/acralyzer is the one that I know of, I'll take anything.
"
mozilla/MozStumbler,closed,Disable updater code unless we are on a github release flavour ,[],
mozilla/MozStumbler,closed,Use MapBoxTileSource for map box tile layer,[],"OSMDroid has a built-in tile source where we just set the API key, and it looks better than the source we are using, as it has multiple content urls.

Requires a gradle change, so, hot potato to vng.
"
mozilla/MozStumbler,closed,"If app offline at startup, MLS tile url not found","[Label(name=""bug"")]","Need to recheck for this and not give up so easily, or MLS tiles never load even after the device is online again.
"
mozilla/MozStumbler,closed,700 observations stuck in queue,[],"Using 1.0, pressing the upload button does not upload the data.
"
mozilla/MozStumbler,closed,Maps uses old gingerbread style zoom controls,[],"The zoom controls on the map use gingerbread styling and feel out of place compared to the modern design of the rest of the app.
"
mozilla/MozStumbler,closed,Using the new maps based interface uses too much data,"[Label(name=""bug"")]","I tried the new maps based interface and have consumed 30 MB in a day. If this was my personal phone it would have consumed 6% of my monthly data cap. If I stumble this much I would exceed my monthly data cap in under 17 days.
"
mozilla/MozStumbler,closed,Added Konstanz on-boat WiFi to blocklist,[],"Just found another public transport WiFi SSID, right next to where I'm living. Regards from Lake Constance, Germany, Jens
"
mozilla/MozStumbler,closed,Get Travis to run the release build with a dummy private.properties file,[],"We need proguard errors to show up earlier dammit.  This should be added into the .travis.yaml file
"
mozilla/MozStumbler,closed,"When uploading stumbles, add messages to the LogActivity. ",[],"(Did not put this in the HTTPUtil class, as that will spam the log with other queries).
"
mozilla/MozStumbler,closed,queued MLS locations were being removed too early,[],"I think i moved a line during a rebase, the queued MLS locations were being removed from the queue too early. (one line was out of place, fixed).
"
mozilla/MozStumbler,closed,Automate a bunch of build problems,[],"- automated the versionName and versionCode nonsense.
- write out the VERSION file while we're updating the AndroidManifest.xml
- dynamically pull in rootProject/private.properties to load in
  customized parameters without clobbering parallel, daemonized
  compilation
- added a release_check.sh script to check the existence of a
  private.properties file prior to compilation of a release
- added release_check as a Makefile target and dependency to release
"
mozilla/MozStumbler,closed,Changed play button to a swtich on API > 10. ,[],"On 10 it is still a play button.

@ryanfeeley felt strongly about this, who am I to disagree.
"
mozilla/MozStumbler,closed,"Add pref for turning on the ""Show MLS locations"" switch",[],"As it stands now, even with the MLS locations off, extra allocations are taking place. There is no quick way to avoid this, as the JSON bundles need to be stored in memory to query MLS. It would be best to be safe and have this feature off by default. This feature should be stress-tested for memory and network usage before it gets removed as a pref (and permanently on).

The pref would be:

Enable show MLS locations on map [x]
You'll be able to toggle this layer on/off in the 'Map layers' options, but increases memory and network usage.
"
mozilla/MozStumbler,closed,Need cell and wifi scanning test mode,[],"This is needed both for client and service testing. 

Service:
The service code paths can't be fully tested without simulating the wifi and cell scans, and it can't be load tested or analyzed in monitoring tools without actually scanning (which requires movement).

Client:
On the client side, I can use the KML feature (currently in PR) to load test the graphic display in the app.
I can't test MLS location lookups with this, as I am not saving the JSON bundles. 
I could expand the KML I/O to save out the scan data earlier than planned (rather than just saving the lat/long and wifi+cell counts as it does now). 

In general, a more complete simulation with movement will greatly aid development, if just for being able to run the app in android memory and performance profiling tools. It is very difficult to use these sitting a desk when the app is idle.
"
mozilla/MozStumbler,closed,Added tile storage dir override for osmdroid. ,[],"Solves the problem of no SD card by optionally storing the tile in internal storage.

Addresses the issues:
issue #918 and issue #892.
"
mozilla/MozStumbler,closed,Need a dialog that we can't write tiles to device,[],"This is roughly similar to #894.

On a Samsung GT-S5670L (Galaxy Fit), we don't seem to be able to write map tiles.  We should tell the user that something horrible has happened, or just fix this.  Maybe just hold the current viewports tiles in memory.
"
mozilla/MozStumbler,closed,"Delete ""This Session"" section from MetricsView","[Label(name=""enhancement"")]","""This Session"" provides confusing information to users.  It displays the cumulative data for the current location - that is a lat/long location.  So as wifi and cell towers blink into and out of visibility, the cell and wifi counts are strictly monotonically increasing.

That's just confusing - as the numbers at the top of the mapview show the more useful number of ""What's visible now"".  At the least, I can be fairly certain that we're going to get a bunch of user filed bugs as the view is just confusing.  What does ""this session"" mean?  Why are the counts different than the mapview?

Additionally, once the wifi and cell information is uploaded, you're going to see the cumulative numbers implicitly in the total count for all time records.

Let's just remove the ""This Session"" number from the MetricsView.  We can then file a separate bug to better use of the space like displaying unique cells and unique wifi counts. 
"
mozilla/MozStumbler,closed,KML I/O added in Developer Menu,[],"This adds KML import and export. 

[In debug-only, if you long-press the version number in the about dialog, you get the KML I/O dialog.] EDIT: no longer true.

I have been using this feature to export data for verification, and to load test 1000s of points into the map view for load testing. The feature is not ready for prime-time, as the UI needs more work, but other than that it is functional.

I don't want to keep merging this locally for testing, so it is best to get it in the codebase.

@crankycoder r?
"
mozilla/MozStumbler,closed,Added highlight when tapping locate me button.,[],
mozilla/MozStumbler,closed,"If MLS layer is not shown, don't query MLS",[],
mozilla/MozStumbler,closed,Update spanish strings,[],"Including the new strings from #912 
"
mozilla/MozStumbler,closed,String updates: map layers checkbox and Setting for Upload on wifi,[],"The second commit is for: https://github.com/mozilla/MozStumbler/issues/900
"
mozilla/MozStumbler,closed,Reporter/HttpUtil cleanup items for easier testing/debugging,[],"Reporter/HttpUtil cleanup
While debugging MLSLocationGetter I ran into a few cleanup issues
- wasSent() doesn't seem to serve a purpose, removed
- changed some Log.e(...) to be more concise as the code I was debugging
  was spamming the log when throwing exceptions
- added errorMLSResponse on MLSLocationGetter to clear the state after
  an error
- In Reporter.java, I added a check for zero wifi and cell count, it is
  hard to repro, it happens when I modify the code for load testing (as I
  typically do), but it helps prevent false errors when testing at the
  very least.
"
mozilla/MozStumbler,closed,Performance bug with hardware accel + drawPath() ,[],"I use drawPath to draw triangles for cell-only collection indicator.
With as little as 300 primitives the drawing starts to jank heavily.
Turns out drawPath() is poorly supported:
http://developer.android.com/guide/topics/graphics/hardware-accel.html
Changed code to use just draw rect and circle, and tested with 3000
primitives.
Also, lowered the point overlay drawing timeout even further to 30 ms, this only
represents part of the drawing pipeline, there is still raster overlays, so we should be
aggressive about stopping the drawing early.
"
mozilla/MozStumbler,closed,Ask QA team to test MozStumbler release candidates,[],"CC Edwin and Karl
"
mozilla/MozStumbler,closed,Fix null ptr exception in async uploader (introduced in Friday's merge),[],"Getting a NPE, the line  
result = mls.submit(...) 
can return null, and the code was not checking for this.
"
mozilla/MozStumbler,closed,Animate sync button #899,[],"Issue #899, trivial fix, android has a built-in animated sync icon
"
mozilla/MozStumbler,closed,"issue 898, notification not bringing app to front",[]," fixed, this was unhooked during UI refactor

issue #898
"
mozilla/MozStumbler,closed,Add a message to the map view if no map tiles are available,[]," Either from no network, or no SD card.

Screenshot is here:
https://github.com/mozilla/MozStumbler/pull/894
(rebased version of 894)
"
mozilla/MozStumbler,closed,Lowered drawing timeout to 60 ms to prevent excessive jank,[],"Even this _might_ be a little high to prevent stuttering on pan and zoom in the map, I am trying to load test this further.

https://github.com/mozilla/MozStumbler/issues/879
"
mozilla/MozStumbler,closed,Disallow running the app if no GPS is found,[],
mozilla/MozStumbler,closed,"Android Studio: jars task isn't run by ""Make Project"" but *is* by ""Run"" or ""Debug""",[],"The gradle updateJars should be run first, then assembleDebug. For unknown reasons, Studio will only run the second task for the Make Project command, but the Run/Debug commands will run both gradle tasks.
As long as you do Run or Debug once, the jars will be downloaded and Make Project will work from then on.
"
mozilla/MozStumbler,closed,added screencaptures and instructions for setting up android studio,[],"adds setup instructions to the front page of the project
"
mozilla/MozStumbler,closed,Change upload on wifi pref to 'Automatically upload on Wi-Fi only',[],"This pref is for automatic uploading only, we want the user to be able to press the upload button to upload manually regardless of this pref. 
"
mozilla/MozStumbler,closed,Animate sync button,[],"The upload button turns into a non-spinning arrow while uploading, this arrow should spin, both because it looks broken not to, and it is a busy indicator.
"
mozilla/MozStumbler,closed,Clicking on the notification pull down no longer brings the app into focus,[],
mozilla/MozStumbler,closed,Added first-run dialog.,[],"Here is how it looks:

![screenshot_2014-09-29-20-02-49](https://cloud.githubusercontent.com/assets/5495083/4451435/6249533e-4835-11e4-9505-bb999f3b5264.png)
"
mozilla/MozStumbler,open,Formalize our L10n process: work with Mozilla L10n or Crowdin?,"[Label(name=""enhancement"")]","CC @Djfe, @garvankeeley

It would be nice to have our L10n story ready before 1.0, but it not a ship blocker.

https://wiki.mozilla.org/L10n:NewProjects
https://developer.mozilla.org/en-US/docs/Mozilla/Localization/Quick_start_guide
"
mozilla/MozStumbler,closed,Complete Legal review for Google Play Store,[],"CC @mikaland2

https://bugzilla.mozilla.org/show_bug.cgi?id=1074356
"
mozilla/MozStumbler,closed,Add a message to the map view if no map tiles are available,[]," If either no network, or no SD card, notify the user no map tiles are shown, but stumbling is ok.

This is the no network message (there is another message for no sd card storage available):
![screenshot_2014-09-29-13-36-27](https://cloud.githubusercontent.com/assets/5495083/4446067/53b0f9f2-47ff-11e4-9ff5-89ac9d988b92.png)
"
mozilla/MozStumbler,closed,Let's move the upload button as well as the settings,"[Label(name=""Good first bug"")]","I'd like to move the upload button and the settings to the bottom of the metrics.  

Like what Pocketcasts does:

![xxernkibiyjl2duxxqscgysm2stddjotlvcg0vnvbvi](https://cloud.githubusercontent.com/assets/4829/4443561/4a83d496-47e9-11e4-9b71-640d97144b7c.png)
"
mozilla/MozStumbler,closed,"No sdcard (virtual or real), map doesn't display",[],"OSMDroid hard-codes the tile path to external files dir. We need to override this to support this case.
For 1.0, we either fix this, or explain the problem to the user to avoid nasty reviews.
"
mozilla/MozStumbler,closed,Updated Polish translation,[],"Here is an updated Polish translation for MozStumbler.
"
mozilla/MozStumbler,closed,Features/849 email address,[],"This cleans up the transmission of email and nickname to the submit.

I've also cleaned up the code by removing the AbstractCommunicator and started to pull out pure java code into org.mozilla.mozstumbler.service.core.*

All HTTP code is now in HttpUtil and is mockable behind the IHttpUtil interface.

Email addresses sent are hashed using SHA1 and encoded as a hexdigest.
"
mozilla/MozStumbler,closed,Need to extend gradle build to conditionally pull in custom settings,[],"We need to be able to pull in optional settings into the gradle build.  

We currently have some settings that are required to speed up the build (parallel builds and daemon flags), so we run the risk of adding our mapbox key and mozilla api key into public source control.
"
mozilla/MozStumbler,closed,Needed to ensure the observation count was updated on the main thread,[],"because it wasn't, and was crashing.
"
mozilla/MozStumbler,closed,Preferences screen: gap (line on API 10) above button-style prefs (a.k.a. move leaderboard on api 10),"[Label(name=""Good first bug""), Label(name=""UI/UX"")]","Here is how it looks on API level 10, on API levels above that, there is simply added space.

This is because on API 10, the leaderboard is a button in the settings because I need somewhere quick to put it. To hide this button the pref must be in a preference group, which when left with no title, creates a space. On API 11 and up, the space is transparent, on API 10, it is not as seen in the screen shot.

![screenshot 2014-09-26 14 29 51](https://cloud.githubusercontent.com/assets/5495083/4425616/b5ebe812-45ab-11e4-957e-6a385d206d94.png)
"
mozilla/MozStumbler,open,Add Info level debugging for discrete events,"[Label(name=""Good first bug"")]","We should have better INFO level logs for important events which we'd like to see during normal runs.  

Grepping the code and excluding verbose, debug and error logging shows barely any useful logs that show the program is operating normally.  Having these non-error events logged will assist us in determining if the stumbler is behaving in a relatively normal way.

```
grep -rh ""Log\."" android/src//main/|sed -e ""s/^ *//""|grep -v ""Log.v""|grep -v ""Log.d""| grep -v ""Log.e""
Log.i(LOG_TAG, ""Received the first cell location update when the screen is off"");
Log.w(LOG_TAG, ""a='"" + a + ""', b='"" + b + ""'"", e);
Log.i(LOG_TAG, ""Upload Completed"");
Log.w(LOG_TAG, ""Couldn't compress data, falling back to raw data."");
Log.i(LOG_TAG, ""Version of the application has changed. Updating default values."");
Log.w(LOG_TAG, """", new IllegalArgumentException(""Unexpected BSSID format: "" + BSSID));
Log.w(LOG_TAG, ""Failed to convert bundle to JSON: "" + e);
Log.w(LOG_TAG, e.toString());
//Log.i(LOG_TAG, ""Skipped CellInfo of unknown class: "" + observedCell.toString());
Log.w(LOG_TAG, ""Blocked location: "" + location);
Log.w(LOG_TAG, ""Bogus latitude,longitude: 0,0"");
Log.w(LOG_TAG, ""Bogus latitude: "" + latitude);
Log.w(LOG_TAG, ""Bogus longitude: "" + longitude);
Log.w(LOG_TAG, ""Insufficient accuracy: "" + inaccuracy + "" meters"");
Log.w(LOG_TAG, ""Bogus altitude: "" + altitude + "" meters"");
Log.w(LOG_TAG, ""Bogus bearing: "" + bearing + "" degrees"");
Log.w(LOG_TAG, ""Bogus speed: "" + speed + "" meters/second"");
Log.w(LOG_TAG, ""Bogus timestamp: "" + timestamp);
Log.w(LOG_TAG, ""Blocked BSSID: "" + scanResult);
Log.w(LOG_TAG, ""Blocked SSID: "" + scanResult);
Victors-MBPr:MozStumbler victorng$
```

I'd like to see INFO messages on the following events:
- successful data submission to MLS with bytes sent, bytes received, HTTP status code
- the DataManager should periodically write an INFO message that shows # of queued locations and possibly some other useful stats that the DataManager is aware of.
- other events?
"
mozilla/MozStumbler,closed,Full refactor of UI based on UX review,[],"List of issues addressed:
issue #829 - UX Design Doc
 issue #795 - Move main activity stats according to Issue #829 
issue #792 - Start/Stop on main activity (@keverets already did this one)
issue #790 - Icons for cell/wifi collection
issue #789 - Make all subviews navigable from map activity screen

Issue #858 - commit 571d20a - Slow to show first fix on map view, fix by grabbing last known gps.
"
mozilla/MozStumbler,closed,Service: Added static counter for total bytes uploaded this session.,[]," This is a stat we would like to display to users.
"
mozilla/MozStumbler,closed,Link to MLS home page and privacy policy,[],"MozStumbler should probably link to the MLS home page and privacy policy:

https://location.services.mozilla.com

https://location.services.mozilla.com/privacy
"
mozilla/MozStumbler,closed,Prepare app description and screenshots for Play Store,[],
mozilla/MozStumbler,closed,Add something to MozStumbler's User Agent string to identify Google Play Store builds,[],"For user stat reporting, we want the server to be able to differentiate between our Google Play Store builds, our GitHub APK releases, third-party builds (e.g. [F-Droid](http://fdroid.org/)), and local developer builds.
"
mozilla/MozStumbler,closed,Add a buildstep to enforce a rule that android APIs are used only in some packages,[],"We should really try to make sure that each package is explicitly **android** or **pure java**.

This would go a long way to making the stumbler more testable as we can use pure JUnit tests on the java codebase and fallback to robolectric or robotium for Android specific tests.
"
mozilla/MozStumbler,closed,Lower drawing timeout from 150ms,[],"Issue #837 limited drawing to 150ms so large numbers of observation points don't kill the rendering. @keverets further pointed out we should be considering what framerate the produces.
30 fps is ~35ms/frame, I am finding half that rate looks ok on the map. Still deciding on what time limit to use.
"
mozilla/MozStumbler,closed,Features/849 email address,[],"Adds an email address field and header when uploading the to ichnaea.
Fixes #849 on the client, needs support on ichnaea now.
"
mozilla/MozStumbler,closed,Need to expire coverage map tiles or users won't see updates to coverage,[],"We seem to have over aggressive caching of tiles because of OSMDroid.   Not sure what the tile expiry policy is.
"
mozilla/MozStumbler,closed,Add copyright for mapbox tiles,[],"Also changed font colour and size. Likely this will get adjusted further this week during UI refactor
"
mozilla/MozStumbler,closed,Fix show observation points with the screen off,[],"Issue 842
This is the updated PR 848, rebased and addressed comments
"
mozilla/MozStumbler,closed,got rid of android-library as it's confusing to people,[],"This closes out #873 and removes the android-library directory structure while maintaining the Jacoco test coverage capability.

I've also added a `clean` target to the Makefile
"
mozilla/MozStumbler,closed,Drop android-library directory structure,[],
mozilla/MozStumbler,closed,updated the ic_status_scanning.png icon to use the new stumbler icon.,[],"Tiny fix to close out #831.  Updated notification icons.

I've added the icon into the xxhdpi resolution directory as well.
"
mozilla/MozStumbler,closed,re-added the VERSION file,[],"Just re-adding the VERSION file which was dropped in #864.
"
mozilla/MozStumbler,closed,Added Mercedes in-car WiFi to blocklist,[],
mozilla/MozStumbler,closed,"No collection: observation count increases, but no data in queue, no data uploaded","[Label(name=""bug"")]","I've been stumbling for some a days with 0.30, and it was worrying me a little that the ""In queue"" section was always in 0.  My first thought it was uploading as it was collecting the information.  When I saw the log, I saw my multiples positions in green text.  I noticed it was kind of different than 0.21, but I thought it was one of the visual changes, too.

However, under ""Sent"" the number of observations, cell and wifi-access were all kept in the same numbers.  I stumbled several new places, I saw the green points on the map while walking for a couple of hours, but it did not upload anything.  Then when I checked the ""new"" places in Mozilla's location map, they were not there, and I cross-checked the points scanned in the leader page, and they were the same as before.

I just downgraded to 0.21, and did a short walk, and the observations started to change (increase) again, as well as I started to see numbers in the queue.

The new icon looks nice and the map seems more responsive, though.

My phone is a Nexus One, with Cyanogenmod-7.2.0-passion (Android 2.3.7).
"
mozilla/MozStumbler,closed,Translated Size (KB),[],
mozilla/MozStumbler,closed,Wifi count seems to be off by one ,[],"I'm in an area where I'm sure there are no wifi access points. The count is still showing 1 though.  
"
mozilla/MozStumbler,closed,Remove iml files,[]," The iml files are appearing modified after a fresh checkout.
Let's try not using them and see if Android Studio is happy.
"
mozilla/MozStumbler,closed,Revisit the updater code,[],"I nuked the updater code in #864, we need to bring it back but make it safer.

Some points:
- broken commits shouldn't break all our clients because of a bad version string in VERSION_URL
- we need to make the updater conditional so that we only use it for non-Google play build flavors.
"
mozilla/MozStumbler,closed,Features/629+826 unittest mozbuild updates,[],"This fixes #629 to add JUnit, robolectric and jococo coverage analysis
#826 needed a unittest around the Updater code, but that's actually going away because of the play store, so this actually closes off #862 as well.

I need to add some documentation for this, but the short of it is that the Makefile has reasonable targets.

The default `all` target will build a release.
`test` will compile and run unittests

There is now a split between debug and unittest builds as robolectric puts extra constraints on what is possible.
"
mozilla/MozStumbler,closed,Clean up versionName and versionCode in AndroidManifest to use variables,[],"The build system needs to be cleaned up so that versionName and versionCode are handled in reasonable ways.

The presentation at https://github.com/Goddchen/Android-Gradle-Examples
https://github.com/Goddchen/Android-Gradle-Examples has some good tips on how to do this.
"
mozilla/MozStumbler,closed,Get rid of the Updater code for the 1.0 release,[],"The Play store will handle code updates of versions for us, no need to run our own updating code.
"
mozilla/MozStumbler,closed,uploaded data should be encrypted,"[Label(name=""question"")]","Uploaded data should be encrypted: are they ?
"
mozilla/MozStumbler,closed,"Upload issues: add a ""Resume Upload"" Button",[],"Some of my data are sometimes stuck in the app, because the upload seem never complete (while my home WiFi is OK for other apps).
If I reboot the phone, data are lost.
A ""Resume Upload"" function would help.
"
mozilla/MozStumbler,closed,Drop API 8 (Froyo) support,[],"This is <1% of android users, and it isn't something we want to test on or support. 

Also, when working on UI code, API 8 is missing things that make UI coding a bit easier (although we could say that about any older android API, _anything_ that makes the UI coding easier is appreciated as we have lots of work to do there).

I believe API 10 is the next logical jump (Gingerbread)
"
mozilla/MozStumbler,closed,Slow to show first GPS location,[],"We should start with the last location, it takes too long for the GPS to start showing the blue dot.
"
mozilla/MozStumbler,closed,Tracking of user metrics should keep a time series of data,[],"This is partly an ichnaea server related bug. 

We want to be able to track a particular user's contributions over time.  This time series data should be visible to the user.  

@ppapadeas 
"
mozilla/MozStumbler,open,Add prompt for email address after collection data has reached a threshhold,"[Label(name=""UI/UX""), Label(name=""enhancement"")]","Prompt for a user email address after we've collected some data.  This will effectively only capture people who are already actively engaged.

@garvankeeley @ppapadeas 
"
mozilla/MozStumbler,closed,Remove some dead code,[],"These are bits I missed while fixing #767 .
"
mozilla/MozStumbler,closed,"Use the spelling ""Wi-Fi"" in the UI and fix some lint resource warnings",[],"Android uses the spelling ""Wi-Fi"", with a hyphen and capital letters, regardless of the system locale. Our app UI should be consistent with the system UI conventions. (Fun fact: some iOS sold in China use the term ""WLAN"" instead of ""Wi-Fi"".) I didn't change any code identifiers, so they, like the Android's APIs, use a mix of ""WiFi"", ""Wifi"", and ""wifi"". :)

I also fixed a bunch of lint warnings about unused resources and string formats.
"
mozilla/MozStumbler,closed,Features/767 remove scan wifi,[],"Fix for #767 to drop the Wifi Scan Always preference.
"
mozilla/MozStumbler,closed,Features/629 unittest,[],"This adds unittest capability as per #629.

Unit testing is exercised by demonstrating a basic testcase for #826 that verifies that any non-null, non empty string should kick off an asynctask which initiates the update process.
"
mozilla/MozStumbler,closed,Pin the platform version when compiling,[],"Related to:  https://github.com/crankycoder/SimpleKML/commit/62788d1e9324eb883d5ab0e2ea90b8c5a2af9e23

We need something like this:

```
compileJava {
  sourceCompatibility = 1.6
  targetCompatibility = 1.6
  options.bootClasspath = ""/System/Library/Frameworks/JavaVM.framework/Versions/1.6/Classes/classes.jar""
}
```

added to the gradle build to pin the platform compatibility.  classes.jar is Apple's awesomely renamed rt.jar, because renaming JAR files is innovative.  No wait. I mean terrible and confusing.

We can probably force setting a JAVA6_HOME in local.properties or build.properties, or whatever file gradle wants to use, but I can't remember right now.

cc/ @garvankeeley 
"
mozilla/MozStumbler,closed,Features/629 unittest,[],
mozilla/MozStumbler,closed,Leaderboard: capture email addresses,[],"Although we would like to have Fx accounts integration, we can't get that for 1.0. We should as a stopgap, grab email addresses.
"
mozilla/MozStumbler,closed,Fix show observation points with the screen off,[],"Issue #842.

Fixes screen off case, and the case where the map activity has not been shown yet in the app's lifetime.

This code (the previous PR) was written with the intention that the map activity is the main activity -which will be the case soon- but it complicated this hookup. I can simplify things a bit when we refactor out the current main activity.
"
mozilla/MozStumbler,closed,Translate new string to spanish,[],
mozilla/MozStumbler,closed,In passive mode (used by fennec) delay the start of the service to avoid cpu/thread contention,[],"See https://bugzilla.mozilla.org/show_bug.cgi?id=1064677

Please in PR state while bugzilla bug is open. I will land this when that bug's commit gets approved.
"
mozilla/MozStumbler,closed,added SimpleKML and SimpleXML dependency,[],"This fixes #844 to add a dependency to SimpleKML
"
mozilla/MozStumbler,closed,Hookup SimpleKML,[],"First step in data export (and import?) is to have this lib in the codebase: 
https://github.com/Ekito/Simple-KML
"
mozilla/MozStumbler,closed,App reverts from map view to main view when screen is turned off,[],"STR:
1. Open map view
2. Manually turn off screen
3. Main screen turn on!

RESULT:
The app has reverted to the main/stats view and is no longer in the map view. This behavior might interact with issue #842, where observation points are only drawn when the map view is open and the screen is on.
"
mozilla/MozStumbler,closed,Map view only draws observation points when the map view is open and screen is on,[],"This is frustrating because I will shut off my screen when I'm driving and, when I reach my destination, I have no intermediate points.
"
mozilla/MozStumbler,closed,Add Offline Geolocation with cellids,[],"Is it possible to add a ""Offline Geolocation"" with cellids?
Maybe you can select your mcc and mnc in mozstumbler and download the data (MLS export) only from this provider.
This could be useful 
- if data connection is not possbile because mobile reception is too bad
- if i am in foreign countries and roaming 
- if the data volume is consumed
- to reduce the requests to the api
"
mozilla/MozStumbler,closed,"Don't check for app updates if Wi-Fi is disconnected and ""Upload only on WiFi"" setting is true",[],"- Fixes #766
- Minor clean up of MainActivity.java
"
mozilla/MozStumbler,closed,Bump Android build tools and Android support library to version 20,[],
mozilla/MozStumbler,closed,"Reminder: ""keep screen on"" commit from master to dev",[],"Landed on master instead of dev, fix on monday
"
mozilla/MozStumbler,closed,Limit ObservationPointsOverlay drawing to 150 ms,[],"Too many points, and the drawing can cause lag on slower devices.  This
will limit the impact.

Performance testing should be done to determine appropriate values for
the maximum duration, as well as how often to check the time.

This is a fix for #830 
"
mozilla/MozStumbler,closed,Auto-follow mode: indicate using icon that this is on/off,[],"This is a follow-up item from #834.
Ideally, the icon would be a different style/color when auto-following the users GPS position.
"
mozilla/MozStumbler,closed,"Add copyright area to the map, and populate it as requested when using MapQuest tiles",[],"This is a fix for issue #773
"
mozilla/MozStumbler,closed,Fix auto-follow,[],"The map no longer re-centers on the current location, making the user constantly press the centerMe button as they move.  After this change, pressing the centerMe button will keep centering until the user manually pans at which point it will stop following until they press the centerMe button again.
"
mozilla/MozStumbler,closed,Place the marker for the current point over top of the previous points,[],"Without this, the current position can get swamped by the previous points
when zoomed out.
"
mozilla/MozStumbler,closed,Add Play/Pause to the menu on the map,[],"Also, don't always unpause scanning when entering the map.
"
mozilla/MozStumbler,closed,Notification Icon doesn't match App Icon,"[Label(name=""bug"")]","The updated app icon should be used for the notification icon. 
"
mozilla/MozStumbler,closed,Map view performance: limit the number of observations points drawn,[],"We can just draw observation points with no upper limit, on older devices this could bog them down. 

@keverets suggestion is to time bound the drawing code. This would be the simplest approach to start with. The points are stored in order, so we could iterate from newest to oldest, and stop after 100ms (or something similar). 
"
mozilla/MozStumbler,closed,UX Design Document,[],"User flow diagram and low fidelity wireframes for MozStumbler 1.0 planning.
https://www.lucidchart.com/documents/view/73aa0a22-f817-4d28-8cf5-eabbd9b1bc2c
"
mozilla/MozStumbler,closed,Basic integration of Galaxy leaderboard,[],"- Uses http://loopj.com/android-async-http/
- Access and modify constants in GalaxyRestClient
- Instantiate an instance of GalaxyManager to get & post data
- When instantiating a GalaxyManager, pass a listener, or null if not interested in callbacks
"
mozilla/MozStumbler,closed,Map view locate me button: doesn't animate,"[Label(name=""Good first bug"")]","This button should animate on tap (darken or lighten). This was left as a TODO item in the code.
"
mozilla/MozStumbler,closed,Updater Unit Test: update Mozilla builds only,[],"MainActivity onCreate has this:
 if (BuildConfig.MOZILLA_API_KEY != null) {
            Updater.checkForUpdates(this);
 }

This would be a good item to unit test so it doesn't get broken
"
mozilla/MozStumbler,closed,Features/osmdroid,[],"Fixes #808 

We now use our own fork of osmdroid - you'll have to run libs/update.sh to grab the latest JAR file for osmdroid
"
mozilla/MozStumbler,closed,MozStumbler v0.30.0,[],
mozilla/MozStumbler,closed,MozStumbler v0.30.0,[],
mozilla/MozStumbler,closed,Post-817 cleanup: added missing license. removed unused function.,[],
mozilla/MozStumbler,closed,Post the zoom and center on the map directly,[],"Rather than create a new Handler with a delay, post onto the mMap directly the
zoom & center with no delay.

This worked similarly for me as the postDelayed with an independent Handler().
"
mozilla/MozStumbler,closed,Removing permissions that are not used.,[],
mozilla/MozStumbler,closed,Steamclock's preliminary gamification,[],"- Basic integration of the Galaxy leaderboard leveraging http://loopj.com/android-async-http/
- Preliminary gamification: UI and navigation overhaul both front-end (visually) and back-end (code).

Key points:
- Adopted the use of ""one activity multiple fragments"" UI architecture that is generally more preferable post API 11, aka Android 3.0.
- Using the MapKit SDK for better scrolling, panning, and zooming experience, as well as easier implementation of the star and rainbow overlays.
- Firefox theming: new fox app icon, orange tab bars, fira fonts, blue highlights.
"
mozilla/MozStumbler,closed,"OSMDroid: for Mozilla builds, increase the tile load thread count from 2",[],"This is killing the performance of the map view:
https://code.google.com/p/osmdroid/source/browse/trunk/osmdroid-android/src/main/java/org/osmdroid/tileprovider/constants/OpenStreetMapTileProviderConstants.java#48

For Mozilla builds, which use the MapBox commercial service, we should load like a web browser and use 6-8 simultaneous requests.
"
mozilla/MozStumbler,closed,"Map view work: GPS location, Observation points, and MLS locations",[],"This is the appearance showing the GPS location in blue, the observation points in green, and the MLS locations in red (attached to their parent observation points with a line).
Also shown is the ""locate me"" button in the lower left.

![screenshot_2014-09-09-19-35-55](https://cloud.githubusercontent.com/assets/5495083/4210943/579fcf88-387e-11e4-8988-3cc26d9cbc0e.jpg)

The map view fixes addresses issues: #733, #750, #763, #765, #706

The instance count violation was originally issue #7, it recurs from time to time as we accidentally add code that keeps a reference to an activity.
"
mozilla/MozStumbler,closed,Issue #791 - drop geofencing code,[],"This fixes #791 and removes all geofencing code and geofencing related resources.
"
mozilla/MozStumbler,closed,"The current cells count (used for display), is not correctly calculated for duplicate entries",[],"UI issue only. The visible cell count will be displayed as a higher number than the scanned cells, when it should be less than or equal to the scanned cells. I made sure the two values were calculated in the same fashion.
"
mozilla/MozStumbler,closed,Added icons8 to attribution on about screen,[],"issue #735. Also some minor cleanup to this dialog.
"
mozilla/MozStumbler,closed,For the WiFi/Cell/GPS Scanners: Replace Intent-based messaging with callbacks,[],"The existing system causes confusion like I discussed here:

https://github.com/crankycoder/MozStumbler/commit/d75bdf4eff95325d005fedffc869b2ffda8e2f0e#src-org-mozilla-mozstumbler-service-stumblerthread-ireporter-java-P26
"
mozilla/MozStumbler,closed,StumblerService should have all the public accessors synchronized,[],"issue #809: I agree, as we increase the concurrency of the app (currently this interface is not used concurrently), it makes sense to have the public interface to the service (which is represented by StumblerService.java) synchronized.
"
mozilla/MozStumbler,closed,Enable NMEA checks for passive stumbling,[],"We only check NMEA data during active stumbling.   We should be checking when Fennec is doing passive stumbling.

See: https://github.com/crankycoder/MozStumbler/commit/53f7dc68279216b555f666cec64603180b73ee1f#commitcomment-7681578

cc/ @garvankeeley 
"
mozilla/MozStumbler,closed,Setting initial pan and zoom requires a delay,[],"Addressing this bug in osm droid: https://github.com/osmdroid/osmdroid/issues/22

Setting initial pan and zoom requires a delay. Not much to review code-wise, it will have to be tested on-device. Zooming and panning to the correct location, even with a short delay, is big UI improvement when opening the map view.
"
mozilla/MozStumbler,closed,Review the threadsafety of StumblerService,[],"There's a bunch of possible threading issues in StumblerService. We should do a proper review and expose a threadsafe interface.
"
mozilla/MozStumbler,closed,Fork OSMDroid,[],"We need to fork OSMDroid to fix performance and rendering issues.

New repo is at: https://github.com/mozilla/osmdroid
"
mozilla/MozStumbler,closed,Fix #510 - Only collect StumblerBundle instances if we've got valid NMEA data,[],"This should fix #510 

This adds an NMEA listener to the MainActivity and the Reporter.

An incoming NMEA data stream is a pretty good indicator that we're using a real GPS.

The MainActivity has stubs so that we can add visual feedback that NMEA data is being read.

The Reporter checks that we've received GGA and GSV sentences within the last 60 seconds or else StumblerBundle instances are not created.

I also did some minor code cleanup along the way.
"
mozilla/MozStumbler,closed,Added a Thai translation,[],"I added a Thai translation for MozStumbler
"
mozilla/MozStumbler,closed,Limit the gps location dot update to 1 Hz max,[],"1 Hz is the typical max rate of a GPS, I can see it update more frequently than this, which only conflicts with pan and zoom gestures if done too often.
"
mozilla/MozStumbler,closed,Fix merge error,[],
mozilla/MozStumbler,closed,"Hardware acceleration option in prefs, on by default",[],"Ideally we can make a conclusion as to whether this preference is needed, and whether hardware acceleration should be on or off. I vote for on, the user experience is much better (on the devices I have tested), and the RAM usage looks comparable to similar apps.
"
mozilla/MozStumbler,closed,"Hardware acceleration option in prefs, on by default",[],"Ideally we can make a conclusion as to whether this preference is needed, and whether hardware acceleration should be on or off. I vote for on, the user experience is much better (on the devices I have tested), and the RAM usage looks comparable to similar apps.

Issue #801 should land before this, the previous commits in this chain belong to other issues.
"
mozilla/MozStumbler,closed,MapActivity: last location not always set when switching views,[],"MapActivity: setLastMapCenter in onDestroy as well as onSaveInstanceState.

Issue #800 should land first.

Github note:
Attempting to split issues on the same commit history on a different branch. If this approach fails, i'll choose another.
"
mozilla/MozStumbler,closed,Create client side prefs that extend the service prefs.,[],"vng=r?

I am adding more prefs on the client-side, specifically hardware acceleration.
"
mozilla/MozStumbler,closed,Translate new string to spanish,[],
mozilla/MozStumbler,open,"DataStorageManager: internal cleanup, refactor stateful iteration","[Label(name=""enhancement"")]","During Fennec review this issue came up, should address this.
"
mozilla/MozStumbler,closed,mark out geofenced area on the map,[],"the geofenced area should be marked out in the map page/main page
"
mozilla/MozStumbler,closed,Button to check for updates manually,"[Label(name=""Closed: won't fix"")]","There should be a button in ""About MozStumblr"" which should allow to check for updates.
"
mozilla/MozStumbler,closed,"UI Redesign: with the loss of the MainActivity, consider what stats are missing and where to show them","[Label(name=""enhancement"")]","For 1.0, the main activity will be the map view. We need to consider the UI impact of losing this information viewed on the MainActivity, and where else we can put any items we deem relevant.
"
mozilla/MozStumbler,closed,UI: First run experience,"[Label(name=""enhancement"")]","As part of the product experience: the first-run should:
- have a legal dialog (if needed)
- brief explanation of the app (VERY brief)
- door hangars on key buttons/icons to explain what they do
"
mozilla/MozStumbler,closed,We need to add telemetry code,[],"The stumbler is embeddable so we can't reuse the telemetry code in Fennec which ends up calling javascript to send the telemetry data back.

Need to figure out exactly what telemetry events we need to be capturing.

We should at least have _some_ telemetry for 1.0.
"
mozilla/MozStumbler,closed,UI Redesign: Start/Stop button on Map Activity,"[Label(name=""enhancement"")]","The redesign of the app is to make the map the main screen, therefore it needs a start/stop scanning button.
"
mozilla/MozStumbler,closed,Pull geofencing code out and target a post 1.0 revision,[],
mozilla/MozStumbler,closed,"UI Redesign, MapActivity: Icons for Cells and WiFis instead of text","[Label(name=""enhancement"")]","I realize that text labels on the screen create difficulties with layouts on small screens, and localized text. Better to use icons like @keverets did for the top bar that has the GPS info. 
"
mozilla/MozStumbler,closed,"UI Redesign: Move Log, Upload, Leaderboard, Settings, About, to be navigable from MapActivity","[Label(name=""enhancement"")]","The redesign of the app is to make the map the main screen, these screens are currently accessed from the MainActivity screen which will no longer be the main activity. 
These screens need to move to be sub activities of the map view as part of our 1.0 redesign.
Also need to consider the priority of these, which should be shown on the toolbar, which should be on the options menu, which should get icons.
"
mozilla/MozStumbler,closed,Upload Button Crashes on First Try,[],"Upload Button Crashes MozStumbler on first try then have to restart it and try again which works.
"
mozilla/MozStumbler,closed,Translate new string to spanish,[],
mozilla/MozStumbler,closed,Geofencing visual issues,[],"1st issue:
Geofencing is written black and only visible for me in portrait mode
I cannot scroll to it in landscape mode

this happens on my Sony Ericsson Xperia Arc S (running Carbonrom(Kitkat))

on my Samsung galaxy tab 3 10.1 it is not visible at all

on both devices I have never used the geofencing functionality

![2014-08-29 17 44 30](https://cloud.githubusercontent.com/assets/5685512/4103257/2d5d83dc-3153-11e4-9c3b-b8c750fb29db.png)
![2014-08-29 17 44 46](https://cloud.githubusercontent.com/assets/5685512/4103258/2fce469c-3153-11e4-985f-cd42709af250.png)

EDIT: both screenshots above are taken from my smartphone, I haven't taken any on my tablet since it doesn't show it

2nd issue:
The text only switches if I press the text, if I check the checkbox the text shown doesn't change at all
![2014-08-29 18 55 20](https://cloud.githubusercontent.com/assets/5685512/4103279/7fb40b96-3154-11e4-9d59-f33bd1039b43.png)

pressing field a in picture 1 I get the 2nd picture
pressing field b I get the 3nd picture

even though this is German you can see that it shows two different texts, is this on purpose or not?
"
mozilla/MozStumbler,closed,Upload button doesn't respond at first,"[Label(name=""bug"")]","I often have to press the upload button at least twice to start uploading. (first press does nothing)
I'm not sure if this is an issue though.
"
mozilla/MozStumbler,closed,Refactor for Fennec Integration,[]," See Fennec integration bug https://bugzilla.mozilla.org/show_bug.cgi?id=1038843

```
- Refactored StumblerService, moved bound usage to ClientStumblerService,
this is not used by Fennec.
- Restructure code by thread. Concurrency bugs are the highest-risk, and
the code can be clearly organized by thread so future contributers can
see at a glance where thread divisions are.
- ensure that stumbler service init() happens on the correct thread, in
MozStumbler, this is the main thread, in the Fennec service, this is on
the service's dedicated thread
- remove the use of the blocklists from Fennec.
- changed uploading in fennec mode to only upload after a start intent.
Need to ensure that when foregrounded, Fennec sends this message.
```
"
mozilla/MozStumbler,closed,Returning from MapActivity shows the Start/Stop scanning button in invalid state,"[Label(name=""bug"")]","I thought I fixed this in https://github.com/mozilla/MozStumbler/pull/782 by forcing the UI to update whenever the start/stop button is toggled, but it doesn't seem to be working on my phone consistently.

To reproduce this bug:
- Start stumbler in the stop state
- click the target icon at the top to go to the MapActivity
- this should start the scanner, you can verify this by seeing the number of satellites and towers change in the MapView
- click the back button to go back to the MainActivity layout

The start/stop button will say ""Start Scanning"", but it's already in that state, the label and the clicked flag are just wrong.  The button _should_ say ""Stop Scanning"".
"
mozilla/MozStumbler,closed,fix stop scanning button in the Notification pulldown,[],"Fix for issue #761 - Ignore ctags files

This patch fixes the ""Stop Scanning"" button in the notification pulldown.

The old code had a secondary code path to disable the scanning in TurnOffReceiver.
This patch changes the TurnOffReceiver to just send an intent to disable the scanning using a local broadcast.

The MapActivity sent an ACTION_UNPAUSE_SCANNING intent which was being accepted by the MainApp, this has been moved into the MainActivity instead..

When MainActivity::onToggleScanningClickedView() is called, we force the UI to update.  This was previously causing problems where the MapActivity would enable the scan, but the button UI was not properly refreshing.
"
mozilla/MozStumbler,closed,Unable to pan or zoom properly the map ( android) ,[],"On Android map on Galaxy Nexus I am not able to zoom in - and keep the data. 
Drag and dropping is really hard and delayed.. 

https://www.youtube.com/watch?v=s_OTiQfr88Q 
"
mozilla/MozStumbler,closed,MozStumbler on Firefox OS,"[Label(name=""question"")]","I guess you have been already asked about it or at least you thought about it: why isn't MozStumbler available for Firefox OS? Can we expect to see it on this platform anytime soon?
"
mozilla/MozStumbler,closed,MozStumbler Not Available for Nexus 7,[],"I would like to contribute to the Mozilla location effort, but sadly I can't install MozStubler on my Nexus 7: Fdroid marks it as not available. Could you please solve it?
"
mozilla/MozStumbler,closed,Enable hardware acceleration,[],"I find the map view is much smoother panning and zooming with this on. Is there a reason it is off?
"
mozilla/MozStumbler,closed,"""MozStumbler has stopped""",[],"My new Samsung s5 phone once in a while emits a dialog saying ""mozstubler is gestopt"" (Dutch language, country code NL), even when I did not start it before.
"
mozilla/MozStumbler,closed,Include new logos,[],"Taken from https://github.com/mozilla/ichnaea/tree/master/ichnaea/content/static/images

For issue #772 
"
mozilla/MozStumbler,closed,Make default zoom 16 rather than 13,[],
mozilla/MozStumbler,closed,Keep the screen on when in the Map Activity,[],
mozilla/MozStumbler,closed,MapQuest copyright on mapview (only on non mozilla builds),[],"issue #757 is for OSM copyright. We are switching to MapQuest's free tile service for non-mozilla builds.

This follows from issue #770
"
mozilla/MozStumbler,closed,Update app icon,"[Label(name=""enhancement"")]","@hannosch has new MLS logos from [bug 1032897](https://bugzilla.mozilla.org/show_bug.cgi?id=1032897) here:

https://github.com/mozilla/ichnaea/tree/master/ichnaea/content/static/images
"
mozilla/MozStumbler,closed,"Crash: MapActivity responding to CellScanner, updates on wrong thread","[Label(name=""bug"")]","E/AndroidRuntime(12504): FATAL EXCEPTION: Timer-2
E/AndroidRuntime(12504): Process: org.mozilla.mozstumbler, PID: 12504
E/AndroidRuntime(12504): android.view.ViewRootImpl$CalledFromWrongThreadException: Only the original thread that created a view hierarchy can touch its views.
E/AndroidRuntime(12504):    at android.view.ViewRootImpl.checkThread(ViewRootImpl.java:6024)
E/AndroidRuntime(12504):    at android.view.ViewRootImpl.requestLayout(ViewRootImpl.java:820)
E/AndroidRuntime(12504):    at android.view.View.requestLayout(View.java:16431)
E/AndroidRuntime(12504):    at android.view.View.requestLayout(View.java:16431)
E/AndroidRuntime(12504):    at android.view.View.requestLayout(View.java:16431)
E/AndroidRuntime(12504):    at android.view.View.requestLayout(View.java:16431)
E/AndroidRuntime(12504):    at android.widget.RelativeLayout.requestLayout(RelativeLayout.java:352)
E/AndroidRuntime(12504):    at android.view.View.requestLayout(View.java:16431)
E/AndroidRuntime(12504):    at android.widget.RelativeLayout.requestLayout(RelativeLayout.java:352)
E/AndroidRuntime(12504):    at android.view.View.requestLayout(View.java:16431)
E/AndroidRuntime(12504):    at android.widget.TextView.checkForRelayout(TextView.java:6600)
E/AndroidRuntime(12504):    at android.widget.TextView.setText(TextView.java:3813)
E/AndroidRuntime(12504):    at android.widget.TextView.setText(TextView.java:3671)
E/AndroidRuntime(12504):    at android.widget.TextView.setText(TextView.java:3646)
E/AndroidRuntime(12504):    at org.mozilla.mozstumbler.client.mapview.MapActivity.formatTextView(MapActivity.java:427)
E/AndroidRuntime(12504):    at org.mozilla.mozstumbler.client.mapview.MapActivity.formatTextView(MapActivity.java:421)
E/AndroidRuntime(12504):    at org.mozilla.mozstumbler.client.mapview.MapActivity.updateUI(MapActivity.java:374)
E/AndroidRuntime(12504):    at org.mozilla.mozstumbler.client.mapview.MapActivity.access$300(MapActivity.java:49)
E/AndroidRuntime(12504):    at org.mozilla.mozstumbler.client.mapview.MapActivity$ReporterBroadcastReceiver.onReceive(MapActivity.java:113)
E/AndroidRuntime(12504):    at android.support.v4.content.LocalBroadcastManager.executePendingBroadcasts(LocalBroadcastManager.java:297)
E/AndroidRuntime(12504):    at android.support.v4.content.LocalBroadcastManager.sendBroadcastSync(LocalBroadcastManager.java:278)
E/AndroidRuntime(12504):    at org.mozilla.mozstumbler.service.stumblerthread.scanners.cellscanner.CellScanner$1.run(CellScanner.java:113)
E/AndroidRuntime(12504):    at java.util.Timer$TimerImpl.run(Timer.java:284)
"
mozilla/MozStumbler,closed,Use MapQuest OSM tiles instead of Mapnik,[],"Members of the OSM community recommended making use of the free MapQuest tiles instead of leaning on the mapnik infrastructure.  More information available at:

http://developer.mapquest.com/web/products/open/map
"
mozilla/MozStumbler,closed,Coverage overlay zoom,[],"This moves the coverage overlay into its own class which, for the moment, extends the TilesOverlay.  Once it is changed to be purely vector based, it no longer need do so, but there should not be changes necessary to the MapActivity at that point as it sees the coverage map as a simple Overlay.

When asked to draw zoom levels greater than those provided by the coverage map (currently level 13), this will now determine a scaling factor, grab the lower zoom level image, and do a simple scale to draw the overlay.

Once the vectorization is at a happy point, it should be able to be swapped into the mCoverageTileLooper with minimal fuss.
"
mozilla/MozStumbler,closed,"Update geofence strings to say something about ""Don't stumble around home/Set home location""","[Label(name=""enhancement"")]","The current geofence UI and strings are confusing. The strings should describe the use case and include the word ""home"".
"
mozilla/MozStumbler,closed,"Remove ""Always scan Wi-Fi [even when Wi-Fi is off]"" setting","[Label(name=""Good first bug""), Label(name=""enhancement"")]","There is no need to expose this setting to the user. We should always scan Wi-Fi, even when Wi-Fi is off, if the API is available. When the user starts scanning, we should scan as everything we can.
"
mozilla/MozStumbler,closed,"Auto-updater should honor ""Only upload over Wi-Fi"" setting","[Label(name=""Good first bug""), Label(name=""enhancement"")]","The auto-updater will currently try to download new updates from GitHub over a cell connection, even if the user prefers to only upload data over Wi-Fi.
"
mozilla/MozStumbler,closed,Don't draw line connecting discontiguous tracks,"[Label(name=""bug"")]","I turned stumbling on and off during a road trip. The map view drew long straight lines crossing the desert to connect discontiguous tracks that were many miles and hours apart. When drawing tracks, the map should not connect measurements that are more than X meters or Y minutes apart.
"
mozilla/MozStumbler,closed,weird behaviour,[],"What could be the reason for this?:
![2014-08-08 17 52 34](https://cloud.githubusercontent.com/assets/5685512/3953793/83a07146-26ef-11e4-8629-639c4b57c375.png)

And why are the numbers for wifis and cells in the upload window in general so low now?
Is the upload window now displaying only the number of unique wifis and cells?

The general question is: why are there differences between those numbers?
My guess:
maybe I was driving faster than 10m/s, so maybe the device caught a glimpse of those wifis/cells between the GPS refreshes and so they are not recorded into the database.

For the cells this theory doesn't make too much sense though, because their radius is so much bigger.
same goes for wifi aps: it doesn't make much sense since Wifis are normally longer in the ""caches"" of Android in case they reappear (no real-time scan, rather a scan that tries to get and keep as much as possible(at least that's my theory, why the number of wifis often goes up, while moving fast, but goes down much slower, mostly while standing still))

EDIT: something similar happended on my tablet as well (although I cannot prove it, since Upload only on wifi wasn't checked like on my smartphone, so maybe it uploaded something in between, but I don't think so because since the alarm upload method got introduced it only starts uploading automatically on wifis but not on mobile network connections)
"
mozilla/MozStumbler,closed,"the GPS ""glitches out"" at the beginning of the scanning",[],"Since we are now able to see the track MozStumbler records:
You can see in the following screenshot that the first scans at the beginning are garbage since the GPS values need to plateau first once the device get a GPS fix

are other people experiencing this, too?

if so, then there needs to be a timeout before a GPS position is considered valid for use

or mozstumbler would need to check functions like http://developer.android.com/reference/android/location/Location.html#getAccuracy%28%29 to determine whether the accuracy of the current location is accurate enough

of course the accuracy could also be lower if your device is covered by something or if it is in your jeans/backpack.

In this screenshot you can see what I' talking about:
![glitch](https://cloud.githubusercontent.com/assets/5685512/3907072/713e3182-22f8-11e4-81f7-19c012a12f9b.png)

the red line is where I moved approximately
"
mozilla/MozStumbler,closed,Add autostart on boot option,[],"I would love to have an option that would allow MozStumbler to autostart on boot.
"
mozilla/MozStumbler,closed,Task Notification list item: The stop function on this is not in sync with the app ,"[Label(name=""bug"")]","The task notification list item has stop button when expanded, this is not in sync with the state of the app. It says ""[X] Stop Scanning"" when the app is currently stopped.
"
mozilla/MozStumbler,closed,Stumbled locations not appearing on maps (app and web),[],"The locations I stumbled the last 3 days were transmitted as they were incremented in my leaderboard's scoreboards (and noted as transmitted by the app obviously). But : none of these stumbled locations appear on the map, be it on the website or in-app. 

I run Mozstumbler 0.20.9 on a Nexus 5 and 4.4.4 vanilla.
"
mozilla/MozStumbler,closed,Mapview drawing glitches,[],"Maybe we can use this bug for screenshots of drawing glitches with osm-droid. This is one I see after zooming. The tiles are correct in terms of data and location, but some tiles are loaded with higher level of detail. 

![screenshot_2014-08-01-12-07-48](https://cloud.githubusercontent.com/assets/5495083/3860764/8e3c4cc6-1f27-11e4-8dc7-8ef17ff4f20c.png)
"
mozilla/MozStumbler,closed,Bug: Size element doesn't represent uploaded size,"[Label(name=""bug"")]","The new site element in the upload observations page doesn't show the zipped but the total file size -> the real upload is much smaller
"
mozilla/MozStumbler,closed,"Display OpenStreetMap copyright on map view, not MozStumbler's About page",[],"OSM's copyright (http://www.openstreetmap.org/copyright) specifies that we need to display a copyright message on the map view itself:

_We require that you use the credit “© OpenStreetMap contributors”.  ... For a browsable electronic map, the credit should appear in the corner of the map. For example:_

![attribution_example-05e2149c0f98be0de18a06c07a5ec445](https://cloud.githubusercontent.com/assets/629193/3821001/71e2e994-1d02-11e4-8c7c-d6871f08718b.png)
"
mozilla/MozStumbler,closed,Typo fixed,[],"Sorry, my bad.
"
mozilla/MozStumbler,closed,Update zh-TW strings,[],
mozilla/MozStumbler,closed,sync zh-CN translations with en-US strings,[],
mozilla/MozStumbler,closed,Add Romanian translation,[],
mozilla/MozStumbler,closed,Fennec code standard,[],"Addressing issues from here:
https://bugzilla.mozilla.org/show_bug.cgi?id=1038843
"
mozilla/MozStumbler,closed,Show marker for position only with valid position,[],"Show the marker for the position in the map only if a valid fix/position is available.
"
mozilla/MozStumbler,closed,Marker for position is too big,[],"Hmm, i think the marker for the position could be smaller.
"
mozilla/MozStumbler,closed, Language in map,[],"Use the right language in the map, the same translation could be used from the main page.
- Used
- Visible
- Scanned
- Cells
"
mozilla/MozStumbler,closed,Text in map is overlapping,[],"Text Cells: x Visible, x Scanned WiFi: x Visible, x Scanned under the map is overlapping. 
"
mozilla/MozStumbler,closed,Location cellid/wifi indoor without GPS fix is not possible,[],"When i inside a building and have no GPS fix or GPS is deactivated i get no position with cellid/wifi data.
"
mozilla/MozStumbler,closed,Bug: state of scanning button doesn't change,"[Label(name=""bug"")]","My case with Version 0.21.0:
- GPS is deactivated
- Open MozStumbler
- Search location and close map
- Stop scanning is not possible, MozStumbler asked always for GPS settings
"
mozilla/MozStumbler,closed,Data storage timer bugs: (1) upload timer kept being reset (2) new idle timer to flush ,[],"Some trivial fixes for 2 edge cases, one is where collections keep happening and the upload timer keeps getting pushed back by rescheduling, the other where there are collections in memory that aren't being flushed to disk because stumbler is idle and there is no wifi.

Also, bundled in a few cleanup items with this PR.
"
mozilla/MozStumbler,closed,Fennec: add ping from Fennec to let stumbler know to try upload,[],"When the service is in Fennec, it doesn't need to rely on the upload alarm solely. Fennec can tell the service when it is active, and the service can try upload any queued data. I would expect when used in Fennec, most data will be uploaded by this method.
"
mozilla/MozStumbler,open,Feature share position in map,"[Label(name=""Good first bug""), Label(name=""enhancement"")]","Add feature ""share position"" via
- email
- SMS
- Clipboard
"
mozilla/MozStumbler,closed,Possibility to deactivate/activate the layer Mozilla Location Service Coverage Map in MozStumbler,[],"Add under preferences the possibility to deactivate/activate the layer Mozilla Location Service Coverage Map.
"
mozilla/MozStumbler,closed,"Amendment to 727, track locations when the activity is not showing.",[],"Also snuck in call to make the line thicker.

See issue #727
"
mozilla/MozStumbler,open,"Upload Alarm Scheduling: consider uploading small chunks, instead of bulk upload","[Label(name=""question"")]","Follow up to Issue #738.

The upload scheduler uses an Android alarm, and when it runs, it uploads all the batched data. This can saturate the upload bandwidth. Would it be better to upload for a max amount of time (30s?), then schedule another alarm in 1-2 mins to repeat the process.
"
mozilla/MozStumbler,closed,"Use the last map center (not necessarily the last user location), instead of (0,0)",[],"Rather than having the user see (0,0) every time they start, persist the last map center, and use that if the stumbler service doesn't yet have a real location.

Persisting some preferences for the Map separate from the the rest of the app/service seemed to make sense in this context.  Can move that if desired. 
"
mozilla/MozStumbler,closed,"Fennec Work: pull database back-end, replace with pure file-based storage",[],"[Refactored (rebase -i) my previous PR. Tried to break out the minor commits, which one can quickly review, and the BIG commit which is fea7490 'The grand refactor' -that one requires more thought].

Fennec will not allow the use of a database for a minor feature such as this, the overhead of a DB is too great, and existing use of a db was there for convenience.

Unfortunately, this required a rather hefty refactor. The bonus being, a lot of the problems with missing uploads and disappearing data should be gone. I hope.

As part of this, MozStumbler client is now using the same upload method as the stumbler service, which does not use Android sync.

p.s. I had planned to also squash 008d38e, just realized I left that intermediate work in. Sigh. Leaving it for now, I don't think it is too confusing to see that step in the development.
"
mozilla/MozStumbler,closed,"Fennec Work: pull database back-end, replace with pure file-based storage",[],"Fennec will not allow the use of a database for a minor feature such as this, the overhead of a DB is too great, and existing use of a db was there for convenience.

Unfortunately, this required a rather hefty refactor. The bonus being, a lot of the problems with missing uploads and disappearing data should be gone. I hope. 

As part of this, MozStumbler client is now using the same upload method as the stumbler service, which does not use Android sync.
"
mozilla/MozStumbler,closed,MozStumbler - collecting data with no result,[],"Hello.

I've got problem with MozStumbler. I went to trip throught Balcans
(Romania, Bulgaria, Macedonia, Albania, Montenegro, Croatia...). I
collected about 200 000 measurements, I send it every day. Program says
it's all OK, but in ranking there is no progress for my accout. On
Sunday I reset program settings and I went to 550km trip throught Poland
and situations occurs again - no records on website... What can be
wrong?

Program says that I collected and send 414 255 measurements but ranking says only 259 342
"
mozilla/MozStumbler,closed,UI: Credit to icon author in About,[],"From issue #729 

""The icons come from https://www.iconfinder.com/icons/175171/gps_receiving_icon then were modified, so if used will need to include link to author's website somewhere: http://icons8.com/""
"
mozilla/MozStumbler,closed,Update Hindi & Marathi translations,[],"Added the missing strings
"
mozilla/MozStumbler,closed,"MapActivity: show my gps track, and equivalent MLS track",[],"Show the gps track so I know where I have been. Also show the MLS track so I can see the value of my contribution (and I can see where we have greater error and need more stumbling). With repeated stumbling I should see the MLS track improve over time, which is a valuable indicator. 
Also, Firefox OS QA can use this information to better understand MLS location error.

Sorry, my colours are swapped on my drawing,  the GPS track should be blue.

![screen2](https://cloud.githubusercontent.com/assets/5495083/3716336/b2043f00-1609-11e4-8b25-486aebc42a00.jpeg)
"
mozilla/MozStumbler,closed,MapActivity.java: calling animateTo(point) interferes with gestures,[],"In positionMapAt(Location location) we call  mMap.getController().animateTo(point), which is interfering with gestures. If I comment this line out, I can pan and zoom reliably. With this line in, some gestures are intermittently ignored.
"
mozilla/MozStumbler,closed,MapActivity.java perf bug: calling invalidate with no dirty rect,[],"In positionMapAt(Location) the code calls a mMap.invalidate() with no dirty rect. This is bad for performance, we are repeatedly invalidating the entire view. Why call this at all, I run with this line commented out, seems ok -is there a problem this was solving?
"
mozilla/MozStumbler,closed,Use the service's last location if available and the center hasn't been set in other ways,[],
mozilla/MozStumbler,closed,"Add Information (GPS Status, Location, Cell Info, WiFi Info) to the Map",[],"This adds the translucent header bar, and solid bottom info bar similar to those in the mocks.

The icons come from https://www.iconfinder.com/icons/175171/gps_receiving_icon then were modified, so if used will need to include link to author's website somewhere: http://icons8.com/
"
mozilla/MozStumbler,closed,Add option for tracking Data Usage,"[Label(name=""UI/UX""), Label(name=""enhancement"")]","A lot of users are complaining about Excessive Data Usage. An option for tracking Data Usage could be a nice addition to 0.20.9. 
"
mozilla/MozStumbler,closed,Add PathOverlay to the map to draw the GPS track,[],"This is a work-in-progress, which still needs refinement and is posted to solicit feedback.

It will remember the user's location changes while the Map Activity is up and running, and draw that in the same color as the GPS dot, persisting across screen rotations, etc.

I'm planning to later change this to grab historical data from the service, or some other local store if the user enables it in the setting.

An issue is that OSMDroid is no longer recommending using PathOverlay and now says to use the OSMBonusPack Polyline, however MozStumbler does not yet include that library, and it doesn't seem to have a nice maven import available.

If the Map Activity is changed to use the Mapbox Android SDK, that SDK uses their own implementation of the PathOverlay which may be sufficient, though I'd suspect it would still be prudent to clip the paths that are passed to the overlay to only those that are within some boundry of the currently visible map as I imagine there will be performance implications with users having their entire stumbling history drawn.
"
mozilla/MozStumbler,closed,Pan mode,[],"This allows the user to move around the map without being pulled back to the center every time a new GPS fix comes in.  They can turn this off by touching the ""Refresh"" menu item.  Will move this later to a visible button similar to Google Maps. 

It's a bit convoluted, as the only reliable way I could find for OSMDroid to report that a user-initiated swipe has happened was to use an Overlay and listen for touch events.  When one happens, call back to the creator to store that it was a user initiated move.
"
mozilla/MozStumbler,closed,Put initialization of GPS broadcast reception in onStart(),[],"It's removed in onStop() so should be initiated in onStart().

Without this change, if the user left the map (via notification, home button press, etc) and came back, they would no longer get GPS updates.

The only obvious way to restart updates was to go back from the map activity, then re-enter it to force a re-creation.
"
mozilla/MozStumbler,closed,MozStumbler crashes when adding or removing an account in Android system settings,"[Label(name=""bug"")]","MozStumbler's upload sync adapter throws exceptions when I add or remove an Android account that syncs with my work email and calendar:

```
E/AndroidRuntime(17193): FATAL EXCEPTION: SyncAdapterThread-9
E/AndroidRuntime(17193): java.lang.NullPointerException
E/AndroidRuntime(17193):    at org.mozilla.mozstumbler.service.sync.UploadReports.getMaxId(UploadReports.java:121)
E/AndroidRuntime(17193):    at org.mozilla.mozstumbler.service.sync.UploadReports.uploadReports(UploadReports.java:72)
E/AndroidRuntime(17193):    at org.mozilla.mozstumbler.client.sync.SyncAdapter.onPerformSync(SyncAdapter.java:44)
E/AndroidRuntime(17193):    at android.content.AbstractThreadedSyncAdapter$SyncThread.run(AbstractThreadedSyncAdapter.java:257)
```

```
W/AccountManagerService( 1057): insertAccountIntoDatabase: Account {name=sync, type=org.mozilla.mozstumbler}, skipping since the account already exists
I/ElegantRequestDirector(15648): I/O exception (javax.net.ssl.SSLException) caught when processing request: Write error: ssl=0x7636d388: I/O error during system call, Broken pipe
I/ElegantRequestDirector(15648): Retrying request
D/org.mozilla.mozstumbler.client.MainApp(11388): Service connected
W/dalvikvm(11388): threadid=12: thread exiting with uncaught exception (group=0x416727c0)
E/AndroidRuntime(11388): FATAL EXCEPTION: SyncAdapterThread-1
E/AndroidRuntime(11388): java.lang.NullPointerException
E/AndroidRuntime(11388):    at org.mozilla.mozstumbler.service.sync.UploadReports.getMaxId(UploadReports.java:121)
E/AndroidRuntime(11388):    at org.mozilla.mozstumbler.service.sync.UploadReports.uploadReports(UploadReports.java:72)
E/AndroidRuntime(11388):    at org.mozilla.mozstumbler.client.sync.SyncAdapter.onPerformSync(SyncAdapter.java:44)
E/AndroidRuntime(11388):    at android.content.AbstractThreadedSyncAdapter$SyncThread.run(AbstractThreadedSyncAdapter.java:257)
```

```
E/AndroidRuntime(11584): FATAL EXCEPTION: SyncAdapterThread-1
E/AndroidRuntime(11584): java.lang.NullPointerException
E/AndroidRuntime(11584):    at org.mozilla.mozstumbler.service.sync.UploadReports.getMaxId(UploadReports.java:121)
E/AndroidRuntime(11584):    at org.mozilla.mozstumbler.service.sync.UploadReports.uploadReports(UploadReports.java:72)
E/AndroidRuntime(11584):    at org.mozilla.mozstumbler.client.sync.SyncAdapter.onPerformSync(SyncAdapter.java:44)
E/AndroidRuntime(11584):    at android.content.AbstractThreadedSyncAdapter$SyncThread.run(AbstractThreadedSyncAdapter.java:257)
```
"
mozilla/MozStumbler,closed,Translated missing Finnish strings,[],
mozilla/MozStumbler,closed,Translation updated,[],"Added missing strings
"
mozilla/MozStumbler,closed,cleaned up SSIDBlockList,[],"cleaned up the SSIDBlockList and applied @cpeterso s changes (switched tabs with spaces)
"
mozilla/MozStumbler,closed,Updated Polish translation #711,[],"applied @piotrdrag 's commit manually and submitted this pull request
"
mozilla/MozStumbler,closed,Change to using a pin-point (with accuracy circle) to indicate stumbler's GPS position,[],"This drops the ItemizedOverlay for indicating position, and re-introduces use of the AccuracyCircleOverlay, which is also given a mild make-over to draw the exact pin location and keep its Paint objects around rather than recreating them on each draw.

To get the accuracy circle, the full Location is now passed out from GPSScanner all the way back to the MapActivity, rather than grabbing the Latitude & Longitude piecemeal.

The center point could be improved further, and the accuracy circle often gets obscured by it, but hopefully it's an improvement over the old push-pin to indicate location.
"
mozilla/MozStumbler,closed,MainActivity ui update: change to ensure it runs on the main thread,[],"Wrap the update in a main thread runnable. Allows for safe updating of the ui from secondary thread.
"
mozilla/MozStumbler,closed,Fix a crash when the Application tries to update the MainActivity,[],"Create a new Runnable to handle the UI update, as the Application
may not be running on the thread that created the view hierarchy.

This manifests as:

 13573-13715/org.mozilla.mozstumbler E/AndroidRuntime﹕ FATAL EXCEPTION: Timer-3
    Process: org.mozilla.mozstumbler, PID: 13573
    android.view.ViewRootImpl$CalledFromWrongThreadException: Only the original thread that created a view hierarchy can touch its views.
            at android.view.ViewRootImpl.checkThread(ViewRootImpl.java:6220)
            at android.view.ViewRootImpl.requestLayout(ViewRootImpl.java:848)
            at android.view.View.requestLayout(View.java:16471)
            at android.view.View.requestLayout(View.java:16471)
            at android.view.View.requestLayout(View.java:16471)
            at android.view.View.requestLayout(View.java:16471)
            at android.widget.RelativeLayout.requestLayout(RelativeLayout.java:352)
            at android.view.View.requestLayout(View.java:16471)
            at android.view.View.requestLayout(View.java:16471)
            at android.widget.TextView.checkForRelayout(TextView.java:6609)
            at android.widget.TextView.setText(TextView.java:3819)
            at android.widget.TextView.setText(TextView.java:3677)
            at android.widget.TextView.setText(TextView.java:3652)
            at android.widget.ToggleButton.syncTextState(ToggleButton.java:81)
            at android.widget.ToggleButton.setChecked(ToggleButton.java:75)
            at org.mozilla.mozstumbler.client.MainActivity.updateUI(MainActivity.java:129)
            at org.mozilla.mozstumbler.client.MainApp$ServiceBroadcastReceiver.onReceive(MainApp.java:202)
            at android.support.v4.content.LocalBroadcastManager.executePendingBroadcasts(LocalBroadcastManager.java:297)
            at android.support.v4.content.LocalBroadcastManager.sendBroadcastSync(LocalBroadcastManager.java:278)
            at org.mozilla.mozstumbler.service.scanners.cellscanner.CellScanner$1.run(CellScanner.java:112)
            at java.util.Timer$TimerImpl.run(Timer.java:284)
"
mozilla/MozStumbler,closed,Points with WIFI turned off get not imported,[],"Recently I have made some recording tour through a rather rural area where I was roaming mostly outside of any settlements. As I did not expect to hit many WIFIs on my route and as my phone was running on battery for that time I had turned WIFI off to safe battery. Unfortunately it seems as if the 10000 points or so that I had recorded in this session have not been included into the database yet, while later recording sessions (with WIFI turned on) already are included.

Of course I cannot tell for sure if this is related to the WIFI status or to something else but WIFI was the only thing that was obviously different compared to all other recordings. Or are there other restrictions I'm possibly not aware of that can prevent data points from getting included? i could not find any documentation on this topic.
"
mozilla/MozStumbler,closed,Updated Polish translation (#711) + cleaned up SSIDBlockList,[],"applied @piotrdrag 's commit manually and submitted this pull request
cleaned up the SSIDBlockList (was automatically moved into this pull request although I wanted to make a separate one)
"
mozilla/MozStumbler,closed,Add Ono Wifi to blacklist,[],"The internet provider Ono gives free internet for their users in big cities. Their SSID is _AUTO_ONOWiFi

https://red.onowifi.es/
"
mozilla/MozStumbler,closed,uploads consistently failing,[],"phone: Samsung Galaxy S4
ROM: Cyanogen Mod 11 M8
MozStumbler: 0.20.9

In the logs I see

```
Error submitting: org.mozilla.mozstumbler.service.AbstractCommunicator$HttpErrorException
```

This gets repeated several times (3+)

Then as per other tickets, the collected tracks get deleted

Previous version 0.20.8 uploaded with out issue
"
mozilla/MozStumbler,closed,"Revert ""cursor was not checking cursor.getCount() > 0 ",[],"Oops, this doesn't need to check. Reverts mozilla/MozStumbler#703
"
mozilla/MozStumbler,closed,Updated Polish translation,[],"Hi, here is a patch with Polish translation update:

http://raven.fedorapeople.org/temp/0001-Updated-Polish-translation.patch
"
mozilla/MozStumbler,closed,0.20.9 lacks of UI feedback when the capturing process is stopped/killed by the system,[],"Maybe related to #708 

With 0.20.9, I could only see capturing feedback when I was on a bus, but none while walking, and some while I biking. By feeback/no feedback/some I mean:

Feedback:
- The GPS icon is shown in the notification bar, therefore, GPS is active and working.
- The ""Location Scanned"" counter increases as I am in movement.

No feeback:
- The GPS icon disappear after several seconds. I have not measured how long it takes, but it might be 30 seconds or so.
- If I press stop and start again, the GPS is activated again, but it has to do all the dancing to obtain the current position, and it gets deactivated after a while.
- The ""Location Scanned"" counter does not show any increment. It stays on 0 (zero).
- The MozStumbler icon is in the notification bar, therefore, it is active... but apparently no capturing anything that I could guess from the UI.

Some feedback:
- The GPS icon stays active (possibly because I was using another application that requires the GPS)
- The ""Location Scanned"" counter does not show any increment. It stays on 0 (zero).
- The MozStumbler icon is in the notification bar, therefore, it is active... but apparently no capturing anything that I could guess from the UI.

I noticed this after biking ~25 kms, that the UI only had in green the button I pressed to scan, but everything else with no change. 0 locations scanned. However, a day later the zone I was biking on appeared with dots in mozilla's map.  So, it seems it was scanning, but no providing any information.

I tried the usual sequence start/get the location/stop/start as in previous versions (given it never starts capturing the first time I activate it), but this time the trick did not work.

My guess was that MozStumbler was trying to save some battery by deactivating the GPS if I am not moving fast enough (like on a car).

I downgraded to 0.20.5, which works.
"
mozilla/MozStumbler,closed,Make it movable to the external storage,"[Label(name=""Closed: won't fix"")]","Could MozStumbler be made movable to the external storage (SD card)?
"
mozilla/MozStumbler,closed,Sometimes doesn't capture anything,[],"I am seeing something strange with MozStumbler: I used to run it together with GPS Logger (https://play.google.com/store/apps/details?id=com.mendhak.gpslogger) and Tower Collector (https://play.google.com/store/apps/details?id=info.zamojski.soft.towercollector) but saw that it wasn't capturing data sometimes.

Since both GPS Logger and Tower Collector were properly capturing data, I thought that it could be some kind of concurrence (two apps trying to access the same resource, maybe).

Then I started to use only MozStumbler but sometimes I still see the same problem: even having 11 visible GPS/Glonnas satellites, sometimes it just doesn't capture anything.
The scanned locations remains at 0, while I can see the GPS satellites, cells and wifi points being updated.
"
mozilla/MozStumbler,closed,Should not scan when asked to locate,[],"When asking MozStumbler to locate me it also starts to scan my current location (capturing cell and everything else).

If I am asking only to be located it shouldn't also start to scan my location.
It can internally use all the available info to locate me, but should not register or save these data.
"
mozilla/MozStumbler,closed,Not displaying my location,[],"Until version 0.20.5 I was able to see a rough location when asking MozStumbler to locate me.
With 0.20.9 it keeps displaying me at the ocean onlyt (it seems to keep trying to locate, but can't see a valid location, even after waiting a lot of time)
"
mozilla/MozStumbler,closed,log failed uploads / don't delete failed uploads,"[Label(name=""bug"")]","I have a question: does the log mention it if an upload fails and the data is deleted from the database?
"
mozilla/MozStumbler,closed,Fennec Integration: StumblerService to a thread,[],
mozilla/MozStumbler,closed,"cursor was not checking cursor.getCount() > 0 before working with it,",[],"could cause crash as seen in issue #696
"
mozilla/MozStumbler,closed,"Issue #699, upload not getting zipped. ",[],"The code would not zip on http error, this is fixed.
"
mozilla/MozStumbler,closed,Wi-Fi optimization: any negative impacts on wifi scanning?,[],"does the system option for wifis: wlan optimization have any negative effect on scanning/stumbling?

is the scanning rate slower? does MozStumbler recognize still wifi aps that are further away?
"
mozilla/MozStumbler,closed,"wifi ""scan always"" option doesn't work","[Label(name=""bug"")]","the scan always option doesn't work anymore since the UI/Service split.
Haven't noticed it before since I left my wifi on while scanning...
""visible wifi aps"" shows: ""0 (deactivated)"" even though the option is activated in MozStumbler and in the system settings...
"
mozilla/MozStumbler,closed,sometimes my upload doesn't get zipped,"[Label(name=""bug"")]","according to the new view log function sometimes an upload doesn't get zipped

do you know what could be the reason for that?

![screenshot_2014-07-10-18-08-21](https://cloud.githubusercontent.com/assets/5685512/3542387/65534ca2-0856-11e4-8df1-174d74f702cc.png)

is it switching to plain automatically if the first upload fails/times out?
"
mozilla/MozStumbler,closed,duplicated logs,[],"sometimes logs are duplicated (after each other without the blue colored part)
![screenshot_2014-07-10-18-07-59](https://cloud.githubusercontent.com/assets/5685512/3542097/60df5dd0-0853-11e4-9a03-4f2a7cdea391.png)
![screenshot_2014-07-10-18-08-21](https://cloud.githubusercontent.com/assets/5685512/3542098/61101042-0853-11e4-8ff5-ca96d6be9f07.png)
"
mozilla/MozStumbler,closed,scan button is to small in landscape mode,"[Label(name=""bug"")]","the size of the start/stop scanning button was changed recently. But noone viewed it in landscape mode.
in landscape mode the button is split in up to 3 lines even if there is enough space for it to be in one line...

this looks pretty bad on tablets like the samsung galaxy tab 3 10.1 where the default view is landscape mode (the buttons would be at the side of the device if you use potrait mode)

But see for yourself:
Samsung Galaxy Tab 3 10.1
![screenshot_2014-07-10-10-27-48](https://cloud.githubusercontent.com/assets/5685512/3542024/89612cb2-0852-11e4-98b9-fed51b1215ca.png)

Sony Xperia Arc S
![screenshot_2014-07-10-16-30-03](https://cloud.githubusercontent.com/assets/5685512/3542026/902765a2-0852-11e4-842d-277435643e48.png)
"
mozilla/MozStumbler,closed,Background service crash issue (sync module),"[Label(name=""bug"")]","sometimes I still get ""Unfortunately MozStumbler stopped working"" or something like that.
But for a different reason. The issue seems to lay within MozStumbler's sync module.
getmaxid seems to be the function

extract from system log (searched for ""Moz"") you have to read it from bottom to top

```
Android Tuner (logcat)
======================
I/13:46:43.151 ActivityManager(  670)
  svc   S     5289 kB: org.mozilla.mozstumbler (4706) started-services
D/13:46:35.343 org.mozilla.mozstumbler.client.MainApp( 4706)
Service connected
W/13:46:35.293 AccountManagerService(  670)
insertAccountIntoDatabase: Account {name=sync, type=org.mozilla.mozstumbler}, skipping since the account already exists
D/13:46:35.113 ActivityThread( 4706)
handleBindApplication:org.mozilla.mozstumbler
I/13:46:34.643 ActivityManager(  670)
Start proc org.mozilla.mozstumbler for service org.mozilla.mozstumbler/.service.StumblerService: pid=4706 uid=10079 gids={50079, 3003, 1028, 1015, 1023}
W/13:46:33.622 ActivityManager(  670)
Scheduling restart of crashed service org.mozilla.mozstumbler/.service.StumblerService in 1000ms
I/13:46:33.612 ActivityManager(  670)
Process org.mozilla.mozstumbler (pid 4595) has died.
E/13:46:20.629 AndroidRuntime( 4595)
    at org.mozilla.mozstumbler.client.sync.SyncAdapter.onPerformSync(SyncAdapter.java:44)
E/13:46:20.629 AndroidRuntime( 4595)
    at org.mozilla.mozstumbler.service.sync.UploadReports.uploadReports(UploadReports.java:72)
E/13:46:20.629 AndroidRuntime( 4595)
    at org.mozilla.mozstumbler.service.sync.UploadReports.getMaxId(UploadReports.java:121)
E/13:46:20.629 AndroidRuntime( 4595)
Process: org.mozilla.mozstumbler, PID: 4595
D/13:46:20.619 org.mozilla.mozstumbler.client.MainApp( 4595)
Service connected
W/13:46:20.589 AccountManagerService(  670)
insertAccountIntoDatabase: Account {name=sync, type=org.mozilla.mozstumbler}, skipping since the account already exists
D/13:46:20.449 ActivityThread( 4595)
handleBindApplication:org.mozilla.mozstumbler
I/13:46:20.189 ActivityManager(  670)
Start proc org.mozilla.mozstumbler for service org.mozilla.mozstumbler/.client.sync.SyncService: pid=4595 uid=10079 gids={50079, 3003, 1028, 1015, 1023}
```
"
mozilla/MozStumbler,closed,"view log, logs are cut off by dots",[],"logs are cut off by dots -> often you are not able to see cells if there are too many wifis
-> pls make it so that you can toggle the entries (expand/collapse on touch)

![screenshot_2014-07-10-18-07-59](https://cloud.githubusercontent.com/assets/5685512/3542124/be565f90-0853-11e4-8621-e9da658ac435.png)
"
mozilla/MozStumbler,closed,empty email isn't saved correctly (settings entry title),"[Label(name=""bug"")]","If I change my nickname to empty and then close and reopen the settings window then it shows the previous nickname in the settings title but once I click on it it shows an empty string (which I have entered before).
"
mozilla/MozStumbler,closed,Please add a UnifiedNlp backend,[],"Please consider adding a UnifiedNlp (https://github.com/microg/android_packages_apps_UnifiedNlp) backend for the Mozilla Location Service.

UnifiedNlp is a Network Location Provider for Android that supports plugins (backends).
"
mozilla/MozStumbler,closed,Release 0.20.9,[],
mozilla/MozStumbler,closed,Update zh-TW strings,[],
mozilla/MozStumbler,closed,Update strings.xml,[],
mozilla/MozStumbler,closed,"Issue #679, get url for tiles at runtime",[],"Issue #679, get url for tiles at runtime.
"
mozilla/MozStumbler,closed,aligned translations to source file,[],"removed an unneccessary space at the end of about_openstreetmap in english source translation file
aligned translation files to english source translation file (added reminders for missing translations)
added line-breaks to values-gr
changed indent size from 2 to 4 in values-iw
removed unneccessary line-breaks in values-mr
"
mozilla/MozStumbler,closed,Prefs not saving nickname,[],"Issue #684 fix.

Also some minor tweaks to log activity to truncate messages after the first batch.
"
mozilla/MozStumbler,closed,MapActivity fixes,[],"Here's some fixes to the MapActivity to make it more useful to stumblers.  It seems that before it was intended to be just a test of the MLS to see what the server responds with.  I think a test is less important than a stumbler being able to determine where they should stumble next, hence using the GPS fixes to animate the map around, and making rotation a bit less jarring.
"
mozilla/MozStumbler,closed,The UI is not reset when stop scanning,"[Label(name=""bug"")]","When I press the button to ""start scanning"" the entire interface is updated with information but when I stop the scan this information persists and is not reset and the old versions.

I'm using Moto G with Android 4.4.2
Since v0.20.6
"
mozilla/MozStumbler,closed,My nickname is not recorded,[],"When he entered the settings and put a nickname it disappears and I get back into the settings disappeared.

I'm using a Motorola G with Android 4.4.2
Since v.0.20.6
"
mozilla/MozStumbler,closed,Log activity ease-of-use improvements,[],"After a bunch of stumbling today, I found the log activity difficult to use, I addressed some obvious problems I ran into. Added truncation of long messages, added new async shared log message buffer for easier logging,
added up/down arrows to get to top/bottom of log.
Added application test case to create 10000 reports and upload them.
"
mozilla/MozStumbler,closed,New Android Studio 0.8.1 requires a newer gradle plugin 0.12+,[],"Hopefully these revisions will slow now that AS is in beta.
"
mozilla/MozStumbler,closed,Fix issue 663 (I hope). Don't record cellinfo with unknown network type.,[],"Fix Issue #663.
Also added upload info in the log activity (and some color!).
Renamed a file to be more consistent.
"
mozilla/MozStumbler,closed,"Persist the ""Upload only on WiFi"" and the ""Geofencing"" preference",[],"Prior to this change, the user couldn't de-select ""Upload only on WiFi"" setting and have it persist.  Going back into settings would show that the ""Upload only on WiFi"" setting was re-selected.

Geofence Enabled had a similar fate.  Sometimes it would not disable if the GeofenceEnabledHere was not false.
"
mozilla/MozStumbler,closed,Make map coverage url configurable,[],"The map view currently hardcodes the coverage tiles url in (https://github.com/mozilla/MozStumbler/blob/master/src/org/mozilla/mozstumbler/client/mapview/MapActivity.java#L58):

```
COVERAGE_URL = ""https://location.services.mozilla.com/tiles/"";
```

That url is going to change next week and will change again later this month. The value for next week (which already works today) is:

```
http://location-unmanaged-assets.s3-website-us-west-2.amazonaws.com/tiles/
```

You can test this by accessing `http://location-unmanaged-assets.s3-website-us-west-2.amazonaws.com/tiles/0/0/0.png`. Note that this no longer supports HTTPS. We'd have to pay a lot more money for cloudfront to get HTTPS, and that's not worth it with the low amount of traffic the map gets.

As an alternative I can also expose the tiles url programmatically, for example in a json file on the service end. For the purposes of the website, it's already exposed as part of the /map HTML via `<div id='map' data-tiles='https://location.services.mozilla.com/tiles/{z}/{x}/{y}.png'></div>`. But that would be a bit hard to parse from the stumbler app.
"
mozilla/MozStumbler,closed,fix missing import on prev commit,[],"Forgot to wait for travis.
"
mozilla/MozStumbler,closed,try to preserve old prefs on upgrade,[],"Manually copy from the expected old location to the new one.
"
mozilla/MozStumbler,closed,Update SSIDBlockList.java,[],
mozilla/MozStumbler,closed,Bug 1024708 - Pre: Add MPLv2 license headers to code that ships with Fennec.,[],"Trivial, but needs to be done.  I have a tool that does this in one line if you want to land such license headers in more than just `service/`.
"
mozilla/MozStumbler,closed,Passive Stumbler: Remove check for a specific start intent,[],"These might change as we add more start intents, we don't need to verify (or care) which intent started the service.
"
mozilla/MozStumbler,closed,Prevent crash,[],"While not using the stumbler, a dialog would still pop up saying that the stumbler
had crashed:

E/AndroidRuntime(25424): Caused by: java.lang.NullPointerException
E/AndroidRuntime(25424):        at org.mozilla.mozstumbler.service.StumblerService.onStartCommand(StumblerService.java:138)
E/AndroidRuntime(25424):        at android.app.ActivityThread.handleServiceArgs(ActivityThread.java:2729)
E/AndroidRuntime(25424):        ... 10 more

This is annoying to users, so should be stopped.
"
mozilla/MozStumbler,open,Show list containing unique wifis and cells,"[Label(name=""enhancement"")]","In addition to #336 and the new log functionality it would be nice to have a new window containing a list of the scanned unique wifis and one for unique cells.
(just for ones that have been scanned since the last start)
"
mozilla/MozStumbler,closed,0.20.6 settings got reset,"[Label(name=""bug"")]","the update resetted all my mozstumbler settings
is there a way to transfer/import the settings into the new format?
If so then it would be nice if somebody implements it before the next version is released ;)
"
mozilla/MozStumbler,closed,"view log should show more info, use colours, better formatting",[],"just a blank screen

Device:
Xperia Arc S
Rom:
CarbonRom Kitkat

![screenshot_2014-07-02-15-57-40](https://cloud.githubusercontent.com/assets/5685512/3456684/571af2c2-01f1-11e4-9a7c-8c5942dab0b7.png)
"
mozilla/MozStumbler,closed,upload window theme wasn't changed by #646,"[Label(name=""Good first bug"")]","The upload window still uses the light theme.
"
mozilla/MozStumbler,closed,0.20.6 bug: service crashes after closing,[],"~30 seconds after everytime I close mozstumbler I get an error: Unfortunately Mozstumbler stopped.

looking at the system log (with Android Tuner), I see that the service is restarted after the main app is closed and then crashes with a nullpointerexception.

Probably unwanted behaviour: somehow the system tries to keep the service alive or something.
"
mozilla/MozStumbler,closed,Add skin selection to the settings,[],"Feature request:
Ability to switch between dark and light skin
and using the system default as the default skin after first install.
"
mozilla/MozStumbler,closed,Added ScrollView to the activity_about.xml #621,[],"Added ScrollView to the activity_about.xml file and reorganized it a little bit
"
mozilla/MozStumbler,closed,Add OnniBus.com on-bus wifi to blocklist,[],
mozilla/MozStumbler,closed,Move SSID blocklist from Java code to user-configurable text file on /sdcard,"[Label(name=""enhancement"")]","(Forked from issue #581.)

Allow power users to override or augment the embedded SSID blocklist with a text file on /sdcard. Or move the entire blocklist out of Java code to a user-configurable text file on /sdcard.
"
mozilla/MozStumbler,closed,Upload silently fails multiple times and the data is lost,"[Label(name=""bug"")]","I've been playing with MozStumbler in the past few days and collected about 4000 observations, from which about 1000 succeeded to upload, but the others failed and eventually got deleted. I did some experiments and it seems that uploading 4-5 observations always succeeds, but uploading more (like 100) fails most of the time, at least for me. After 3-4 retries, the data is deleted.

**Device:** HTC One SV (Android 4.2.2), using MozStumbler v0.20.5

**Network:** tried multiple Wi-Fi connections, and also cellular networks. Others apps that rely on the same connection are working fine.

**Related issues:** https://github.com/mozilla/MozStumbler/issues/546 and https://github.com/mozilla/MozStumbler/issues/651

**Logcat messages:**

```
06-29 18:53:26.781: E/org.mozilla.mozstumbler.communicator.AbstractCommunicator(6941): Couldn't compress and send data, falling back to plain-text: 
06-29 18:53:26.781: E/org.mozilla.mozstumbler.communicator.AbstractCommunicator(6941): org.mozilla.mozstumbler.communicator.AbstractCommunicator$HttpErrorException
06-29 18:53:26.781: E/org.mozilla.mozstumbler.communicator.AbstractCommunicator(6941):  at org.mozilla.mozstumbler.communicator.AbstractCommunicator.sendData(AbstractCommunicator.java:96)
06-29 18:53:26.781: E/org.mozilla.mozstumbler.communicator.AbstractCommunicator(6941):  at org.mozilla.mozstumbler.communicator.AbstractCommunicator.send(AbstractCommunicator.java:104)
06-29 18:53:26.781: E/org.mozilla.mozstumbler.communicator.AbstractCommunicator(6941):  at org.mozilla.mozstumbler.communicator.Submitter.cleanSend(Submitter.java:40)
06-29 18:53:26.781: E/org.mozilla.mozstumbler.communicator.AbstractCommunicator(6941):  at org.mozilla.mozstumbler.sync.SyncAdapter.onPerformSync(SyncAdapter.java:91)
06-29 18:53:26.781: E/org.mozilla.mozstumbler.communicator.AbstractCommunicator(6941):  at android.content.AbstractThreadedSyncAdapter$SyncThread.run(AbstractThreadedSyncAdapter.java:254)

06-29 18:53:27.992: E/org.mozilla.mozstumbler.communicator.Submitter(6941): Error submitting: 
06-29 18:53:27.992: E/org.mozilla.mozstumbler.communicator.Submitter(6941): org.mozilla.mozstumbler.communicator.AbstractCommunicator$HttpErrorException
06-29 18:53:27.992: E/org.mozilla.mozstumbler.communicator.Submitter(6941):     at org.mozilla.mozstumbler.communicator.AbstractCommunicator.sendData(AbstractCommunicator.java:96)
06-29 18:53:27.992: E/org.mozilla.mozstumbler.communicator.Submitter(6941):     at org.mozilla.mozstumbler.communicator.AbstractCommunicator.send(AbstractCommunicator.java:109)
06-29 18:53:27.992: E/org.mozilla.mozstumbler.communicator.Submitter(6941):     at org.mozilla.mozstumbler.communicator.Submitter.cleanSend(Submitter.java:40)
06-29 18:53:27.992: E/org.mozilla.mozstumbler.communicator.Submitter(6941):     at org.mozilla.mozstumbler.sync.SyncAdapter.onPerformSync(SyncAdapter.java:91)
06-29 18:53:27.992: E/org.mozilla.mozstumbler.communicator.Submitter(6941):     at android.content.AbstractThreadedSyncAdapter$SyncThread.run(AbstractThreadedSyncAdapter.java:254)
```

The logs reveal that the exception is caught in cleanSend and the data simply gets deleted because the retry count reaches its limit. The observations also confirm that. However, it would be interesting to know why it fails. If that helps, I will try to build MozStumbler for myself and debug it to see what causes the issue (but osmdroid is giving me headache).
"
mozilla/MozStumbler,closed,Add Arcticbus on-bus wifi to blocklist,[],"This adds the on-bus wifi of buses owned by Arcticbus in northern Sweden to MozStumbler's blocklist.
"
mozilla/MozStumbler,closed,updated sdk license for travis,[],"https://twitter.com/travisci/status/482255297738985473
"
mozilla/MozStumbler,closed,Switch from osmdroid 4.1 to mapbox-android-sdk 0.3.0,[],"WIP: adding an additional tile source doesn't seem to combine them.  Asked Mapbox support about this, as it may be necessary to make one of the tile sources into an Overlay.

This requires dropping support for Android API level 8, so for mapbox integration, it will need to be 9+.

Also removed the querying of MLS for position info.  That can be added back in a separate activity, as this Map Activity should be used by stumblers to determine where in their area has already been stumbled.  The testing of MLS responses was never clear in the MapActivity.

The ""Refresh"" button now refreshes the map back to the user's location.  This is useful if they start to pan around the map a bunch and get lost.
"
mozilla/MozStumbler,closed,Provider to client-side only for Fennec Integration,[],"There is a new db abstraction layer to provide this. Content Providers are beneficial for  sharing databases between apps and for the async CursorAdapter interface. Neither are needed on the service side, but the latter is handy on the client side for UI purposes. The bigger problem would be that a content provider requires a manifest declaration, and must not conflict; the app is not designed such that multiple clients can access a common db. Installing both MozStumbler and Fennec with the same Provider causes runtime errors.

Also, fixed lint warning as I hit upon them. Hopefully if we keep at this we can get from dozens or so, to zero.
"
mozilla/MozStumbler,closed,ScrollView added: Issue 621,[],
mozilla/MozStumbler,closed,Mozstumbler shutting off unexpectedly ,[],"On the Nexus 5 and Android 4.4.4 / 4.4.3, Mozstumbler shutted itself down several times, with the same pattern : when I'm on the road, launching Google Maps and another app (different each time, it can be a podcasting app or something else with Mozstumbler).

I think it might be caused by a very high CPU or memory usage because I get this problem only when the phone is strongly sollicited (and always with Google Maps in GPS navigation mode).

The Mozstumbler app then simply shuts itself off whithout even Android telling me it has unexpectedly stopped. Just no more app in the background, and no notification anymore. When launched again, I can see it kept in memory the location points registered before the suprise closure.

I cannot really produce a log because I always am in the car (and in a hurry usually) when that happens. It's kinda annoying, and leads to important data losses if I don't think to watch my phone regularly to relaunch Mozstumbler if it crashed.
"
mozilla/MozStumbler,closed,Scroll Bar added - #621 ,[],
mozilla/MozStumbler,closed,Attach a scrollbar to the about page #621,[],
mozilla/MozStumbler,closed,Make about page more consistent #622,[],
mozilla/MozStumbler,closed,Pull blocklist from web #581,[],
mozilla/MozStumbler,closed,"During refactor to MainApp, scanner was set to no wcdma version",[],"Fix this to use the full scanner.
Also removed a lint warning in ServiceTest. Should really try clean all the lint warnings up
"
mozilla/MozStumbler,closed,Upload lost,"[Label(name=""bug"")]","I did a whole day long data acquire and I used Wifi at the end of the scanning. The numbers of the events in the queue decreased but number in Sent field did not increased? What happened? Is it possible to reload those data again? Or can you find them on the Mozilla server? I got around 100000 scanned WiFi Access points.
"
mozilla/MozStumbler,closed,Translate missing strings (fi),[],"Translated all strings that were marked as missing / needed update.
"
mozilla/MozStumbler,closed,"Separate responsibility of MainActivity, fix strict mode violations",[],"MainActivity is acting as both a view and a controller of the entire app, separating that responsibility to the new MainApp class.

I was seeing a rare crash rotating the screen an hitting the start/stop button quickly. This correlated with the instance count violation in the log, as reported from issue #7
I don't like seeing instance count violations, because I have no idea if they are contributing to app crashes.
https://github.com/mozilla/MozStumbler/issues/7
After this refactor, I no longer see this issue, nor can I get the app to crash rotating and hitting the scanning button.
"
mozilla/MozStumbler,closed,"Main Activity, layout for 2.7 inch screens",[],"Inspired by https://github.com/mozilla/MozStumbler/pull/632
I tried to fix the main screen so that it would work -however unattractively- on small screens.

2.7 inch
https://www.dropbox.com/s/qydvilgu7sw4ypk/Screenshot%202014-06-23%2020.46.37.png
https://www.dropbox.com/s/yc63co1d1wg8fpd/Screenshot%202014-06-23%2020.46.44.png

3.2 inch
https://www.dropbox.com/s/yegdtq2esfou4sv/Screenshot%202014-06-23%2020.46.56.png
"
mozilla/MozStumbler,closed,Followup to #639: Fix lifespan of CellScanner,[],"Fix for https://github.com/mozilla/MozStumbler/pull/639.

Introduced memory error, as by design both the service and the client are trying to create a cell scanner.
Create cell scanner in MainActivity startscanning, clear it on stopscanning. This is guaranteed to override the creation in the service, which creates the NoWCDMA scanner by default.

A further note on this split. It only makes sense in the context of Fennec, and for someone who wants to use the service on its own (as it is now designed) on SDK level 18, they won't get wcdma scanning, which is dumb. It won't be here for long in this form, please tolerate it for the time being.
"
mozilla/MozStumbler,closed,Dark Theme: issue #454.,[],"https://github.com/mozilla/MozStumbler/issues/454

I needed a change from the white screens, so I took a crack at this.

Checked on android 4.4.3 and on a 2.3.3 emulator:
https://www.dropbox.com/s/yrtpo6ul6itg14g/Screenshot%202014-06-23%2019.16.37.png
"
mozilla/MozStumbler,closed,Pull blocklist from web,[],"BlockList.txt contains the list of blocked SSIDs. This list on getting updated is downloaded from the web and stored in the app.
"
mozilla/MozStumbler,closed,Attach a scrollbar to the about page #621,[],"A ScrollView has been added to activity_about.xml.
"
mozilla/MozStumbler,closed,Make about page more consistent #622,[],"The activity_about page is made more consistent and the string have been added to strings.xml.
"
mozilla/MozStumbler,closed,Attach a scrollbar to the about page #621,[],"A ScrollView has been added to activity_about.xml.
"
mozilla/MozStumbler,closed,Make about page more consistent #622,[],"The activity_about page is made more consistent and the string have been added to strings.xml.
"
mozilla/MozStumbler,closed,Added log activity to options menu.,[],"I find this useful for understanding what the app is doing.
Also switched to black UI style.
"
mozilla/MozStumbler,closed,"WCDMA requires SDK 18, which Fennec doesn't support (yet)",[],"Refactored so that MozStumbler has WCDMA in the client, and the service does not. 
Also fixed typo in LTE neighbour scan, where these cells were not added.
"
mozilla/MozStumbler,closed,Fennec: WCDMA requires SDK 18,[],"Refactored so that MozStumbler has WCDMA in the client, and the service does not.
Requested api upgrade for fennec:
https://bugzilla.mozilla.org/show_bug.cgi?id=812227

This will get reverted some time in the future, hopefully sooner rather than later.
"
mozilla/MozStumbler,closed,Update travis.yml build tools 19.1.0,[],
mozilla/MozStumbler,closed,Pull blocklist from web,[],"Checks if any new entries have been made in the block list. If yes, then the new block list is downloaded.
"
mozilla/MozStumbler,closed,"oops, my prev commit had debugging code to not delete reports",[],
mozilla/MozStumbler,closed,added up arrow navigation to action bar,[],"This is standard now on android UI for task navigation
"
mozilla/MozStumbler,closed,Android Studio,[],"This will block on Travis upgrading to the Android Build tools version 19.1.0.

Upgrades to gradle, gradle android plugin, and android build tools. Required for Android Studio 0.6+

Also ignore AS files (.idea and .iml)
"
mozilla/MozStumbler,closed,Feature/adapt to small screens,[],"Changes:
- Added project.properties to .gitignore
- Updated on gradle.build the BuildToolVersion
- Added libs osmdroid, slf4j and support-v4 to make it run easily from Eclipse
- Small changes on landscape and portrait main activity UI to make it fit on small devices (such us Galaxy Y) which are incredible common in India and Brazil.
"
mozilla/MozStumbler,closed,Coalesce similar stumbling records,[],"Here is a short period of stumbling in-office.
https://drive.google.com/file/d/0B1sYPwjczMsQeVNTWjZNNnRvLXM/edit?usp=sharing

We see 70k of data that could be coalesced to a fraction of that size (<10k I would guess). Just repeated data over and over with slight variations in values. If you look at the second tab, you'll see the cell data sorted, there are only about 8 cell records. 

Need to check with services to get their opinion on how they would like this data aggregated (do we average ASUs?, if we have a 2nd cell scan that has LAC do we dispose the first?). 

Lat/Longs can be considered equal based on time and distance, scans within x minutes, within 5 meters, are the same point, use the higher accuracy position, and aggregate the scans. 
"
mozilla/MozStumbler,closed,Passive stumbler,[],"- Passive mode is now functional. Added support throughout the service for this. 
- Removed use of sync adapter (issue #627) and preferences xml (issue #628) from service. They are still used by the client side.
- Added a unit test for Provider, and a larger functional test for passive stumbling mode. 
- Pulled unused phone state permission (issue #625)
"
mozilla/MozStumbler,closed,Unit Testing -Help needed!,[],"The code base is growing and we have zero unit testing. Retrofitting this is not easy, so going forward we should be unit testing as we commit.
Any tests will be accepted, unit or functional. There is no code coverage requirement, just hit the major use cases.
"
mozilla/MozStumbler,closed,Remove use of Prefs.xml on the service,[],"For fennec integration, the service is requested to be a resource-free jar. Prefs.xml is the only resource we are using outside of sync, and it isn't necessary. Using an xml for prefs provides some nice framework utils for setting up defaults, and upgrading. 
"
mozilla/MozStumbler,closed,Replace Sync Framework with Async Task,[],"For Fennec integration, we can't use the sync framework as it adds an account in settings. This will have to be changed to an async task for uploading. Unfortunate work to have to do, as the existing system works just fine.
"
mozilla/MozStumbler,closed,Add DeinBus on-bus WiFi (Germany),[],"The full SSID is "".DeinBus.de-Datenautobahn"".
"
mozilla/MozStumbler,closed,Unused Permission: READ_PHONE_STATE,[],"I can run without this permission, anyone know why we have it?
https://github.com/mozilla/MozStumbler/blob/master/AndroidManifest.xml#L18

Fennec doesn't use this permission, trying to use the same permissions that already exist for it.
"
mozilla/MozStumbler,open,"Add ""testmode"" for requested geolocation over wifi/cellid/ip address","[Label(name=""enhancement"")]","Hello,

to test geolocation via wifi, cellid or ip address it would be nice to add a testmode under settings where you can choose to use the requested possibility of geolocation.
Maybe you can activate the feature testmode and choose the geolocation via wifi and/or cellid and/or geoip.
So you can do checks in the environment or deactivate geolocation over ip address (if i dont want this).
By default the test mode is deactivated and use all three possibilities.
"
mozilla/MozStumbler,closed,Service/Client Split,[],"ggp and I have been working on a service/client split, as required to create a service-only library for fennec.
"
mozilla/MozStumbler,closed,Make about page more consistent,"[Label(name=""Good first bug"")]","The link to the osm project has a different color than the one to mapbox and it is underlined.
This should be more consistent, I think.

Another thing:
Maybe we should mention the provider of our cards directly instead of only linking to their page. (the name ""mapbox"" should be mentioned in my opinion)
"
mozilla/MozStumbler,closed,Attach a scrollbar to the about page,[],"Since OSM is mentioned on the about page, the CC license at the bottom is cut off on my device.
I think it would make sense to define the page as scrollable.
"
mozilla/MozStumbler,closed,Consider mapbox SDK for map,"[Label(name=""question"")]","Mapbox has announced a new SDK based on osmdroid at https://www.mapbox.com/blog/android-sdk/ which claims various improvements.

It still supports specifying non-mapbox tile servers, so wouldn't lock us in to mapbox.

This might be interesting, if osmdroid gives us trouble or is not performant enough.
"
mozilla/MozStumbler,closed,Put osm credit above version,[],"OSM credit now AFTER stumbler version.

That's what I get for approving my own pull request :).
"
mozilla/MozStumbler,closed,Release 0.20.5,[],
mozilla/MozStumbler,closed,Release 0.20.5,[],
mozilla/MozStumbler,closed,issue #610: better credit to OSM on about screen,[],"issue #610: OSM credits added and a link to OSM.
"
mozilla/MozStumbler,closed,Update SSIDBlockList.java,[],"I encountered the SSIDs ""MeinFernbus1"" and ""MeinFernbus2"" recently. There is no ambiguity without the ""-"" as Fernbus means ""long distance bus"" in german.
"
mozilla/MozStumbler,closed,"Everytime after uploading something, I get: Unfortunately, MozStumbler has stopped",[],"Since May 13th, (I know it was that date, because that's the last successful upload date), after every time it uploads 50 ""Observations"", I get the error ""MozStumbler has stopped"". If I go back into the app, and click on the ""upload"" icon again, this happens again. The last upload time never updates, and it looks like no automated updates happen either.
"
mozilla/MozStumbler,closed,Determine whether the cell location is updated when the screen is off,[],"I found that some phones do not update the current сell location when display is off. The `mTelephonyManager.getCellLocation()` returns the same value until the screen is turned on, though, in fact, the current cell changes. 
If you go with such phone at a high speed for a long time, the phone incorrectly reports signal from the cell tower over the long distance.
My solution is to watch for changes when the screen is off and do not take into account cell location data until it is at-least one change.
Related bug: https://code.google.com/p/android/issues/detail?id=10931
"
mozilla/MozStumbler,closed,"Motorola Defy {Plus, Mini} SSIDs",[],"Again found some new SSIDs for the block list.
"
mozilla/MozStumbler,closed,Remove old preferences keys on upgrade,[],"This may fix a slow start of the application
"
mozilla/MozStumbler,closed,Include an attributation for OSM (again),[],"Issue #239 dealt with this however I don't believe it went far enough. Currently there is just a link that reads _""Learn more about our mapping provider""_ which links to Mapbox, the supplier of the rendered tiles. The primary source of the raw map data is Openstreetmap and I think that deserves a specific mention on the about page, including a link to openstreetmap.org
"
mozilla/MozStumbler,closed,Release 0.20.4,[],
mozilla/MozStumbler,closed,Release 6.6.6,[],
mozilla/MozStumbler,closed,"Issue #601, check for null apk uri to prevent crash",[],"fix for issue #601
"
mozilla/MozStumbler,closed,Issue 598: allow empty phone type (not just GSM/CDMA),[],"Fix for issue #598
"
mozilla/MozStumbler,closed,Issue 598,[],"Issue #598: allow for """" as phone type, stops the crash, and allows this data to be reported still
"
mozilla/MozStumbler,closed,Add quickshuttle_,[],"Observed a ""Quick Shuttle"" bus on road with complimentary wireless internet access advertised on its side traversing [an intersection near Seattle Premium Outlets](http://www.openstreetmap.org/node/50751933). Checked [WiGLE stumbler](https://github.com/wiglenet/wigle-wifi-wardriving) (already running) and saw ""quickshuttle_1705"" SSID in list.
See http://www.quickcoach.com/schedule.htm for service area.
"
mozilla/MozStumbler,closed,Add Motorola Mobility OUIs to BSSID block list,[],"Tethering in Motorola phones uses the model number followed by a random number as the SSID (example: ""XT1032 1934""), which becomes hard to detect by SSID, so add Motorola Mobility to the OUI list.
"
mozilla/MozStumbler,closed,"Issue #601 fix, check for null url",[],"Fix for Issue #601 
"
mozilla/MozStumbler,closed,Updater.java will crash if update url is missing,[],"I found a typo in the build instructions (issue #600), in the naming of the release apk. If the file is not named exactly as expected, the updater with crash with a file IO exception.
I'll fix it now.
"
mozilla/MozStumbler,closed,updated readme in build steps,[],
mozilla/MozStumbler,closed,Update french stings (refresh_map),[],
mozilla/MozStumbler,closed,"Unfortunately, MozStumbler has stopped. OK",[],"After less than a minute MozStumbler has been started. The message ""Unfortunately, MozStumbler has stopped. OK"" appears. Nexus 7, Andriod 4.4.2. This happens since past saturday. The app was then uninstalled and then reinstalled, but the problem persists.
"
mozilla/MozStumbler,closed,Export settings on SD card,[],"While uninstalling the app, the user data should be preserved (nickname for example).
"
mozilla/MozStumbler,closed,Automatic update failing,[],"I have Android 4.4.2 (Moto G), the app tells there's an update, I accept the installation, but it fails because the package has the same signature of a package already installed.
To update to 0.20.1 yesterday I had to remove and reinstall the app.
(also, the uninstall process should ask to preserve configuration?)
"
mozilla/MozStumbler,closed,MozStumbler v0.20.3,[],"Get the tag in sync
"
mozilla/MozStumbler,closed,MozStumbler v0.20.2,[],
mozilla/MozStumbler,closed,MozStumbler v0.20.2,[],
mozilla/MozStumbler,closed,URGENT bugfix,[],"We never cleaned up the mCellData and mWifiData  after reading from them - making them become HUGE and exponentially increasing storage necessary by MozStumbler by having thousands if not millions of duplicates.

I think this should do the trick. Fixes #591. Please merge & release ASAP.
"
mozilla/MozStumbler,closed,0.20 generates big data file and crashes when trying to upload data,[],"I had a long trip and I took collect more data.  It worked relatively fine for the first ~2000 data reports. 

Disclaimer: My Internet connection is quite bad at this moment, so I have not  been able to search properly. So, please bear with me.

At some point I got a notification of low internal space.  I had left ~20 MB.  I cleared data from some applications (like Firefox), I made ~60 MB.  MozStumbler had around 16MB, considering the history of thousands reports it should have been more than enough.

After I while I noticed that MozStumbler stopped silently to collect data. I re-started every time.  That is, until I noticed I had ~1900 pending reports and I tried to upload it manually and it crashed.

So, I enabled to upload only on WiFi and MozStumbler started to collect data continuously again. Until again I was running out of space.  This was is bad sympton, but I uninstalled several other applications to make space and continue tracking.

Long story short: MozStumbler whent from 16MB to 106MB of data in less than one day. I ran out of space and I don't know how to extract manually to inspect it.  I have 4700 observations that can't be uploaded because MozStumbler crashes.

I wish MozStumbler could store the data in the SD, like I can do with other applications.

For context: I have a Nexus 1 with Cynamodgen. I used the file manager to locate a file, with no luck.  And no luck by grepping in the source code.

In short, there are 3 problems:
- Crash when uploading a file (maybe the data storage got corrupted at some point)
- Big increase of the data file between 0.19 and 0.20 (I hardly believe it could have collected 3 times (or more) data than I had done in months)
- No possibility to store the data in an external storage where to back it up (maybe I am missing something).
"
mozilla/MozStumbler,closed,MozStumbler v0.20.0,[],
mozilla/MozStumbler,closed,Added an Israeli bus service,[],"Nazareen express - Afifi (also the CEO's name...)
"
mozilla/MozStumbler,closed,Simplify Travis build,[],
mozilla/MozStumbler,closed,Added SSIDs for Swiss PostAuto and German coach companies,[],
mozilla/MozStumbler,closed,"Please Add ""FlixBus"" to SSID Blocklist",[],"FlixBus is a german bus company: https://www.flixbus.de/

SSID: ""FlixBus""
"
mozilla/MozStumbler,closed,Disable hardware acceleration to reduce memory usage,[],"This significantly reduces initial memory usage. From 29MB to 5MB on Nexus 5
"
mozilla/MozStumbler,closed,Investigate battery consumption of Wifi and Cell scans,[],"As part of the service refactor for use in Firefox for mobile, the service will have a PASSIVE_PROVIDER mode where it no longer polls the GPS; it will wait until other apps have requested a GPS location. This should remove concerns about the battery consumption of the GPS. However, it will still perform cell and wifi scans, and the battery cost of these is not clear.

To investigate this, I added a battery drain test available through the options menu. 
https://github.com/garvankeeley/MozStumbler/tree/battery_test

It cycles through scanning cell, wifi, and sitting idle, and reports the consumption of each. 
The big limitation I find is that the OS only reports drops of 1% increments. To speed up getting test results, I run with the screen brightness at 100% and screen lock off. 

The next thing to look at is the results in the lock state, doing scans farther apart than 1sec as they are now. What my tests are not showing is the effect of scanning the cell and wifi when these services are in more of an idle state. What I would expect to see is higher cost as these services start up, or move to an active state. I suspect that consecutive scans of the cell and wifi have minimal cost after the first query, as the services are active at that point.

Here is a sample output of a test run, on the left is the time it took to drop 1%:
Tests drain of 3 states: cell scan, wifi scan, then idle. Repeats indefinitely. Reports results on each battery drop of 1%.
3.4.0-gadb2201|19|hammerhead|Nexus 5
240.1s WiFi Scans:0 Cell Scans:240 Mode:Cell
73.6s WiFi Scans:18 Cell Scans:0 Mode:WiFi
258.8s WiFi Scans:0 Cell Scans:0 Mode:Idle
236.2s WiFi Scans:0 Cell Scans:236 Mode:Cell
130.5s WiFi Scans:32 Cell Scans:0 Mode:WiFi
294.4s WiFi Scans:0 Cell Scans:0 Mode:Idle
142.6s WiFi Scans:0 Cell Scans:143 Mode:Cell
123.1s WiFi Scans:30 Cell Scans:0 Mode:WiFi
286.8s WiFi Scans:0 Cell Scans:0 Mode:Idle
139.7s WiFi Scans:0 Cell Scans:140 Mode:Cell
214.7s WiFi Scans:53 Cell Scans:0 Mode:WiFi
124.0s WiFi Scans:0 Cell Scans:0 Mode:Idle
245.2s WiFi Scans:0 Cell Scans:245 Mode:Cell
105.3s WiFi Scans:26 Cell Scans:0 Mode:WiFi
248.0s WiFi Scans:0 Cell Scans:0 Mode:Idle
162.3s WiFi Scans:0 Cell Scans:162 Mode:Cell
173.8s WiFi Scans:43 Cell Scans:1 Mode:WiFi
265.8s WiFi Scans:0 Cell Scans:0 Mode:Idle
232.7s WiFi Scans:0 Cell Scans:233 Mode:Cell
205.0s WiFi Scans:51 Cell Scans:0 Mode:WiFi
299.1s WiFi Scans:0 Cell Scans:0 Mode:Idle
247.6s WiFi Scans:0 Cell Scans:248 Mode:Cell
235.8s WiFi Scans:59 Cell Scans:0 Mode:WiFi
178.1s WiFi Scans:0 Cell Scans:0 Mode:Idle
"
mozilla/MozStumbler,closed,Add PASSIVE_PROVIDER scanning mode for Firefox simulation,[],"The stumbling service will eventually end up in mobile Firefox (when the user has opted-in to data collection) 

For simulation purposes add a switch in the settings that puts the collection into the same mode that Firefox will use, having the front-end client part of MozStumbler interface with the service part as close as possible with how Firefox will use the lib.
"
mozilla/MozStumbler,closed,Discussion: web view for map,"[Label(name=""question"")]","Stumbler uses a MapView currently, instead use a WebView and have the map load from a website. The location should be changeable by the user in the app settings. This makes it easier to contribute to look and feel improvements, to try different approaches, and reduce the code in the app. Hopefully we can share the map with the services team. 

Need to specify the javascript interface the page must implement, i.e.:
showGpsPosition(lat, lng, radiusInMeters)
showGeofencing(lat1, lng1, radiusInMeters)

There are requests for more things to show on the map, these can be handled by adding more calls to the js interface.

Ideally, there can be a more interactive mapview, such as geofencing circles being set on the page, and again this would be a javascript hook to pass the geometry back to the stumbler app.
"
mozilla/MozStumbler,closed,Pull SSID blocklist from web,"[Label(name=""Closed: won't fix""), Label(name=""enhancement"")]","We should pull the blocklist from github. Periodically update based on connection preference for uploading data: wifi-only or wifi and cell.

The Updater.java has most of the code we need for doing this. 
"
mozilla/MozStumbler,closed,Add two SSIDs to block list,[],"CommuteNet, from Copenhagen S-Tog train, closes mozilla/mozstumbler#578
stagecoach-wifi, from Stagecoach buses in the United Kingdom, seen in
Lancaster
"
mozilla/MozStumbler,open,"feature: Online coverage map - differentiate ""yesterdays"" logs","[Label(name=""UI/UX""), Label(name=""enhancement"")]","Feature request.

Currently the online coverage map only shows collected data in one color for all history.  I would like to suggest having two color levels

color 1: all new points added at the last generate time, essentially all points added ""yesterday""

color 2: all other points older than ""yesterday""

Admittedly there would be no real world benefit to this other than informational.
"
mozilla/MozStumbler,closed,"Add ""CommuteNet"" to SSID blocklist",[],"SSID `CommuteNet` is used on the Copenhagen ""S-Tog"" train network according to http://www.dsb.dk/s-tog/kampagner/fri-internet-i-s-tog
"
mozilla/MozStumbler,closed," Code Cleanup, and client/service split",[],
mozilla/MozStumbler,closed,Simplify formatting of cell data,[],"This is more of a tentative patch, as it breaks the dual-SIM case. Thanks @illarionov for pointing it out!.

Do we want to support dual-SIM devices (I think we do)? Even if we do, we should think about how to deal with that case: do we want to do separate submissions for each type of cell and then one for wifi, or maybe bundle wifi along with one of the cell submissions, and does it even matter? And what should the ""radio"" attribute be in that case? cc @hannosch
"
mozilla/MozStumbler,closed,Old code removal,[],
mozilla/MozStumbler,closed,Search API change,[],"Do we need to change something in our search request?
There was a small API change regarding the server's respond to requests without an api key:
mozilla/ichnaea#183

The server returns now a JSON blob instead of an  http error: not found.
"
mozilla/MozStumbler,closed,Update osmdroid-android to 4.1,[],
mozilla/MozStumbler,closed,Always use LocalBroadcastManager to send and receive MESSAGE_TOPIC intents,[],
mozilla/MozStumbler,closed,Changed to the right form,[],"As long as case sensitivity matters this should be fine. Sorry for the hassle.
"
mozilla/MozStumbler,closed,Adding another Israeli bus service,[],"Spotted while riding the bus
"
mozilla/MozStumbler,closed,how to use the localized versions.,"[Label(name=""Closed: won't fix""), Label(name=""question"")]","Hello, i just want to know how we can use the localized mozstumbler. Users from many country submitted translation for mozstumbler. We also submitted a translation for Bengali(bn-bd) for mosstumbler. How we can use that translated version.
"
mozilla/MozStumbler,closed,unicode nicknames,"[Label(name=""enhancement"")]","We had a report of non-ASCII unicode nicknames (particularly the name `caméléon`) not making it from the stumbler all the way through to ichnaea's leaderboard (bug https://github.com/mozilla/ichnaea/issues/160 ). We've confirmed (see screenshot in https://github.com/mozilla/ichnaea/pull/185 ) that we can synthesize, submit, store and display such strings, so our next guess (unless it's some part of our hosting / proxying pipeline) is that maybe the stumbler is losing them somehow or failing to submit them.

Any digging you can do on this topic appreciated.
"
mozilla/MozStumbler,closed,Switching to single process,[],"Issue #565, can’t use LocalBroadcast across the processes. One process
should work fine, I think this was a legacy design decision. Changed that, and used LocalBroadcastManager as minimally as possible to reduce changes to the code.
"
mozilla/MozStumbler,closed,Tag for v0.19.0 is incorrect,[],"Pointing at the commit before the release
"
mozilla/MozStumbler,closed,"Use LocalBroadcastManager for wifi,cell, gps broadcast",[],"Switch to LocalBroadcastManager for wifi,cell, gps broadcast in the service module (bug 1002610)
"
mozilla/MozStumbler,closed,Adding first bus wifi (uk) to ssid block list,[],"Added missing bus transport
"
mozilla/MozStumbler,closed,Change leaderboard link to jump to the user,[],"Add the user's nickname as the fragment of the URL, i.e.
https://location.services.mozilla.com/leaders#divergentdave. This fixes
mozilla/Mozstumbler#561.
"
mozilla/MozStumbler,closed,Fix BadTokenException,[],"Fix BadTokenException thrown when trying to show the UpdateDialog after activity is closed
"
mozilla/MozStumbler,closed,Change leaderboard link to include nickname,[],"I made a small little change on the server side, and include HTML anchors for all the nicknames in the leaderboard (mozilla/ichnaea@e344bb0ba5fc1c47cc7ca32dd68b9660825c5efb).

This means a link like https://location.services.mozilla.com/leaders#hannosch will scroll down to the right place for the nickname.

It would be nice if we could change the direct leaderboard link in MozStumbler to include the nickname. It should only be a utf-8 encoded version of the nickname, without any other quoting involved.
"
mozilla/MozStumbler,closed,Not working in LG G2 Android Phone,"[Label(name=""Closed: won't fix"")]","The app can scan but the data are not sent having this settings and details on the phone.

![mozstumbler1](https://cloud.githubusercontent.com/assets/1598286/2826062/20397e8c-cf64-11e3-9c8d-386227f806c9.jpg)
![mozstumbler2](https://cloud.githubusercontent.com/assets/1598286/2826061/2034e322-cf64-11e3-86c2-f08a841d1dee.jpg)
![mozstumbler3](https://cloud.githubusercontent.com/assets/1598286/2826065/205e18dc-cf64-11e3-8184-ffb85bc5f2d8.jpg)
![mozstumbler4](https://cloud.githubusercontent.com/assets/1598286/2826066/20697312-cf64-11e3-8e5d-d4d8f8421728.jpg)
![mozstumbler5](https://cloud.githubusercontent.com/assets/1598286/2826064/20407570-cf64-11e3-9bd6-facc5ffb4ff7.jpg)
![version](https://cloud.githubusercontent.com/assets/1598286/2826063/203e2b94-cf64-11e3-9c56-691859bc22f0.jpg)
"
mozilla/MozStumbler,closed,Manual upload only of data,"[Label(name=""Closed: won't fix"")]","Can it be possible to have a new feature that does upload of data only when it is manually selected.
"
mozilla/MozStumbler,closed,Geofencing changes,[],"Could it be possible to
1. Get multiple geofence locations
2. Allow user selectable geofencing distances 
"
mozilla/MozStumbler,closed,Allow closer zooming in map,"[Label(name=""bug"")]","Would it be doable to allow an extra level or two of zoom on the online map. I would like to better able see what areas have been missed and this is some times hard in built up areas
"
mozilla/MozStumbler,closed,Disable upload only on Wi-Fi option by default,[],"This will fix the issue #555
"
mozilla/MozStumbler,open,Disable upload only on Wi-Fi by default,"[Label(name=""Good first bug""), Label(name=""UI/UX""), Label(name=""enhancement"")]","In India, some of my friends and I are working to spread word about Mozilla's location service and trying to get MozStumbler installed on maximum phones. We've spread the message via Facebook, WhatsApp and other media.

But the problem is more than 90% of Android users here use mobile network for internet. Even if most of our contacted peoples are scanning with their phone, they don't know about the upload only on Wi-Fi option and they are not able to upload any data so far.

Upload observation on Wi-Fi by default option confuses people with poor technical knowledge of Android phone. It is quite frustrating job to explain the working of MozStumbler to everyone. Instead we're just asking them to install the app, scan their area. It would be better if the option is disabled by default.
"
mozilla/MozStumbler,closed,MozStumbler v0.19.0,[],"- Initial Greek translation (@ppapadeas, @johngian, Dimitris Papadopoulos)
- Added Lenovo P780 wifi hotspot to blocked list (@vinitraje)
- Updated Marathi & Hindi translation (@vinitraje)
- Add more on-vehicle SSIDs to the block list (@Rondom)
- Added some Norwegian transport SSIDs (@JensErat)
- Update zh-CN translation (@l-hedgehog)
- Change Intent string into more ""Android"" way (@tamcap)
- Update Hebrew translation (@yarons)
- Update Polish translation (@piotrdrag)
"
mozilla/MozStumbler,closed,Initial Greek translation.,[],"Credits to:
- John Giannelos (@johngian)
- Pierros Papadeas (@ppapadeas)
- Dimitris Papadopoulos
"
mozilla/MozStumbler,closed,Added Lenovo P780 wifi hotspot to blocked list,[],
mozilla/MozStumbler,closed,Blacklist code should support regular expressions,[],"The blacklist code for SSIDs should support regular expressions, and prefix/postfix SSIDs should be deprecated (eg. by requiring `^foo$` for new SSIDs, and slowly migrating the old ones as soon as somebody can make a statement about them).

This is important for this imaginary example (which I acutally observed in Norway, sadly I don't know any more which company it was):
- imaginary bus company ""Southern Express""
- on-bus SSID `southernexpress042`
- terminal SSID `southernexpress`

We do not want to record the on-bus WIFI, thus will exclude it using `southernexpress` as pattern. Yet we _would_ want to record the terminal SSID, which gets excluded by the (too generic) prefix. The solution would be to use something like `^southernexpress[[:digit:]]{3}$` and `^southernexpress$`.

Changing the code to match regular expressions wouldn't harm the old strings, as `southernexpress` still matches `southernexpress042`.

It might also be reasonable to remove the actual blacklist from the code to some XML or JSON file, and precompile the regex matcher when reading the list, maybe even construct one large regular expression from all elements by concatenating them (`(^southernexpress[[:digit:]]{3}$|^NSB_INTERACTIVE$|...)`). This would both reduce overhead in managing and evaluating against the list.
"
mozilla/MozStumbler,closed,Updated Marathi & Hindi translation,[],"Updated Marathi & Hindi strings
"
mozilla/MozStumbler,closed,Update Marathi & Hindi translation,[],"Updated Hindi & Marathi strings
"
mozilla/MozStumbler,closed,Update Marathi & Hindi translation,[],"Hindi & Marathi strings updated
"
mozilla/MozStumbler,closed,Add an option to keep the phone's screen on ,[],"To my knowledge Mozstumbler does not record data when the screen is off, as Android doesn't permit an app to do that. Could it be possible to add as an option the possibility to force the screen to stay on, like the non-open android app sensorly does ? 

It would be easier than checking the phone every 30 minutes (the longest screen wake-up time on my phone) to ensure Mozstumbler is recording. Many people don't use GPS systematically when in their cars, because they know what their trip will be.
"
mozilla/MozStumbler,closed,Ensure locations have been received before deleting local data,"[Label(name=""bug"")]","In many poor countries, the broadband internet connections can be very patchy and unstable, leading to loss of transmitted data via wifi. I lost more than 30 000 location points that way when my phone connected to an internet box via Wifi, because the upload link was too bad and leaded the data nowhere. 

Maybe the devs could implement a function to not delete the data uploaded before confirming later on that it really has been transmitted ? 

As the data does not take much space on the phone, it would not impact the user and avoid data losses, which seems particularly important and happens usually in countries not well mapped, like ones with low quality internet and/or lower living standards than the industrialized world...

As an alternative, it might be easier just to add an option to backup then retrieve the local data elsewhere on the phone, in case the user knows he is in a country with this kind of internet problems. It would also avoid data losses.
"
mozilla/MozStumbler,closed,iOS Version,[],"Are there any plans for an iOS version of MozStumbler? I understand why it wouldn't go on the App Store but you could do the same thing you do with the Android app.
"
mozilla/MozStumbler,closed,Added some Norwegian transport SSIDs,[],"Project not setup for build and testing, just added the SSID strings and comments. Please verify the build before merging. Thank you!
"
mozilla/MozStumbler,closed,Add more on-vehicle SSIDs to the block list,[],"Hello,
I added SSIDs to the block list for:
- Barcelonabusturistic.cat touristic buses
- Flygbussarna.se buses
- National Express coaches
- NSB.no Norwegian state railways
- Oxfordtube.com buses
- SJ.se Swedish state railways

Right now there is only code in place for doing prefix and suffix matching. Given for example the very short length of the Swedish State Railways' on-train SSID ""SJ"" one can consider a more flexible matching. I know, there will always be some false-negatives, but if others agree, I can add more flexible matching.
"
mozilla/MozStumbler,closed,intelligent battery saving mode for walking and other slow moving,[],"When I take phone to outdoor trip, MozStumbler exhausts battery in several hours and in fact on just several kilometers. I have to stop MozStumbler to have some battery life for possible emergency call.

I don't know what is scanning frequency (time between two tests of available cells and wi-fi AP), but I assume that is pretty high, say about one test to several tests per one second. But when I'm walking, coordinates change for every cca 10 meters and cca 7 seconds. (Furthermore, in nature is pretty low chance to get new cell or wi-fi with every step you make.) 

So I propose to add detection of slow moving, for example averaging time between 10 last coordinate changes, and when slow moving is detected, increase interval between testing for example to a half or a third of averaged time. Of course, it have to be able to detect an end of slow moving and restore normal interval / high frequency (for example when user get on car and drive off).
"
mozilla/MozStumbler,closed,sync zh-CN translations with en-US strings,[],
mozilla/MozStumbler,closed,"[minor] Change Intent string into more ""Android"" way",[],"Cosmetic change only.
"
mozilla/MozStumbler,closed,Translation update,[],"Added the missing strings and fixed the current.
"
mozilla/MozStumbler,closed,Update Polish translation,[],"Pull request from @piotrdrag's patch in issue #537.
"
mozilla/MozStumbler,closed,[PATCH] Updated Polish translation,[],"Hi, I've updated Polish translation with new strings.

http://raven.fedorapeople.org/0001-Updated-Polish-translation.patch
"
mozilla/MozStumbler,closed,MozStumbler v0.18.0,[],"- Add RTL support (@xsoh)
- General improvements to MapActivity (@tamcap)
- Making lint happy (@tamcap)
- Display map accuracy overlay (@tamcap)
- Fix OpenStreetMap project name. (@Firefishy)
- Added missing translations as comments (@Djfe)
- Update German translation (@Djfe)
- Update zh-TW strings (@petercpg)
- Update Nederlandse Spoorwegen on-train WiFi (@martiensch)
- Update bn-BD translation (@rabbihossain)
- Fix strings.xml typo (@tamcap)
- Fix Persian misspellings (@cpeterso)
- Update Spanish strings (@rodmoreno)
- Update French strings (Wifi always/disabled + sat) (@pl6025)
- Update German translation (@Djfe)
"
mozilla/MozStumbler,closed,Add RTL support (@xsoh),[],"I rebased @xsoh's PR #520 to fix the build problems.
"
mozilla/MozStumbler,closed,corrupt translation variables: bidirectional text,[],"I guess the variables in some of the translations might be screwed up:
Can somebody take a look at the following translations, pls?:
https://github.com/mozilla/MozStumbler/blob/master/res/values-fa/strings.xml

a few examples:

```
<string name=""wifi_access_points"">نقاط دسترسی وای‌فای اسکن‌شده: %1$d</string>
<string name=""visible_wifi_access_points"">نقاط دسترسی نمایان وای‌فای: %1$s</string>
<string name=""cells_scanned"">شبکه‌های گوشی همراه اسکن‌شده: %1$d</string>
<string name=""cells_visible"">شبکه‌های گوشی همراه نمایان: %1$d</string>
<string name=""gps_satellites"">ماهواره‌های استفاده‌شده / نمایان: %1$d/%2$d</string>
<string name=""last_location"">آخرین مکان: %1$s</string>
```

%1$d is separated into 1% at the beginning, which is even mirrored (RTL), and $d

there might be more translations where this is an issue, I just found this one and will look through the other ones later
"
mozilla/MozStumbler,closed,Added missing translations as comments...,[],"...to help translators
"
mozilla/MozStumbler,closed,General improvements to MapActivity,[],"- progress bar eye candy
- zoom level depends on the accuracy value reported
"
mozilla/MozStumbler,closed,GPS displayed on MapActivity,[],"This would close #484.
- I actually didn't like the ""marker"" so I left it out from 2ccb882, but I can revert to 6d058f5 if desired. Not too happy with the design, so give me your ideas.
- It right now uses GPS intents (minimizes codebase impact), which makes it behave... spottily at start, screen turn, etc. It might have to be re-implemented through the AIDL communication instead.

Comments welcome.
"
mozilla/MozStumbler,closed,Update German translation,[],
mozilla/MozStumbler,closed,Update zh-TW strings,[],
mozilla/MozStumbler,closed,Update SSIDBlockList.java,[],"Rename of NS train wifi (source: http://tweakers.net/nieuws/95116/ns-neemt-wifi-in-de-trein-over-van-t-mobile.html)
"
mozilla/MozStumbler,closed,Update strings.xml,[],"Typo.
"
mozilla/MozStumbler,closed,Update bn-BD Translation,[],
mozilla/MozStumbler,closed,Fix Persian misspellings,[],
mozilla/MozStumbler,closed,Unable to use gps,[],"Just got a new phone: hkphone revo max8 Android 4.2.2

All stats are visible... Gps will report x amount of Gps visible yet none will be used. 

I have given the app permission to use my location. 

Cheers 
"
mozilla/MozStumbler,closed,Update French strings (Wifi always/disabled + sat),[],
mozilla/MozStumbler,closed,Update spanish strings,[],
mozilla/MozStumbler,closed,Making lint happy,[],"- fixes issue in values-ca
- fixes issue in values-fa
- conditionalizes an incompatible API call in MapActivity
"
mozilla/MozStumbler,closed,Support RTL,[],"Supporting RTL for API 18 or above
"
mozilla/MozStumbler,closed,Map accuracy added,[],
mozilla/MozStumbler,closed,Upload observations: infinite progress? disabled button?,[],"On my Froyo phone, in the Upload observations dialog, the progress spinner stays spinning, even when the In queue numbers reach zero, even after waiting a half hour after zeroes. Also, there's a disabled button (""Upload""); I've never seen it enabled, but perhaps that's due to having a nickname set and/or a sync account; is it not redundant if the ""Upload observations"" dialog is triggered?

I'm wondering if the progress could be changed to a horizontal progressbar, full/empty depending on what the In queue numbers started from (sum?). If the button is indeed never enabled and there are no future plans for it, removing it would allow a wider progressbar.
"
mozilla/MozStumbler,closed,Minor bug -> scan always,[],"#493 works nice but due to #492 visible aps only shows: ""0 (Wi-Fi disabled)

The checkbox in the settings is checked (system settings+mozstumbler settings) and the scanned number climbs up as well

Another bug: visible aps shows nothing since #492
While it used to show us ""0"" in default state (scanned aps shows ""0"" for example)
"
mozilla/MozStumbler,closed,Minor name fix. OSM is OpenStreetMap project,[],
mozilla/MozStumbler,closed,Update German translation,[],
mozilla/MozStumbler,closed,MozStumbler v0.17.0,[],"- Add cell data to the lookup requests in MapActivity (@tamcap)
- Check GPS only when start scan clicked [fix #494](@illarionov)
- Add Wi-Fi scanner status [fix #302](@illarionov)
- Add ""Scan AP's even when Wi-FI is off"" setting [fix #32](@illarionov)
- Do not unnecessarily export MozStumbler services (@cpeterso)
- Update Android SDK tools to 22.6.1 and build tools to 19.0.3 (@cpeterso)
- Add Persian translation
- Update German translation (@romankl and @Djfe)
- Update Russian translation (@CupIvan)
- Update Spanish translation (@rodmoreno and @stripTM)
- Clean up strings.xml translation files (@Djfe)
"
mozilla/MozStumbler,closed,Rebase MozStumbler PR #509 and update Android build tool versions,[],
mozilla/MozStumbler,closed,Add Persian translation,[],
mozilla/MozStumbler,closed,Error uploading observations,[],"I have a cell with Firefox OS a Geeksphone Keon and I decided putting on a ROM with Android (http://sys.nodo21.org/geeksphone-keon-rom) to make scans with a second mobile operator and thus contribute more to this great project .

But my surprise was that never uploaded any report (the good thing is to scan a small area) and then decided to find out more, use the logcat and threw me the following:

```
03-20 08:20:23.861    1298-2064/org.mozilla.mozstumbler:.ScannerService E/org.mozilla.mozstumbler.communicator.Submitter﹕ Error submitting:
    org.mozilla.mozstumbler.communicator.AbstractCommunicator$HttpErrorException
            at org.mozilla.mozstumbler.communicator.AbstractCommunicator.sendData(AbstractCommunicator.java:96)
            at org.mozilla.mozstumbler.communicator.AbstractCommunicator.send(AbstractCommunicator.java:109)
            at org.mozilla.mozstumbler.communicator.Submitter.cleanSend(Submitter.java:40)
            at org.mozilla.mozstumbler.sync.SyncAdapter.onPerformSync(SyncAdapter.java:91)
            at android.content.AbstractThreadedSyncAdapter$SyncThread.run(AbstractThreadedSyncAdapter.java:247)
```

I could also see the following error repeated several times:

`03-20 08:19:39.959    1298-2054/org.mozilla.mozstumbler:.ScannerService E/org.mozilla.mozstumbler.cellscanner.CellInfo﹕ java.lang.IllegalArgumentException: Unexpected network type: 0
            at org.mozilla.mozstumbler.cellscanner.CellInfo.getCellRadioTypeName(CellInfo.java:320)
            at org.mozilla.mozstumbler.cellscanner.CellInfo.setCellLocation(CellInfo.java:176)
            at org.mozilla.mozstumbler.cellscanner.DefaultCellScanner.getCurrentCellInfo(DefaultCellScanner.java:125)
            at org.mozilla.mozstumbler.cellscanner.DefaultCellScanner.getCellInfo(DefaultCellScanner.java:91)
            at org.mozilla.mozstumbler.cellscanner.CellScanner$1.run(CellScanner.java:64)
            at java.util.Timer$TimerImpl.run(Timer.java:284)`

Believe it very critical?
"
mozilla/MozStumbler,closed,Check for test/fake GPS data,"[Label(name=""enhancement"")]","rdandu suggested this in email:

Can we do some basic checks in MozStumbler to make sure the following is not corrupting data on the device:
a) Mock Location: Enable mock locations should not be turned on https://developer.android.com/training/location/location-testing.html
b) Fake GPS: https://play.google.com/store/apps/details?id=com.lexa.fakegps
"
mozilla/MozStumbler,closed,Updated translations,"[Label(name=""enhancement"")]","Removed quit translation from all translations and aligned the translations to the English source.
Added comments to show missing translations.
Added line-breaks if missing.
"
mozilla/MozStumbler,closed,Update spanish strings,[],
mozilla/MozStumbler,closed,Dual Sim not working,[],"I am using the latest version of MozStumbler (v0.16.0) on my Sony Xperia E dual on android 4.1.2 CM. after running it like an hour it has found 200 WiFi APs but not a single Cell.
"
mozilla/MozStumbler,open,Cell coverage map,"[Label(name=""enhancement"")]","Now that Mozilla is being pushed strongly on the Mobile platform, one of the key enablers to understanding user experience is to know what the quality of the network coverage is like all over the world. I would like to propose that using the data that is gathered (signal strength, technology) we render a map similar to OpenSignalMaps http://opensignal.com/ which will have very useful applications down the road.
"
mozilla/MozStumbler,closed,quit string deleted,[],"as there is not quit button anymore we don't need the string for it any longer
"
mozilla/MozStumbler,closed,Update german (de) translation,[],"Synch. german translation with the latest english version.
"
mozilla/MozStumbler,closed,"Sometimes ""Visible locations"" number stops increasing, but not cells & WiFi",[],"Sometimes, I have a little problem using MozStumbler (the last one 3 days ago with 0.15) : I have geolocalization, GPS visible, but when I check the screen during drive, it hapens that number of ""visited and registered locations"" stays at the same level, without increasing, as if I had lost the position.

Cells / WiFi detection and numbers continue to be seen and increasing, and sometimes ""visited places"" makes a +1 so there may be a report sent but with lots of datas missing, and until I restart the program and begin a new session with re-GPS scanning, it does not work anymore.

Problem is that apart ""visited place"" number stagnating, there is no other way to detect a problem, GPS seems OK...

I will post later a screen og a whole area where I went, on a city I saw the problem, so from this moment it is normal there were no reports anymore, but just before I also checked on another town, places number was well increasing, and this portion of map is still empty, too, as if I was never there...

PS : I updated bug 249 but did not find how to re-open it.

Thanks !
"
mozilla/MozStumbler,closed,Add cell data to the lookup requests in MapActivity,[],"Partially-Fixes #354.
"
mozilla/MozStumbler,closed,Check GPS only when start scan clicked [#494],[],
mozilla/MozStumbler,closed,add russian translation,[],
mozilla/MozStumbler,closed,Translate wifi_scan_always_* and Wi-Fi,[],"Apply Fundeu foundation recomendation to translate Wi-Fi by wifi
http://www.fundeu.es/recomendacion/wifi-como-termino-espanol-545/
"
mozilla/MozStumbler,closed,translations issue: observation(s),"[Label(name=""enhancement"")]","I'm updating the German translation right know and I'm not sure about observations:
Are measurements or scans possible synonyms, because the literal translation may not fit perfectly as not everybody will understand what the app is trying to show as observations.

Is the words meaning more clear in English or should we modify the English wording as well to fit better?
"
mozilla/MozStumbler,closed,show changelog after app update,"[Label(name=""enhancement"")]","We should consider showing a changelog after an app update for all users who don't visit Github anylonger/are using FDroid versions.
"
mozilla/MozStumbler,closed,#460 is missing,[],"What happened to #460?
It hasn't been implemented, yet.
"
mozilla/MozStumbler,closed,"#470 fix not completely done, yet.",[],"The GPS notification is still shown each time you rotate your device.
#470 only fixed it so that the notification doesn't appear each time you close your settings.
"
mozilla/MozStumbler,closed,"Add ""Scan AP's even when Wi-FI is off"" [#32]",[],
mozilla/MozStumbler,closed,AddWi-Fi scanner status [#302],[],
mozilla/MozStumbler,closed,MozStumbler v0.16.0,[],"- Resume Wi-Fi scan after Wi-Fi is turned on (issue #477) (@illarionov)
- Update Spanish translations (@stripTM)
- Block Madrid transportation bus SSID (@stripTM)
- Execute all reporter code in LooperThread (@illarionov)
- Display the number of unique cells (issue #320) (@illarionov)
- Fixes to communicator package (@tamcap, @illarionov)
- New position of Start Scanning button in landscape mode (@tamcap)
- Refactored network communication code into a separate package (@tamcap)
- Only show dialog to enable GPS on program launch (@aaronaxvig)
- Fix scanner service race condition; Add stop scanning button to notification (@tamcap)
- Block Triangle Transit on-bus public Wi-Fi (@tamcap)
- Set upload dialog background to ""light"" (@tamcap)
"
mozilla/MozStumbler,closed,Make it possible to export the gps trace only to Open Street Map ( OSM ),"[Label(name=""enhancement"")]","I would love to have a button that would let me submit my gps traces to OSM.
"
mozilla/MozStumbler,closed,Resume wi-fi scan after Wi-fi is turned on [#477],[],
mozilla/MozStumbler,closed,Fix wifi,[],
mozilla/MozStumbler,closed,Resume wi-fi scan after Wi-fi is turned on [#477] ,[],
mozilla/MozStumbler,closed,Add location_lookup_error translation,[],
mozilla/MozStumbler,closed,Reduce size of start / stop scan button,[],"I find that it is very easy to accidentally press the start / stop scan button. Since the button is huge and extends to the screen boundaries, it can be pressed by simply grabbing the phone by the edges and inadvertently letting your fingers touch the edge of the screen. As a feature request I would like to see the size of the button reduced or some other mechanism put in place to ensure that the user actually wants to start or stop scanning.
"
mozilla/MozStumbler,closed,"Show two markers on MapActivity: One for GPS, one for Mozilla Location Service","[Label(name=""Good first bug"")]","To get a grasp, on how precise the location service is working, the MapActivity should show an additional Marker for the GPS fix.
For this, two new variables (e.g. mLatGps, mLonGps) would be needed in src/org/mozilla/mozstumbler/MapActivity.java and filled on startup.
"
mozilla/MozStumbler,closed,Add Madrid transportation bus network,[],
mozilla/MozStumbler,closed,Execute all reporter code in LooperThread,[],"This should fix the arbitrary crashes on start/stop scanning
"
mozilla/MozStumbler,closed,Display the number of unique cells [#320],[],
mozilla/MozStumbler,closed,New position of Start Scanning button in landscape mode,[],"Closes #479.
"
mozilla/MozStumbler,closed,Landscape mode -> no scroll,[],"I cannot scroll in landscape mode and therefore not access the scan button then

We need a scroll bar or move the gui elements so that they fit on the screen as a whole (by placing the button the right for example)

My device's display: 240 dpi 480x860 (or something like that not sure about that but it is around 4xx times 8xx)
"
mozilla/MozStumbler,closed,Add the current path to the map,[],"It would be a good idea that the path done in the session, appeared in the coverage map in a colour different from the coverage colour, for example:
http://striptm.com/ejemplos/mozilla/mozstumbler_map.png

This way it would be easy to cover areas not still tracked. In the current behaviour, the tracked areas recently covered are not displayed until the next day.
"
mozilla/MozStumbler,closed,No scans for Wifi APs (enabling wifi after scan start),[],"MozStumbler doesn't scan for Wifi Aps if you enable it after it started to scan

It needs to check for a working Wifi connection each scanning interval instead of only once at the button press
Or we need an intent that gets executed each time the state of the wifi connection changes.
"
mozilla/MozStumbler,closed,Dynamic statistics in notification?,"[Label(name=""Good first bug""), Label(name=""enhancement"")]","Currently, the notification shows only the `service_scanning` text (Scanning for Wi-Fi and Cellular networks). It'd be nice to have this dynamically updated like the WiGLE stumbler, as I don't always have it in the foreground. For example,

453 locations, 1/12 Cells, 4/23 Wi-Fi

with a prefix of ""Off; "" if geofenced.
"
mozilla/MozStumbler,closed,MozStumbler sometimes breaks WiFi,[],"So, I'm not sure what's the issue here, but in many cases my device (Samsung GT 5670) can end up with the WiFi in a borked state, requiring a device reboot. The issue happens after having the scanner on for a while (1hr+ ?). From that point onwards, the device refuses to connect to any WiFi network (WiFi state loops between ""Connecting -> Unsuccessful -> Connecting... etc"" or ""Connecting -> Disconnected -> Connecting... etc"")  , even after stopping the scanner, exiting MozStumbler and/or turning WiFi off and on again.

I'd hazard a guess that the WiFi scan rate (it looks like it's scanning 4 times a second) is what causes it.
"
mozilla/MozStumbler,closed,Fixes to communicator package as suggested by @illarionov,[],"Fixes to communicator package as suggested by @illarionov …
- Changing context scope.
- Moving closing cursor and submitter command into `finally{}`
- Deciding that all `IOException` can be temporary (reduces data discarding).
- Cleanup if gzip fails: the `AbstractCommunicator` has to clean up first.
"
mozilla/MozStumbler,closed,Migrate gradle to 0.9.0,"[Label(name=""enhancement"")]","Our current gradle 0.7.3 has become obsolete and we should consider migration to 0.9.0.
"
mozilla/MozStumbler,closed,Refactored network communication code into a separate package.,[],"- Minimizes code redundancies
- Detaches communication side from the app display side

Open for comments :-)
"
mozilla/MozStumbler,open,Automation of MozStumbler,"[Label(name=""enhancement"")]","I was wondering if it's possible to automate MozStumbler with Llama. I guess so, as it's asking for the following data:
- Intent type
  - Start an intent
  - Start a service
  - Broadcast
- Package name
- Class name
- Action
- Categories (separated by commas or pipes)
- Data
- Data type

Can someone help me fill-in all that, I tried with the following but with no luck:
- Start a service
- org.mozilla.mozstumbler
- ScannerService
- Everything else empty

Thanks a lot!
"
mozilla/MozStumbler,closed,Only show dialog to enable GPS on program launch,[],"Show the dialog prompting to enable GPS when the program is launched. Do
not show it when returning back to the main screen.

This is a fix for issue #280.
"
mozilla/MozStumbler,closed,Only show dialog to enable GPS on program launch,[],"Show the dialog prompting to enable GPS when the program is launched. Do
not show it when returning back to the main screen.

This is a fix for issue #324.
"
mozilla/MozStumbler,closed,Update SSIDBlockList.java,[],"Added Triangle Transit on-bus public Wi-Fi.
"
mozilla/MozStumbler,closed,"Fixes bug introduced in #400, adds button to notification.",[],"PR #400 introduced a sneaky race-condition bug. It would try to destroy scanner service BEFORE all the resources from the ""downstream"" scanners could be turned off by the `Looper`. Memory leaks and fatal errors ensure. It would only trigger on a low battery intent when there was no client bound...
- new button to turn off scanning with main activity not running
- fix to the aforementioned bug
"
mozilla/MozStumbler,closed,MozStumbler v0.15.0,[],"- Modify the date format to YYYY-mm-01 (@tamcap)
- Show number of GPS satellites used / visible on main screen (@tamcap)
- Compress location lookup using gzip (@tamcap)
- Redesign menu UI (@tamcap)
- Add Bokmål (Norwegian) translation (@sigurdga)
- Block Adelaide Metro Public WiFi (@tamcap)
- Block MÁV (Hungarian State Railways) InterCity train hot-spots (@flaki)
- Update bn-BD translation (@aniruddha-adhikary)
- Update Dutch translation (@martiensch)
- Update French translation (@pl6025)
- Update Hebrew Translation (@arthurzam)
- Update Italian translation (@musuruan)
- Update Polish translation (@tamcap)
- Update zh-TW translation (@petercpg)
"
mozilla/MozStumbler,closed,"Set upload dialog background to ""light""",[],"Fixes #441.
It's possible only certain APIs (<14?) are affected by this. But to be on the safe side, we can simply set it here.

 Alternative is the .xml file, but I wanted to preserve the commented out area in case we want to make it API specific at some point.
"
mozilla/MozStumbler,closed,entries are thrown away although upload not successful,"[Label(name=""bug"")]","I have problems uploading my reports:
Sometimes my phone shows the wifi symbol in the status bar but no signal strength (no white bars)
I think this could be because my phone reconnects in a certain way

it has happened to me while uploading and during that the uploading kinda stopped -> loading animation but the numbers of reports in the database doesn't go down/no uploads in that time
later on the coverage map I see that my track is incomplete and there are spots missing.

looking at the code
I guess that an ioexception has been thrown but the data was still thrown away because of temporary being false
could be something else
is it possible that there are some things in the code that could lead to the data not being uploaded if the connection stops working?

is it possible that my phone gives a HTTP 2xx Error (but no 204) during connection problems?

why do entrys get deleted if temporary is false?
->they haven't been uploaded successfully then

I tried to look at the code but cannot figure out what is going on (I'm still learning Java and have mostly experience in HTML/JS/PHP/Delphi...)
I don't have a catlog anymore (phone has been rebooted and I think that the log gets reset during reboot)

I'm using a modified CyanogenMod 11 right now (Android KitKat) on an Xperia Arc S

Maybe someone can explain me how to do a catlog of Mozstumbler only
(I only know a way to do this using root and the app System Tuner Pro and I get the whole system log...) or give me a link

I want to get this issue fixed because then I don't have to fear losing tracks anylonger
the database was a nice addition that prevents entries from being lost due to quiting the application but this seems to be rather an issue which happens during the upload
"
mozilla/MozStumbler,closed,coverage map is cached,[],"The test map caches the coverage tiles -> I see new coverage only in another zoom level

-> are there timestamps (last tileupdate) you could compare to determine changes and force an update?
Or is it only possible to force an update/delete the coverage tile cache every time the map is opened?

The cache doesn't belong to Mozstumbler -> deleting cache in the app manager doesn't change anything
"
mozilla/MozStumbler,closed,Block Adelaide Metro Public WiFi,[],"First reported by @micolous. Closes #458.
Decided to use BSSID instead of SSID due to a relatively common name of the SSID: `PublicWiFi`.
"
mozilla/MozStumbler,closed,Modify the date format to YYYY-mm-01.,[],"Match the mozilla/ichnaea#120 changes as done by @crankycoder and send the date as `YYYY-mm-01` only (overwriting the day value).
"
mozilla/MozStumbler,closed,Show number of GPS satellites used / visible on main screen.,[],"I remember it being requested at some point, however, not sure which issue number. In any case, it's a very simple fix.
"
mozilla/MozStumbler,closed,Compress location lookup using gzip.,[],"This commit introduces optional compression of the location lookups. Some code cleanup for elements shared between lookup and uploading.

Closes #446.

Todo: move most of the communication code into NetworkUtils.
"
mozilla/MozStumbler,closed,Exclude Adelaide Metro WiFi,[],"Adelaide Metro operates a WiFi network on a small number of buses and trams.  As a result, these access points aren't reliable sources of location information.

The SSID of these access points is `PublicWiFi`, and their BSSIDs are in the `a8:54:b2` OUI.
"
mozilla/MozStumbler,closed,Bokmål (norwegian) translation,[],"I haven't tested the file, the color coding looks good in vim.
"
mozilla/MozStumbler,closed,Fix Typos (bn-BD),[],
mozilla/MozStumbler,closed,Update strings.xml,[],"Minor correction on Dutch translations.
"
mozilla/MozStumbler,closed,Create a dark UI theme,"[Label(name=""enhancement"")]","This was a feature request someone sent me in email.
"
mozilla/MozStumbler,closed,Update Hebrew Translation,[],
mozilla/MozStumbler,closed,Design changes,[],"Better adherence to the AOSP / Android design guidelines:
- moved settings to the drop-down menu only
- reorganized action bar with the most common actions first

New icon for `Upload observations`.
"
mozilla/MozStumbler,closed,Updated Polish translation,[],"Also improve some strings a bit.

Signed-off-by: tamcap git@tamcap.one.pl, closes #450.
"
mozilla/MozStumbler,closed,Updated Polish translation,[],"Here is a git-formatted patch with updated Polish translation for MozStumbler. Apart from translating new strings I also fixed some typos and improved style.

http://raven.fedorapeople.org/0001-Updated-Polish-translation.patch
"
mozilla/MozStumbler,closed,Updated Italian translation,[],
mozilla/MozStumbler,closed,Add MÁV (Hungarian State Railways) InterCity train hot-spots to blocklist,[],
mozilla/MozStumbler,closed,Upload observations shows no data,"[Label(name=""bug"")]","When I'm running MozStumbler (0.14.0 from Github on Omnirom 4.4), numbers for wifi and network increase in the activity, but when I press upload, everything is zero. Additionally, once I disable the scan and restart the activity, all data is reset to zero.

Logcat shows no satellites/fixes, but at the same time, Google Maps has perfect accuracy.
Logcat:
    D/org.mozilla.mozstumbler.Scanner(30132): onGpsStatusChange - satellites: 0 fixes: 0
    D/org.mozilla.mozstumbler.Reporter(30132): Intent ignored with Subject: Scanner
    D/org.mozilla.mozstumbler.MainActivity(30111): Updating UI
    D/org.mozilla.mozstumbler.MainActivity(30111): Received a scanner intent...
    D/org.mozilla.mozstumbler.cellscanner.CellScanner(30132): Cell Scanning Timer fired
    D/org.mozilla.mozstumbler.Scanner(30132): WiFi Scanning Timer fired
    D/org.mozilla.mozstumbler.Reporter(30132): Intent ignored with Subject: Scanner
    D/org.mozilla.mozstumbler.MainActivity(30111): Updating UI
    D/org.mozilla.mozstumbler.Scanner(30132): onGpsStatusChange - satellites: 0 fixes: 0
    D/org.mozilla.mozstumbler.MainActivity(30111): Received a scanner intent...
    D/org.mozilla.mozstumbler.cellscanner.CellScanner(30132): Cell Scanning Timer fired
    D/org.mozilla.mozstumbler.Scanner(30132): WiFi Scanning Timer fired
    D/org.mozilla.mozstumbler.Reporter(30132): Intent ignored with Subject: Scanner
    D/org.mozilla.mozstumbler.MainActivity(30111): Updating UI
    D/org.mozilla.mozstumbler.Scanner(30132): onGpsStatusChange - satellites: 0 fixes: 0
    D/org.mozilla.mozstumbler.MainActivity(30111): Received a scanner intent...
    D/org.mozilla.mozstumbler.cellscanner.CellScanner(30132): Cell Scanning Timer fired
    D/org.mozilla.mozstumbler.Scanner(30132): WiFi Scanning Timer fired
    D/org.mozilla.mozstumbler.Reporter(30132): Intent ignored with Subject: Scanner
    D/org.mozilla.mozstumbler.MainActivity(30111): Updating UI
    D/org.mozilla.mozstumbler.Scanner(30132): onGpsStatusChange - satellites: 0 fixes: 0
    D/org.mozilla.mozstumbler.MainActivity(30111): Received a scanner intent...
    D/org.mozilla.mozstumbler.cellscanner.CellScanner(30132): Cell Scanning Timer fired
    D/org.mozilla.mozstumbler.Scanner(30132): WiFi Scanning Timer fired
    D/org.mozilla.mozstumbler.MainActivity(30111): Updating UI
    D/org.mozilla.mozstumbler.Scanner(30132): onGpsStatusChange - satellites: 0 fixes: 0
    D/org.mozilla.mozstumbler.Reporter(30132): Intent ignored with Subject: Scanner
    D/org.mozilla.mozstumbler.MainActivity(30111): Received a scanner intent...
    D/org.mozilla.mozstumbler.cellscanner.CellScanner(30132): Cell Scanning Timer fired
    D/org.mozilla.mozstumbler.Scanner(30132): WiFi Scanning Timer fired
    D/org.mozilla.mozstumbler.MainActivity(30111): Updating UI
    D/org.mozilla.mozstumbler.Scanner(30132): onGpsStatusChange - satellites: 0 fixes: 0
    D/org.mozilla.mozstumbler.Reporter(30132): Intent ignored with Subject: Scanner
    D/org.mozilla.mozstumbler.MainActivity(30111): Received a scanner intent...
    D/org.mozilla.mozstumbler.cellscanner.CellScanner(30132): Cell Scanning Timer fired
    D/org.mozilla.mozstumbler.Scanner(30132): WiFi Scanning Timer fired
    D/org.mozilla.mozstumbler.Reporter(30132): Intent ignored with Subject: Scanner
    D/org.mozilla.mozstumbler.MainActivity(30111): Updating UI
    D/org.mozilla.mozstumbler.Scanner(30132): onGpsStatusChange - satellites: 0 fixes: 0
    D/org.mozilla.mozstumbler.MainActivity(30111): Received a scanner intent...
    D/org.mozilla.mozstumbler.cellscanner.CellScanner(30132): Cell Scanning Timer fired
    D/org.mozilla.mozstumbler.Scanner(30132): WiFi Scanning Timer fired

Edit: The map also shows ""location not found"".
"
mozilla/MozStumbler,closed,Compress search API requests using HTTP `Content-Encoding: gzip`,"[Label(name=""enhancement"")]","As @Djfe noted in issue #406, we now upload compressed JSON reports, but we still do not compress the search API requests for ""Test Mozilla Location Service"".
"
mozilla/MozStumbler,closed,Using android's own methods for geofencing,"[Label(name=""enhancement"")]","What do you think about using ""android.hardware.location.GeofenceHardware"" for geofencing instead of our own method?
Would be better to rely on Android's own methods I think.

This way we could easily add several spots where geofencing should be active for example.
You can take a look at it here:
http://developer.android.com/reference/android/hardware/location/package-summary.html

I don't know whether this only counts for Mozstumbler then or the whole phone though.
"
mozilla/MozStumbler,closed,Update zh-TW l10n,[],
mozilla/MozStumbler,closed,"Correct ""Yes"" for zh-TW l10n",[],
mozilla/MozStumbler,closed,Using an online localization service for our translation,"[Label(name=""enhancement"")]","What do you think about using the service http://crowdin.net for our translations?
It would be more easily accessible for normal users than a git translation, you can vote for different translations, leave comments and discuss certain thinks

and on top of all that: it is free for open-source software!
"
mozilla/MozStumbler,closed,Upload observation dialog is barely readable,"[Label(name=""bug"")]","This is a screen shot from the 0.13.0 (same problem on the 0.14.0) for the report.
![screenshot-1392832731318](https://f.cloud.github.com/assets/4056260/2229413/04b7e428-9aee-11e3-8a06-18e7aa3cf0ea.png)
It's really hard to read.
"
mozilla/MozStumbler,closed,Update French translation corrections,[],
mozilla/MozStumbler,closed,0.14.0 stopped scanning and reporting,"[Label(name=""bug"")]","After I upgraded to 0.14.0 on my Nexus One, MozStumbler does not show any new location scanned, neither last location (in spite that the GPS is working).  It also does not seem to be reporting.

To make the things worse, the Upload observation dialog is barely readable.  I can understand the button ""upload"" is greyed out if there is no observation, but except the title and the button close, the dialog it is almost black, I cannot read the information that seems to say when was sent the last report.

After a while, I unchecked ""Upload only on WiFI"", no new report either.  I have unchecked geofencing.

The only thing that works is ""Test Mozilla Location Service"" (which is quite fast)

I will try to downgrade to 0.12.1.
"
mozilla/MozStumbler,closed,MozStumbler v0.14.0,[],"- Compress uploads using gzip (@tamcap)
- Fix reporting when geofencing is enabled (@tamcap)
- Remove batch processing logic from Reporter (@illarionov)
- Enable ""Upload only on Wi-Fi"" by default (@cpeterso)
- Block CSAD Plzen and Ceske drahy SSIDs
- Block two Dutch train and bus SSIDs (@mghansen256)
- Update Mozilla Location Service URL (@Djfe)
- Update German translation (@mghansen256)
- Update Spanish translation (@stripTM)
"
mozilla/MozStumbler,closed,Block CSAD Plzen and Ceske drahy SSIDs,[],"Fixed #421
Fixes #432
"
mozilla/MozStumbler,closed,"Enable ""Upload only on Wi-Fi"" by default",[],
mozilla/MozStumbler,closed,Urgent fix.,[],"Prevents a `NullPointerException` happening once in a while.
"
mozilla/MozStumbler,closed,Optional gzip on submit.,[],"Fixes #406.
"
mozilla/MozStumbler,closed,Remove batch processing logic from Reporter,[],"Save each observation as a single row in the database ('Reports' table).

I'm also restored reporting of wifis and cells in one observation, since memory should not be a problem now.
"
mozilla/MozStumbler,closed,Add CSAD Plzen SSIDs to black list,"[Label(name=""enhancement"")]","Add SSIDs of CSAD Plzen bus hotspots to black list. Unfortunately every bus has different name of hotspot:
 ""csadplzen_bus01""
""csadplzen_bus02""
""csadplzen_bus03""
""csadplzen_bus04""
""csadplzen_bus05""
""csadplzen_bus06""
""csadplzen_bus07""
""csadplzen_bus08""
""csadplzen_bus09""
""csadplzen_bus10""
""csadplzen_bus11""
""csadplzen_bus12""
""csadplzen_bus13""
""csadplzen_bus14""
""csadplzen_bus15""
""csadplzen_bus16""
""csadplzen_bus17""
""csadplzen_bus18""
""csadplzen_bus19""
""csadplzen_bus20""
""csadplzen_bus21""
""csadplzen_bus22""
""csadplzen_bus23""
""csadplzen_bus24""
""csadplzen_bus25""
""csadplzen_bus26""
""csadplzen_bus27""
""csadplzen_bus28""
""csadplzen_bus29""
""csadplzen_bus30""
""csadplzen_bus31""

From http://www.csadplzen.cz/?ob=aktuality#wifi7
"
mozilla/MozStumbler,closed,Add translation for observation strings,[],"I doubted translate observation by:
1) Observación
2) Muestra
3) Anotación
I do not what is more natural in Spanish.
"
mozilla/MozStumbler,closed,"Add ""legal blah blah blah"" click-through dialog on first run","[Label(name=""enhancement"")]","The actual legal text is TBD, so this task mostly involves talking to Mika in Mozilla Legal.
"
mozilla/MozStumbler,closed,Fixes to the geofencing.,[],"Changes the non-blocking UI behavior.
Blocks locations from being reported when `geofence here` is requested.
Fixes #423.
"
mozilla/MozStumbler,closed,More German translations,[],"Hi,

I added some German translations. Sorry for the German commit message in the second commit, but I was in translation mode ;-)

Best regards,

Michael
"
mozilla/MozStumbler,closed,replaced Mozilla Location Service URL,[],"Changed Info URL about the Mozilla Location Service and Mozstumbler to the current/new URL to fix #426
"
mozilla/MozStumbler,closed,"Link to ""More information"" in ""About mozstumbler"" outdated",[],"The link to ""More information"" in the ""About mozstumbler"" dialog still points to wiki.mozilla.org and not to location.services.mozilla.com.

Best regards,

Michael
"
mozilla/MozStumbler,closed,"List user's nickname instead of ""sync"" in Android's Sync Settings menu","[Label(name=""enhancement"")]","Would be better to make the mozstumbler sync module use the Nickname (if it exists) instead of ""sync"" for the account name shown in the Android settings, I think.
"
mozilla/MozStumbler,open,Add option to configure geofence radius and set multiple geofence locations,"[Label(name=""enhancement"")]","Two additional features for geofencing which would be nice to have:
1. How huge is the radius around the geofencing area? You cannot select it manually, yet.
2. And you cannot select more than one location for geofencing, yet.
"
mozilla/MozStumbler,closed,Can't disable geofencing,"[Label(name=""bug"")]","I've enabled geofencing, the button in the preferences now says:
""Geofence this location
Geofencing will be set at the next valid location obtained during scanning""
Now, I've changed my mind and I want to disable it, but I can't.

(Actually, I enabled geofencing just out of curiosity, it is still not clear to me what it is)
"
mozilla/MozStumbler,closed,Add Student Agency and RegioJet SSID to blacklist,"[Label(name=""enhancement"")]","Their SSID is „ŽLUTÝ“ (or maybe ""ZLUTY""):

http://regiojet.cz/cs/sluzby/index.html
Naše WiFi síť se jmenuje „ŽLUTÝ“ ...

http://jizdenky.studentagency.cz/web/autobus/servis-pro-cestujici/internet-zdarma.html
Naše WiFi síť se jmenuje „ŽLUTÝ“ ...
"
mozilla/MozStumbler,closed,Add Ceske drahy (Czech railways) SSID to blacklist,"[Label(name=""enhancement"")]","Their SSID is ""CDWiFi"", see http://www.cd.cz/cd-online/-15765/ :

How do you connect?
It’s simple. All you have to do is to connect your WiFi-enabled portable electronic device to the ""CDWiFi"" network and launch your favourite web browser. You do not need to enter any username or password to log in.
"
mozilla/MozStumbler,closed,Update SSIDBlockList.java,[],"Added two Dutch train operators and one bus operator with onboard wifi. Furthermore transport list was sorted alphabetically on SSID.
"
mozilla/MozStumbler,closed,MozStumbler v0.13.0,[],"- Add local database for more reliable report logging (@illarionov)
- Add ""upload now"" button (@illarionov)
- Use Android Sync service to schedule uploads (@illarionov)
- Add geofencing to pause scanning at designated area (@tamcap)
- Remove Quit button and stop service when not scanning (@tamcap)
- Add new UI buttons (@tamcap)
- Add ""you are here"" marker to map (@cpeterso)
- Block Finland's VR train SSID (@aschmitz)
- Update Spanish translation (@rodmoreno)
- Update Dutch translation (@ActuallyRuben)
- Update Finnish translation (@ojarva)
- Update Russian translation (@freekzy)
- Update French translation (@pl6025)
"
mozilla/MozStumbler,closed,Update French translation with Geofence+Upload obs,[],"Source for Geofencing in fr : https://fr.wikipedia.org/wiki/Gardiennage_virtuel
"
mozilla/MozStumbler,closed,Russian translation fixes and additions,[],
mozilla/MozStumbler,closed,[minor] Adding local.properties to .gitignore,[],
mozilla/MozStumbler,closed,Updated Finnish translations,[],
mozilla/MozStumbler,closed,"Add ""you are here"" map marker",[],"And fix some other map usability problems.
"
mozilla/MozStumbler,closed,Save on disk + sync adapter,[],"1. Save data to be sent on disk (in the sqlite database)
2. Use the sync adapter for data uploading
3. Add ""Upload observations"" dialog (#250, #196)
"
mozilla/MozStumbler,closed,Updated the dutch translations file,[],
mozilla/MozStumbler,closed,Country based fiter for leaderboard,"[Label(name=""enhancement"")]","It would be nice if we have country based filter at the Mozilla Location Service leaderboard[1]. That will help contributors to know who are contributing from the country and their position at the leaderboard.

[1]https://location.services.mozilla.com/leaders
"
mozilla/MozStumbler,closed,Add Finland's VR train SSID to blacklist,[],"Their SSID is VR-junaverkko, see http://www.vr.fi/en/index/palvelut/palvelut_junissa/WirelessInternet.html
"
mozilla/MozStumbler,closed,Update spanish translate,[],
mozilla/MozStumbler,closed,Data usage on 0.12.1,"[Label(name=""bug"")]","There seems to have been another regression on the latest update (which I just updated yesterday).

The app chewed through 1GB of mobile data within 3-4 hours. I have used this for months on mobile data and newt had an issue with data usage. 

Since this happened while overseas - there goes the data allowance. Not happy ...
"
mozilla/MozStumbler,closed,Enable StrictMode only in debug mode. Call it early onCreate(),[],
mozilla/MozStumbler,closed,Upload compressed JSON using HTTP `Content-Encoding: gzip`,"[Label(name=""enhancement"")]","What do you think about using a file to upload the locations?
This way the data can be compressed before the upload. (Or are mobile devices not powerful enough for good compression methods?)

This could reduce the data usage.
"
mozilla/MozStumbler,closed,question about the scanning of cell towers (maybe a bug?),[],"I'm living in rural areas so the following thing might not be recognized in citys in the same way
my device is able to scan more cells while the option ""only 2g"" in my mobile settings is checked

is my device only able to scan 2g while I'm using 2g and only 3g while using 3g?
(-> more 2g cell towers in my area than 3g ones?)
or does anybody know a different/better explanation for this behaviour
"
mozilla/MozStumbler,closed,mainactivity doesn't update while scanning without gps fix,[],"the screen doesn't get updated while scanning if the gps is disabled

you need to reload the mainactivity/press start/stop to update the numbers of found cells/wifi aps
"
mozilla/MozStumbler,closed,Make MozStumbler beautiful,[],"Adds icons to MozStumbler, removes Quit.
"
mozilla/MozStumbler,closed,MozStumbler v0.12.1,[],"- Fix #388 — Fix CDMA/EVDO scanning  (@cpeterso)
- Fix #397 — Display coverage overlay on map view (@tamcap)
"
mozilla/MozStumbler,closed,Recognize EVDO variants as CDMA,[],"Fixes #388.
"
mozilla/MozStumbler,closed,Fix to start/stop the service.,[],"Fixes #385
"
mozilla/MozStumbler,closed,Coverage overlay.,[],"An idea how to display current coverage on the map. Probably needs bug 961429 resolved first before it's implemented in a mainstream release...
"
mozilla/MozStumbler,open,MainActivity Labels: wording should match server's Stats page,"[Label(name=""Good first bug""), Label(name=""enhancement"")]","https://location.services.mozilla.com/stats uses labels such as ""Unique Wifi Networks"" instead of the Stumbler's ""Wi-Fi Access Points Scanned"".  The two should likely align (and share translations).

This is being discussed server side at:

https://github.com/mozilla/ichnaea/issues/103
"
mozilla/MozStumbler,closed,Add to map layer with points,[],"Like in website: https://location.services.mozilla.com/map

After that, users will can view areas without data more quickly
"
mozilla/MozStumbler,closed,MozStumbler v0.12.0,[],"Special shout-out to @tamcap, our busiest contributor for this release! :cake:
- Add ""Upload only on Wi-Fi"" option (@tamcap)
- Refactor reporter to reduce memory usage (@cpeterso)
- Cleaning up the error output of MainActivity.java (@tamcap)
- Add Poland Koleje Slaskie train to SSID blocklist (@tamcap)
- Add BlackBerry OS to SSID blocklist (@SunboX)
- Update Simplified Chinese translation (@l-hedgehog)
- Update French translation (@pl6025)
- Update Spanish translation (@stripTM and @rodmoreno)
- Update Russian translation (@CupIvan)
- Update Polish translation (@tamcap)
"
mozilla/MozStumbler,closed,Refactor reporter to reduce memory usage,[],
mozilla/MozStumbler,closed,Cleaning up the error output of MainActivity.java,[],"Simple `Log.e->Log.d` cleanup. Most of the intents received by `MainActivity.java` are not errors. They can be simply handled on the debug level to keep the error console cleaner.
"
mozilla/MozStumbler,closed,Stylistic changes + new Polish strings.,[],
mozilla/MozStumbler,closed,Poland Koleje Slaskie train hotspot blocklist,[],"Koleje Śląskie, local authorities subsidiary railway service in Poland has several trains with wifi hotspots. They are named by ""Hot-Spot-KS*"" where \* is an rolling stock number.
"
mozilla/MozStumbler,closed,translate strings about wifi,[],
mozilla/MozStumbler,closed,Better geofencing,[],"Those are upgrades built on top of the `exp` branch introducing upgrades to the UI and some code cleanup.

New features:
- ability to set geofencing location from the drop down menu during scanning
- geofencing status display on the main screen
- checkbox in the preferences to turn geofencing on/off
- 2 way communication of geofencing status between the blocker and main screen
"
mozilla/MozStumbler,closed,Better geofencing,[],"This branch introduces improvement over the basic geofencing. Now with dedicated menu item and display status. [Still] TODO: add indicator when geofencing is actively blocking locations.
"
mozilla/MozStumbler,closed,CDMA logging not working,[],"It appears the CDMA logging added through #182  merged into #71 isn't currently working. On my HTC EVO V 4G running Android 4.0.3 using Virgin Mobile USA (on the Sprint network), the app always says zero cells visible and zero cells scanned.

@hannosch told me that we only have 800 CDMA cell entries in the database (out of 500k total), and all of those from November 2013.
"
mozilla/MozStumbler,closed,Update spanish translation,[],
mozilla/MozStumbler,closed,Basic geofencing.,[],"This very basic interface allows to specify a point (in a format of `-10.005,10.02`) around which MozStumbler will not report the results. Exclusion zone is currently defined as +/- 0.01 deg lat/lon.

Geofencing works good :+1:
"
mozilla/MozStumbler,closed,Quit does not Quit,"[Label(name=""bug"")]","Quitting the application (menu, quit) does not seem to actually quit the application. When you restart the application the ""current stats"" (Locations reported, Wi-Fi scanned, etc) values are not reset to zero. In addition, after ""quitting"", the ScannerService process continues to run in the background (eating CPU and battery).

If you force close the application or reboot the phone, the ""current stats"" are reset (and the application stops using resources). 

I would expect that the user requesting a quit would actually quit the application, unload it from memory, stop all background processes, etc.

If the intent of ""quit"" from the user interface point of view is to simply exit the UI, then there needs to be another method to actually stop all processing other than doing a force close or using some other task manager. Perhaps another menu option ""quit all"", ""quit and unload"", etc.
"
mozilla/MozStumbler,closed,"Update French translation with ""Wifi only"" strings",[],
mozilla/MozStumbler,closed,Geofencing for MozStumbler,[],"This very basic interface allows to specify a point (in a format of `-10.005,10.02`) around which MozStumbler will not report the results. Exclusion zone is currently defined as +/- 0.01 deg lat/lon.
"
mozilla/MozStumbler,closed,Update SSIDBlockList to include BlackBerry OS 10,[],
mozilla/MozStumbler,closed,Add support for external GPS devices,"[Label(name=""Closed: won't fix"")]","I own external GPS device which I use for mapping for OpenStreetMap project. This GPS device si better than internal GPS device on my phone. So I have connected this GPS device via bluetooth and I see data in Locus (map application on Android). But MozStumbler doesn't work with this external GPS device. I don't know how this works on Android. Maybe application must have own support for external GPS devices?

Theoretically there is no problem when MozStumbler use internal GPS devices. But only with one exception... battery live. 
"
mozilla/MozStumbler,closed,MozStumbler has problem with wi-fi hotspot on Android 2.3,"[Label(name=""bug"")]","MozStumbler has some problem with wi-fi hotspot. When I enabled wi-fi hotspot on my device MozStumbler crashed. When I launched MozStumbler again I saw that information about wi-fi networks are not updated. Maybe no wi-fi scan when wi-fi hotspot is enabled? I saw no notification about that.

I can provide more informations about crash but I don't know where I can find such informations on Android. 

**Phone**: HTC Desire
**OS version**: Android 2.3
**MozStumbler**: 0.11.0
"
mozilla/MozStumbler,closed,Better zoom on the map,[],"One from the latest upgrades disabled  zoom 14 and higher [on the map](https://location.services.mozilla.com/map#13/49.7376/13.3803). I would like to have better zoom (maybe 14 and 15?) available because on the zoom 13 I don't see streets in the city which are good to cover (wi-fi networks).
"
mozilla/MozStumbler,closed,Introducing WiFi only uploading.,[],"Those changes should introduce a WiFi only upload feature. My only concern is the size of `mReports` getting too large. It's possible that an extreme value (`mReports.length`>?) might cause some buggy behavior down the line.

I'm pretty sure I messed up something with github again. Some of the changes are already incorporated into mozilla:master (related to the on/off button), but as they are by now part of the same commit, I am not sure how to separate them (/ revert them).
"
mozilla/MozStumbler,closed,"Cleaning up the layout, optimizing code for the on/off button.",[],"Fixes to clean up the code.
"
mozilla/MozStumbler,closed,update russian translation,[],
mozilla/MozStumbler,closed,Update strings.xml,[],"Add spanish translation of cells
"
mozilla/MozStumbler,closed,over 50 entries don't get uploaded,[],"it seems like mozstumbler doesn't send all locations
look at the screenshot, all 926 locations where gathered before the report was send
![locations](https://f.cloud.github.com/assets/5685512/2041222/e5febc32-89c2-11e3-9c2c-7f2c87d90bff.png)
but 40 entries are missing in this example?

do some reports send several locations (merged)?
or are the informations about these locations filtered out because of no valuable information?
or is it a connection problem (wifi connection interrupted for a short moment)?
"
mozilla/MozStumbler,closed,sync zh-CN translation with en-US strings,[],
mozilla/MozStumbler,closed,MozStumbler v0.11.0,[],"- Downgraded to gradle 1.9 to fix fdroid builds (@cpeterso)
- Updated German translation (@zod)
- Use getAllCellInfo() API for more details about mobile network (@illarionov)
- Added Italian translation (@musuruan)
- Added Catalan translation (@lua86)
- Added Bengali translation (@rabbihossain)
- Updated Finnish translation (@ojarva)
- Reduced unnecessary timestamp precision (@tamcap)
- Added Taiwan's train SSID to blocklist (@petercpg)
"
mozilla/MozStumbler,closed,Use no more than percent of battery,"[Label(name=""enhancement"")]","Once we have MozStumbler able to launch based on GPS activity we should also add a feature so that after a percentage of battery is used it no longer scans.
"
mozilla/MozStumbler,closed,Submit Results via WiFi Only ,[],"It would be nice if MozStumbler could store scan results even after being closed and submit when WiFi becomes available if the user so chooses in settings.
"
mozilla/MozStumbler,closed,Interval based peroidic scanning,"[Label(name=""enhancement"")]","It would be nice to be able to set MozStumbler to periodic scanning where the app would automatically launch and scan at intervals set by the user. So maybe every half hour or so or hourly when GPS active.
"
mozilla/MozStumbler,closed,Override scanning button's default ON/OFF text,[],"This fixes a regression from PR #362.
"
mozilla/MozStumbler,closed,cell scan not working if screen off,"[Label(name=""bug"")]","don't know whether this is device related (the Rom I'm using right know is not completely stable) but mozstumbler seems to scan only for cell towers if the screen is on
"
mozilla/MozStumbler,open,audible notification for GPS loss,"[Label(name=""Good first bug""), Label(name=""enhancement"")]","play a sound/vibrate if GPS signal is lost while scanning to prevent driving a long time without noticing that mozstumbler doesn't work
"
mozilla/MozStumbler,closed,ignore moving wifi aps,"[Label(name=""enhancement"")]","mozstumbler should ignore all moving wifis which signal strengths' barely changes and are available over a bigger amount of locations (will only work for moving wifis next to you (Bus, train) and not for busses/trains which are driving next to you)
"
mozilla/MozStumbler,closed,Add Taiwan's on-bus/train SSID to Blocklist,[],
mozilla/MozStumbler,closed,No time in timestamps sent to servers. Fixes issue #359,[],"This simple fix will implement the changes proposed by @hannosch. I checked [mozilla/ichnaea](https://github.com/mozilla/ichnaea/) and the server-side code in decimaljson.py should handle it without any problems. Feel free to commit whenever you decide to move forward.

Fixes issue #359
"
mozilla/MozStumbler,closed,Issue #352 fix (on/off button state),[],"_Got confused previously with multiple commits (sorry)_. This commit fixes the light on the on/off button by replacing the Button class with a CompoundButton and invoking setChecked() during UI update.
"
mozilla/MozStumbler,closed,Updated Finnish translations,[],"Fixed jargon and spelling mistakes.
"
mozilla/MozStumbler,closed,Issue #352 fix (on/off button state),[],"This commit should ~~partially~~ fix Issue 352 by replacing Button with CompoundButton in updateUI() method and invoking setChecked().
"
mozilla/MozStumbler,closed,Use less precise timestamps in reported uploads,"[Label(name=""bug"")]","Currently the reporter adds a precise ISO8601 timestamp for every uploaded item.

The date format code is in https://github.com/mozilla/MozStumbler/blob/master/src/org/mozilla/mozstumbler/DateTimeUtils.java

At this point there's no actual need for such precise timestamps. I'd suggest we cut down the reported timestamp to represent a day. So we'd send either ""2014-01-27"" or ""2014-01-27T00:00Z"".

We could probably further cut down the timestamp to always report the first of the current month, so we'd get ""2014-01-01"" instead. I don't feel strongly about monthly vs. daily resolution.

This is a companion issue for mozilla/ichnaea#87. We should cut down precision on both ends.
"
mozilla/MozStumbler,closed,Added Bengali Translation,[],"Tried to add Bengali translation.
"
mozilla/MozStumbler,closed,Add Catalan translation.,[],"I do not know anything about coding -yet-, but I hope I added all needed for the Catalan translation being usable.
"
mozilla/MozStumbler,open,Launch automatically when GPS is in active use,"[Label(name=""enhancement"")]","Some apps such as [GPS Status and Toolbox](https://play.google.com/store/apps/details?id=com.eclipsim.gpsstatus2) auto-launch whenever GPS is activated by another app, like Google Navigation. 

It would be great if MozStumbler did this as well. In fact, this should probably be the default mode for release on the Android market. People expect their nav apps to use some battery and are typically using navigation in areas that they don't already go, plus they won't have to remember to turn the stumbler on first.

I think attaching to the android.location.PROVIDERS_CHANGED intent is the way to do this. Could be wrong though and haven't had time to dig into it yet.

There's also [GpsStatus.Listener](http://developer.android.com/reference/android/location/GpsStatus.Listener.html). 
"
mozilla/MozStumbler,closed,Downgrade to gradle 1.9 to fix fdroid builds,[],"fdroid's build system appears to still be using gradle 1.9:

https://f-droid.org/wiki/page/org.mozilla.mozstumbler/lastbuild

```
Cleaning Gradle project...
Could not build app org.mozilla.mozstumbler due to BuildException: 'Error cleaning org.mozilla.mozstumbler:0.10.2'
==== detail begin ====
Available gradle versions: 1.4 1.6 1.7 1.8 1.9
Found 1.10 via gradle plugin version 0.8
/opt/gradle/bin/gradle: line 18: /opt/gradle/versions/1.10/bin/gradle: No such file or directory
==== detail end ====
```
"
mozilla/MozStumbler,closed,"""Test Mozilla Location Service"" Is problematic","[Label(name=""bug"")]","1) When there's no GPS fix, it doesn't do anything and wait for a fix. The location service should use wifi/cell tower data to try to find the location even if GPS location can't be determined.

2) It never finds my location, even in areas that I previously scanned with the apps, even more than 10 times. Once it gets a GPS fix it says it couldn't locate me.
"
mozilla/MozStumbler,closed,Add option to configure stumbler's low battery limit,"[Label(name=""enhancement"")]","there should be an option to ignore the battery state and just keep on scanning
"
mozilla/MozStumbler,closed,battery empty -> scan button doesn't switch from on to off state,"[Label(name=""bug"")]","if the battery of phone is almost empty and mozstumbler stops scanning to save on battery it doesn't switch the buttons light
![screenshot_2014-01-27-14-37-50](https://f.cloud.github.com/assets/5685512/2010134/b3e7f84a-8769-11e3-9d7a-c8a709e7fb00.png)
![screenshot_2014-01-27-14-38-01](https://f.cloud.github.com/assets/5685512/2010135/b4e28a94-8769-11e3-8d52-b80d64b81084.png)
"
mozilla/MozStumbler,closed,Added Italian translation,[],"I created an Italian translation using android2po and Poedit under Linux. I hope everything is fine - this is my second Android translation.
"
mozilla/MozStumbler,closed,No longer scanning since 0.10.2,"[Label(name=""bug"")]","no longer scanning locations it scans WiFi and cells but never locations and also not reporting.
"
mozilla/MozStumbler,closed,"scanning gets disabled after closing ""test mozilla location service""","[Label(name=""bug"")]","The scanning stops after closing ""test mozilla location service"" when it was turned on manually before.
It should be turned off after closing the map only if the scanning was disabled before opening the map. ;)
"
mozilla/MozStumbler,closed,Optionally use the new getAllCellInfo API (#72),[],
mozilla/MozStumbler,closed,Fix typo in german translation.,[],
mozilla/MozStumbler,closed,Update Reporter.java,[],
mozilla/MozStumbler,closed,MozStumbler v0.10.2,[],"- Fixed auto-updater so F-Droid's builds won't try to install Mozilla-signed builds (@cpeterso)
- Updated Polish translations (@tamcap)
- Updated Hebrew translations (@arthurzam)
- Updated zh-TW translations (@irvin and @petercpg)
- Refactored BuildConfig (@illarionov)
"
mozilla/MozStumbler,closed,Only Mozilla builds should try to download updated Mozilla builds,[],"Fix #325. This change will avoid the problem where F-Droid's MozStumbler builds try to download and install Mozilla-signed updates from GitHub. F-Droid's package manager will update their MozStumbler builds.

Also, fix a bug where exiting the map view puts the GPS scanner and the ""Start/Stop Scanning"" button in an inconsistent state.
"
mozilla/MozStumbler,closed,Update zh-tw translation,[],
mozilla/MozStumbler,closed,Integration of the coverage map.,"[Label(name=""enhancement"")]",
mozilla/MozStumbler,closed,Move configuration to BuildConfig,[],"Bump Android gradle plugin version to 0.8.+
"
mozilla/MozStumbler,closed,MozStumbler >= v0.9.0 no longer scans WiFi very well on BlackBerry 10.2.1,"[Label(name=""bug"")]","A user on the mailing list reported this problem:

Latest working Version on BlackBerry 10.2.1 was MozStumbler 0.8.3. The newly MozStumbler 0.9.0, 0.10.0 and 0.10.1 don't get any WiFi anymore. The 0.10.0 got 2 WiFi points, but that are the only one it got (scanned 8 locations). Seems broken, there must be more visible (check 0.8.3).

Seems like BlackBerry 10.2.1 is compatible with Android 4.2.2: http://devblog.blackberry.com/2013/11/prepare-yourself-an-android-runtime-update-is-coming/
"
mozilla/MozStumbler,closed,Update IW translation,[],"Added missing string for the Hebrew language
"
mozilla/MozStumbler,closed,Update PL translation,[],"ver 0.10.1 up to date
"
mozilla/MozStumbler,closed,MozStumbler v0.10.1,[],
mozilla/MozStumbler,open,Display user's local scanned data on MozStumbler's map,"[Label(name=""enhancement"")]","MozStumbler's map can display APs the user has scanned without any privacy concerns, even if we need the public world map to display fuzzier coverage. A local map of scanned data would be helpful for guiding contributors to unmapped areas.

This feature will probably need a real local database as described in issue #3.
"
mozilla/MozStumbler,closed,"Restore ""Start/Stop Scanning"" button text",[],
mozilla/MozStumbler,closed,Does off indicate mode or function ,[],"I had moz stumbler set to on for a long time until I realized that the button doesn't indicate the current mode but an action. It's very confusing. 
"
mozilla/MozStumbler,closed,Write our own movement detection library as an alternative to Google Play Services' Activity Recognition,"[Label(name=""enhancement"")]","Depending on Google Play Services prevents MozStumbler from being included in free software app stores like F-Droid. We don't need most of the advanced functionality of the Activity Recognition API; we just want to know if the device is moving or still.

We can roll our own movement detection code using standard Android sensors like TYPE_ACCELEROMETER, TYPE_GRAVITY, TYPE_LINEAR_ACCELERATION, and/or TYPE_ROTATION_VECTOR:

https://developer.android.com/guide/topics/sensors/sensors_overview.html
"
mozilla/MozStumbler,closed,Updated german translations,[],"Updated german translations with new values from version v0.10.0, and added a simple comma.
"
mozilla/MozStumbler,closed,"Bring back the detailed text ""Start"" or ""Stop scanning"" on the scan button","[Label(name=""enhancement"")]","Hello,

Thanks for the 0.10.0 version which corrects well the UI and behavior of 0.9.0, adding also the number of visible and scanned cells to the screen !

Just, on the scan button which is fortunately back, is it possible to re-put the same text as before ? Now in French version (I don't know on English one if it is the same) it shows only YES (Oui) or NO (Non), which can be confusing.

If Yes is written, does it mean that MozStumbler is acive and scanning, or that it will be if I click on ""Yes"" ? At start, when application needs some time to detect GPS, user can doubt. And the bottom blue or gray bar is not visible from car driving position.

The previous texts : ""Start"" or ""Stop scanning"" (or detection, or analysis, or activity) were perfect :)
"
mozilla/MozStumbler,closed,MozStumbler v0.10.0,[],
mozilla/MozStumbler,closed,Wishlist: bring back the manual on/off button,"[Label(name=""bug"")]","Sometimes the app doesn't correctly detect that you're moving, so you want to turn it on manually. Sometimes the time is not appropriate for tracking (sensitive area; doing something network intensive; want to save battery life) and you want to turn it off manually.

The only way to control it in 0.9.0 is to go into settings/apps and kill it manually, then start it from your app list again when you want to enable it.
"
mozilla/MozStumbler,closed,Location tracking activates despite exiting the app,"[Label(name=""bug"")]","I sometimes do not want to have location tracking enabled. But with 0.9.0 there is no way to disable tracking. With power-saving mode off, and exiting the app, it still starts up again and starts tracking when I move about.

This is sometimes annoying, but it is a real issue at work, where I am pretty sure I should not be broadcasting AP info of any kind to other places. As it is I need to disable the app in the settings to make it stay off.
"
mozilla/MozStumbler,closed,Disabling power saving mode does not work,"[Label(name=""bug"")]","I disable the power-saving mode in 0.9.0 since the movement tracking is too inaccurate. But the app ignores the setting and continues to activate and inactivate according to that detection in either case.
"
mozilla/MozStumbler,closed,0.9.0 Quit Doesn't Work,"[Label(name=""bug"")]","After the 0.9.0 update, Quit no longer works.

After hitting Quit from the menu, the application closes and it appears to exit.

But once you start moving, you will see in the notifications area that MozStumbler has started running again.

This is on a Samsung Galaxy S3.
"
mozilla/MozStumbler,closed,Add gradle build flavor for building without auto-updater and Google Play Services,"[Label(name=""enhancement"")]",
mozilla/MozStumbler,closed,Only show the update notification once on app start,"[Label(name=""bug"")]","The update manager built into MozStumbler should only show the dialog box at the start of the app and not every time you switch to the menu/turn your device/open the map and get back.
There should be a button to press (check for updates or something like that) and a setting to disable the automatic search for updates.
Especially since version 0.9 doesn't seem to be bug free, it is a bit annoying.
"
mozilla/MozStumbler,closed,No Map Tiles/Images (Test Mozilla Location Service),[],"why do I only see the radius I'm in and squared paper, if I open the test mozilla location service (as I'm German it may be spelled differently in English) and no real maps/satellite images? (Version 0.8.3, because there seem to be bugs with the power-saving mechanisms in 0.9 and I don't like the new interface either)
I'm using Wifi/have an internet connection (16k DSL) but I do not see the map tiles
Can I see whether the app is loading them and just takes longer?
"
mozilla/MozStumbler,closed,save results to sdcard (for devices without internet connection),[],"you should be able to save your current captured cell towers and wifi aps to be able to load them later if you have a wlan connection (not everybody has a flatrate), so that you can close the app until then, make even restarts and prevent data loss by crashes (automatic saving to sd card would be nice, too)
"
mozilla/MozStumbler,closed,Update French translation with Activity strings,[],
mozilla/MozStumbler,closed,Display current and total cell info to the user,[],"I like to see that even when I'm not getting WiFi APs, there's still valuable info being stumbled.  This is a first stab at satisfying issue #194 ... though that wanted individual cell tower, this is currently counting unique ""Cell Info"" which includes things like Signal Strength.

The equality and hashCode for CellInfo could be changed to exclude non-tower-identifying info if required.
"
mozilla/MozStumbler,closed,Fix lint issues with de translations,[],"lint really wants ""Schliessen"" to be ""Schließen"" and ""Fuss"" to be ""Fuß"".
This change makes lint happy.
"
mozilla/MozStumbler,closed,0.8.3 - 0.9.0 update fails,[],"Installed 0.8.3 via f-droid. The auto-update fails on install, saying there is already a different app with the same name and different signature. 
"
mozilla/MozStumbler,open,"save important device Infos to filter the coverage map (5ghz wifi, date)","[Label(name=""enhancement"")]","does the app save the frequencys and standards the device is capable of recognizing? 
(5 GHz, 2.4 GHz, b, g, n, a, ac standard, LTE (advanced), hsdpa, UMTS, gprs, edge etc.) 
this way you could add filters to the existing map to see later, whether a certain route is only covered with a 2.4 GHz b+g device
Edit:
also interesting for the coverage map is stuff like:
upload date of the informations
signal coverage (how strong is the signal)
and another filter thing:
how unique is a place (maybe by colorizing the map, like infrarot cameras do it)
"
mozilla/MozStumbler,closed,"Wifi settings, wrong signature (FDroid update), test service->no visible map",[],"you should be able to see, how many/which cells the app detects right now
and how the detected wlans are called (atleast the bssids)->list
and you should be able to specify the amount of time how long the app will wait before scanning again

why do I only see the radius I'm in if I open the test mozilla location service (as I'm German it may be spelled differently in English) and no real maps/satellite images?

why is the version in the FDroid market not up to date -> cannot update because of wrong signature...

the app should be able to show the leaderboard by parsing the html page and displaying the table on the display

EDIT:
and there should be an option to ignore the battery state
"
mozilla/MozStumbler,closed,update from 0.8.3 to 0.9.0 fails,[],"the installed 0.8.3 informs me there is an update to 0.9.0. It explains that existing data will not be lost. But when I allow it to install the update it says:

   'x' App not installed.
     An existing package by the same name with a 
     conflicting signature is already installed.

How to get the newer version without loosing data...?

On a side note. I found that the data  area on the sdcard contained 6 identical copies of the update (with different names). It apparently downloads the package every time I try to update. I'm sure this can be done in a more optimal way...
"
mozilla/MozStumbler,closed,Some minor UI changes,[],"These are some minor UI changes I made when I was prototyping how we might bring back the ""Start/Stop Scanning"" button (or something like it).
"
mozilla/MozStumbler,closed,Update spanish translation!,[],
mozilla/MozStumbler,closed,Activity recognition should not stop scanning when power-saving mode is off,"[Label(name=""bug"")]","The activity recognition seems to stop scanning even when power-saving mode is off.
"
mozilla/MozStumbler,closed,"Add time delay for stopScanning after activity recognition to avoid ""stoplight problem""","[Label(name=""bug"")]","To avoid the ""stoplight problem"" with activity recognition, we could add a time delay so the scanner doesn't try to stop and restart all the time.
"
mozilla/MozStumbler,open,Restart stumbler service after device reboot,"[Label(name=""enhancement"")]","If the stumbler service is running in the background (in power-saving mode), we should consider automatically restarting the service after a device reboot.
"
mozilla/MozStumbler,closed,Update strings.xml,[],
mozilla/MozStumbler,closed,Bring back start/stop capture button,"[Label(name=""enhancement"")]","Hello,

With 0.9 the stop/start capture button is gone. This really a mandatory feature as it allows people to easily switch off capture when they want to protect their privacy (with current behavior I will just stop to use it) 

The new process requires to quit the application. This cannot be easily done while driving a car for instance.
"
mozilla/MozStumbler,closed,Show notification when scanning,[],"The `NotificationCompat.Builder` does not seem to actually do anything on my device, so I resurrected the older, proven `buildNotification()` method that does display the notification icon.
"
mozilla/MozStumbler,closed,MozStumbler v0.9.0,[],
mozilla/MozStumbler,closed,Don't reset all statistics after MozStumbler is killed,"[Label(name=""enhancement"")]","Steps to reproduce:
- Start Scanning
- Wait for a few access points and reports
- Kill MozStumbler (task killer / restart the phone / ...)
- Open MozStumbler again. All statistics, including ""Reports Sent"" are zeroed.

This is really confusing, as people think their earlier reports disappeared altogether. Of course, leaderboard shows number of points, but no other statistics.

Seeing total number of locations, access points and cell towers I have sent over time would be cool.
"
mozilla/MozStumbler,closed,Rewrite starting and stopping of the activity recognition,[],"Management of a subscription to an activity recognition updates should be done from the main activity.
Activity recognition service can send them even when the application is stopped or unloaded from memory.

In particular, fixed bug that  the activity recognition service continue to send updates after exiting the application and after turning off the power saving mode.
"
mozilla/MozStumbler,closed,es: fix typo,[],
mozilla/MozStumbler,closed,Should warn when wifi is off,"[Label(name=""enhancement"")]","I turned wifi off on my phone because my broadband connection had some issues.

I later went outside and enabled MozStumbler and was surprised that it didn't report any wifi networks... until I remembered that I had turned wifi off.  Doh.

It would be nice to print a warning when wifi is off.
"
mozilla/MozStumbler,closed,Restore ongoing notification with a min. priority (removed in acd2e0f),[],"Start the service in a foreground state.

Why this notification has been removed? Removing startForeground() and making service a background was intentional?
"
mozilla/MozStumbler,closed,Finnish translation,[],
mozilla/MozStumbler,closed,Bump Android gradle plugin verion to 0.7.+,[],"For Android Studio 0.4.2
This pull request contains lint and proguard fixes.
"
mozilla/MozStumbler,closed,zh-TW l10n update,[],
mozilla/MozStumbler,closed,Scan from start option,"[Label(name=""enhancement"")]","Please add option to start scanning immediately after opening mozstumbler
"
mozilla/MozStumbler,closed,CSV import,"[Label(name=""enhancement"")]","It would be nice to have import option - I collected quite big database with wigle and I want to contribute it to mozilla.
"
mozilla/MozStumbler,closed,Fixed a typo in Hindi translation,[],
mozilla/MozStumbler,closed,Bump Android gradle plugin verion to 0.7.+,[],"For Android Studio 0.4.2
"
mozilla/MozStumbler,closed,Disallow < 3 letter user names on Register page,"[Label(name=""enhancement"")]","Users with 2 letter nicknames do not show up on the Dashboard.
"
mozilla/MozStumbler,closed,Set default values on start,[],"This fixes a bug that when open settings on a fresh installation, power saving mode will be shown turned off when in fact it is on.
"
mozilla/MozStumbler,closed,Update Hindi & Marathi translation,[],
mozilla/MozStumbler,closed,Update Marathi & Hindi translation,[],
mozilla/MozStumbler,closed,"Display ""Detected Activity"" in UI",[],"and don't stop scanning for DetectedActivity.TILTING or UNKNOWN.
"
mozilla/MozStumbler,closed,Add some more reporter error handling,[],
mozilla/MozStumbler,closed,Change user agent header to include some device info,"[Label(name=""enhancement"")]","We changed the user agent header for all server requests to include the MozStumbler version a while back. The code is at https://github.com/mozilla/MozStumbler/blob/master/src/org/mozilla/mozstumbler/Reporter.java#L197

This means we only get a string like `MozStumbler/0.8.3` on the server side. For older clients and the Fennec code we get a string like `""Dalvik/1.6.0 (Linux; U; Android 4.3; GT-N7100 Build/JSS15J)""`.

I think it would be interesting to retain at least the Android version in the user agent. If there's an easy way to distinguish ""official Android"" from other distributions like CyanogenMod that would be interesting as well.

I'd like to have that information, so we can make data-based decisions on questions like: What minimum version of Android should we support. Or: If we require Google Play services, how much of our user base does that affect.
"
mozilla/MozStumbler,closed,Fixes proposed by @cpeterso,[],"CELLS_COUNT_WATERMARK=50
s/keySet().size()/.size()/
Report unknown accuracy/altitude as 0 until the server side has not been fixed
remove mIsGpsPositionKnown
PSC - is part of a cell identifier
"
mozilla/MozStumbler,closed,Make available on Google Play store,"[Label(name=""enhancement"")]","If this were available in the Google Play app store more people could easily install it and keep it up to date.
"
mozilla/MozStumbler,closed,Suggestion for new icons,[],"Goofing around a bit with a better icon for Mozilla Stumbler.

No, my feelings won't be hurt if you don't use them.

Also may try to fix up the main page to look a bit better and be functional in landscape mode.
"
mozilla/MozStumbler,closed,Do not report accuracy and altitude if they are not available.,[],"Round accuracy and altitude to 2 decimal places.
"
mozilla/MozStumbler,closed,Some reporter fixes,[],"HttpsURLConnection connection reusing is broken on android 4.0 - 4.4: http://stackoverflow.com/questions/19258518/android-httpurlconnection-eofexception
"
mozilla/MozStumbler,closed,Update russian translation,[],
mozilla/MozStumbler,closed,enable GPS message,"[Label(name=""enhancement"")]","when I start programm with GPS disable, there is a message on main screen.
then I disagree with it and click NO
if I go to settings or want view map and will back to main screen, there is that message again and again.

can you upgrade it, that programm will memorize my choice for current session?

or optional maybe show red text ""GPS disable"" and if all ok green text ""GPS enable""
maybe instead of first line ""GPS Satellites Visible""
"
mozilla/MozStumbler,closed,Czech translation,[],
mozilla/MozStumbler,closed,Brazilian portuguese translation,[],"Sending brazilian portuguese translation
"
mozilla/MozStumbler,closed,Include references to sources of SSID/BSSID material,"[Label(name=""Closed: won't fix""), Label(name=""enhancement"")]","Either in comments in code or in a section of the README
"
mozilla/MozStumbler,closed,Continuing problems with reporting on device with no cellular data,"[Label(name=""Closed: won't fix""), Label(name=""bug"")]","I lost somewhere between 10k and 20k samples over the holiday break to upload failures.  Even after waiting for 24 hours after returning home, the 0.81 Stumbler still had only one report.  This is mostly a place holder for more investigation later.
"
mozilla/MozStumbler,closed,Update French translation with latest strings,[],"visible_wifi_access_points / last_location / about_mapbox
"
mozilla/MozStumbler,closed,Update Spanish translation with latest strings,[],
mozilla/MozStumbler,closed,MozStumbler v0.8.3,[],
mozilla/MozStumbler,closed,"Point updater to mozilla's MozStumbler repo, not dougt's",[],
mozilla/MozStumbler,closed,Couldn't upgrade from 0.8.1 to 0.8.2,[],"I'm redownloaded the new version because it would crashing after asking if I want to upgrade from 0.8.1 to 0.8.2.
"
mozilla/MozStumbler,closed,Update German translation with latest strings,[],
mozilla/MozStumbler,closed,Collect unique data at each location,[],"Now if you stand long on one place, the GPS location may not to be changed for more than one second. 
Once the report with this location is sent, all further scanned WI-FI networks and GSM cells are discarded.

In this patch, sending a report is delayed until a new GPS position is received, and all received durring this time results of scanning are grouped into the one report.
"
mozilla/MozStumbler,closed,MozStumbler v0.8.2,[],
mozilla/MozStumbler,closed,Bump Android build tools version to 19.0.1,[],
mozilla/MozStumbler,closed,Provide GPS Latitude & Longitude to user,[],"Issue #168 suggested a change to the ""GPS Satellites Visible"" count so the user was aware if a GPS fix has occurred.  This merge request provides an additional line of information informing the user of the current location as reported by the GPS.  That information is only displayed if there are currently visible satellites and at least one location has been observed.
"
mozilla/MozStumbler,closed,Filter some known iPad and iPhone BSSID OUIs,[],"Using the partial list of iPad and iPhone OUIs from issue #69.
"
mozilla/MozStumbler,closed,Increase minimum report size from 20 to 100 measurements,[],"This should reduce network usage and power consumption.
"
mozilla/MozStumbler,closed,"Add ""Wi-Fi Access Points Visible"" to main display",[],"This allows the user to see if any access points are currently visible,
as well as whether the number is changing which prevents stalled polls
from continuing.
"
mozilla/MozStumbler,closed,Activity recognition,[],
mozilla/MozStumbler,closed,More battery consumption than openbmap and opencellid clients,"[Label(name=""bug"")]","The battery consumption of MozStumbler (0.81) is several times heavier than
the openbmap and the opencellid clients. See the screenshots below.
If MozStumbler is going to be used by ordinary users, this may has to be
addressed. Otherwise the battery consumption may be non-issue.

![screenshot_2013-12-27-18-16-56](https://f.cloud.github.com/assets/6261196/1813972/0e53006e-6edc-11e3-93bb-1fe671dbf857.png)
![screenshot_2013-12-27-18-17-13](https://f.cloud.github.com/assets/6261196/1813973/0e55e0b8-6edc-11e3-89c8-78e122b4ce85.png)
![screenshot_2013-12-27-18-17-25](https://f.cloud.github.com/assets/6261196/1813974/0e57dff8-6edc-11e3-94c9-f2ac0f000e26.png)
![screenshot_2013-12-27-18-17-50](https://f.cloud.github.com/assets/6261196/1813975/0e5c4ff2-6edc-11e3-867a-ed68cb329057.png)
![screenshot_2013-12-27-18-18-16](https://f.cloud.github.com/assets/6261196/1813976/0e607366-6edc-11e3-836c-7528744ab4b8.png)

The recoding was done as the following route:
http://goo.gl/maps/Clr60
"
mozilla/MozStumbler,closed,fixes #171. make sure we sent to API key for both the submit and the sea...,[],"...rch API.
"
mozilla/MozStumbler,closed,Issue 239 - Include an attributation for OSM,[],
mozilla/MozStumbler,closed,getNeighboringCellInfo() returns null on many phones,[],"cellscanner / DefaultCellScanner.java uses getNeighboringCellInfo(),
but getNeighboringCellInfo() always returns null on many phones, see
https://code.google.com/p/android/issues/detail?id=24136
https://code.google.com/p/android/issues/detail?id=24306
On such phones, MozStumbler records no cell towers.

Could you consider to use getCellLocation() in addition to
getNeighboringCellInfo()?
"
mozilla/MozStumbler,closed,android play store,"[Label(name=""question"")]","Hi there. I love the app and apologize for my generic and non programming related question but why not submit the app to the android play store?
"
mozilla/MozStumbler,closed,MozStumbler v0.8.1,[],
mozilla/MozStumbler,closed,Map improvements,[],"Some improvements and optimizations of OSMDroid maps. For review.
"
mozilla/MozStumbler,closed,Block DB on-train WiFi,[],"See http://www.bahn.com/i/view/mdb/bahnintern/services/mobilitaet_service/zug/wlan/mdb_114824_www_im_ice_hot_spot_04_2013.pdf
"
mozilla/MozStumbler,closed,0.8.0 doesn't show the map anymore,[],"When testing the location service in MozStumbler, the map isn't visible anymore.
It just shows an empty grid, though the location circle is still there.
It was working well before the update.
"
mozilla/MozStumbler,closed,Custom tile server,[],"The current version uses OSM, but is locked to MapBox without some code changes. This pull allows any OSM tile server to be specified at build time. I also updated the README to better explain the process. I'm pretty new to Java/Android programming outside of school, so please let me know if this is breaking all the rules of what's normal/good practice/whatever. ~~I'm still trying to dig up a nice list of public(ish) tile servers, so the README can link to that instead, but I'd like to see what people thought of the code in the mean time~~ Edit: linked to the [switch2osm](http://switch2osm.org/providers/) list.
"
mozilla/MozStumbler,closed,Map is blank,[],"I downloaded 0.8.0 this morning and the map is blank, just an empty grid. I looked through logcat a bit (I'm somewhat new to android debugging) and couldn't find anything out of the ordinary (there was an unrelated error that appeared on previous versions as well). When I swipe the non-existant map around, these sort of messages show up occationally:

```
I/o*.o*.t*.LRUMapTileCac*( 5509): Tile cache increased from 35 to 48
I/o*.o*.t*.LRUMapTileCac*( 5509): Tile cache increased from 35 to 48
```

But nothing else. Inspecting the network traffic reveals that it is making requests and downloading tiles. Let me know if there are other details I've missed
"
mozilla/MozStumbler,closed,How to see if there are unsent informations and if yes force to report them ?,"[Label(name=""enhancement"")]","Hello,

MozStumbler is a fantastic idea to collect and provide a collaborative and open-source map of GSM cells, WiFi access points correlated to GPS locations for Firefox OS.

I have a question regarding the reports done :

I noticed that sometimes, there can be several minutes and lots of scanned positions (with a GPS fix) between 2 reports, if we stop the detection (because going into a building for example, or low battery), even with 3G data or wifi available, sometimes MozStumbler does not send the last reports immediately, we have to wait the next session.

Or if I wait many seconds / minutes after stopping detection, I see the number of reports sent increase 2 or 3 times more if many have to be uploaded, and normally number of reports approximately matches number of detections.

But if I quit MozStumbler before all the reports are done, and then restarts it, or if I put the phone on plane mode, or restart manually the phone, or if I have the problem described in issue 249 (crash), often when I restart MZ, all counts (locations, WiFi, reports) are reset back to 0 !

I know that all sent reports are well saved by Mozilla (I can see the Leaderboard points and map coverage increasing), but what happens to the reports not sent at the last close of MozStumbler ?

Is it sure that there are always sent on the next session ? Is there a way (with logs, exploring cache datas of MZ) to verify if there are not, on the several days of scanning, sometimes some locations and datas (GPS, wifi, cells...) that have been well scanned, written on the phone but never sent to Mozilla ?

And if yes is there a way to manually upload them, now ? This is not a matter of points (I don't care), but it can be frustrating when I spend lots of time, especially when walking on the town to catch all the small areas to get locations and wifi points on the most complete way, so having less locations than if I drive by car, so less reports sent per minute, and as I can not manually force all reports before stopping MZ, to think that sometimes all or part of what I've done is useless because never sent..

Thanks in advance.
"
mozilla/MozStumbler,closed,Sometimes MozStumbler makes smartphone crash and restart,"[Label(name=""bug"")]","Hello,

Since I installed MozStumbler (0.7.6 before today's update) on my phone - HTC Desire HD on CyanogenMod 11 Android 4.4, previously CM 10.2 - and when MozStumbler is in use, scanning positions, regularly my phone suddendly restarts completely.

After that all counts of MozStumbler are reset to 0, I'm unable to see when the last report was sent, if there are missing ones (locations detected, saved but not sent), how many locations / WiFi / reports previous session did...

I can not affirm without any doubt that it is MozStumbler only which causes the crash and restart, but it happens only since and when MZ works actively.

How could I help to get some logs on the phone to provide more informations, or to see if there can be conflicts with other applications running at the same time, did someone else had the same experience ?
"
mozilla/MozStumbler,closed,Add Wi-Fi Access Points scanning option,[],"Adding Wi-Fi Access Points scanning in setting for enhancement on #241
"
mozilla/MozStumbler,closed,MozStumbler v0.8.0,[],"- @dougt replaced Google Maps with OpenStreetMap and MapBox tiles, so Google Play Services library is no longer necessary!
- @dougt fixed network error handling so measurements should no longer get lost!
- @illarionov fixed some preferences bugs
- @victorklos added a Dutch translation
"
mozilla/MozStumbler,closed,Increase map zoom level,[],"and clean up our MapBox code.
"
mozilla/MozStumbler,closed,add Dutch translation,[],
mozilla/MozStumbler,closed,Do not drop readings if we do not have a network,[],
mozilla/MozStumbler,closed,Save all preferences in a single file [#242],[],
mozilla/MozStumbler,closed,Two preferences files?,"[Label(name=""bug"")]","I've just looked around the code and I've notice two preferences file, one called ""preferences"" which is inside ""xml/preferences"" and the other is inside the prefs.java which is called prefs.class.getName(); I'm I correct?
If that is true, shouldn't we change it and make it one file only?
"
mozilla/MozStumbler,closed,Don't force Wi-Fi always ON,"[Label(name=""enhancement"")]","Every time we turn on scanning MozStumbler switches on Wi-Fi, which should be optional. Because in a country like India Wi-Fi availability is very scarce. 

It consumes a whole lot of battery. Maybe a button should be introduced to turn on/off Wi-Fi when needed.

If the Wi-Fi is turned off manually MozStumbler won't send reports until its turned back on.
"
mozilla/MozStumbler,closed,Support OSM,[],"Chris, not ready yet -- still pointing at the non-mozilla tile server.  But, can you give it a once over?
"
mozilla/MozStumbler,closed,Make sure to include attribution on OpenStreetMaps ,[],"OSM require attribution on pages using OSM data (provided to us by Mapbox), and they've asked for it a couple times in various places[0]. We should add it to any page where we're displaying a Mapbox map. A recent PR on Bedrock [1] should show the way.

[0] https://twitter.com/OSM_Attribution/status/396443009769684992, https://bugzilla.mozilla.org/show_bug.cgi?id=944750
[1] https://github.com/mozilla/bedrock/pull/1464
"
mozilla/MozStumbler,closed,MozStumbler v0.7.6,[],
mozilla/MozStumbler,closed,Add Hindi translation,[],
mozilla/MozStumbler,closed,Minor additions to SSID blocklist,[],"Added two mobile device and two aircraft(!) SSIDs to the blocklist.
"
mozilla/MozStumbler,closed,Add Marathi translation,[],"Revised & Final translation.
"
mozilla/MozStumbler,closed,Add Marathi translation,[],
mozilla/MozStumbler,closed,Add Marathi translation,[],
mozilla/MozStumbler,closed,Added Marathi translation,[],
mozilla/MozStumbler,closed,Add Marathi translation,[],"Squashed @vinitraje's PR #230.
"
mozilla/MozStumbler,closed,Marathi Translation,[],"Marathi translation of MozStumbler
"
mozilla/MozStumbler,closed,values-mr,[],
mozilla/MozStumbler,closed,Create values-mr,[],"Marathi translation for MozStumbler.
Not sure if creating file correctly. Newbie here.
"
mozilla/MozStumbler,closed,Update Android gradle plugin to 0.6.+,[],"Android Studio 0.3.0 requires Android gradle plugin >= 0.6.0
"
mozilla/MozStumbler,closed,Fix timezone in submitted data,[],"SimpleDateFormat uses the system's default time zone by default.
"
mozilla/MozStumbler,closed,Fix a typo,[],
mozilla/MozStumbler,closed,Doesn't find any networks on Amazon Kindle Fire without GPS,[],"MozStumbler, at least version 0.7.5, doesn't find any networks on my Amazon Kindle Fire 1st gen running CyanogenMod 10.2 nightly. 

It also keeps nagging me to enable the GPS even though it's already enabled, as well as wifi location.

I don't know how to debug this, so let me know how to generate some logs.
"
mozilla/MozStumbler,closed,Update further l10n strings for zh-TW,[],
mozilla/MozStumbler,closed,Update strings.xml,[],"Improved French translation
"
mozilla/MozStumbler,closed,MozStumbler v0.7.5,[],
mozilla/MozStumbler,closed,zh-CN translation,[],
mozilla/MozStumbler,closed,Update list of common wifi devices with Firefox OS default SSID ☺,[],
mozilla/MozStumbler,closed,Update list of common transportation services with some Israeli networks,[],
mozilla/MozStumbler,closed,Please make update notifications less annoying,"[Label(name=""bug"")]","If a new version of MozStumber is available the update notifications are popping up all the time when I want to start scanning. This is kinda annoying. Can we please make it less annoying and only nag once a day or so?
"
mozilla/MozStumbler,closed,Resurrect SSIDBlockList.java,[],"Add some known mobile phones and transit SSIDs to the block list, but not tablets and laptops because many are stationary. For those that do move, the server-side detection of moving APs will isolate them.
"
mozilla/MozStumbler,closed,Added german translation,[],"After several new translations, I thought German was missing ;)
"
mozilla/MozStumbler,closed,Added German translation,[],"I created the German translation for MozStumbler based on the English version.
"
mozilla/MozStumbler,closed,Added Hebrew translation,[],
mozilla/MozStumbler,closed,add French translation,[],"![](https://photos-2.dropbox.com/t/0/AABSo_a-IFpTJftG48HqnfE7xynmUn_ews2RIc_afHpyKg/12/112486086/png/1024x768/3/1384038000/0/2/french_mozstumbler.png/Go4cetxaOALHsZFoOfNuLJZ8Fc7dZU5wfFwdKM0hHaY)
"
mozilla/MozStumbler,closed,Updated strings,[],
mozilla/MozStumbler,closed,First scan mostly doesn't search for a gps fix,"[Label(name=""bug"")]","I have seen this a couple of times meanwhile. Whenever I start the first scan, the gpxfix is not requested and no locations are logged. Stopping and starting again fixes the problem. It mostly happens when the application was not running before.
"
mozilla/MozStumbler,closed,"Use OpenStreetMap for ""Test MLS"" screen",[],"You could use [osmdroid](http://code.google.com/p/osmdroid/) to have [OpenStreetMap](http://switch2osm.org/why-switch/) instead of proprietary maps on the ""Test Mozilla Location Service"" screen.
"
mozilla/MozStumbler,closed,Update typo on the values folder naming for Traditional Chinese ,[],"from -tw to -zh-rTW
"
mozilla/MozStumbler,closed,MozStumbler v0.7.4,[],"- Fixed Gingerbread crashes on settings and map (@rodmoreno)
- Added Traditional Chinese (zh-TW) localization (@dwchiang)
- Added CDMA scanning (@lordsutch)
- Added ""About"" screen (@freekzy)
- Updated Spanish localization (@rodmoreno)
"
mozilla/MozStumbler,closed,Fix for updater,[],"For the issue #150

First service is stopped and then terminates the app. With this we get that if the user was scanning and updates the app, not the service is run indefinitely.

Although you should implement something to avoid losing data scanned by the user ...

What do you think?
"
mozilla/MozStumbler,closed,Adding strings for Traditional Chinese (zh-TW) language.,[],
mozilla/MozStumbler,closed, Stumbler crash on Samsung galaxy pop plus (GT-S5570i),"[Label(name=""bug"")]","I installed Stumbler on my phone (Samsung galaxy pop plus GT-S5570i with Android 2.3.6). The old version work fine but the application updated (to version 0.7.3) and since the update it crash in startup.
When I try to start it I get message ""The application has stopped unexpectedly"" with button ""Force Close"".
"
mozilla/MozStumbler,closed,Adding strings for Traditional Chinese (zh-TW) language.,[],
mozilla/MozStumbler,closed,Use SupportMapFragment,[],"For the issue #144, in my Jelly Bean works perfectly, unfortunately I have no GigerBread to test, but everything should be fine.
"
mozilla/MozStumbler,closed,Fix for gingerbread,[],"Fix for the issue #193
"
mozilla/MozStumbler,closed,Installing Stumbler crashes Aurora and Nightly,"[Label(name=""bug"")]","So my android phone (Nexus 4) is running Android 4.3.

I had both Nightly and Aurora running.

I visited: https://github.com/dougt/MozStumbler/releases in Aurora and clicked on the MozStumbler-v0.7.3.apk button to start downloading.

Once the download was complete, I clicked on the download in my notification bar. This started the installation of MozStumbler and Aurora and Nightly both immediately crashed.
"
mozilla/MozStumbler,closed,save temporary data to SD,[],"I collect many data, but programm can't send it to server, when I start it again after some time - there are no my data :-(
I offer save it on SD card, and delete temp data only then will be transferred to server successfully.
"
mozilla/MozStumbler,closed,Allow to pause scanning,[],"I don't have a mobile internet connection, so I'd like the data to be stored and then sent when the phone is connected (for example if the battery is low).
At the moment, I have to stop the scanning and hope Android doesn't kill the application.
"
mozilla/MozStumbler,closed,"Test location service error: ""Location not found""",[],"I've sent a report on this location (my house) myself, so it should be available.
"
mozilla/MozStumbler,closed,"add button ""send report""","[Label(name=""enhancement"")]","for force send current data, becose when there are no internet on phone and next time it will be available, stored data can't be transfered
I try to push stop/start button, but it often not start transfer mode
"
mozilla/MozStumbler,closed,Graphical representation of scrambled locations,"[Label(name=""enhancement"")]","If you stored the scrambled APs and cell towers locally, it'd be interesting to see them on a map.
"
mozilla/MozStumbler,closed,Show the number of cell towers scanned,"[Label(name=""enhancement"")]","At the moment only the AP number is shown.
"
mozilla/MozStumbler,closed,Crash after app launch on Android Gingerbread (2.3.6),"[Label(name=""bug"")]","MozStumbler 0.7.3 crashes on my Samsung P1010 with Android Gingerbread after start.

Logs from aLogcat app:

```
I/dalvikvm(25498): Could not find method android.app.AlertDialog$Builder.<init>, referenced from method org.mozilla.mozstumbler.MainActivity.onStart
W/dalvikvm(25498): VFY: unable to resolve direct method 8: Landroid/app/AlertDialog$Builder;.<init> (Landroid/content/Context;I)V
D/dalvikvm(25498): VFY: replacing opcode 0x70 at 0x0017
D/dalvikvm(25498): VFY: dead code 0x001a-0046 in Lorg/mozilla/mozstumbler/MainActivity;.onStart ()V
D/org.mozilla.mozstumbler.MainActivity(25498): onCreate
D/AndroidRuntime(25498): Shutting down VM
W/dalvikvm(25498): threadid=1: thread exiting with uncaught exception (group=0x40015578)
E/AndroidRuntime(25498): FATAL EXCEPTION: main
E/AndroidRuntime(25498): java.lang.NoSuchMethodError: android.app.AlertDialog$Builder.<init>
E/AndroidRuntime(25498):    at org.mozilla.mozstumbler.MainActivity.onStart(MainActivity.java:146)
E/AndroidRuntime(25498):    at android.app.Instrumentation.callActivityOnStart(Instrumentation.java:1129)
E/AndroidRuntime(25498):    at android.app.Activity.performStart(Activity.java:3791)
E/AndroidRuntime(25498):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1624)
E/AndroidRuntime(25498):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1667)
E/AndroidRuntime(25498):    at android.app.ActivityThread.access$1500(ActivityThread.java:117)
E/AndroidRuntime(25498):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:935)
E/AndroidRuntime(25498):    at android.os.Handler.dispatchMessage(Handler.java:99)
E/AndroidRuntime(25498):    at android.os.Looper.loop(Looper.java:130)
E/AndroidRuntime(25498):    at android.app.ActivityThread.main(ActivityThread.java:3687)
E/AndroidRuntime(25498):    at java.lang.reflect.Method.invokeNative(Native Method)
E/AndroidRuntime(25498):    at java.lang.reflect.Method.invoke(Method.java:507)
E/AndroidRuntime(25498):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:842)
E/AndroidRuntime(25498):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:600)
E/AndroidRuntime(25498):    at dalvik.system.NativeStart.main(Native Method)
I/Process (25498): Sending signal. PID: 25498 SIG: 9
I/ActivityManager( 1417): Process org.mozilla.mozstumbler (pid 25498) has died.

```
"
mozilla/MozStumbler,closed,gps check: change finish() to dialog.dismiss(),[],"Issue #189
"
mozilla/MozStumbler,closed,Fix for checkGps,[],"It is a small fix for the issue #189, I think you could improve. I do not know, you who think @freekzy
"
mozilla/MozStumbler,closed,Show current nickname when opening the Leaderboard,"[Label(name=""enhancement"")]","The Leaderboard is much too big to quickly look up one's current position - especially on a small mobile device.

If the Leaderboard was annotated with for instance tag IDs for each nickname the View Leaderboard button could be made to point to a user specific fragment, like:
https://location.services.mozilla.com/leaders#nickname-CaveJohnson
"
mozilla/MozStumbler,closed,Don't force exit if GPS isn't turned on,"[Label(name=""bug"")]","With 216672f it is no longer possible to open the app without turning on GPS.
This is unfortunate because it prevents the use case of opening the app, and for instance View'ing the Leaderboard, or Test'ing Mozilla Location Service; neither of which _require_ the use of GPS, as far as I can tell?

A simple fix would be to have the No button on the pop-up dialog simply close the dialog, and not the app.
"
mozilla/MozStumbler,closed,Update spanish translation,[],"For the pull #186
"
mozilla/MozStumbler,closed,Refactor cell scanner,[],"Abstract CellScanner class so to be able to create different implementations of the cell scanner.
An example of such implementation may be support for multimple SIM handsets (dougt/MozStumbler#178) or it can be used for dougt/MozStumbler#72
"
mozilla/MozStumbler,closed,Add AboutActivity,[],"Issue #184

Any suggestions?
"
mozilla/MozStumbler,closed,Exclude some Eclipse specific stuff,[],
mozilla/MozStumbler,closed,Display app version in UI or menu,"[Label(name=""enhancement"")]","add current version to the title at the top of main view or add it in the menu
"
mozilla/MozStumbler,closed,MozStumbler v0.7.3,[],
mozilla/MozStumbler,closed,Add CDMA logging to MozStumbler,[],"This patch adds logging of CDMA base stations to MozStumbler, per https://github.com/dougt/MozStumbler/issues/71. I took a slightly different tack than the pseudocode for two reasons:
- CDMA phones (even with LTE) continue to track CDMA base stations for voice coverage, so there's no need to watch the current network type.
- EvDO signals may not come from the same site as the 1xRTT (CDMA) signal; since Android doesn't provide a standard API for getting EvDO base station IDs, there's no reason to try to geolocate using EvDO signal strength.

Also, the pseudocode wasn't assigning the ""mnc"" entry per the documentation at https://mozilla-ichnaea.readthedocs.org/en/latest/cell.html#cdma, so I fixed that to log the CDMA SID as intended.
"
mozilla/MozStumbler,closed,Q: How to reduce the accuracy?,[],"For five consecutive days I scanned my neighborhood, I've done every street possible (up from both sides of the sidewalk).

I have used Location Services Mozilla, place me pretty well, but ... They have an accuracy of 500 meters and when I use Google Location Services I have only 31 meters of accuracy. What should I do to reduce the accuracy?
"
mozilla/MozStumbler,closed,show alert if gps is turned off,[],
mozilla/MozStumbler,closed,Add spanish translation,[],"I add a spanish translation!
"
mozilla/MozStumbler,open,add support for dual SIM handsets (supported by android.telephony.TelephonyManager),"[Label(name=""enhancement"")]","As dual SIM phones have two active radios MozStumbler could read cell information from both radio interfaces and so gather data for two cellular networks simultaneously, thus easily double efficency of volunteers who own a dual SIM handset (a Zopo ZP980 in my case).

Google's API ""android.telephony.TelephonyManager"" fully supports dual SIM devices and obviously allows both radio interfaces to be addressed separately as the following thread suggests:
http://stackoverflow.com/questions/14517338/android-check-whether-the-phone-is-dual-sim
"
mozilla/MozStumbler,closed,Adding strings for spanish language.,[],
mozilla/MozStumbler,closed,Create strings.xml,[],"With fixed closing tag ; )
"
mozilla/MozStumbler,closed,Create strings.xml,[],"Added strings for Polish language.
"
mozilla/MozStumbler,closed,Disable map button if fake google api key found,[],"Issue #172
"
mozilla/MozStumbler,closed,Added Gradle Wrapper,[],
mozilla/MozStumbler,closed,Add runtime warning when GoogleAPIKey is unset that map view will be blank,"[Label(name=""enhancement"")]","As per my idea in issue #167, we should add a runtime (and build time?) warning when `GoogleAPIKey` is unset or is `FAKE_GOOGLE_API_KEY` so people will know why the map view is blank. logcat and toast messages would be good.
"
mozilla/MozStumbler,closed,make sure we sent to API key for both the submit and the search API,"[Label(name=""enhancement"")]","If you are into cleanup: Can you make sure we sent to API key for both the submit and the search API's? If we want to use it for rate limiting / blocking spammers, we should do so on both.
"
mozilla/MozStumbler,closed,"Add error message to map view when Location Service returns ""not_found""","[Label(name=""enhancement"")]","or other network error messages. This should reduce user confusion about why the map shows the North Atlantic Ocean. We could use a toast message or dialog.
"
mozilla/MozStumbler,closed,Map fixes,[],"Fixes #170.
"
mozilla/MozStumbler,closed,"Change ""GPS Satellites Visible"" count to a descriptive string","[Label(name=""enhancement"")]","such as ""GPS Status: Searching"" then maybe ""GPS Status: latitude,longitude"". This UI change should reduce user confusion about whether their phone has a GPS fix and what is the ""correct"" number of satellites.
"
mozilla/MozStumbler,closed,Test Mozilla Location Service,[],"Hi, I'm in India, but location shows I'm in ""North Atlantic Ocean""
"
mozilla/MozStumbler,closed,MozStumbler for Firefox OS,[],"Would be nice if I could use my secondary phone (a Keon) for stumbling across wifi cells. ;)
"
mozilla/MozStumbler,closed,Fixed problem #164 on older phones.,[],"I've tested it myself on an older phone. Confirmed the problem.

We're now using an older version of the preferences activity.

I'd update the version number and send this out as a new release, for everyone on older phones.
"
mozilla/MozStumbler,closed,App crashes when opening Settings,"[Label(name=""bug"")]","On my Samsung Galaxy S (the really old one, Android 2.3.5), version 0.7.2 crashes when I try to open ""Settings"". The screen goes black and after a moment the ""Force close"" dialog comes up.

One time the entire phone locked up.
"
mozilla/MozStumbler,closed,MozStumbler v0.7.2,[],
mozilla/MozStumbler,closed,Refactor MozAPIKey code,[],"And fix some nits from earlier PRs.
"
mozilla/MozStumbler,closed,Not detecting my Location ,[],"Hi, 
MozStumbler is not detecting my location, even i enabled the GPS. its detecting only WIFI-Access points 

Please check the image
*http://farm4.staticflickr.com/3778/10586569213_41b5c124e7_o.png
"
mozilla/MozStumbler,closed,Add support for an API key,[],
mozilla/MozStumbler,closed,Fixed handling for unknown location state.,[],
mozilla/MozStumbler,closed,Russian translation fixes,[],"Sync with @cpeterso changes.
"
mozilla/MozStumbler,closed,Added preferences screen for nickname.,[],"Now the user goes into the settings page to edit their nickname, thereby saving space on the main page and reducing lines of code in the main activity.

Moved preference classes into their own package, something I'd suggest will be needed as the project grows in classes. And made methods on Prefs.java public to allow such.
"
mozilla/MozStumbler,closed,Remove garbage and add russian translation,[],
mozilla/MozStumbler,open,Provide a compass/direction indicator to the strongest cell signal,"[Label(name=""enhancement"")]","Other apps similar to the stumbler have gained some popularity/use by providing users with an indication of which direction they should move in order to get a better signal.  It would provide a little bit more incentive to download and use the stumbler.

If implemented, would such a thing be accepted into the stumbler?  Or is that outside of the scope?

(@hannosch suggested creating this issue to discuss it)
"
mozilla/MozStumbler,closed,Fix service preemption by putting it into foreground.,[],"This commit fixes #153.

You can test yourself: just start scanning and drop task (from tasks view) which holds MozStumbler.  
"
mozilla/MozStumbler,closed,MozStumbler preemption.,"[Label(name=""bug"")]","Sometimes MozStumbler resets all stuff that is displays. 
This usually happens when I launch something heavy besides MozStumbler.

For example, im walking on street and scanning is turned on. Then I scan a lot and I want to see where Im on leader board, so I start browser (which is heavy app), see some stuff and go back to MozStumbler and see that all counters are zero and big button prompts me to ""start scanning"", but MozStumbler icon in notification area is still there!
Also, I noticed that just before such ""preemption"" GPS icon dissappears.

Galaxy Nexus, 
version 4.3
0.7.1

UPDATE:
Im not sure, and dont have much time to investigate, but brief look at logcat and dumpsys output says that your service is not foreground and freely can be killed, so that happens after host activity dies.
"
mozilla/MozStumbler,closed,Added 'reports sent' field and text view.,[],"This is so the user can see how many reports they've sent to the server.

I was getting frustrated using the app today without this information.

Cheers.
"
mozilla/MozStumbler,closed,"Rename ""Enter Nickname"" button to ""Enter Nickname (optional)""",[],
mozilla/MozStumbler,closed,Stumbler doesn't exit anymore since 0.7.1,"[Label(name=""bug"")]","Today I have installed version 0.7.1 and now stumbler doesn't exit anymore. The tray icon is still around all the time. If it is a service now, can we at least add a menu entry to fully quit stumbler?

Thanks
"
mozilla/MozStumbler,closed,"Shouldn't ""_nomap"" mean no-log as well","[Label(name=""enhancement"")]","Most likely I'm missing something here, so please do correct me if I'm wrong.

Looking at the class SSIDBlockList in https://github.com/dougt/MozStumbler/blob/master/src/org/mozilla/mozstumbler/SSIDBlockList.java 
it's a simple string filter that allow networks to opt-out of the mapping by appending ""_nomap"" to their SSID.
And that could be done on the basis of privacy concerns and countless other reasons, which are all irrelevant to the point I'm about to raise.

Then checking line 131 of WifiScanner. After it checks SSIDBlockList, it logs the scanResult any way. 
So regardless of the reason why that Network opted-out of the mapping, the application still logs that Network scan result.
See https://github.com/dougt/MozStumbler/blob/master/src/org/mozilla/mozstumbler/WifiScanner.java#L131

My point being: if a network opt-out by using the ""_nomap"" then the app should respect that at all levels and not log anything about that network.
It looks like the ""_nomap"" means: Hey, we won't plot your network in a map nor make it searchable for third-parties, but we'll still store data about it regarless of your opt-out instruction.
Surely verbose logging eases debugging, but the user's options should be respected, don't you think?
"
mozilla/MozStumbler,closed,MozStumbler v0.7.1,[],
mozilla/MozStumbler,closed, Temporarily disable map button on Gingerbread ,[],"Band-aid fix #144.

Also rename ""Locate Me"" map button to ""Test Mozilla Location Service"" because some IRC users were confused, thinking ""Locate Me"" was a self-test of the device's GPS using Google Maps, not Mozilla's Location Service API.
"
mozilla/MozStumbler,closed,"Rename ""Stop Scanning & Upload"" button to ""Stop Scanning""",[],"Some users on IRC were confused by this phrasing, thinking the button would stop _uploads_.
"
mozilla/MozStumbler,closed,Upload reports sooner and more frequently,[],"Fix #133 and band-aid #102.
"
mozilla/MozStumbler,closed,Fall back to Google's SupportMapFragment for Gingerbread,"[Label(name=""bug"")]","Google's `MapFragment` is only available in Honeycomb and later. We must use the `SupportMapFragment` class:

https://developer.android.com/reference/com/google/android/gms/maps/MapFragment.html#getMap%28%29
"
mozilla/MozStumbler,closed,Won't upload ,[],"I have 2930 locations scanned and have tried starting and stopping several times but I have yet to have it upload anything. The ""Last Upload Time"" is ""-"".
This is on an LG G2 running Android 4.2.2

Connecting to logcat I noticed:

```
E/org.mozilla.mozstumbler.Reporter( 3587): urlConnection returned 400
E/org.mozilla.mozstumbler.Reporter( 3587): error submitting data
E/org.mozilla.mozstumbler.Reporter( 3587): java.io.FileNotFoundException: https://location.services.mozilla.com/v1/submit
E/org.mozilla.mozstumbler.Reporter( 3587):  at libcore.net.http.HttpURLConnectionImpl.getInputStream(HttpURLConnectionImpl.java:186)
E/org.mozilla.mozstumbler.Reporter( 3587):  at libcore.net.http.HttpsURLConnectionImpl.getInputStream(HttpsURLConnectionImpl.java:271)
E/org.mozilla.mozstumbler.Reporter( 3587):  at org.mozilla.mozstumbler.Reporter$1.run(Reporter.java:192)
E/org.mozilla.mozstumbler.Reporter( 3587):  at java.lang.Thread.run(Thread.java:856)
```
"
mozilla/MozStumbler,closed,Submit MozStumbler to Play Store,"[Label(name=""enhancement"")]","So that I receive automatic updates and can install without enabling third-party apps on my phone, I would like to be able to install MozStumbler from the Play Store.

Is there a motivation for not publishing it there?
"
mozilla/MozStumbler,closed,Extend map lookup to send cell data,"[Label(name=""bug"")]","The MapActivity / ""locate me"" code only sends wifi data to the server. But the server also supports and has cell data for lookups (for about a month now).

Would be good to extend the code to also send the cell data along.
"
mozilla/MozStumbler,closed,MozStumbler v0.7.0,[],
mozilla/MozStumbler,closed,Catch RuntimeException when there's no map,[],"This fixes issue #129 for me. Of course, feel free to not revert the null check for the map if you still think it's necessary; it just didn't seem to help in my particular case.
"
mozilla/MozStumbler,closed,Add some map UX tweaks and error handling,[],"@dougt: r?
"
mozilla/MozStumbler,closed,"Rename ""About Privacy"" menu item to ""About MozStumbler""",[],"The FAQ is about more than just privacy. So saith Jishnu.

Also remove the first-run legal notice dialog because the FAQ supersedes it.
"
mozilla/MozStumbler,closed,Create an open webapp for Stumbler,[],"Well, we are Mozilla so why don't we create an open webapp for Stumbler? Frankly I don't want to use Android for collecting all that data. My Firefox OS device would be the best! :)
"
mozilla/MozStumbler,closed,Use text change events to save nickname.,[],"This is a possible workaround for issue #112.
"
mozilla/MozStumbler,closed,"Add ""About Privacy"" menu item to open privacy FAQ",[],"Fixes issue #128.
"
mozilla/MozStumbler,closed,Upload first report without batching,"[Label(name=""enhancement"")]","We should upload the first scan report right away instead of waiting for the first batch of 100 reports. Uploading right away will give users positive feedback and help us diagnose whether the upload problems are related to batching or network errors.
"
mozilla/MozStumbler,closed,We should only increase WiFi access point count when we have a GPS fix,"[Label(name=""bug"")]","This will prevent confusion like issue #131 where the number of WiFi access points appears large, but the number of locations is small or zero.
"
mozilla/MozStumbler,closed,Stumbling without data enabled fails to upload any/most data,"[Label(name=""bug"")]","I did a wonderful walk yesterday with data disabled, where I caught hold of almost 3000 wifi access points and then enabled data to upload before my battery died.

When I came home I had only 1 point.

Today I walked again with data disabled and enabled it when reaching the office then pressed stop to upload and I had only 7 points.

On the way back I decided to keep data enabled all the way and voila, in a shorter path I got about 200 points.

I'm using a Nexus 4. Can I help with anything else?
"
mozilla/MozStumbler,closed,'Locate me' doesn't work,[],"I scanned my area a couple of times and also send the reports but whenever I click on 'Locate me' my position is always reported as being in the middle of the Atlantic Ocean. When I hit the button GPS is also turned on and satellites are available.
"
mozilla/MozStumbler,closed,Map crashes when Google Play Services is not installed,"[Label(name=""bug"")]","I'm running CyanogenMod 10.1.3 without Google's apps. Clicking the Locate Me button seems to cause a crash (""Unfortunately MozStumbler has stopped"") on top of an error message telling my I don't have Google Play Services.

The stumbler does seem to start scanning, though, so it may be something crashing in the background. Logcat tells me that the exception on MapActivity.java:193 is caught.
"
mozilla/MozStumbler,closed,"Add ""About Privacy"" menu item to open privacy FAQ web page","[Label(name=""enhancement"")]","https://wiki.mozilla.org/Services/Location/About
"
mozilla/MozStumbler,closed,Uploads fail on some pre-ICS devices because some CA root certificates are missing,"[Label(name=""bug"")]","Forced uploads (those initiated on Stop Stumbling & Upload button-press) doesn't always seem to work and should be investigated further.

Starting Stumbling first time after app launch and then stopping for the first time (with no uploaded data yet) works as it should, and stumbling data is uploaded just fine, but restarting stumbling and trying to stop & upload then (at least, sometimes) fails to upload anything.

It would seem as a good idea to implement some kind of ""debug"" log in the app, so dogfooders/beta testers would see how much of data were gathered & uploaded in the current session.

Also, some kind of persistent storage/caching would be great for not-yet-uploaded stumbling data, so even if upload was unsuccessful or simply did not take place, users wouldn't lose the gathered data if they put the app in background and was garbage-collected/killed by the system (this would also contribute to fixing #102, too).
"
mozilla/MozStumbler,closed,MozStumbler v0.6.2,[],"@Flaki fixed uploading! :+1: 
"
mozilla/MozStumbler,closed,Fixing the report uploads of release 0.6.x & adds LTE,[],"Fixed JSON exception in Reporter that prevented reports to be sent;
Added LTE network recognition in CellScanner;
Changed Stop Scanning button to reflect current behavior (Stop Scanning & Upload)
"
mozilla/MozStumbler,closed,MozStumbler v0.6.1,[],
mozilla/MozStumbler,closed,Start scanning when we open the map view,[],"This is an expedient partial fix for issue #121. This PR will start all scanning (WiFi, cell, and GPS) and update the UI's ""Start Scanning"" to ""Stop Scanning"". This makes the UI clear that, when the user returns from the map view, that the scanning is running (and can be stopped by the ""Stop Scanning"" button).
"
mozilla/MozStumbler,closed,MozStumbler v0.6.0,[],
mozilla/MozStumbler,closed,"Stumbler does not stop scanning after opening ""Locate Me"" map view","[Label(name=""bug"")]",
mozilla/MozStumbler,closed,Download and install MozStumbler updates from GitHub,[],
mozilla/MozStumbler,closed,Consolidate NoticeDialog's negative and cancel code paths,[],"If the user tapped the grayed-out app view behind the NoticeDialog, the dialog would be dismissed but neither the positive (""OK"") or negative (""Cancel"") button code paths would be called.

Also move the Prefs.hasSeenNotice() check outside of NoticeDialog to avoid unnecessary allocation of new NoticeDialog.
"
mozilla/MozStumbler,closed,Remove check for network roaming,[],
mozilla/MozStumbler,closed, Check whether network is available before uploading measurements,[],"This PR should reduce the number of measurements lost to network errors, but issue #102 still needs additional work.
"
mozilla/MozStumbler,closed,Repair and rebase dougt's MapView_support branch,[],"@dougt: I had to fix some bugs in your MapView_support branch, but maps and @hannosch's geolocation API are now working! :+1:
"
mozilla/MozStumbler,closed,Bump gradle version to 1.8 and Android SDK tools version to 22.2.1,[],
mozilla/MozStumbler,closed,"Bump tool versions to SDK 22.2, Build Tools 18.1, and Android Gradle plugin 0.5.7",[],
mozilla/MozStumbler,closed,Resurrect SSID block list,[],"@hannosch had convinced me that client-side filtering of ad hoc networks and mobile device SSIDs was an unnecessary optimization because the server must detect moving APs anyways. But I've changed my mind on the mobile device SSIDs because the server-side detection will not be perfect and the client can easily detect (some) mobile devices.

I still agree that we don't need to filter ad hoc networks because there are quite a few stationary ad hoc networks (and the mobile ones should get filtered by the SSID block list or server-side moving AP detection).
"
mozilla/MozStumbler,closed,"nickname not saved unless you hit ""Done""","[Label(name=""bug"")]","tl;dr: You have to hit ""Done"" to actually save the nickname edits, which is non-obvious, since you can hide the keyboard and un-focus the field, and the edits look like they persist, until you quit & re-launch the app.

STR:
1. Open app
2. Tap nickname field & modify the content. (do _NOT_ hit ""Done"")
3. Hit the ""Hide Keyboard"" downarrow button (at bottom-left of keyboard on my Nexus4)
4. Optional: Start scanning, stop scanning, whatever.
5. quit app by triggering app switcher & swipe app offscreen
6. Re-launch app

EXPECTED RESULTS: My nickname should look the way it was when I quit the app.
ACTUAL RESULTS: My nickname edits weren't saved.
"
mozilla/MozStumbler,closed,MozStumbler v0.5.1,[],"- Update leaderboard URL
"
mozilla/MozStumbler,closed,MozStumbler v0.5.0,[],
mozilla/MozStumbler,closed,"Report BSSIDs, not SHA1(BSSID+SSID) hashes",[],"Also, stop filtering ad-hoc BSSIDs and mobile device SSIDs.
"
mozilla/MozStumbler,closed,Directly point to new leaderboard page,"[Label(name=""bug"")]","I separated the leaderboard from the global stats and gave it its own page at /leaders. The app should probably point at that (https://location.services.mozilla.com/leaders) instead of /stats

Separating the two gives us more screen real estate to display other kinds of data.
"
mozilla/MozStumbler,closed,Map view support,[],"Chris, love some eyes on this.
"
mozilla/MozStumbler,closed,MozStumbler v0.4.1,[],
mozilla/MozStumbler,closed,Only update mLastUploadTime after upload completes without error,[],
mozilla/MozStumbler,closed,MozStumbler v0.4.0,[],
mozilla/MozStumbler,closed,Fix #95 - Display more stats in the stumbler UI,[],"Display number of APs and locations reported and time of most recent upload.
"
mozilla/MozStumbler,closed,Reporter loses measurement reports if upload fails with a network error,"[Label(name=""bug"")]","We should probably retry later, but we also don't want to keep retrying the same report if the data itself is some causing the network problem. @hannosch says some web servers, like nginx, limit uploads to 1 MB by default.
"
mozilla/MozStumbler,closed,Display map view showing both the GPS location and our server's predicted location,"[Label(name=""enhancement"")]","This map will help us validate our server search algorithms and see if we are getting useful data.

This bug is related to but different than issue #22.
"
mozilla/MozStumbler,closed,Remove user token,[],"The server and leaderboard no longer use clients' user tokens, so we can stop generating and sending them.
"
mozilla/MozStumbler,closed,Fix #97 - Only call GsmCellLocation.getPsc() on GB+,[],
mozilla/MozStumbler,closed,Fix #96 - Check for null mConnectionRemote,[],
mozilla/MozStumbler,closed,Stumbler crash because android.telephony.gsm.GsmCellLocation.getPsc doesn't exist,"[Label(name=""bug"")]","stack trace (from adb logcat):

```
E/AndroidRuntime(  973): FATAL EXCEPTION: Thread-9
E/AndroidRuntime(  973): java.lang.NoSuchMethodError: android.telephony.gsm.GsmCellLocation.getPsc
E/AndroidRuntime(  973):        at org.mozilla.mozstumbler.Scanner.getCellInfo(Scanner.java:264)
E/AndroidRuntime(  973):        at org.mozilla.mozstumbler.Scanner.onLocationChanged(Scanner.java:227)
E/AndroidRuntime(  973):        at android.location.LocationManager$ListenerTransport._handleMessage(Locat
ionManager.java:191)
E/AndroidRuntime(  973):        at android.location.LocationManager$ListenerTransport.access$000(LocationM
anager.java:124)
E/AndroidRuntime(  973):        at android.location.LocationManager$ListenerTransport$1.handleMessage(Loca
tionManager.java:140)
E/AndroidRuntime(  973):        at android.os.Handler.dispatchMessage(Handler.java:99)
E/AndroidRuntime(  973):        at android.os.Looper.loop(Looper.java:144)
E/AndroidRuntime(  973):        at org.mozilla.mozstumbler.ScannerService$LooperThread.run(ScannerService.
java:110)

```
"
mozilla/MozStumbler,closed,Stumbler crash when clicking the scan button,"[Label(name=""bug"")]","stacktrace:

```
V/LocationManagerService(   93): Location listener died                                                                                     [1189/1617]
V/LocationManagerService(   93): _removeUpdates: listener = Receiver{46303ee0 Listener android.os.BinderPr
oxy@46499a60}
D/WifiService(   93): releaseWifiLockLocked: WifiLock{MozStumbler type=2 binder=android.os.BinderProxy@465
25160}
D/WifiService(   93): enable and start wifi due to updateWifiState
E/AndroidRuntime(  964): FATAL EXCEPTION: main
E/AndroidRuntime(  964): java.lang.IllegalStateException: Could not execute method of the activity
E/AndroidRuntime(  964):        at android.view.View$1.onClick(View.java:2072)
E/AndroidRuntime(  964):        at android.view.View.performClick(View.java:2408)
E/AndroidRuntime(  964):        at android.view.View$PerformClick.run(View.java:8817)
E/AndroidRuntime(  964):        at android.os.Handler.handleCallback(Handler.java:587)
E/AndroidRuntime(  964):        at android.os.Handler.dispatchMessage(Handler.java:92)
E/AndroidRuntime(  964):        at android.os.Looper.loop(Looper.java:144)
E/AndroidRuntime(  964):        at android.app.ActivityThread.main(ActivityThread.java:4937)
E/AndroidRuntime(  964):        at java.lang.reflect.Method.invokeNative(Native Method)
E/AndroidRuntime(  964):        at java.lang.reflect.Method.invoke(Method.java:521)
E/AndroidRuntime(  964):        at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.j
ava:868)
E/AndroidRuntime(  964):        at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
E/AndroidRuntime(  964):        at dalvik.system.NativeStart.main(Native Method)
E/AndroidRuntime(  964): Caused by: java.lang.reflect.InvocationTargetException
E/AndroidRuntime(  964):        at org.mozilla.mozstumbler.MainActivity.onClick_ToggleScanning(MainActivit
y.java:204)
E/AndroidRuntime(  964):        at java.lang.reflect.Method.invokeNative(Native Method)
E/AndroidRuntime(  964):        at java.lang.reflect.Method.invoke(Method.java:521)
E/AndroidRuntime(  964):        at android.view.View$1.onClick(View.java:2067)
E/AndroidRuntime(  964):        ... 11 more
E/AndroidRuntime(  964): Caused by: java.lang.NullPointerException
E/AndroidRuntime(  964):        ... 15 more
W/ActivityManager(   93):   Force finishing activity org.mozilla.mozstumbler/.MainActivity
W/ActivityManager(   93): Activity pause timeout for HistoryRecord{46221930 org.mozilla.mozstumbler/.MainA
ctivity}
I/WindowManager(   93): WIN DEATH: Window{4644e6e0 org.mozilla.mozstumbler/org.mozilla.mozstumbler.MainAct
ivity paused=false}
I/ActivityManager(   93): Process org.mozilla.mozstumbler (pid 964) has died.
I/WindowManager(   93): WIN DEATH: Window{46322fa0 org.mozilla.mozstumbler/org.mozilla.mozstumbler.MainAct
ivity paused=false}
I/UsageStats(   93): Unexpected resume of com.htc.launcher while already resumed in org.mozilla.mozstumble
```
"
mozilla/MozStumbler,closed,Display number of APs and locations reported and time of most recent upload,"[Label(name=""enhancement"")]","Also remove GPS fixes from UI. The different between fixes and locations is a common question on IRC.

Displaying the time of the most report upload will also answer questions about ""is my stumbler reporting data?"" we get on IRC, too.
"
mozilla/MozStumbler,closed,Copy uncaught exception stack traces to the Android clipboard,"[Label(name=""enhancement"")]","So users can email the stack traces to us. This is some low-tech crash reporting.
"
mozilla/MozStumbler,closed,Stumbler should default to scanning when launched,"[Label(name=""enhancement"")]","This would streamline the user experience by removing an extra step (pressing the ""Start Scanning"" button). The WiGLE stumbler does this, too.
"
mozilla/MozStumbler,closed,MozStumbler v0.3.0,[],
mozilla/MozStumbler,closed,Increase GPS accuracy from 1000 to 500 meter radius,[],"With this change, we should know the device position is within a 1 km diameter circle. Measurements less accurate than that are probably pretty bogus.
"
mozilla/MozStumbler,closed,Reduce wifi polling time to 1s,[],
mozilla/MozStumbler,closed,Don't upload report if we have no WiFi scan results or cell info,[],"This PR should fix #86.

Also cache radio type. I am assuming the radio type does not change at run time. :)
"
mozilla/MozStumbler,closed,Add stumbler version to the server requests,"[Label(name=""enhancement"")]","In #87 @cpeterso mentioned that we might be seeing a bug from older clients. It would be good if we'd actually be able to tell that for debugging purposes.

Currently the server sees a general ""Android"" user-agent string, for example:

```
""POST /v1/submit HTTP/1.1"" 204 0 ""-"" ""Dalvik/1.6.0 (Linux; U; Android 4.0.4; ZTE V790 Build/IMM76D)""
""POST /v1/submit HTTP/1.1"" 204 0 ""-"" ""Dalvik/1.6.0 (Linux; U; Android 4.1.2; GT-I8190 Build/JZO54K)""
```

Maybe we could add a `MozStumbler 0.2.1` token to the user-agent.
"
mozilla/MozStumbler,closed,Dodge possible race condition when uploading reports,[],"In issue #86, @hannosch says some clients are uploading empty reports. I suspect they are older pre-batch-upload clients because the current code checks for `mReports.length() > 0`, but there is a (theoretical) race condition where a Reporter background thread could reset `mReports = new JSONArray()` after a second Reporter background thread is spawned but before the second thread uploads its (now empty) `mReports`.
"
mozilla/MozStumbler,closed,"Avoid sending ""empty"" locations","[Label(name=""bug"")]","I've seen a couple dozen validation errors on the server, with this message:

_error_handler[{'location': 'body', 'name': 'body', 'description': 'You need to provide a mapping with least one cell or wifi entry.'}]_

This indicates a missing client side check. We should make sure we only include batch items, which have either cell or wifi entries or both. Probably some simple length check in the right place.
"
mozilla/MozStumbler,closed,Use legalier text,"[Label(name=""bug"")]","after merging dougt/notice_dialog, we have a notice dialog.  We should update the text to sound more legally.
"
mozilla/MozStumbler,closed,API level 11 required?,"[Label(name=""bug"")]","Is Context.MODE_MULTI_PROCESS only in 11?

Scanning MozStumbler: ..........
src/org/mozilla/mozstumbler/Prefs.java:128: Warning: Field requires API level 11 (current min is 8): android.content.Context#MODE_MULTI_PROCESS [InlinedApi]
        return mContext.getSharedPreferences(PREFS_FILE, Context.MODE_MULTI_PROCESS | Context.MODE_PRIVATE);
"
mozilla/MozStumbler,closed,Startup Notice dialog support.,[],
mozilla/MozStumbler,closed,Suppress some annoying StrictMode warnings about file I/O on UI thread,[],"We have more important things to work on. :)
"
mozilla/MozStumbler,closed,Display the number of APs discovered instead of the number of locations reported,[],"The AP count is more interesting than the number of locations reported. Plus, AP count is a bigger number, so users feel more productive. :)

TODO: Display cell count; save list of discovered APs in a real database that is preserved across app runs.
"
mozilla/MozStumbler,closed,MozStumbler version 0.2.1,[],
mozilla/MozStumbler,closed,Flush SharedPreferences changes so they are visible to all processes,[],"Fix #78.
"
mozilla/MozStumbler,closed,Modifying nickname in UI does not update nickname in reporter service,"[Label(name=""bug"")]","This problem is related to sharing `SharedPreferences` from different processes.
"
mozilla/MozStumbler,closed,"Add ""Only upload measurements over Wi-Fi"" option","[Label(name=""enhancement"")]",
mozilla/MozStumbler,closed,MozStumbler v0.2.0,[],"Increment versionCode and reset versionName to a more reasonable value. I'd like to tag this commit as ""v0.2.0"" and share an APK link on the dev-geolocation mailing list.
"
mozilla/MozStumbler,closed,"latitude has to be in range [-90,90]",[],
mozilla/MozStumbler,closed,Prune SSID blocklist,[],"Remove some SSIDs for networks that should already be detected by our ad hoc BSSID checks and add some more mobile prefixes I see in my stumbler logs.
"
mozilla/MozStumbler,closed,Don't send the user token header if the user has not set a nickname,[],"The server already ignores the user token header if the HTTP request does not include a nickname header.
"
mozilla/MozStumbler,closed,Optionally use the new getAllCellInfo API,"[Label(name=""enhancement"")]","Android 4.2 (API level 17) introduced a new API for getting cell information with TelephonyManager.getAllCellInfo() (http://developer.android.com/reference/android/telephony/TelephonyManager.html#getAllCellInfo%28%29).

The new API offers better and more data and supports LTE / WCDMA networks. We have stumbler users on older Android versions, so we shouldn't require the new API, but fall back on the current code.
"
mozilla/MozStumbler,closed,Add support for CdmaCellLocation,"[Label(name=""enhancement"")]","At https://github.com/dougt/MozStumbler/blob/master/src/org/mozilla/mozstumbler/Scanner.java#L251 we can get back either a GSMCellLocation or CdmaCellLocation object (http://developer.android.com/reference/android/telephony/cdma/CdmaCellLocation.html).

On line 256 we are dealing with the Gsm case, but not with Cdma. The protocol defines how to send Cdma data at https://mozilla-ichnaea.readthedocs.org/en/latest/cell.html#cdma

Pseudo-code for the cdma case:

```
if (cl instanceof CdmaCellLocation) {
    JSONObject obj = new JSONObject();
    CdmaCellLocation ccl = (CdmaCellLocation) cl;

    obj.put(""lac"", ccl.getNetworkId());
    obj.put(""cid"", ccl.getBaseStationId());
    obj.put(""asu"", mSignalStrength);

    switch (tm.getNetworkType()) {
        case TelephonyManager.NETWORK_TYPE_CDMA:
        case TelephonyManager.NETWORK_TYPE_EVDO_0:
        case TelephonyManager.NETWORK_TYPE_EVDO_A:
        case TelephonyManager.NETWORK_TYPE_EVDO_B:
            obj.put(""radio"", ""cdma"");
            break;
        default:
            Log.w(LOGTAG, """", new IllegalStateException(""Unexpected NetworkType: "" + tm.getNetworkType()));
            break;
    }
    String mcc_mnc = tm.getNetworkOperator();
    if (mcc_mnc.length() > 3) {
        mcc = mcc_mnc.substring(0, 3);
        mnc = mcc_mnc.substring(3);
        obj.put(""mcc"", mcc);
        obj.put(""mnc"", mnc);
    }
    cellInfo.put(obj);
}
```

in addition we need to change the code setting mSignalStrength on line 201:

```
public void onSignalStrengthsChanged(SignalStrength ss) {
    if (ss.isGsm()) {
        mSignalStrength = ss.getGsmSignalStrength();
    } else {
        mSignalStrength = ss.getCdmaDbm();
        // how to detect evdo?
        // mSignalStrength = ss.getEvdoDbm()
    }
}
```
"
mozilla/MozStumbler,closed,Fix ScannerService build break from duplicate mBinder definitions,[],"Fix bad merge of PR #67.
"
mozilla/MozStumbler,closed,Filter known mobile device OUIs in MAC addresses,"[Label(name=""Closed: won't fix""), Label(name=""enhancement"")]","Wireshark maintains a list of known OUIs for hardware manufacturers: https://anonsvn.wireshark.org/wireshark/trunk/manuf
"
mozilla/MozStumbler,closed,"Report CDMA radio type, too",[],
mozilla/MozStumbler,closed,Stop scanning when we're on low battery.,[],"This addresses issue #41.

This leaves some room for refactoring: we no longer have the main activity as a the service's sole controller that asks it to start and stop; we now also have the service stopping itself sometimes and we need that information to flow back to the UI. My solution here was straightforward (issue a ""Scanner"" intent to force an UI update), but we might want to re-think the information flow between the main activity and the server in the future.
"
mozilla/MozStumbler,closed,Upload data more often.,[],
mozilla/MozStumbler,closed,Upgrade to gradle 1.7,[],"Homebrew just upgrade gradle 1.6 to 1.7, so I had to update our version requirements to build successfully.
"
mozilla/MozStumbler,closed,Startup Notice dialog support.,[],
mozilla/MozStumbler,closed,Legal Notice,[],"We probably want to remind the person running the stumbler that data that they submit is Mozilla's.
"
mozilla/MozStumbler,closed,Beta 2,[],
mozilla/MozStumbler,closed,Add app icon,[],"Original programmer art!

This PR fixes #20 until better art is available.
"
mozilla/MozStumbler,closed,Auto-start scanning server when Android boots,"[Label(name=""enhancement"")]","after a reboot, we probably want to start up again.
"
mozilla/MozStumbler,closed,Batch report support,[],
mozilla/MozStumbler,closed,Batch processing.,[],"I haven't tested this yet.  Chris, if you have time, can you provide some feedback on the approach.
"
mozilla/MozStumbler,closed,Display Froyo-compatible notification when scanning starts,[],"This PR fixes #27.
1. The `Notification.Builder` code is only supported in API Level 11+. This PR creates the notification using a (deprecated) `Notification` constructor instead of `Notification.Builder`.
2. This PR also displays the notification icon when scanning starts, not when `MainActivity.onStop()` is called. Displaying the notification immediately visually ties the notification's lifetime with the scanning period.
3. The new notification makes the toasts redundant, so I removed the calls (but left the toast code so we can use it for other service alerts).
"
mozilla/MozStumbler,closed,support for signing,[],"We need some way to sign builds.  This makes it so that you can have a properties file that contains all of the right stuff.. 
"
mozilla/MozStumbler,closed,Add nickname editor,[],"This PR fixes #18.
1. Add nickname EditText
2. Make ""Start Scanning"" button _HUGE_ (Pixels are cheap, so why not?)
3. Consolidate some UI strings
4. Remove ""View Scan Map"" button (because most users will only care about the leaderboard and the world map is not very usable in a mobile browser)

NB: The nickname editor adds some StrictMode violations, but someone can fix them later. <:)
"
mozilla/MozStumbler,closed,Don't submit malformed reports after a JSONException,[],
mozilla/MozStumbler,closed,Relax accuracy limit from 500 meter to 1000 meter radius,[],"In this morning's Geo meeting, @hannosch suggested removing or increasing accuracy limit (currently a 500 meter radius).
"
mozilla/MozStumbler,closed,"Update Android SDK to 22.0.5, Build Tools to 18.0.1, and API Level to 18",[],"Android Build Tools 18.0.0 are no longer available in Google's Android SDK Manager GUI, so update to 18.0.1.
"
mozilla/MozStumbler,closed,Add buttons for leaderboard and map of scans.,[],"This solves issue #31
"
mozilla/MozStumbler,closed,Remove stuff,[],"We don't actually need to null check `getScanResults()`'s return value. I confirmed that it never returns null and it returns a new copy we can freely modify. `getScanResults()` returns a zero-length `ArrayList` when there are no scan results.

https://github.com/android/platform_frameworks_base/blob/6f2b31fcf57e4e7f5cd8af9b66619c8f5825a850/wifi/java/android/net/wifi/WifiStateMachine.java#L887

This PR also removes the ""token"" JSON property to fix #48.
"
mozilla/MozStumbler,closed,Add wifi polling,[],
mozilla/MozStumbler,closed,"Remove ""token"" from JSON report","[Label(name=""bug"")]","Now that @hannosch has implemented server support for the `X-Token` and `X-Nickname` headers (from issue #36), we should remove the `token` property from the JSON reports. To ensure a seamless transition for older clients, we should probably wait a week before removing the property.
"
mozilla/MozStumbler,closed,"Gradle, take 2",[],"My build.gradle and .travis.yml are shorter than yours, but still pass. I didn't need to set sdk.dir in local.properties and I don't download the large sysimg-18 emulator images.

https://travis-ci.org/cpeterso/MozStumbler/builds/9570305

If we don't care about supporting Eclipse users, we can probably delete `bin/.gitignore`. We might be able to delete `libs/android-support-v4.jar` now because people can/should install it with the Android SDK updater.
"
mozilla/MozStumbler,closed,More travis gradle fun,[],"i think you'll want 7d017aa and 8f13485.
"
mozilla/MozStumbler,closed,Hold wifi lock while scanning,[],
mozilla/MozStumbler,closed,Log reason LocationBlocklist rejected a location fix,[],"We currently reject location fix's with an [in]accuracy greater than 500 meter radius, i.e. we can't place with user within a 1 km area. I was getting some ~700 meter fixes and I didn't know why they were being rejected, so I added these log messages.
"
mozilla/MozStumbler,closed,Fix nickname nits,[],"from PR #36
"
mozilla/MozStumbler,closed,"Add a couple of permissions I think I forgot initially.  Also, add some ...",[],"...really bad UI so that we can see how many uploads we've done.  (Turns out we need to do a bit of local filtering... i think)
"
mozilla/MozStumbler,closed,Pause scanning on ACTION_BATTERY_LOW intent,"[Label(name=""enhancement"")]","We should politely stop scanning when we receive an `ACTION_BATTERY_LOW` intent or `ComponentCallbacks.onLowMemory()` callback. We will definitely need to implement this if we add the always-on background mode described in issue #21.

Should we resume scanning if we later receive an `ACTION_BATTERY_OKAY` intent? Or wait for the user to manually resume scanning?
"
mozilla/MozStumbler,closed,Investigate undocumented WifiManager.startScanActive() API,"[Label(name=""enhancement"")]","This issue is forked from issue #38.

`WifiManager.startScan()` is passive: it only reports APs that happen to be broadcasting beacons. There is a hidden `startScanActive()` API that can initiate an active scan that probes APs to respond:

http://www.androidjavadoc.com/2.3/android/net/wifi/WifiManager.html#startScanActive%28%29
"
mozilla/MozStumbler,closed,Wait for SCAN_RESULTS_AVAILABLE_ACTION intent before calling WifiManager.getScanResults(),"[Label(name=""bug"")]","This issue is forked from issue #38.

`WifiManager.startScan()` is asynchronous, but we call `getScanResults()` immediately, so our scan results are probably old. We should listen for the `SCAN_RESULTS_AVAILABLE_ACTION` intent and _then_ call `getScanResults()`.
"
mozilla/MozStumbler,closed,Possible data skew?,"[Label(name=""Closed: won't fix""), Label(name=""enhancement"")]","So, what I understand that we are doing is:

1) detect a location change
2) when a location change is seen, kick off a wifi scan
3) when we get the list is returned by the scan, bundle and send to server.

If I am traveling fast, the space time between 1 and 2 might be significant.  That is, I might detect a location change at point A and do a wifi/cell scan at point B.  If the distance between point A and point B is significant, using this data for location determination might be troublesome.

I'd like to hear solutions to this -- or some verification that it isn't a problem. 
"
mozilla/MozStumbler,closed,Properly load string to be passed to the toast.,[],"This fixes issue #33.
"
mozilla/MozStumbler,closed,Add X-Token and X-Nickname request headers,[],"@hannosch recommends (in mozilla/ichnaea#9) replacing our `token` JSON property with `X-Token` and `X-Nickname` request headers.
1. This PR adds an `X-Token` header without removing the `token` JSON property. We can remove the JSON property after the server understands `X-Token` headers. This should allow users to upgrade to new client versions without losing their token (and score). The server may want to continue looking for both to ensure for a short period to avoid losing tokens for laggards who have not upgraded their clients.
2. This PR adds an `X-Nickname` header but does not add any UI to read or write the nickname! That is issue #18. As a temporary hack, I generate a semi-unique but personally recognizable nickname by concatenating the user's device model and Android OS version. For example, my generated nickname is ""Nexus 4 (Android 4.2.2)"".
"
mozilla/MozStumbler,closed,Add Gradle command-line build system and ProGuard optimizations.,[],"I got fed up with Eclipse, so I investigate command-line build systems for Java and Android. Gradle is Android's new official build system. People can still use Eclipse if they like.

http://www.gradleware.com/resources/tech/android

http://tools.android.com/tech-docs/new-build-system/user-guide

I also enabled ProGuard optimizations for release builds. ProGuard shrinks our MozStumbler.apk from 258 KB to 70 KB. I didn't enable ProGuard obfuscation because we don't care about hiding our open source code and obfuscation makes exception stack traces more difficult to debug.
"
mozilla/MozStumbler,closed,travis-ci config,[],"https://travis-ci.org/dougt/MozStumbler/builds/9460237
"
mozilla/MozStumbler,closed,Scanning toast messages are blank,"[Label(name=""bug"")]","Toast messages are blank and I see the following exception stack trace in logcat because `R.string.start_scanning` and `stop_scanning` are integers, not strings.

```
src/org/mozilla/mozstumbler/ScannerService.java
133:                        i.putExtra(Intent.EXTRA_TEXT, R.string.start_scanning);
158:                        i.putExtra(Intent.EXTRA_TEXT, R.string.stop_scanning);
```

```
W/Bundle  (31242): Key android.intent.extra.TEXT expected String but value was a java.lang.Integer.  The default value <null> was returned.
W/Bundle  (31242): Attempt to cast generated internal exception:
W/Bundle  (31242): java.lang.ClassCastException: java.lang.Integer cannot be cast to java.lang.String
W/Bundle  (31242):  at android.os.Bundle.getString(Bundle.java:1069)
W/Bundle  (31242):  at android.content.Intent.getStringExtra(Intent.java:4350)
W/Bundle  (31242):  at org.mozilla.mozstumbler.c.onReceive(Unknown Source)
W/Bundle  (31242):  at android.app.LoadedApk$ReceiverDispatcher$Args.run(LoadedApk.java:758)
W/Bundle  (31242):  at android.os.Handler.handleCallback(Handler.java:725)
W/Bundle  (31242):  at android.os.Handler.dispatchMessage(Handler.java:92)
W/Bundle  (31242):  at android.os.Looper.loop(Looper.java:137)
W/Bundle  (31242):  at android.app.ActivityThread.main(ActivityThread.java:5227)
W/Bundle  (31242):  at java.lang.reflect.Method.invokeNative(Native Method)
W/Bundle  (31242):  at java.lang.reflect.Method.invoke(Method.java:511)
W/Bundle  (31242):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:795)
W/Bundle  (31242):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:562)
W/Bundle  (31242):  at dalvik.system.NativeStart.main(Native Method)
D/org.mozilla.mozstumbler.MainActivity(31242): Received a notification intent and showing: null
```
"
mozilla/MozStumbler,closed,"Investigate ""Wi-Fi scan-only mode"" (REQUEST_SCAN_ALWAYS_AVAILABLE) in JB 4.3","[Label(name=""enhancement"")]","REQUEST_SCAN_ALWAYS_AVAILABLE is a new API exposed in JB 4.3:

_Wi-Fi scan-only mode is a new platform optimization that lets users keep Wi-Fi scan on without connecting to a Wi-Fi network, to improve location accuracy while conserving battery. Apps that depend on Wi-Fi for location services can now ask users to enable scan-only mode from Wi-Fi advanced settings. Wi-Fi scan-only mode is not dependent on device hardware and is available as part of the Android 4.3 platform._

https://developer.android.com/reference/android/net/wifi/WifiManager.html#ACTION_REQUEST_SCAN_ALWAYS_AVAILABLE
"
mozilla/MozStumbler,closed,Add buttons that open leaderboard and map web page,"[Label(name=""enhancement"")]","We could implement a quick and dirty client leaderboard by just having a button that opens the leaderboard web page in the user's default browser.
- Leaderboard URL: https://location.services.mozilla.com/stats

We could add a button that opens the measurement map too:
- Map URL: https://location.services.mozilla.com/map
"
mozilla/MozStumbler,closed,Add broadcast receiver,[],"This adds a way for the service code to send messages to the activity.  This allows us to inform the UI if there is anything interesting happening.  For example, the service now can do something like:

```
                    Intent i = new Intent(ScannerService.MESSAGE_TOPIC);
                    i.putExtra(Intent.EXTRA_SUBJECT, ""Notification"");
                    i.putExtra(Intent.EXTRA_TEXT, ""Yippie!"");
        sendBroadcast(i);
```

And the Activity, if running, will display a toast with the text ""Yippie!""

I think we can use this to inform the UI how many AC's have been uploaded for gaming.
"
mozilla/MozStumbler,closed,Cleanup problems raised in issue #26,[],"chris, please take a look.
"
mozilla/MozStumbler,closed,"MainActivity.onStop() closes ScannerService mConnection, but onStart() does not reinitialize it",[],"From https://github.com/dougt/MozStumbler/pull/26#commitcomment-3689366

Android calls onStop() when the activity is no longer visible. If the user navigates back to the activity, Android will call onRestart() and then onStart(). mConnection was initialized at its declaration. How will mConnection get reinitialized after onStop() sets it to null? We should probably initialize mConnection in onStart().
"
mozilla/MozStumbler,closed,ScannerService breaks Froyo and Gingerbread compatibility by using Notification.Builder,"[Label(name=""bug"")]","From https://github.com/dougt/MozStumbler/pull/26#commitcomment-3689527

Notification.Builder was added in Android API Level 11 (Honeycomb). We should maintain Gingerbread support because it's still 34% of devices. I don't care too much about Froyo because it's only 3%, but it's a nice-to-have if it's not much work.

We will need to configure Notifications manually like Fennec does here: https://hg.mozilla.org/mozilla-central/file/bda9723bdccc/mobile/android/base/UpdateService.java#l367
"
mozilla/MozStumbler,closed,Make service,[],"Chris, this is a pretty big change.  It attempts to do the following:

1) factors out stuff from the main activity into a new Service.
2) implements a basic notification item
2a) this seems to be required and what we're suppose to do if we have a background service running for any long period of time
3) creates a alarm that wakes us up if the service somehow dies (hard to test -- needs more testing)
4) creates a runnable looper thread in the service so that we can do things that normally require a looper (like geo/cell/wifi APIs.)
5) I've moved the service into it's own process.  So, I needed to add a bit of IPC via aidl.  (Totally amazing eclipse makes this.  Makes me want to cry when I think at mozilla/chrome style ipdl.)
"
mozilla/MozStumbler,closed,Generate random user token for database submission stats,[],"This PR fixes #16.

If a user token (UUID) does not exist, a random one is generated. The `Prefs` class includes a `deleteToken()` method so we can add UI to allow users to delete their token to opt-out.

I moved the report's JSON encoding to the background thread to avoid StrictMode warnings because `getToken()` caused SharedPreferences file I/O on the main thread.
"
mozilla/MozStumbler,closed,Display notification icon when ScannerService is running in the background,"[Label(name=""enhancement"")]","Touching the notification should reopen MozStumbler so the user can see their scanning stats or stop scanning.

https://developer.android.com/guide/topics/ui/notifiers/notifications.html
"
mozilla/MozStumbler,closed,Add MPL 2.0 LICENSE,[],"This PR fixes #1.

I selected the MPL 2.0 license based on the [Mozilla Foundation License Policy](https://www.mozilla.org/MPL/license-policy.html) and because MozStumbler contains source code copied from Fennec.

Does every source file really need the license boilerplate text?

```
/* This Source Code Form is subject to the terms of the Mozilla Public
 * License, v. 2.0. If a copy of the MPL was not distributed with this
 * file, You can obtain one at http://mozilla.org/MPL/2.0/. */
```
"
mozilla/MozStumbler,closed,Display map of scanned APs,"[Label(name=""enhancement"")]","Depends on AP database issue #3.

It would be cool if the app displayed a (real-time?) map of APs the user has scanned.
"
mozilla/MozStumbler,closed,Enable both active and passive stumbling modes for the Client,"[Label(name=""enhancement"")]","Client should have separate ""turbo"" and ""background"" modes to reduce battery drain.

The background mode could limit its scans to a longer interval, a larger location delta, only when another app has woken up the CPU or turned the screen on, or use Android's passive location provider (that only receives location updates when another app geolocates the device).

https://developer.android.com/reference/android/location/LocationManager.html#PASSIVE_PROVIDER
"
mozilla/MozStumbler,closed,App icon,"[Label(name=""enhancement"")]","We need a fun Mozilla app icon for MozStumbler. :)
"
mozilla/MozStumbler,closed,Display user score,"[Label(name=""enhancement"")]","Client should display the user's score on screen. This would require a server API to request score for a given user token or the server could include the user's score in the submission response.
"
mozilla/MozStumbler,closed,Allow user to enter a nickname,"[Label(name=""enhancement"")]","Client should allow a user to enter a nickname. Client should only include the user token in submissions iff nickname is defined. This makes the leaderboard tracking opt-in because the user must manually enter a nickname to be listed on the leaderboard.
"
mozilla/MozStumbler,closed,Display user token,"[Label(name=""enhancement"")]","Depends on user token issue #16.

Client should display user token on screen so users can find their score on the leaderboard.
"
mozilla/MozStumbler,closed,Generate random user token for database submission stats,"[Label(name=""enhancement"")]","Client generates random user token to be included in submissions. There is no opt-out yet; the user implicitly opts-in by running the stumbler.
"
mozilla/MozStumbler,closed,Delete cached A-GPS aiding data to force GPS cold start,[],"Issue #9

According to ""Professional Android Sensor Programming"" and cargo cult programming advice on Stack Overflow, the device's cached A-GPS data can be up to 5 minutes out of date. The `delete_aiding_data` and `force_extra_injection` GPS commands will force the device to download the latest GPS ephemeris and almanac data. The `force_time_injection` command will resynchronize the system clock with NTP.
"
mozilla/MozStumbler,closed,Increase minimum update distance from 0.5 to 10 meters,[],"A quick fix to reduce some duplicate measurements (and save battery): increase minimum update distance from 0.5 to 10 meters, as suggested by @hannosch in issue #3.
"
mozilla/MozStumbler,closed,Acquire WakeLock and WifiLock to prevent sleeping when stumbling,"[Label(name=""bug"")]","Do we need to acquire a WakeLock and a WifiLock to avoid sleeping when stumbling?

https://developer.android.com/reference/android/os/PowerManager.html

https://developer.android.com/reference/android/net/wifi/WifiManager.WifiLock.html
"
mozilla/MozStumbler,closed,Add on-screen counters,"[Label(name=""enhancement"")]","Related to issue 3.

When you measure something, you get more of it. Add a counter to our stumbler and geeks will naturally try to get the high score. This would be the first step towards gamification of stumbling. :)
"
mozilla/MozStumbler,closed,Batch upload measurements,"[Label(name=""enhancement"")]","Depends on AP database issue #3.

We should not upload measurements so frequently. We should save the scans to a local DB and batch upload them after X unique new APs (1000?) or Y hours (24?), whichever comes first.

When batch uploading, we should preserve the groups of APs seen at the same time (to aid server gridding), not just a big flat list of APs.

The submit API docs:
https://mozilla-ichnaea.readthedocs.org/en/latest/#service-1
"
mozilla/MozStumbler,closed,Implement Android ScannerService independent of MainActivity lifetime,"[Label(name=""bug"")]","Related to issue #7: every time a device is rotated, the screen configuration changes and the main activity is destroyed and recreated. A side effect is that the recreated MozStumbler activity does not know it had been scanning.

The scanner should probably be moved to an Android `ScannerService` that outlives `MainActivity`.
"
mozilla/MozStumbler,closed,"Investigate LocationManager.sendExtraCommand(""gps"", ""delete_aiding_data"") for GPS cold start","[Label(name=""enhancement"")]","Apparently, we can use `LocationManager.sendExtraCommand(""gps"", ""delete_aiding_data"")` to delete cached A-GPS data to get a truer GPS fix.

Sources:
- http://developer.samsung.com/forum/board/thread/view.do?boardName=GeneralB&messageId=137014
- ""Professional Android Sensor Programming""
- http://stackoverflow.com/a/13165414/61352
"
mozilla/MozStumbler,closed,Dougt changes,[],
mozilla/MozStumbler,closed,StrictMode$InstanceCountViolation when device is rotated,"[Label(name=""bug"")]","Every time a device is rotated, the screen configuration changes and the main activity is destroyed and recreated. A side effect is that rotating MozStumbler logs these StrictMode error messages:

```
E/StrictMode(2914): class org.mozilla.mozstumbler.MainActivity; instances=2; limit=1
E/StrictMode(2914): android.os.StrictMode$InstanceCountViolation: class org.mozilla.mozstumbler.MainActivity; instances=2; limit=1
E/StrictMode(2914):     at android.os.StrictMode.setClassInstanceLimit(StrictMode.java:1)
```
"
mozilla/MozStumbler,closed,Rename com.mozilla.mozstumbler to org.mozilla.mozstumbler,[],
mozilla/MozStumbler,closed,Can we *please* use spaces instead of tabs?,[],":)

Changing indentation will break all blame history, but the project is still young. I can rebase my pending pull requests if you want to fix the whitespace first.
"
mozilla/MozStumbler,closed,"Encapsulate BSSID, SSID, and location sanity checks in blocklists",[],"These classes do not implement lists, but conceptually they act like block lists.

If we want to get fancy, we could block BSSIDs that don't have valid manufacturer OUIs. Wireshark maintains a list of known OUIs: http://anonsvn.wireshark.org/wireshark/trunk/manuf . However, I don't think we should care as long as the BSSIDs are still unique (unlike `00:00:00:00:00:00`, which I have seen multiple times in my own stumbling).

The SSID blocklist checks for `_nomap` and a list of some common SSIDs for mobile devices (`AndroidTether` and `iPhone`), hotspots (`MiFi` and `MacBook`), and shuttles (`GBusWifi` and `ac_transit_wifi_bus`) we could block. If our server algorithms uses trilateration, then we probably want to block mobile APs. If our server algorithms uses the grid method instead of trilateration, we probably _want to unblock_ mobile APs and ad-hoc BSSIDs because duplicate measurements of the same device in multiple locations doesn't hurt. Unfortunately, our server can't make these distinctions if it only knows about SHA1 fingerprints instead of actual SSIDs. I think our early stumbling filters should be conservative because it's easier to remove these restrictions later than to clean up a polluted database later.

The values I chose for the location sanity checks are pretty arbitrary. I figured we could tighten the limits later. I have seen some Android devices, like the Galaxy Nexus, that report valid latitude and longitude with bogus negative altitudes. So we might want to be relax altitude sanity checks. The iPhone GPS seems to clamp negative altitudes at 0.
"
mozilla/MozStumbler,closed,Keep local database of scanned APs so users can export their data,"[Label(name=""enhancement"")]","With a local database, we can add enable users to export the data they've scanned. We also need a local database so the stumbler can show the user a map of their scanning history.

We might consider filtering our reports for already-reported APs unless:
- the latest scan has a stronger signal strength (i.e. has a more accurate location)
- the AP has moved since the most recent scan
- the most recent scan is older than X days (to remind the server that the AP is still exists)
"
mozilla/MozStumbler,closed,Cleave MainActivity into Scanner and Reporter classes.,[],"Separate UI, scanning, and reporting code into three different classes. No major functional changes.
"
mozilla/MozStumbler,closed,No LICENSE,"[Label(name=""bug"")]",
